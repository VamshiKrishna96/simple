"use strict";(self.webpackChunkboon_hrms=self.webpackChunkboon_hrms||[]).push([[860],{6860:(_p,ce,f)=>{f.r(ce),f.d(ce,{LeavesModule:()=>fp});var u=f(36895),R=f(83689),M=f(98739),m=f(53626),g=f(96308),k=f(75700),C=f(80528),e=f(94650),F=f(58998),O=f(65938),b=f(86405),H=f(86779),B=f(4859),c=f(73546),Y=f(44850),v=f(1576);function Ie(a,o){1&a&&(e.\u0275\u0275elementStart(0,"th",28),e.\u0275\u0275text(1," Applied On"),e.\u0275\u0275elementEnd())}function Le(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"td",29),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"date"),e.\u0275\u0275elementEnd()),2&a){const t=o.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1("",e.\u0275\u0275pipeBind2(2,1,t.appliedon,"dd-MM-yyyy")," ")}}function Se(a,o){1&a&&(e.\u0275\u0275elementStart(0,"th",28),e.\u0275\u0275text(1," Emp Id "),e.\u0275\u0275elementEnd())}function De(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"td",29),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&a){const t=o.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",t.employee_id,"")}}function be(a,o){1&a&&(e.\u0275\u0275elementStart(0,"th",28),e.\u0275\u0275text(1," Emp Name "),e.\u0275\u0275elementEnd())}function Me(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"td",29),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&a){const t=o.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",t.emp_name,"")}}function Fe(a,o){1&a&&(e.\u0275\u0275elementStart(0,"th",30),e.\u0275\u0275text(1," Leave Type"),e.\u0275\u0275elementEnd())}function Re(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"td",31),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&a){const t=o.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",t.display_name,"")}}function we(a,o){1&a&&(e.\u0275\u0275elementStart(0,"th",32),e.\u0275\u0275text(1," From "),e.\u0275\u0275elementEnd())}function Te(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"td",31),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"date"),e.\u0275\u0275elementEnd()),2&a){const t=o.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind2(2,1,t.fromdate,"dd-MM-yyyy"),"")}}function Ae(a,o){1&a&&(e.\u0275\u0275elementStart(0,"th",32),e.\u0275\u0275text(1," To "),e.\u0275\u0275elementEnd())}function Oe(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"td",31),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"date"),e.\u0275\u0275elementEnd()),2&a){const t=o.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind2(2,1,t.todate,"dd-MM-yyyy"),"")}}function Pe(a,o){1&a&&(e.\u0275\u0275elementStart(0,"th",32),e.\u0275\u0275text(1,"Days "),e.\u0275\u0275elementEnd())}function Ve(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275text(1),e.\u0275\u0275elementStart(2,"span",35),e.\u0275\u0275text(3),e.\u0275\u0275elementEnd()()),2&a){const t=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1("",t.leavecount," "),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" + ",t.lop_count," ")}}function Ne(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&a){const t=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(t.leavecount)}}function qe(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275text(1),e.\u0275\u0275elementStart(2,"span",35),e.\u0275\u0275text(3),e.\u0275\u0275elementEnd()()),2&a){const t=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1("",t.leavecount," "),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" + ",t.same_ltype_count," ")}}function ke(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275text(1),e.\u0275\u0275elementStart(2,"span"),e.\u0275\u0275text(3),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(4),e.\u0275\u0275elementEnd()),2&a){const t=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1("",t.leavecount," + "),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",t.same_ltype_count,""),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" + ",t.lop_count,"")}}function He(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"td",33),e.\u0275\u0275template(1,Ve,4,2,"span",34),e.\u0275\u0275template(2,Ne,2,1,"span",34),e.\u0275\u0275template(3,qe,4,2,"span",34),e.\u0275\u0275template(4,ke,5,3,"span",34),e.\u0275\u0275elementEnd()),2&a){const t=o.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==t.same_ltype_count&&null!=t.lop_count),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==t.same_ltype_count&&null==t.lop_count),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null!=t.same_ltype_count&&null==t.lop_count),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null!=t.same_ltype_count&&null!=t.lop_count)}}function Ue(a,o){1&a&&(e.\u0275\u0275elementStart(0,"th",36),e.\u0275\u0275text(1," Pending Since "),e.\u0275\u0275elementEnd())}function Be(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"td",33),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&a){const t=o.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",t.pendingSince," ")}}function Ye(a,o){1&a&&e.\u0275\u0275element(0,"th",32)}const K=function(a){return[a]};function je(a,o){if(1&a){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"td",37)(1,"button",38),e.\u0275\u0275listener("keyup.enter",function(){const i=e.\u0275\u0275restoreView(t).$implicit,r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.submit(i,"Approved",null))}),e.\u0275\u0275elementStart(2,"i",39),e.\u0275\u0275listener("click",function(){const i=e.\u0275\u0275restoreView(t).$implicit,r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.submit(i,"Approved",null))}),e.\u0275\u0275text(3,"check_box"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(4,"button",40),e.\u0275\u0275listener("keyup.enter",function(){const i=e.\u0275\u0275restoreView(t).$implicit,r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.leaveReject(i,"Reject",null))}),e.\u0275\u0275elementStart(5,"i",41),e.\u0275\u0275listener("click",function(){const i=e.\u0275\u0275restoreView(t).$implicit,r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.leaveReject(i,"Reject",null))}),e.\u0275\u0275text(6,"cancel_presentation"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(7,"button",42),e.\u0275\u0275listener("keyup.enter",function(){const i=e.\u0275\u0275restoreView(t).$implicit,r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.leaveReview(i))}),e.\u0275\u0275elementStart(8,"i",43),e.\u0275\u0275listener("click",function(){const i=e.\u0275\u0275restoreView(t).$implicit,r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.leaveReview(i))}),e.\u0275\u0275text(9,"preview"),e.\u0275\u0275elementEnd()()()}if(2&a){const t=o.index;e.\u0275\u0275advance(1),e.\u0275\u0275property("tabindex",e.\u0275\u0275pureFunction1(3,K,t)),e.\u0275\u0275advance(3),e.\u0275\u0275property("tabindex",e.\u0275\u0275pureFunction1(5,K,t)),e.\u0275\u0275advance(3),e.\u0275\u0275property("tabindex",e.\u0275\u0275pureFunction1(7,K,t))}}function ze(a,o){1&a&&e.\u0275\u0275element(0,"tr",44)}function We(a,o){1&a&&e.\u0275\u0275element(0,"tr",45)}function $e(a,o){1&a&&(e.\u0275\u0275elementStart(0,"tr",46)(1,"td",47),e.\u0275\u0275text(2,"No data found"),e.\u0275\u0275elementEnd()())}const Ge=function(){return[5,10,20]};let J=(()=>{class a{constructor(t,n,l,i,r){this.LM=t,this.router=n,this.dialog=l,this.spinner=i,this.emsService=r,this.displayedColumns=["appliedOn","empId","empName","leaveType","fromDate","toDate","noOfDays","pendingSince","action"],this.dataSource=[],this.pipe=new u.uU("en-US"),this.arrayList=[],this.pageLoading=!0,this.employeeEmailData=[]}ngOnInit(){this.userSession=JSON.parse(sessionStorage.getItem("user")||""),this.getLeavesForApprovals(),this.getErrorMessages("LM113"),this.getErrorMessages("LM114"),this.getErrorMessages("LM119")}getLeavesForApprovals(){this.spinner.show(),this.arrayList=[],this.LM.getLeavesForApprovals(this.userSession.id).subscribe(t=>{this.spinner.hide(),t.status?(this.arrayList=t.data,this.dataSource=new m.by(this.arrayList),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort,this.pageLoading=!1):(this.arrayList=[],this.dataSource=new m.by(this.arrayList),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort)})}applyFilter(t){}leaveReview(t){t.url="/LeaveManagement/ManagerDashboard",this.router.navigate(["/LeaveManagement/ReviewAndApprovals"],{state:{leaveData:t,isleave:!0}})}submit(t,n,l){this.employeeId=t.empid,this.getEmployeeEmailData(t,n,l)}leaveApprove(t,n,l){0==this.employeeEmailData.length?this.getEmployeeEmailData(t,n,l):this.LM.setApproveOrReject({id:t.id,leaveId:t.leave_id,empId:t.empid,approverId:l||this.userSession.id,leaveStatus:n,reason:"Approved"==n?null:t.action_reason?t.action_reason:this.reason,detail:t.bereavement_id?t.bereavement_id:t.comp_off_worked_date?t.comp_off_worked_date:null,leavedata:t,emaildata:this.employeeEmailData}).subscribe(r=>{this.spinner.hide(),r&&r.status?"Approved"==r.leaveStatus?(this.dialog.open(C.S,{position:{top:"70px"},disableClose:!0,data:{Message:this.LM113,url:"/LeaveManagement/ManagerDashboard"}}),this.getLeavesForApprovals()):(this.dialog.open(C.S,{position:{top:"70px"},disableClose:!0,data:{Message:this.LM114,url:"/LeaveManagement/ManagerDashboard"}}),this.getLeavesForApprovals(),this.router.navigateByUrl("/",{skipLocationChange:!0}).then(()=>this.router.navigate(["/LeaveManagement/ManagerDashboard"]))):this.dialog.open(C.S,{position:{top:"70px"},disableClose:!0,data:{Message:this.LM119,url:"/LeaveManagement/ManagerDashboard"}})})}leaveReject(t,n,l){this.titleName="Reject",this.openDialog(t)}openDialog(t){this.dialog.open(k.w,{width:"600px",position:{top:"100px"},data:{name:this.titleName,reason:this.reason}}).afterClosed().subscribe(l=>{null!=l&&!0!==l&&(this.reason=l.reason,this.employeeId=t.empid,this.getEmployeeEmailData(t,"Rejected",null))})}getErrorMessages(t){this.LM.getErrorMessages(t,1,1).subscribe(n=>{n.status&&"LM113"==t?this.LM113=n.data[0].errormessage:n.status&&"LM114"==t?this.LM114=n.data[0].errormessage:n.status&&"LM119"==t&&(this.LM119=n.data[0].errormessage)})}getPageSizes(){var t=[];return this.dataSource.data.length>5&&t.push(5),this.dataSource.data.length>10&&t.push(10),this.dataSource.data.length>20&&t.push(20),t.push(this.dataSource.data.length),t}getEmployeeEmailData(t,n,l){this.employeeEmailData=[],this.employeeId=t.empid,this.emsService.getEmployeeEmailDataByEmpid(this.employeeId).subscribe(i=>{this.employeeEmailData=JSON.parse(i.data[0].jsonvalu)[0],this.leaveApprove(t,n,l)})}}return a.\u0275fac=function(t){return new(t||a)(e.\u0275\u0275directiveInject(F.t),e.\u0275\u0275directiveInject(R.F0),e.\u0275\u0275directiveInject(O.uw),e.\u0275\u0275directiveInject(b.t2),e.\u0275\u0275directiveInject(H.b))},a.\u0275cmp=e.\u0275\u0275defineComponent({type:a,selectors:[["app-pending-approvals"]],viewQuery:function(t,n){if(1&t&&(e.\u0275\u0275viewQuery(M.NW,5),e.\u0275\u0275viewQuery(g.YE,5)),2&t){let l;e.\u0275\u0275queryRefresh(l=e.\u0275\u0275loadQuery())&&(n.paginator=l.first),e.\u0275\u0275queryRefresh(l=e.\u0275\u0275loadQuery())&&(n.sort=l.first)}},decls:41,vars:5,consts:[["fxLayout","column",1,"first-col"],["fxLayout","column",2,"padding-top","0px"],[2,"text-align","center"],[1,"mat-elevation-z1",2,"margin-top","2%","margin-left","15px","margin-bottom","20px","margin-right","10px"],[2,"width","100%","overflow-x","auto"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","appliedOn"],["mat-header-cell","","class","no-break",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","empId"],["matColumnDef","empName",1,"no-break"],["matColumnDef","leaveType"],["mat-header-cell","","mat-sort-header","","class","no-break",4,"matHeaderCellDef"],["mat-cell","","class","no-break",4,"matCellDef"],["matColumnDef","fromDate"],["mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","toDate"],["matColumnDef","noOfDays"],["mat-cell","","style","text-align: center;",4,"matCellDef"],["matColumnDef","pendingSince"],["mat-header-cell","","style","white-space: nowrap;",4,"matHeaderCellDef"],["matColumnDef","action"],["mat-cell","","style","width:auto;white-space: nowrap;cursor: pointer;",4,"matCellDef"],["class","headerbox title","mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],[3,"pageSizeOptions"],["size","medium","type","ball-fussion"],["mat-header-cell","",1,"no-break"],["mat-cell",""],["mat-header-cell","","mat-sort-header","",1,"no-break"],["mat-cell","",1,"no-break"],["mat-header-cell",""],["mat-cell","",2,"text-align","center"],[4,"ngIf"],[2,"color","red"],["mat-header-cell","",2,"white-space","nowrap"],["mat-cell","",2,"width","auto","white-space","nowrap","cursor","pointer"],["mat-icon-button","","title","Approve",3,"tabindex","keyup.enter"],["title","Approve",1,"material-icons","mr-1",3,"click"],["mat-icon-button","","title","Reject",3,"tabindex","keyup.enter"],["title","Reject",1,"material-icons","mr-1",3,"click"],["mat-icon-button","","title","Review and approve",3,"tabindex","keyup.enter"],["title","Review and approve",1,"material-icons",3,"click"],["mat-header-row","",1,"headerbox","title"],["mat-row",""],[1,"mat-row"],["colspan","9",1,"mat-cell",2,"text-align","center"]],template:function(t,n){1&t&&(e.\u0275\u0275elementStart(0,"div",0)(1,"mat-card",1)(2,"mat-card-header")(3,"mat-card-title",2),e.\u0275\u0275text(4," Pending Requests"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275element(5,"mat-divider"),e.\u0275\u0275elementStart(6,"div",3)(7,"mat-card-content",4)(8,"table",5),e.\u0275\u0275elementContainerStart(9,6),e.\u0275\u0275template(10,Ie,2,0,"th",7),e.\u0275\u0275template(11,Le,3,4,"td",8),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(12,9),e.\u0275\u0275template(13,Se,2,0,"th",7),e.\u0275\u0275template(14,De,2,1,"td",8),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(15,10),e.\u0275\u0275template(16,be,2,0,"th",7),e.\u0275\u0275template(17,Me,2,1,"td",8),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(18,11),e.\u0275\u0275template(19,Fe,2,0,"th",12),e.\u0275\u0275template(20,Re,2,1,"td",13),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(21,14),e.\u0275\u0275template(22,we,2,0,"th",15),e.\u0275\u0275template(23,Te,3,4,"td",13),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(24,16),e.\u0275\u0275template(25,Ae,2,0,"th",15),e.\u0275\u0275template(26,Oe,3,4,"td",13),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(27,17),e.\u0275\u0275template(28,Pe,2,0,"th",15),e.\u0275\u0275template(29,He,5,4,"td",18),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(30,19),e.\u0275\u0275template(31,Ue,2,0,"th",20),e.\u0275\u0275template(32,Be,2,1,"td",18),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(33,21),e.\u0275\u0275template(34,Ye,1,0,"th",15),e.\u0275\u0275template(35,je,10,9,"td",22),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275template(36,ze,1,0,"tr",23),e.\u0275\u0275template(37,We,1,0,"tr",24),e.\u0275\u0275template(38,$e,3,0,"tr",25),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(39,"mat-paginator",26),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275element(40,"ngx-spinner",27)),2&t&&(e.\u0275\u0275advance(8),e.\u0275\u0275property("dataSource",n.dataSource),e.\u0275\u0275advance(28),e.\u0275\u0275property("matHeaderRowDef",n.displayedColumns),e.\u0275\u0275advance(1),e.\u0275\u0275property("matRowDefColumns",n.displayedColumns),e.\u0275\u0275advance(2),e.\u0275\u0275property("pageSizeOptions",n.pageLoading?e.\u0275\u0275pureFunction0(4,Ge):n.getPageSizes()))},dependencies:[u.O5,B.lW,c.a8,c.dk,c.dn,c.n5,Y.d,M.NW,g.YE,g.nU,m.BZ,m.fO,m.as,m.w1,m.Dz,m.nj,m.ge,m.ev,m.XQ,m.Gk,m.Ee,v.xw,b.Ro,u.uU],styles:['.mat-elevation-z8[_ngcontent-%COMP%]{overflow-x:none!important}  .mat-select-panel[aria-label="Items per page:"] mat-option:last-child:before{content:"All";position:relative;display:block}  .mat-select-panel[aria-label="Items per page:"] mat-option:last-child .mat-option-text{display:none}mat-card[_ngcontent-%COMP%]{transition:box-shadow .28s cubic-bezier(.4,0,.2,1);display:block;position:relative;padding-left:0;padding-right:0}.headerbox[_ngcontent-%COMP%]{height:45px;background-color:#28acaf!important;align-items:center}.title[_ngcontent-%COMP%]{font-family:Roboto;font-size:20px;font-weight:500;font-stretch:normal;font-style:normal;letter-spacing:.32px;color:#fff;margin-bottom:0}  .mat-card-header-text{margin:0 6px!important} tr .mat-header-row{height:45px!important}  .mat-form-field-appearance-outline .mat-form-field-wrapper{margin:.2em 0!important}tr.mat-header-row[_ngcontent-%COMP%]{height:45px}table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:2px 10px}']}),a})();var ue=f(8626),s=f(24006);function Qe(a,o){1&a&&(e.\u0275\u0275elementStart(0,"th",26),e.\u0275\u0275text(1," Applied On"),e.\u0275\u0275elementEnd())}function Xe(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"td",27),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"date"),e.\u0275\u0275elementEnd()),2&a){const t=o.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1("",e.\u0275\u0275pipeBind2(2,1,t.applied_date,"dd-MM-yyyy")," ")}}function Ke(a,o){1&a&&(e.\u0275\u0275elementStart(0,"th",26),e.\u0275\u0275text(1," Emp Id "),e.\u0275\u0275elementEnd())}function Je(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"td",28),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&a){const t=o.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",t.employee_id,"")}}function Ze(a,o){1&a&&(e.\u0275\u0275elementStart(0,"th",29),e.\u0275\u0275text(1," Emp Name "),e.\u0275\u0275elementEnd())}function et(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"td",27),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&a){const t=o.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",t.employeename,"")}}function tt(a,o){1&a&&(e.\u0275\u0275elementStart(0,"th",26),e.\u0275\u0275text(1," Worked Date "),e.\u0275\u0275elementEnd())}function at(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"td",30),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"date"),e.\u0275\u0275elementEnd()),2&a){const t=o.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind2(2,1,t.comp_off_worked_date,"dd-MM-yyyy"),"")}}function nt(a,o){1&a&&(e.\u0275\u0275elementStart(0,"th",29),e.\u0275\u0275text(1," Hours "),e.\u0275\u0275elementEnd())}function ot(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"td",30),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&a){const t=o.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate2(" ",t.worked_hours," : ",0==t.worked_minutes?"00":t.worked_minutes," ")}}function lt(a,o){1&a&&(e.\u0275\u0275elementStart(0,"th",26),e.\u0275\u0275text(1," Pending Since "),e.\u0275\u0275elementEnd())}function it(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"td",31),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&a){const t=o.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",t.pendingSince," ")}}function rt(a,o){1&a&&(e.\u0275\u0275elementStart(0,"th",29),e.\u0275\u0275text(1," Reason"),e.\u0275\u0275elementEnd())}function st(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"td",30)(1,"span",32)(2,"i",33),e.\u0275\u0275text(3,"info_outline"),e.\u0275\u0275elementEnd()()()),2&a){const t=o.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275propertyInterpolate("title",t.reason)}}function mt(a,o){1&a&&e.\u0275\u0275element(0,"th",29)}const Z=function(a){return[a]};function dt(a,o){if(1&a){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"td",34)(1,"button",35),e.\u0275\u0275listener("keyup.enter",function(){const i=e.\u0275\u0275restoreView(t).$implicit,r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.submit(i,"Approved",null))}),e.\u0275\u0275elementStart(2,"i",36),e.\u0275\u0275listener("click",function(){const i=e.\u0275\u0275restoreView(t).$implicit,r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.submit(i,"Approved",null))}),e.\u0275\u0275text(3,"check_box"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(4,"button",37),e.\u0275\u0275listener("keyup.enter",function(){const i=e.\u0275\u0275restoreView(t).$implicit,r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.compoffReject(i,"Reject",null))}),e.\u0275\u0275elementStart(5,"i",38),e.\u0275\u0275listener("click",function(){const i=e.\u0275\u0275restoreView(t).$implicit,r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.compoffReject(i,"Reject",null))}),e.\u0275\u0275text(6,"cancel_presentation"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(7,"button",39),e.\u0275\u0275listener("keyup.enter",function(){const i=e.\u0275\u0275restoreView(t).$implicit,r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.compoffReview(i))}),e.\u0275\u0275elementStart(8,"i",40),e.\u0275\u0275listener("click",function(){const i=e.\u0275\u0275restoreView(t).$implicit,r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.compoffReview(i))}),e.\u0275\u0275text(9,"preview"),e.\u0275\u0275elementEnd()()()}if(2&a){const t=o.index;e.\u0275\u0275advance(1),e.\u0275\u0275property("tabindex",e.\u0275\u0275pureFunction1(3,Z,t+1)),e.\u0275\u0275advance(3),e.\u0275\u0275property("tabindex",e.\u0275\u0275pureFunction1(5,Z,t+1)),e.\u0275\u0275advance(3),e.\u0275\u0275property("tabindex",e.\u0275\u0275pureFunction1(7,Z,t+1))}}function pt(a,o){1&a&&e.\u0275\u0275element(0,"tr",41)}function ct(a,o){1&a&&e.\u0275\u0275element(0,"tr",42)}function ut(a,o){1&a&&(e.\u0275\u0275elementStart(0,"tr",43)(1,"td",44),e.\u0275\u0275text(2,"No data found"),e.\u0275\u0275elementEnd()())}const ft=function(){return[5,10,20]};let ee=(()=>{class a{constructor(t,n,l,i,r){this.LM=t,this.dialog=n,this.router=l,this.spinner=i,this.EMS=r,this.displayedColumns=["appliedOn","empId","empName","fromDate","noOfHours","pendingSince","reason","action"],this.dataSource=[],this.arrayList=[],this.pageLoading=!0,this.employeeEmailData=[]}ngOnInit(){this.userSession=JSON.parse(sessionStorage.getItem("user")||""),this.getCompoffForApprovals(),this.getErrorMessages("LM115"),this.getErrorMessages("LM116"),this.getErrorMessages("LM119")}getCompoffForApprovals(){this.spinner.show(),this.arrayList=[],this.LM.getCompoffForApprovals(this.userSession.id).subscribe(t=>{this.spinner.hide(),t.status?(this.arrayList=t.data,this.dataSource=new m.by(this.arrayList),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort,this.pageLoading=!1):(this.arrayList=[],this.dataSource=new m.by(this.arrayList),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort)})}getPageSizes(){var t=[];return this.dataSource.data.length>5&&t.push(5),this.dataSource.data.length>10&&t.push(10),this.dataSource.data.length>20&&t.push(20),t.push(this.dataSource.data.length),t}submit(t,n,l){this.employeeId=t.empid,this.getEmployeeEmailData(t,n,l)}compoffApprove(t,n,l){0==this.employeeEmailData.length?this.getEmployeeEmailData(t,n,l):(this.spinner.show(),t.rmid=this.userSession.id,t.status=n,t.remarks=t.remarks?t.remarks:null,t.emaildata=this.employeeEmailData,this.LM.setCompoffForApproveOrReject(t).subscribe(i=>{this.spinner.hide(),i&&i.status?"Approved"==i.compoffStatus?(this.dialog.open(C.S,{position:{top:"70px"},disableClose:!0,data:{Message:this.LM115,url:"/LeaveManagement/ManagerDashboard"}}),this.getCompoffForApprovals()):(this.dialog.open(C.S,{position:{top:"70px"},disableClose:!0,data:{Message:this.LM116,url:"/LeaveManagement/ManagerDashboard"}}),this.getCompoffForApprovals()):this.dialog.open(C.S,{position:{top:"70px"},disableClose:!0,data:{Message:"Please try again later",url:"/LeaveManagement/ManagerDashboard"}})}))}compoffReject(t,n,l){this.titleName="Reject",this.openDialog(t)}compoffReview(t){t.leavestatus=t.status,t.url="/LeaveManagement/ManagerDashboard",this.router.navigate(["/LeaveManagement/ReviewAndApprovals"],{state:{leaveData:t,isleave:!1}})}openDialog(t){this.dialog.open(k.w,{width:"600px",position:{top:"100px"},data:{name:this.titleName,reason:this.reason}}).afterClosed().subscribe(l=>{null!=l&&!0!==l&&(t.remarks=l.reason,this.employeeId=t.empid,this.getEmployeeEmailData(t,"Rejected",null))})}getErrorMessages(t){this.LM.getErrorMessages(t,1,1).subscribe(n=>{n.status&&"LM115"==t?this.LM115=n.data[0].errormessage:n.status&&"LM116"==t?this.LM116=n.data[0].errormessage:n.status&&"LM119"==t&&(this.LM119=n.data[0].errormessage)})}getEmployeeEmailData(t,n,l){this.employeeEmailData=[],this.employeeId=t.empid,this.EMS.getEmployeeEmailDataByEmpid(this.employeeId).subscribe(i=>{this.employeeEmailData=JSON.parse(i.data[0].jsonvalu)[0],this.compoffApprove(t,n,l)})}}return a.\u0275fac=function(t){return new(t||a)(e.\u0275\u0275directiveInject(F.t),e.\u0275\u0275directiveInject(O.uw),e.\u0275\u0275directiveInject(R.F0),e.\u0275\u0275directiveInject(b.t2),e.\u0275\u0275directiveInject(H.b))},a.\u0275cmp=e.\u0275\u0275defineComponent({type:a,selectors:[["app-pending-compoff"]],viewQuery:function(t,n){if(1&t&&(e.\u0275\u0275viewQuery(M.NW,5),e.\u0275\u0275viewQuery(g.YE,5)),2&t){let l;e.\u0275\u0275queryRefresh(l=e.\u0275\u0275loadQuery())&&(n.paginator=l.first),e.\u0275\u0275queryRefresh(l=e.\u0275\u0275loadQuery())&&(n.sort=l.first)}},decls:38,vars:5,consts:[["fxLayout","column",1,"first-col"],["fxLayout","column",2,"padding-top","0px"],[2,"text-align","center"],["fxLayout","row","fxLayout.xs","column","fxFlex.xs","100%","fxLayoutAlign","end"],[1,"mat-elevation-z1",2,"margin-top","2%","margin-left","15px","margin-bottom","20px","margin-right","15px"],[2,"width","100%","overflow-x","auto"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","appliedOn"],["mat-header-cell","","class","no-break",4,"matHeaderCellDef"],["mat-cell","","style","width: 15%;",4,"matCellDef"],["matColumnDef","empId"],["mat-cell","","style","width: 10%;",4,"matCellDef"],["matColumnDef","empName",1,"no-break"],["mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","fromDate"],["mat-cell","",4,"matCellDef"],["matColumnDef","noOfHours"],["matColumnDef","pendingSince"],["mat-cell","","style","text-align: center;",4,"matCellDef"],["matColumnDef","reason"],["matColumnDef","action"],["mat-cell","","class","no-break",4,"matCellDef"],["class","headerbox title","mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],[3,"pageSizeOptions"],["mat-header-cell","",1,"no-break"],["mat-cell","",2,"width","15%"],["mat-cell","",2,"width","10%"],["mat-header-cell",""],["mat-cell",""],["mat-cell","",2,"text-align","center"],[3,"title"],["aria-hidden","true",1,"material-icons"],["mat-cell","",1,"no-break"],["mat-icon-button","","title","Approve",3,"tabindex","keyup.enter"],["title","Approve",1,"material-icons","mr-1",3,"click"],["mat-icon-button","","title","Reject",3,"tabindex","keyup.enter"],["title","Reject",1,"material-icons","mr-1",3,"click"],["mat-icon-button","","title","Review and approve",3,"tabindex","keyup.enter"],["title","Review and approve",1,"material-icons",3,"click"],["mat-header-row","",1,"headerbox","title"],["mat-row",""],[1,"mat-row"],["colspan","9",1,"mat-cell",2,"text-align","center"]],template:function(t,n){1&t&&(e.\u0275\u0275elementStart(0,"div",0)(1,"mat-card",1)(2,"mat-card-header")(3,"mat-card-title",2),e.\u0275\u0275text(4," Pending Comp Off "),e.\u0275\u0275elementEnd()(),e.\u0275\u0275element(5,"mat-divider")(6,"div",3),e.\u0275\u0275elementStart(7,"div",4)(8,"mat-card-content",5)(9,"table",6),e.\u0275\u0275elementContainerStart(10,7),e.\u0275\u0275template(11,Qe,2,0,"th",8),e.\u0275\u0275template(12,Xe,3,4,"td",9),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(13,10),e.\u0275\u0275template(14,Ke,2,0,"th",8),e.\u0275\u0275template(15,Je,2,1,"td",11),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(16,12),e.\u0275\u0275template(17,Ze,2,0,"th",13),e.\u0275\u0275template(18,et,2,1,"td",9),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(19,14),e.\u0275\u0275template(20,tt,2,0,"th",8),e.\u0275\u0275template(21,at,3,4,"td",15),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(22,16),e.\u0275\u0275template(23,nt,2,0,"th",13),e.\u0275\u0275template(24,ot,2,2,"td",15),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(25,17),e.\u0275\u0275template(26,lt,2,0,"th",8),e.\u0275\u0275template(27,it,2,1,"td",18),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(28,19),e.\u0275\u0275template(29,rt,2,0,"th",13),e.\u0275\u0275template(30,st,4,1,"td",15),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(31,20),e.\u0275\u0275template(32,mt,1,0,"th",13),e.\u0275\u0275template(33,dt,10,9,"td",21),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275template(34,pt,1,0,"tr",22),e.\u0275\u0275template(35,ct,1,0,"tr",23),e.\u0275\u0275template(36,ut,3,0,"tr",24),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(37,"mat-paginator",25),e.\u0275\u0275elementEnd()()()()),2&t&&(e.\u0275\u0275advance(9),e.\u0275\u0275property("dataSource",n.dataSource),e.\u0275\u0275advance(25),e.\u0275\u0275property("matHeaderRowDef",n.displayedColumns),e.\u0275\u0275advance(1),e.\u0275\u0275property("matRowDefColumns",n.displayedColumns),e.\u0275\u0275advance(2),e.\u0275\u0275property("pageSizeOptions",n.pageLoading?e.\u0275\u0275pureFunction0(4,ft):n.getPageSizes()))},dependencies:[B.lW,c.a8,c.dk,c.dn,c.n5,Y.d,M.NW,g.YE,m.BZ,m.fO,m.as,m.w1,m.Dz,m.nj,m.ge,m.ev,m.XQ,m.Gk,m.Ee,v.xw,v.Wh,v.yH,u.uU],styles:['[data-title][_ngcontent-%COMP%]{position:relative}[data-title][_ngcontent-%COMP%]:hover:before{content:attr(data-title);position:absolute;top:calc(100% + 10px);display:inline-block;padding:3px 6px;border-radius:2px;background:orange;color:#fff;font-size:12px;font-family:sans-serif;word-break:normal;max-width:150px}[data-title][_ngcontent-%COMP%]:hover:after{content:"";position:absolute;bottom:-10px;left:8px;display:inline-block;color:#fff;border:8px solid transparent;border-bottom:8px solid #000}span[data-title][_ngcontent-%COMP%]:hover:after{content:attr(data-title);background-color:#1d7af3}  .mat-select-panel[aria-label="Items per page:"] mat-option:last-child:before{content:"All";position:relative;display:block}  .mat-select-panel[aria-label="Items per page:"] mat-option:last-child .mat-option-text{display:none}mat-card[_ngcontent-%COMP%]{transition:box-shadow .28s cubic-bezier(.4,0,.2,1);display:block;position:relative;padding-left:0;padding-right:0}table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:2px 10px}.example-container[_ngcontent-%COMP%]{overflow-x:auto;display:flex;flex-direction:column}']}),a})();function vt(a,o){1&a&&(e.\u0275\u0275elementStart(0,"th",28),e.\u0275\u0275text(1," Applied On"),e.\u0275\u0275elementEnd())}function _t(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"td",29),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"date"),e.\u0275\u0275elementEnd()),2&a){const t=o.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1("",e.\u0275\u0275pipeBind2(2,1,t.updatedon,"dd-MM-yyyy")," ")}}function ht(a,o){1&a&&(e.\u0275\u0275elementStart(0,"th",28),e.\u0275\u0275text(1," Emp Id "),e.\u0275\u0275elementEnd())}function gt(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"td",29),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&a){const t=o.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",t.employee_id,"")}}function xt(a,o){1&a&&(e.\u0275\u0275elementStart(0,"th",28),e.\u0275\u0275text(1," Emp Name "),e.\u0275\u0275elementEnd())}function yt(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"td",29),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&a){const t=o.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",t.emp_name,"")}}function Ct(a,o){1&a&&(e.\u0275\u0275elementStart(0,"th",30),e.\u0275\u0275text(1," Leave Type"),e.\u0275\u0275elementEnd())}function Et(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"td",29),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&a){const t=o.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",t.display_name,"")}}function It(a,o){1&a&&(e.\u0275\u0275elementStart(0,"th",31),e.\u0275\u0275text(1," From "),e.\u0275\u0275elementEnd())}function Lt(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"td",32),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"date"),e.\u0275\u0275elementEnd()),2&a){const t=o.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind2(2,1,t.fromdate,"dd-MM-yyyy"),"")}}function St(a,o){1&a&&(e.\u0275\u0275elementStart(0,"th",31),e.\u0275\u0275text(1," To "),e.\u0275\u0275elementEnd())}function Dt(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"td",32),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"date"),e.\u0275\u0275elementEnd()),2&a){const t=o.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind2(2,1,t.todate,"dd-MM-yyyy"),"")}}function bt(a,o){1&a&&(e.\u0275\u0275elementStart(0,"th",31),e.\u0275\u0275text(1," Days "),e.\u0275\u0275elementEnd())}function Mt(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"td",29),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&a){const t=o.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",t.leavecount," ")}}function Ft(a,o){1&a&&(e.\u0275\u0275elementStart(0,"th",28),e.\u0275\u0275text(1," Pending Since "),e.\u0275\u0275elementEnd())}function Rt(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"td",33),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&a){const t=o.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",t.pendingSince," ")}}function wt(a,o){1&a&&e.\u0275\u0275element(0,"th",31)}const te=function(a){return[a]};function Tt(a,o){if(1&a){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"td",34)(1,"button",35),e.\u0275\u0275listener("keyup.enter",function(){const i=e.\u0275\u0275restoreView(t).$implicit,r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.submit(i,"Cancel Approved",null))}),e.\u0275\u0275elementStart(2,"i",36),e.\u0275\u0275listener("click",function(){const i=e.\u0275\u0275restoreView(t).$implicit,r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.submit(i,"Cancel Approved",null))}),e.\u0275\u0275text(3,"check_box"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(4,"button",37),e.\u0275\u0275listener("keyup.enter",function(){const i=e.\u0275\u0275restoreView(t).$implicit,r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.leaveReject(i))}),e.\u0275\u0275elementStart(5,"i",38),e.\u0275\u0275listener("click",function(){const i=e.\u0275\u0275restoreView(t).$implicit,r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.leaveReject(i))}),e.\u0275\u0275text(6,"cancel_presentation"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(7,"button",39),e.\u0275\u0275listener("keyup.enter",function(){const i=e.\u0275\u0275restoreView(t).$implicit,r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.leaveReject(i))}),e.\u0275\u0275elementStart(8,"i",40),e.\u0275\u0275listener("click",function(){const i=e.\u0275\u0275restoreView(t).$implicit,r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.leaveReview(i))}),e.\u0275\u0275text(9,"preview"),e.\u0275\u0275elementEnd()()()}if(2&a){const t=o.index;e.\u0275\u0275advance(1),e.\u0275\u0275property("tabindex",e.\u0275\u0275pureFunction1(3,te,t+2)),e.\u0275\u0275advance(3),e.\u0275\u0275property("tabindex",e.\u0275\u0275pureFunction1(5,te,t+2)),e.\u0275\u0275advance(3),e.\u0275\u0275property("tabindex",e.\u0275\u0275pureFunction1(7,te,t+2))}}function At(a,o){1&a&&e.\u0275\u0275element(0,"tr",41)}function Ot(a,o){1&a&&e.\u0275\u0275element(0,"tr",42)}function Pt(a,o){1&a&&(e.\u0275\u0275elementStart(0,"tr",43)(1,"td",44),e.\u0275\u0275text(2,"No data found"),e.\u0275\u0275elementEnd()())}const Vt=function(){return[5,10,20]};let ae=(()=>{class a{constructor(t,n,l,i,r){this.LM=t,this.router=n,this.dialog=l,this.spinner=i,this.emsService=r,this.displayedColumns=["appliedOn","empId","empName","leaveType","fromDate","toDate","noOfDays","pendingSince","action"],this.dataSource=[],this.pipe=new u.uU("en-US"),this.arrayList=[],this.pageLoading=!0,this.employeeEmailData=[]}ngOnInit(){this.userSession=JSON.parse(sessionStorage.getItem("user")||""),this.getLeavesForCancellation(),this.getErrorMessages("LM120"),this.getErrorMessages("LM121"),this.getErrorMessages("LM119")}getLeavesForCancellation(){this.spinner.show(),this.arrayList=[],this.LM.getLeavesForCancellation(this.userSession.id).subscribe(t=>{this.spinner.hide(),t.status?(this.arrayList=t.data,this.dataSource=new m.by(this.arrayList),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort,this.pageLoading=!1):(this.arrayList=[],this.dataSource=new m.by(this.arrayList),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort)})}leaveReview(t){t.url="/LeaveManagement/ManagerDashboard",this.router.navigate(["/LeaveManagement/ReviewAndApprovals"],{state:{leaveData:t,isleave:!0,isCancellation:!0}})}submit(t,n,l){this.employeeId=t.empid,this.getEmployeeEmailData(t,n,l)}leaveCancellationApprove(t,n,l){0==this.employeeEmailData.length?this.getEmployeeEmailData(t,n,l):(this.spinner.show(),this.LM.setApproveOrReject({id:t.id,leaveId:t.leave_id,empId:t.empid,approverId:l||this.userSession.id,leaveStatus:n,reason:"Cancel Approved"==n?null:this.reason,detail:t.bereavement_id?t.bereavement_id:t.comp_off_worked_date?t.comp_off_worked_date:null,leavedata:t,emaildata:this.employeeEmailData}).subscribe(r=>{this.spinner.hide(),r&&r.status?"Cancel Approved"==r.leaveStatus?(this.dialog.open(C.S,{position:{top:"70px"},disableClose:!0,data:{Message:this.LM120,url:"/LeaveManagement/ManagerDashboard"}}),this.getLeavesForCancellation()):(this.dialog.open(C.S,{position:{top:"70px"},disableClose:!0,data:{Message:this.LM121,url:"/LeaveManagement/ManagerDashboard"}}),this.getLeavesForCancellation()):this.dialog.open(C.S,{position:{top:"70px"},disableClose:!0,data:{Message:this.LM119,url:"/LeaveManagement/ManagerDashboard"}})}))}leaveReject(t){this.titleName="Cancel Rejected",this.openDialog(t)}openDialog(t){this.dialog.open(k.w,{width:"600px",position:{top:"100px"},data:{name:this.titleName,reason:this.reason}}).afterClosed().subscribe(l=>{null!=l&&!0!==l&&(this.reason=l.reason,this.employeeId=t.empid,this.getEmployeeEmailData(t,"Cancel Rejected",null))})}getEmployeeEmailData(t,n,l){this.employeeEmailData=[],this.employeeId=t.empid,this.emsService.getEmployeeEmailDataByEmpid(this.employeeId).subscribe(i=>{this.employeeEmailData=JSON.parse(i.data[0].jsonvalu)[0],this.leaveCancellationApprove(t,n,l)})}getPageSizes(){var t=[];return this.dataSource.data.length>5&&t.push(5),this.dataSource.data.length>10&&t.push(10),this.dataSource.data.length>20&&t.push(20),t.push(this.dataSource.data.length),t}getErrorMessages(t){this.LM.getErrorMessages(t,1,1).subscribe(n=>{n.status&&"LM120"==t?this.LM120=n.data[0].errormessage:n.status&&"LM121"==t?this.LM121=n.data[0].errormessage:n.status&&"LM119"==t&&(this.LM119=n.data[0].errormessage)})}}return a.\u0275fac=function(t){return new(t||a)(e.\u0275\u0275directiveInject(F.t),e.\u0275\u0275directiveInject(R.F0),e.\u0275\u0275directiveInject(O.uw),e.\u0275\u0275directiveInject(b.t2),e.\u0275\u0275directiveInject(H.b))},a.\u0275cmp=e.\u0275\u0275defineComponent({type:a,selectors:[["app-leaves-for-cancellation"]],viewQuery:function(t,n){if(1&t&&(e.\u0275\u0275viewQuery(M.NW,5),e.\u0275\u0275viewQuery(g.YE,5)),2&t){let l;e.\u0275\u0275queryRefresh(l=e.\u0275\u0275loadQuery())&&(n.paginator=l.first),e.\u0275\u0275queryRefresh(l=e.\u0275\u0275loadQuery())&&(n.sort=l.first)}},decls:42,vars:5,consts:[["fxLayout","column",1,"first-col"],["fxLayout","column"],[2,"text-align","center"],["fxLayout","row","fxLayout.xs","column","fxFlex.xs","100%","fxLayoutAlign","end"],[1,"mat-elevation-z1",2,"margin-top","2%","margin-left","15px","margin-bottom","20px","margin-right","10px"],[2,"width","100%","overflow-x","auto"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","appliedOn"],["mat-header-cell","","class","no-break",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","empId"],["matColumnDef","empName"],["matColumnDef","leaveType"],["mat-header-cell","","mat-sort-header","","class","no-break",4,"matHeaderCellDef"],["matColumnDef","fromDate"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","","class","no-break",4,"matCellDef"],["matColumnDef","toDate"],["matColumnDef","noOfDays"],["matColumnDef","pendingSince"],["mat-cell","","style","text-align: center;",4,"matCellDef"],["matColumnDef","action"],["mat-cell","","style","width: auto;white-space: nowrap;cursor: pointer;",4,"matCellDef"],["class","headerbox title","mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],[3,"pageSizeOptions"],["size","medium","type","ball-fussion"],["mat-header-cell","",1,"no-break"],["mat-cell",""],["mat-header-cell","","mat-sort-header","",1,"no-break"],["mat-header-cell",""],["mat-cell","",1,"no-break"],["mat-cell","",2,"text-align","center"],["mat-cell","",2,"width","auto","white-space","nowrap","cursor","pointer"],["mat-icon-button","","title","Approve",3,"tabindex","keyup.enter"],["title","Approve",1,"material-icons","mr-1",3,"click"],["mat-icon-button","","title","Reject",3,"tabindex","keyup.enter"],["title","Reject",1,"material-icons","mr-1",3,"click"],["mat-icon-button","","title","Review and approve",3,"tabindex","keyup.enter"],["title","Review and approve",1,"material-icons",3,"click"],["mat-header-row","",1,"headerbox","title"],["mat-row",""],[1,"mat-row"],["colspan","9",1,"mat-cell",2,"text-align","center"]],template:function(t,n){1&t&&(e.\u0275\u0275elementStart(0,"div",0)(1,"mat-card",1)(2,"mat-card-header")(3,"mat-card-title",2),e.\u0275\u0275text(4," Pending Cancellation Requests "),e.\u0275\u0275elementEnd()(),e.\u0275\u0275element(5,"mat-divider")(6,"div",3),e.\u0275\u0275elementStart(7,"div",4)(8,"mat-card-content",5)(9,"table",6),e.\u0275\u0275elementContainerStart(10,7),e.\u0275\u0275template(11,vt,2,0,"th",8),e.\u0275\u0275template(12,_t,3,4,"td",9),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(13,10),e.\u0275\u0275template(14,ht,2,0,"th",8),e.\u0275\u0275template(15,gt,2,1,"td",9),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(16,11),e.\u0275\u0275template(17,xt,2,0,"th",8),e.\u0275\u0275template(18,yt,2,1,"td",9),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(19,12),e.\u0275\u0275template(20,Ct,2,0,"th",13),e.\u0275\u0275template(21,Et,2,1,"td",9),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(22,14),e.\u0275\u0275template(23,It,2,0,"th",15),e.\u0275\u0275template(24,Lt,3,4,"td",16),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(25,17),e.\u0275\u0275template(26,St,2,0,"th",15),e.\u0275\u0275template(27,Dt,3,4,"td",16),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(28,18),e.\u0275\u0275template(29,bt,2,0,"th",15),e.\u0275\u0275template(30,Mt,2,1,"td",9),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(31,19),e.\u0275\u0275template(32,Ft,2,0,"th",8),e.\u0275\u0275template(33,Rt,2,1,"td",20),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(34,21),e.\u0275\u0275template(35,wt,1,0,"th",15),e.\u0275\u0275template(36,Tt,10,9,"td",22),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275template(37,At,1,0,"tr",23),e.\u0275\u0275template(38,Ot,1,0,"tr",24),e.\u0275\u0275template(39,Pt,3,0,"tr",25),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(40,"mat-paginator",26),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275element(41,"ngx-spinner",27),e.\u0275\u0275elementEnd()),2&t&&(e.\u0275\u0275advance(9),e.\u0275\u0275property("dataSource",n.dataSource),e.\u0275\u0275advance(28),e.\u0275\u0275property("matHeaderRowDef",n.displayedColumns),e.\u0275\u0275advance(1),e.\u0275\u0275property("matRowDefColumns",n.displayedColumns),e.\u0275\u0275advance(2),e.\u0275\u0275property("pageSizeOptions",n.pageLoading?e.\u0275\u0275pureFunction0(4,Vt):n.getPageSizes()))},dependencies:[B.lW,c.a8,c.dk,c.dn,c.n5,Y.d,M.NW,g.YE,g.nU,m.BZ,m.fO,m.as,m.w1,m.Dz,m.nj,m.ge,m.ev,m.XQ,m.Gk,m.Ee,v.xw,v.Wh,v.yH,b.Ro,u.uU],styles:['mat-card[_ngcontent-%COMP%]{transition:box-shadow .28s cubic-bezier(.4,0,.2,1);display:block;position:relative;padding-left:0;padding-right:0;padding-top:0}  .mat-select-panel[aria-label="Items per page:"] mat-option:last-child:before{content:"All";position:relative;display:block}  .mat-select-panel[aria-label="Items per page:"] mat-option:last-child .mat-option-text{display:none}  .tr.mat-header-row{height:45px!important}table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:2px 10px}.example-container[_ngcontent-%COMP%]{overflow-x:auto;display:flex;flex-direction:column}']}),a})();var h=f(59549),V=f(44144);function Nt(a,o){1&a&&(e.\u0275\u0275elementStart(0,"mat-card-title"),e.\u0275\u0275text(1," Comp Off "),e.\u0275\u0275elementEnd())}function qt(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"mat-card-title"),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&a){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",t.leaveInfo.leaveData.display_name,"")}}function kt(a,o){1&a&&(e.\u0275\u0275elementStart(0,"mat-form-field",7)(1,"mat-label"),e.\u0275\u0275text(2,"Worked Date"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(3,"input",16),e.\u0275\u0275elementEnd())}function Ht(a,o){1&a&&(e.\u0275\u0275elementStart(0,"mat-form-field",7)(1,"mat-label"),e.\u0275\u0275text(2,"Leave Type"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(3,"input",17),e.\u0275\u0275elementEnd())}function Ut(a,o){1&a&&(e.\u0275\u0275elementStart(0,"mat-label"),e.\u0275\u0275text(1,"From Date"),e.\u0275\u0275elementEnd())}function Bt(a,o){1&a&&(e.\u0275\u0275elementStart(0,"mat-label"),e.\u0275\u0275text(1,"Leave Date"),e.\u0275\u0275elementEnd())}function Yt(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"mat-form-field",7),e.\u0275\u0275template(1,Ut,2,0,"mat-label",4),e.\u0275\u0275template(2,Bt,2,0,"mat-label",4),e.\u0275\u0275element(3,"input",16),e.\u0275\u0275elementEnd()),2&a){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",9!=t.leaveInfo.leaveData.leavetype),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",9==t.leaveInfo.leaveData.leavetype)}}function jt(a,o){1&a&&(e.\u0275\u0275elementStart(0,"mat-form-field",7)(1,"mat-label"),e.\u0275\u0275text(2,"To Date"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(3,"input",18),e.\u0275\u0275elementEnd())}function zt(a,o){1&a&&(e.\u0275\u0275elementStart(0,"mat-form-field",7)(1,"mat-label"),e.\u0275\u0275text(2,"Worked Date"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(3,"input",19),e.\u0275\u0275elementEnd())}function Wt(a,o){1&a&&(e.\u0275\u0275elementStart(0,"mat-label"),e.\u0275\u0275text(1,"No.of Days"),e.\u0275\u0275elementEnd())}function $t(a,o){1&a&&(e.\u0275\u0275elementStart(0,"mat-label"),e.\u0275\u0275text(1,"No.of Hours"),e.\u0275\u0275elementEnd())}function Gt(a,o){1&a&&(e.\u0275\u0275elementStart(0,"mat-label"),e.\u0275\u0275text(1,"Deleted On"),e.\u0275\u0275elementEnd())}function Qt(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"mat-form-field",7),e.\u0275\u0275template(1,Gt,2,0,"mat-label",4),e.\u0275\u0275element(2,"input",20),e.\u0275\u0275elementEnd()),2&a){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.leaveInfo.isleave)}}function Xt(a,o){1&a&&(e.\u0275\u0275elementStart(0,"mat-label"),e.\u0275\u0275text(1,"Rejected On"),e.\u0275\u0275elementEnd())}function Kt(a,o){1&a&&(e.\u0275\u0275elementStart(0,"mat-label"),e.\u0275\u0275text(1,"Rejected On"),e.\u0275\u0275elementEnd())}function Jt(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"mat-form-field",7),e.\u0275\u0275template(1,Xt,2,0,"mat-label",4),e.\u0275\u0275template(2,Kt,2,0,"mat-label",4),e.\u0275\u0275element(3,"input",20),e.\u0275\u0275elementEnd()),2&a){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.leaveInfo.isleave),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!t.leaveInfo.isleave)}}function Zt(a,o){1&a&&(e.\u0275\u0275elementStart(0,"mat-form-field",7)(1,"mat-label"),e.\u0275\u0275text(2,"Pending Since"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(3,"input",21),e.\u0275\u0275elementEnd())}function ea(a,o){1&a&&(e.\u0275\u0275elementStart(0,"mat-form-field",7)(1,"mat-label"),e.\u0275\u0275text(2,"Reason for Cancel"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(3,"textarea",22),e.\u0275\u0275elementEnd())}function ta(a,o){1&a&&(e.\u0275\u0275elementStart(0,"mat-form-field",7)(1,"mat-label"),e.\u0275\u0275text(2,"Approved On"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(3,"input",23),e.\u0275\u0275elementEnd())}function aa(a,o){1&a&&(e.\u0275\u0275elementStart(0,"mat-label"),e.\u0275\u0275text(1,"Reason for Delete"),e.\u0275\u0275elementEnd())}function na(a,o){1&a&&(e.\u0275\u0275elementStart(0,"mat-label"),e.\u0275\u0275text(1,"Reason for Reject"),e.\u0275\u0275elementEnd())}function oa(a,o){1&a&&(e.\u0275\u0275elementStart(0,"mat-label"),e.\u0275\u0275text(1,"Reason for Cancel"),e.\u0275\u0275elementEnd())}function la(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"mat-form-field",7),e.\u0275\u0275template(1,aa,2,0,"mat-label",4),e.\u0275\u0275template(2,na,2,0,"mat-label",4),e.\u0275\u0275template(3,oa,2,0,"mat-label",4),e.\u0275\u0275element(4,"textarea",22),e.\u0275\u0275elementEnd()),2&a){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","Deleted"==t.leaveInfo.leaveData.leavestatus),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","Rejected"==t.leaveInfo.leaveData.leavestatus),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","Cancelled"==t.leaveInfo.leaveData.leavestatus)}}function ia(a,o){1&a&&(e.\u0275\u0275elementStart(0,"mat-label"),e.\u0275\u0275text(1,"Leave Reason"),e.\u0275\u0275elementEnd())}function ra(a,o){1&a&&(e.\u0275\u0275elementStart(0,"mat-label"),e.\u0275\u0275text(1,"Comp-off Reason"),e.\u0275\u0275elementEnd())}function sa(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"mat-form-field",7),e.\u0275\u0275template(1,ia,2,0,"mat-label",4),e.\u0275\u0275template(2,ra,2,0,"mat-label",4),e.\u0275\u0275element(3,"textarea",24),e.\u0275\u0275elementEnd()),2&a){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.leaveInfo.isleave),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!t.leaveInfo.isleave)}}function ma(a,o){1&a&&(e.\u0275\u0275elementStart(0,"mat-form-field",7)(1,"mat-label"),e.\u0275\u0275text(2,"Relation"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(3,"input",25),e.\u0275\u0275elementEnd())}function da(a,o){1&a&&(e.\u0275\u0275elementStart(0,"mat-label"),e.\u0275\u0275text(1,"Leave Reason"),e.\u0275\u0275elementEnd())}function pa(a,o){1&a&&(e.\u0275\u0275elementStart(0,"mat-label"),e.\u0275\u0275text(1,"Comp-off Reason"),e.\u0275\u0275elementEnd())}function ca(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"mat-form-field",7),e.\u0275\u0275template(1,da,2,0,"mat-label",4),e.\u0275\u0275template(2,pa,2,0,"mat-label",4),e.\u0275\u0275element(3,"textarea",24),e.\u0275\u0275elementEnd()),2&a){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.leaveInfo.isleave),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!t.leaveInfo.isleave)}}function ua(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"mat-form-field",7)(1,"mat-label"),e.\u0275\u0275text(2,"Lop Count"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(3,"input",26),e.\u0275\u0275elementEnd()),2&a){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(3),e.\u0275\u0275propertyInterpolate("value",t.leaveInfo.leaveData.lop_count),e.\u0275\u0275property("readonly",!0)}}function fa(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"mat-form-field",7)(1,"mat-label"),e.\u0275\u0275text(2,"Sandwich Leave Count"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(3,"input",26),e.\u0275\u0275elementEnd()),2&a){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(3),e.\u0275\u0275propertyInterpolate("value",t.leaveInfo.leaveData.same_ltype_count),e.\u0275\u0275property("readonly",!0)}}function va(a,o){if(1&a){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",30),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const l=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(l.fileView())}),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()}if(2&a){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(t.pdfName)}}function _a(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"div",27)(1,"div",28)(2,"p"),e.\u0275\u0275text(3," Document"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(4,va,2,1,"button",29),e.\u0275\u0275elementEnd()()),2&a){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(4),e.\u0275\u0275property("ngIf",t.pdfName)}}function ha(a,o){if(1&a){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",31)(1,"button",32),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const l=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(l.approval())}),e.\u0275\u0275elementStart(2,"span"),e.\u0275\u0275text(3,"Approve"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(4,"button",33),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const l=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(l.reject())}),e.\u0275\u0275elementStart(5,"span"),e.\u0275\u0275text(6,"Reject"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(7,"button",34),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const l=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(l.cancel())}),e.\u0275\u0275elementStart(8,"span"),e.\u0275\u0275text(9,"Cancel"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275element(10,"br"),e.\u0275\u0275elementEnd()}}function ga(a,o){if(1&a){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",31)(1,"button",34),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const l=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(l.cancel())}),e.\u0275\u0275elementStart(2,"span"),e.\u0275\u0275text(3,"Cancel"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275element(4,"br"),e.\u0275\u0275elementEnd()}}let xa=(()=>{class a{constructor(t,n,l,i,r,d,p){this.formBuilder=t,this.location=n,this.dialog=l,this.LM=i,this.router=r,this.spinner=d,this.EMS=p,this.requestform=s.nJ,this.pdfName=null,this.pipe=new u.uU("en-US"),this.leaveInfo=this.location.getState()}ngOnInit(){this.leaveInfo.leaveData||this.router.navigate(["/LeaveManagement/ManagerDashboard"]),this.pendingapprove=new J(this.LM,this.router,this.dialog,this.spinner,this.EMS),this.compoffPendingapprove=new ee(this.LM,this.dialog,this.router,this.spinner,this.EMS),this.cancellationapprove=new ae(this.LM,this.router,this.dialog,this.spinner,this.EMS),this.userSession=JSON.parse(sessionStorage.getItem("user")||""),this.activeModule=JSON.parse(sessionStorage.getItem("activeModule")||""),this.pendingapprove.ngOnInit(),this.compoffPendingapprove.ngOnInit(),this.cancellationapprove.ngOnInit(),this.requestform=this.formBuilder.group({appliedOn:[{value:"",disabled:!0}],empId:[{value:"",disabled:!0}],empName:[{value:"",disabled:!0}],leaveType:[{value:"",disabled:!0}],fromDate:[{value:"",disabled:!0}],toDate:[{value:"",disabled:!0}],noOfDays:[{value:"",disabled:!0}],workType1:[{value:"",disabled:!0}],pendingSince:[{value:"",disabled:!0}],leaveReason:[{value:"",disabled:!0}],workDate:[{value:"",disabled:!0}]}),null!=this.leaveInfo.leaveData&&(this.leaveInfo.isleave?((3==this.leaveInfo.leaveData.leavetype||5==this.leaveInfo.leaveData.leavetype)&&this.getUploadDocument(),this.requestform=this.formBuilder.group({appliedOn:[{value:this.pipe.transform(new Date(this.leaveInfo.leaveData.appliedon),"dd-MM-yyyy"),disabled:!0}],empId:[{value:this.leaveInfo.leaveData.employee_id,disabled:!0}],empName:[{value:this.leaveInfo.leaveData.emp_name,disabled:!0}],leaveType:[{value:this.leaveInfo.leaveData.display_name,disabled:!0}],fromDate:[{value:this.pipe.transform(new Date(this.leaveInfo.leaveData.fromdate),"dd-MM-yyyy"),disabled:!0}],toDate:[{value:this.pipe.transform(new Date(this.leaveInfo.leaveData.todate),"dd-MM-yyyy"),disabled:!0}],noOfDays:[{value:this.leaveInfo.leaveData.leavecount,disabled:!0}],pendingSince:[{value:this.leaveInfo.leaveData.pendingSince,disabled:!0}],leaveReason:[{value:this.leaveInfo.leaveData.leavereason,disabled:!0}],relation:[{value:this.leaveInfo.leaveData.bereavement_relation,disabled:!0}],approvedon:[{value:this.pipe.transform(new Date(this.leaveInfo.leaveData.approvedon),"dd-MM-yyyy"),disabled:!0}],actionReason:[{value:this.leaveInfo.leaveData.action_reason,disabled:!0}],updatedon:[{value:this.pipe.transform(new Date(this.leaveInfo.leaveData.updatedon),"dd-MM-yyyy"),disabled:!0}],workDate:[{value:this.pipe.transform(new Date(this.leaveInfo.leaveData.comp_off_worked_date),"dd-MM-yyyy"),disabled:!0}]})):this.requestform=this.formBuilder.group({appliedOn:[{value:this.pipe.transform(new Date(this.leaveInfo.leaveData.applied_date),"dd-MM-yyyy"),disabled:!0}],empId:[{value:this.leaveInfo.leaveData.employee_id,disabled:!0}],empName:[{value:this.leaveInfo.leaveData.employeename,disabled:!0}],fromDate:[{value:this.pipe.transform(new Date(this.leaveInfo.leaveData.comp_off_worked_date),"dd-MM-yyyy"),disabled:!0}],noOfDays:[{value:this.leaveInfo.leaveData.worked_hours+":"+this.leaveInfo.leaveData.worked_minutes,disabled:!0}],approvedon:[{value:this.pipe.transform(new Date(this.leaveInfo.leaveData.updateddate),"dd-MM-yyyy"),disabled:!0}],pendingSince:[{value:this.leaveInfo.leaveData.pendingSince,disabled:!0}],leaveReason:[{value:this.leaveInfo.leaveData.reason,disabled:!0}],actionReason:[{value:this.leaveInfo.leaveData.remarks,disabled:!0}],updatedon:[{value:this.pipe.transform(new Date(this.leaveInfo.leaveData.updateddate),"dd-MM-yyyy"),disabled:!0}],workDate:[{value:this.pipe.transform(new Date(this.leaveInfo.leaveData.comp_off_worked_date),"dd-MM-yyyy"),disabled:!0}]}))}approval(){this.leaveInfo.isCancellation?this.cancellationapprove.leaveCancellationApprove(this.leaveInfo.leaveData,"Cancel Approved",this.userSession.id):this.leaveInfo.isleave?this.pendingapprove.leaveApprove(this.leaveInfo.leaveData,"Approved",this.userSession.id):this.compoffPendingapprove.compoffApprove(this.leaveInfo.leaveData,"Approved",null)}reject(){this.titleName="Reject",this.openDialog()}openDialog(){this.dialog.open(k.w,{width:"600px",position:{top:"100px"},data:{name:this.titleName,reason:this.reason}}).afterClosed().subscribe(n=>{null!=n&&!0!==n&&(this.leaveInfo.isCancellation?(this.leaveInfo.leaveData.action_reason=n.reason,this.cancellationapprove.leaveCancellationApprove(this.leaveInfo.leaveData,"Cancel Rejected",this.userSession.id)):this.leaveInfo.isleave?(this.leaveInfo.leaveData.action_reason=n.reason,this.pendingapprove.leaveApprove(this.leaveInfo.leaveData,"Rejected",this.userSession.id)):(this.leaveInfo.leaveData.remarks=n.reason,this.compoffPendingapprove.compoffApprove(this.leaveInfo.leaveData,"Rejected",null)))})}setApprovalsReject(){this.LM.setApproveOrReject({id:"",leave_id:this.userSession.id?this.userSession.id:"",emp_id:this.leaveInfo.leaveData.leavetype,approver_id:this.leaveInfo.leaveData.fromdate,leavestatus:this.leaveInfo.leaveData.todate,reason:"jbjhbhj"}).subscribe(n=>{this.dialog.open(C.S,n&&n.status?"Cancel Approved"==n.leaveStatus?{position:{top:"70px"},disableClose:!0,data:{Message:this.LM120,url:"/LeaveManagement/ManagerDashboard"}}:{position:{top:"70px"},disableClose:!0,data:{Message:this.LM121,url:"/LeaveManagement/ManagerDashboard"}}:{position:{top:"70px"},disableClose:!0,data:{Message:this.LM119,url:"/LeaveManagement/ManagerDashboard"}})})}compoffApproval(){}compoffReject(){}cancel(){"leave"==this.leaveInfo.isleaveHistory&&this.router.navigate(["/LeaveManagement/LeaveHistory"]),this.router.navigate([this.leaveInfo.leaveData.url])}getErrorMessages(t){this.LM.getErrorMessages(t,1,1).subscribe(n=>{n.status&&"LM120"==t?this.LM120=n.data[0].errormessage:n.status&&"LM121"==t?this.LM121=n.data[0].errormessage:n.status&&"LM119"==t&&(this.LM119=n.data[0].errormessage)})}fileView(){window.open(this.fileURL)}getUploadDocument(){this.spinner.show(),this.LM.getFilesMaster({employeeId:this.leaveInfo.leaveData.empid,filecategory:3==this.leaveInfo.leaveData.leavetype?"SL":"ML",moduleId:this.activeModule.moduleid,requestId:this.leaveInfo?this.leaveInfo.leaveData.leave_id:null}).subscribe(n=>{if(n&&n.status&&n.data.length>0){let i=n.data[0].filename.split("_");var l=[];for(let d=0;d<=i.length;d++)d>2&&l.push(i[d]);this.pdfName=l.join(""),n.data[0].employeeId=this.userSession.id,this.LM.getProfileImage(n.data[0]).subscribe(d=>{if(d.success){let p=new Uint8Array(d.image.data);p.reduce((y,D)=>y+String.fromCharCode(D),"");const x=new Blob([p],{type:"application/pdf"});this.fileURL=URL.createObjectURL(x)}else this.spinner.hide()})}})}}return a.\u0275fac=function(t){return new(t||a)(e.\u0275\u0275directiveInject(s.QS),e.\u0275\u0275directiveInject(u.Ye),e.\u0275\u0275directiveInject(O.uw),e.\u0275\u0275directiveInject(F.t),e.\u0275\u0275directiveInject(R.F0),e.\u0275\u0275directiveInject(b.t2),e.\u0275\u0275directiveInject(H.b))},a.\u0275cmp=e.\u0275\u0275defineComponent({type:a,selectors:[["app-manager-review-and-approvals"]],decls:45,vars:24,consts:[["fxLayout","column",1,"first-col"],["autocomplete","off",3,"formGroup"],["fxLayout","column"],[1,"headerbox"],[4,"ngIf"],["fxLayout","column",2,"padding-left","8px","padding-right","8px"],["fxLayout","row wrap","fxLayout.lt-lg","row wrap","fxLayout.xs","column","fxLayoutAlign.xs","center center"],["fxFlex.xs","100","fxFlex","31","fxFlex.lt-lg","45","appearance","outline",1,"mx-2","my-2"],["formControlName","appliedOn","matInput","","placeholder","Applied Date","readonly",""],["formControlName","empId","required","","matInput","","placeholder",""],["formControlName","empName","required","","matInput","","placeholder",""],["fxFlex.xs","100","fxFlex","31","fxFlex.lt-lg","45","class","mx-2 my-2","appearance","outline",4,"ngIf"],["formControlName","noOfDays","required","","matInput","","placeholder",""],["fxLayout","row","fxLayout.xs","column","fxLayoutAlign.xs","center center",4,"ngIf"],["fxLayout","row","fxLayout.xs","column","fxLayoutAlign.xs","center center",2,"justify-content","center"],["fxLayoutAlign","center center",4,"ngIf"],["formControlName","fromDate","required","","matInput","","placeholder",""],["formControlName","leaveType","required","","matInput","","placeholder",""],["formControlName","toDate","required","","matInput","","placeholder",""],["formControlName","workDate","required","","matInput","","placeholder",""],["formControlName","updatedon","required","","matInput","","placeholder",""],["formControlName","pendingSince","required","","matInput","","placeholder",""],["formControlName","actionReason","required","","matInput","","maxlength","250"],["formControlName","approvedon","required","","matInput","","placeholder",""],["formControlName","leaveReason","required","","matInput","","maxlength","250"],["formControlName","relation","required","","matInput","","placeholder",""],["required","","matInput","","placeholder","",3,"value","readonly"],["fxLayout","row","fxLayout.xs","column","fxLayoutAlign.xs","center center"],[1,"mx-2","my-2"],["class","link",3,"click",4,"ngIf"],[1,"link",3,"click"],["fxLayoutAlign","center center"],["type","submit",1,"btn","btn-primary","custom1","mr-2","mb-2",3,"click"],[1,"btn","btn-danger","mr-2","mb-2",3,"click"],["type","submit",1,"btn","btn-danger","mr-2","mb-2",3,"click"]],template:function(t,n){1&t&&(e.\u0275\u0275elementStart(0,"div",0)(1,"form",1)(2,"mat-card",2)(3,"mat-card-header",3),e.\u0275\u0275template(4,Nt,2,0,"mat-card-title",4),e.\u0275\u0275template(5,qt,2,1,"mat-card-title",4),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(6,"br"),e.\u0275\u0275elementStart(7,"div",5)(8,"div",6)(9,"mat-form-field",7)(10,"mat-label"),e.\u0275\u0275text(11,"Applied On"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(12,"input",8),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(13,"mat-form-field",7)(14,"mat-label"),e.\u0275\u0275text(15,"Emp Id"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(16,"input",9),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(17,"mat-form-field",7)(18,"mat-label"),e.\u0275\u0275text(19,"Emp Name"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(20,"input",10),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(21,kt,4,0,"mat-form-field",11),e.\u0275\u0275template(22,Ht,4,0,"mat-form-field",11),e.\u0275\u0275template(23,Yt,4,2,"mat-form-field",11),e.\u0275\u0275template(24,jt,4,0,"mat-form-field",11),e.\u0275\u0275template(25,zt,4,0,"mat-form-field",11),e.\u0275\u0275elementStart(26,"mat-form-field",7),e.\u0275\u0275template(27,Wt,2,0,"mat-label",4),e.\u0275\u0275template(28,$t,2,0,"mat-label",4),e.\u0275\u0275element(29,"input",12),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(30,Qt,3,1,"mat-form-field",11),e.\u0275\u0275template(31,Jt,4,2,"mat-form-field",11),e.\u0275\u0275template(32,Zt,4,0,"mat-form-field",11),e.\u0275\u0275template(33,ea,4,0,"mat-form-field",11),e.\u0275\u0275template(34,ta,4,0,"mat-form-field",11),e.\u0275\u0275template(35,la,5,3,"mat-form-field",11),e.\u0275\u0275template(36,sa,4,2,"mat-form-field",11),e.\u0275\u0275template(37,ma,4,0,"mat-form-field",11),e.\u0275\u0275template(38,ca,4,2,"mat-form-field",11),e.\u0275\u0275template(39,ua,4,2,"mat-form-field",11),e.\u0275\u0275template(40,fa,4,2,"mat-form-field",11),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(41,_a,5,1,"div",13),e.\u0275\u0275elementStart(42,"div",14),e.\u0275\u0275template(43,ha,11,0,"div",15),e.\u0275\u0275template(44,ga,5,0,"div",15),e.\u0275\u0275elementEnd()()()()()),2&t&&(e.\u0275\u0275advance(1),e.\u0275\u0275property("formGroup",n.requestform),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",!n.leaveInfo.isleave),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.leaveInfo.isleave),e.\u0275\u0275advance(16),e.\u0275\u0275property("ngIf",!n.leaveInfo.isleave||9==n.leaveInfo.leaveData.leavetype),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.leaveInfo.isleave),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.leaveInfo.isleave),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.leaveInfo.isleave&&8!=n.leaveInfo.leaveData.leave_id),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",8==n.leaveInfo.leaveData.leave_id),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",n.leaveInfo.isleave),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!n.leaveInfo.isleave),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf","Deleted"==n.leaveInfo.leaveData.leavestatus),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","Rejected"==n.leaveInfo.leaveData.leavestatus),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","Submitted"==n.leaveInfo.leaveData.leavestatus),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",1==n.leaveInfo.isCancellation),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","Approved"==n.leaveInfo.leaveData.leavestatus&&1!=n.leaveInfo.isCancellation),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","Approved"!=n.leaveInfo.leaveData.leavestatus&&"Submitted"!=n.leaveInfo.leaveData.leavestatus&&"Utilized"!=n.leaveInfo.leaveData.leavestatus&&"Expired"!=n.leaveInfo.leaveData.leavestatus),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","Deleted"==n.leaveInfo.leaveData.leavestatus),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",8==n.leaveInfo.leaveData.leavetype),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","Deleted"!=n.leaveInfo.leaveData.leavestatus),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null!=n.leaveInfo.leaveData.lop_count),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null!=n.leaveInfo.leaveData.same_ltype_count),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.pdfName),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf","leave"!=n.leaveInfo.isleaveHistory&&"compoff"!=n.leaveInfo.isleaveHistory),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","leave"==n.leaveInfo.isleaveHistory||"compoff"==n.leaveInfo.isleaveHistory))},dependencies:[u.O5,c.a8,c.dk,c.n5,h.KE,h.hX,V.Nt,s._Y,s.Fj,s.JJ,s.JL,s.Q7,s.nD,s.sg,s.u,v.xw,v.Wh,v.yH],styles:["mat-card[_ngcontent-%COMP%]{transition:box-shadow .28s cubic-bezier(.4,0,.2,1);display:block;position:relative;padding-left:0;padding-right:0}.headerbox[_ngcontent-%COMP%]{height:45px;background-color:#28acaf!important;align-items:center}.title[_ngcontent-%COMP%]{font-family:Roboto;font-size:20px;font-weight:500;font-stretch:normal;font-style:normal;letter-spacing:.32px;color:#fff;margin-bottom:0}  .mat-card-header-text{margin:0 6px!important} tr .mat-header-row{height:45px!important}  .mat-form-field-appearance-outline .mat-form-field-wrapper{margin:.2em 0!important}tr.mat-header-row[_ngcontent-%COMP%]{height:45px}button.link[_ngcontent-%COMP%]{background:transparent;color:#00f;border:none;outline:0}button.link[_ngcontent-%COMP%]:hover{color:#80286a}.custom1[_ngcontent-%COMP%]{width:85px!important}"]}),a})();var fe=f(55829),ne=f(4566);const ya=["calendar"],Ca=function(a){return{color:a}};let oe=(()=>{class a{constructor(t,n){this.LM=t,this.spinner=n,this.arrayList=[],this.userSession=[],this.pipe=new u.uU("en-US"),this.message="",this.initialEvents=[],this.calendarOptions={headerToolbar:{left:"prev",center:"title",right:"next"},eventMouseEnter:this.eventClick.bind(this),eventMouseLeave:this.eventMouseLeave.bind(this),customButtons:{next:{click:this.nextMonth.bind(this)},prev:{click:this.prevMonth.bind(this)},today:{click:this.currentMonth.bind(this)}},height:450,initialView:"dayGridMonth",weekends:!0,editable:!1,selectable:!0,selectMirror:!0,dayMaxEvents:!0},this.currentDate=new Date}ngOnInit(){this.userSession=JSON.parse(sessionStorage.getItem("user")||""),this.getLeaveCalendarForManager()}getLeaveCalendarForManager(){this.arrayList=[],this.LM.getLeaveCalendarForManager(this.userSession.id).subscribe(t=>{t.status&&(this.arrayList=t.data,this.arrayList.forEach(n=>{this.initialEvents.push({title:n.ename,start:n.edate,color:n.color,icon:"fa-times-circle",description:n.leave_name})}),this.calendarOptions.events=this.initialEvents)})}nextMonth(){this.spinner.show(),this.calendarApi=this.calendarComponent.getApi(),this.calendarApi.next(),this.spinner.hide()}prevMonth(){this.calendarApi=this.calendarComponent.getApi(),this.calendarApi.prev()}currentMonth(){this.calendarApi=this.calendarComponent.getApi(),this.calendarApi.today()}eventClick(t){this.message=t.event.extendedProps.description,this.color=t.event._def.ui.backgroundColor}eventMouseLeave(t){this.message=""}}return a.\u0275fac=function(t){return new(t||a)(e.\u0275\u0275directiveInject(F.t),e.\u0275\u0275directiveInject(b.t2))},a.\u0275cmp=e.\u0275\u0275defineComponent({type:a,selectors:[["app-manager-dashboard-calender"]],viewQuery:function(t,n){if(1&t&&e.\u0275\u0275viewQuery(ya,5),2&t){let l;e.\u0275\u0275queryRefresh(l=e.\u0275\u0275loadQuery())&&(n.calendarComponent=l.first)}},decls:14,vars:5,consts:[["fxLayout","column",1,"first-col"],["fxLayout","row","fxLayout.xs","column","fxLayoutGap","10px"],["fxFlex","100",1,"Sub"],[1,"demo-app-main"],["fxLayout","column",3,"options"],["calendar",""],[2,"text-align","center","padding-top","10px","padding-bottom","0px",3,"ngStyle"]],template:function(t,n){1&t&&(e.\u0275\u0275elementStart(0,"div",0)(1,"mat-card")(2,"mat-card-header")(3,"mat-card-title"),e.\u0275\u0275text(4," User Leave List"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(5,"div",1)(6,"div",2)(7,"div",3),e.\u0275\u0275element(8,"full-calendar",4,5),e.\u0275\u0275elementStart(10,"p",6)(11,"b"),e.\u0275\u0275text(12),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275element(13,"div",3),e.\u0275\u0275elementEnd()()()()),2&t&&(e.\u0275\u0275advance(8),e.\u0275\u0275property("options",n.calendarOptions),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngStyle",e.\u0275\u0275pureFunction1(3,Ca,n.color)),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(n.message))},dependencies:[u.PC,c.a8,c.dk,c.n5,v.xw,v.SQ,v.yH,fe.Zl,ne.woE],styles:[".Sub[_ngcontent-%COMP%]{margin-top:2%;margin-left:20px;margin-right:20px}mat-card[_ngcontent-%COMP%]{transition:box-shadow .28s cubic-bezier(.4,0,.2,1);display:block;position:relative;padding-left:0;padding-right:0}"]}),a})(),Ea=(()=>{class a{constructor(t){this.LM=t}ngOnInit(){this.getCompoffleavestatus()}getCompoffleavestatus(){this.LM.getCompoffleavestatus().subscribe(t=>{t.status&&(this.compoff=t.data.compoff_status)})}}return a.\u0275fac=function(t){return new(t||a)(e.\u0275\u0275directiveInject(F.t))},a.\u0275cmp=e.\u0275\u0275defineComponent({type:a,selectors:[["app-manager-dashboard"]],decls:7,vars:0,consts:[[2,"margin-top","20px"]],template:function(t,n){1&t&&e.\u0275\u0275element(0,"app-manager-dashboard-calender")(1,"div",0)(2,"app-pending-approvals")(3,"div",0)(4,"app-pending-compoff")(5,"div",0)(6,"app-leaves-for-cancellation")},dependencies:[J,ee,oe,ae]}),a})();var W=f(97392);function Ia(a,o){1&a&&(e.\u0275\u0275elementStart(0,"th",29),e.\u0275\u0275text(1,"S.No"),e.\u0275\u0275elementEnd())}function La(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"td",30),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&a){const t=o.index,n=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",t+1+n.paginator.pageIndex*n.paginator.pageSize," ")}}function Sa(a,o){1&a&&(e.\u0275\u0275elementStart(0,"th",31),e.\u0275\u0275text(1," Applied On"),e.\u0275\u0275elementEnd())}function Da(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"td",32),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"date"),e.\u0275\u0275elementEnd()),2&a){const t=o.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1("",e.\u0275\u0275pipeBind2(2,1,t.appliedon,"dd-MM-yyyy")," ")}}function ba(a,o){1&a&&(e.\u0275\u0275elementStart(0,"th",31),e.\u0275\u0275text(1," Emp Id "),e.\u0275\u0275elementEnd())}function Ma(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"td",30),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&a){const t=o.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",t.employee_id,"")}}function Fa(a,o){1&a&&(e.\u0275\u0275elementStart(0,"th",31),e.\u0275\u0275text(1," Emp Name "),e.\u0275\u0275elementEnd())}function Ra(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"td",30),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&a){const t=o.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",t.emp_name,"")}}function wa(a,o){1&a&&(e.\u0275\u0275elementStart(0,"th",33),e.\u0275\u0275text(1," Leave Type"),e.\u0275\u0275elementEnd())}function Ta(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"td",30),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&a){const t=o.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",t.display_name,"")}}function Aa(a,o){1&a&&(e.\u0275\u0275elementStart(0,"th",29),e.\u0275\u0275text(1," From"),e.\u0275\u0275elementEnd())}function Oa(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"td",32),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"date"),e.\u0275\u0275elementEnd()),2&a){const t=o.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind2(2,1,t.fromdate,"dd-MM-yyyy"),"")}}function Pa(a,o){1&a&&(e.\u0275\u0275elementStart(0,"th",29),e.\u0275\u0275text(1," To"),e.\u0275\u0275elementEnd())}function Va(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"td",32),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"date"),e.\u0275\u0275elementEnd()),2&a){const t=o.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind2(2,1,t.todate,"dd-MM-yyyy"),"")}}function Na(a,o){1&a&&(e.\u0275\u0275elementStart(0,"th",29),e.\u0275\u0275text(1," Days "),e.\u0275\u0275elementEnd())}function qa(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"td",34),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&a){const t=o.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",t.leavecount," ")}}function ka(a,o){1&a&&(e.\u0275\u0275elementStart(0,"th",31),e.\u0275\u0275text(1," Approved On"),e.\u0275\u0275elementEnd())}function Ha(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"td",32),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"date"),e.\u0275\u0275elementEnd()),2&a){const t=o.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind2(2,1,t.approvedon,"dd-MM-yyyy")," ")}}function Ua(a,o){1&a&&(e.\u0275\u0275elementStart(0,"th",35),e.\u0275\u0275text(1," Status "),e.\u0275\u0275elementEnd())}function Ba(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"td",36),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&a){const t=o.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1("",t.leavestatus," ")}}function Ya(a,o){1&a&&e.\u0275\u0275element(0,"th",29)}function ja(a,o){if(1&a){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"td",36)(1,"button",37),e.\u0275\u0275listener("keyup.enter",function(){const i=e.\u0275\u0275restoreView(t).$implicit,r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.leaveReview(i))}),e.\u0275\u0275elementStart(2,"mat-icon",38),e.\u0275\u0275listener("click",function(){const i=e.\u0275\u0275restoreView(t).$implicit,r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.leaveReview(i))}),e.\u0275\u0275text(3,"visibility"),e.\u0275\u0275elementEnd()()()}2&a&&(e.\u0275\u0275advance(2),e.\u0275\u0275property("tabIndex",3))}function za(a,o){1&a&&e.\u0275\u0275element(0,"tr",39)}function Wa(a,o){1&a&&e.\u0275\u0275element(0,"tr",40)}function $a(a,o){1&a&&(e.\u0275\u0275elementStart(0,"tr",41)(1,"td",42),e.\u0275\u0275text(2,"No data found"),e.\u0275\u0275elementEnd()())}const Ga=function(){return[5,10,20]};let Qa=(()=>{class a{constructor(t,n){this.router=t,this.LM=n,this.displayedColumns=["sno","appliedOn","empId","empName","leaveType","fromDate","toDate","noOfDays","pendingSince","status","action"],this.dataSource=[],this.pageLoading=!0}ngOnInit(){this.userSession=JSON.parse(sessionStorage.getItem("user")||""),this.getHandledLeaves()}leaveReview(t){t.url="/LeaveManagement/LeaveHistory",this.router.navigate(["/LeaveManagement/ReviewAndApprovals"],{state:{leaveData:t,isleave:!0,isleaveHistory:"leave"}})}getHandledLeaves(){this.LM.getHandledLeaves(this.userSession.id).subscribe(t=>{t.status?(this.arrayList=t.data,this.dataSource=new m.by(this.arrayList),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort,this.pageLoading=!1):(this.arrayList=[],this.dataSource=new m.by(this.arrayList),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort,this.pageLoading=!1)})}getPageSizes(){var t=[];return this.dataSource.data.length>5&&t.push(5),this.dataSource.data.length>10&&t.push(10),this.dataSource.data.length>20&&t.push(20),t.push(this.dataSource.data.length),t}}return a.\u0275fac=function(t){return new(t||a)(e.\u0275\u0275directiveInject(R.F0),e.\u0275\u0275directiveInject(F.t))},a.\u0275cmp=e.\u0275\u0275defineComponent({type:a,selectors:[["app-leave-history"]],viewQuery:function(t,n){if(1&t&&(e.\u0275\u0275viewQuery(M.NW,5),e.\u0275\u0275viewQuery(g.YE,5)),2&t){let l;e.\u0275\u0275queryRefresh(l=e.\u0275\u0275loadQuery())&&(n.paginator=l.first),e.\u0275\u0275queryRefresh(l=e.\u0275\u0275loadQuery())&&(n.sort=l.first)}},decls:47,vars:5,consts:[["fxLayout","column",1,"first-col"],[2,"text-align","center"],[1,"table-pad"],["fxLayout","column"],[1,"example-container","mat-elevation-z1"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","sno"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","appliedOn"],["mat-header-cell","","class","no-break",4,"matHeaderCellDef"],["mat-cell","","class","no-break",4,"matCellDef"],["matColumnDef","empId"],["matColumnDef","empName"],["matColumnDef","leaveType"],["mat-header-cell","","mat-sort-header","","class","no-break",4,"matHeaderCellDef"],["matColumnDef","fromDate"],["matColumnDef","toDate"],["matColumnDef","noOfDays"],["mat-cell","","style","text-align: center;",4,"matCellDef"],["matColumnDef","pendingSince"],["matColumnDef","status"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","","style","cursor: pointer;",4,"matCellDef"],["matColumnDef","action"],["class","headerbox title","mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],[3,"pageSizeOptions"],["mat-header-cell",""],["mat-cell",""],["mat-header-cell","",1,"no-break"],["mat-cell","",1,"no-break"],["mat-header-cell","","mat-sort-header","",1,"no-break"],["mat-cell","",2,"text-align","center"],["mat-header-cell","","mat-sort-header",""],["mat-cell","",2,"cursor","pointer"],["mat-icon-button","",3,"keyup.enter"],["title","view",2,"overflow","visible",3,"tabIndex","click"],["mat-header-row","",1,"headerbox","title"],["mat-row",""],[1,"mat-row"],["colspan","11",1,"mat-cell",2,"text-align","center"]],template:function(t,n){1&t&&(e.\u0275\u0275elementStart(0,"div",0)(1,"mat-card")(2,"mat-card-header")(3,"mat-card-title",1),e.\u0275\u0275text(4," Leave History"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275element(5,"br"),e.\u0275\u0275elementStart(6,"mat-card-content",2)(7,"div",3)(8,"div",4)(9,"table",5),e.\u0275\u0275elementContainerStart(10,6),e.\u0275\u0275template(11,Ia,2,0,"th",7),e.\u0275\u0275template(12,La,2,1,"td",8),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(13,9),e.\u0275\u0275template(14,Sa,2,0,"th",10),e.\u0275\u0275template(15,Da,3,4,"td",11),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(16,12),e.\u0275\u0275template(17,ba,2,0,"th",10),e.\u0275\u0275template(18,Ma,2,1,"td",8),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(19,13),e.\u0275\u0275template(20,Fa,2,0,"th",10),e.\u0275\u0275template(21,Ra,2,1,"td",8),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(22,14),e.\u0275\u0275template(23,wa,2,0,"th",15),e.\u0275\u0275template(24,Ta,2,1,"td",8),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(25,16),e.\u0275\u0275template(26,Aa,2,0,"th",7),e.\u0275\u0275template(27,Oa,3,4,"td",11),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(28,17),e.\u0275\u0275template(29,Pa,2,0,"th",7),e.\u0275\u0275template(30,Va,3,4,"td",11),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(31,18),e.\u0275\u0275template(32,Na,2,0,"th",7),e.\u0275\u0275template(33,qa,2,1,"td",19),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(34,20),e.\u0275\u0275template(35,ka,2,0,"th",10),e.\u0275\u0275template(36,Ha,3,4,"td",11),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(37,21),e.\u0275\u0275template(38,Ua,2,0,"th",22),e.\u0275\u0275template(39,Ba,2,1,"td",23),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(40,24),e.\u0275\u0275template(41,Ya,1,0,"th",7),e.\u0275\u0275template(42,ja,4,1,"td",23),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275template(43,za,1,0,"tr",25),e.\u0275\u0275template(44,Wa,1,0,"tr",26),e.\u0275\u0275template(45,$a,3,0,"tr",27),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(46,"mat-paginator",28),e.\u0275\u0275elementEnd()()()()()),2&t&&(e.\u0275\u0275advance(9),e.\u0275\u0275property("dataSource",n.dataSource),e.\u0275\u0275advance(34),e.\u0275\u0275property("matHeaderRowDef",n.displayedColumns),e.\u0275\u0275advance(1),e.\u0275\u0275property("matRowDefColumns",n.displayedColumns),e.\u0275\u0275advance(2),e.\u0275\u0275property("pageSizeOptions",n.pageLoading?e.\u0275\u0275pureFunction0(4,Ga):n.getPageSizes()))},dependencies:[B.lW,c.a8,c.dk,c.dn,c.n5,W.Hw,M.NW,g.YE,g.nU,m.BZ,m.fO,m.as,m.w1,m.Dz,m.nj,m.ge,m.ev,m.XQ,m.Gk,m.Ee,v.xw,u.uU],styles:['.mat-select-panel[aria-label="Items per page:"] mat-option:last-child:before{content:"All"}  .mat-select-panel[aria-label="Items per page:"] mat-option:last-child .mat-option-text{display:none}mat-card[_ngcontent-%COMP%]{transition:box-shadow .28s cubic-bezier(.4,0,.2,1);display:block;position:relative;padding-left:0;padding-right:0}th.mat-header-cell[_ngcontent-%COMP%]:first-of-type, td.mat-cell[_ngcontent-%COMP%]:first-of-type, td.mat-footer-cell[_ngcontent-%COMP%]:first-of-type{padding-left:10px!important}.example-container[_ngcontent-%COMP%]{overflow-x:auto}.dev-Pad[_ngcontent-%COMP%]{padding:1%}.table-pad[_ngcontent-%COMP%]{padding-left:15px;padding-right:15px}@media only screen and (max-width: 768px) and (orientation: portrait){mat-header-row[_ngcontent-%COMP%], mat-row[_ngcontent-%COMP%]{width:150%}}table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:2px 10px}']}),a})();function Xa(a,o){1&a&&(e.\u0275\u0275elementStart(0,"th",26),e.\u0275\u0275text(1,"S.No"),e.\u0275\u0275elementEnd())}function Ka(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"td",27),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&a){const t=o.index,n=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",t+1+n.paginator.pageIndex*n.paginator.pageSize," ")}}function Ja(a,o){1&a&&(e.\u0275\u0275elementStart(0,"th",28),e.\u0275\u0275text(1," Applied On"),e.\u0275\u0275elementEnd())}function Za(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"td",29),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"date"),e.\u0275\u0275elementEnd()),2&a){const t=o.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1("",e.\u0275\u0275pipeBind2(2,1,t.applied_date,"dd-MM-yyyy")," ")}}function en(a,o){1&a&&(e.\u0275\u0275elementStart(0,"th",28),e.\u0275\u0275text(1," Emp Id "),e.\u0275\u0275elementEnd())}function tn(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"td",27),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&a){const t=o.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",t.employee_id,"")}}function an(a,o){1&a&&(e.\u0275\u0275elementStart(0,"th",28),e.\u0275\u0275text(1," Emp Name "),e.\u0275\u0275elementEnd())}function nn(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"td",27),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&a){const t=o.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",t.employee_name,"")}}function on(a,o){1&a&&(e.\u0275\u0275elementStart(0,"th",28),e.\u0275\u0275text(1," Comp Off Date "),e.\u0275\u0275elementEnd())}function ln(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"td",27),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"date"),e.\u0275\u0275elementEnd()),2&a){const t=o.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind2(2,1,t.comp_off_worked_date,"dd-MM-yyyy"),"")}}function rn(a,o){1&a&&(e.\u0275\u0275elementStart(0,"th",28),e.\u0275\u0275text(1," Hours "),e.\u0275\u0275elementEnd())}function sn(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"td",27),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&a){const t=o.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate2(" ",t.worked_hours," : ",0==t.worked_minutes?"00":t.worked_minutes," ")}}function mn(a,o){1&a&&(e.\u0275\u0275elementStart(0,"th",30),e.\u0275\u0275text(1," Status "),e.\u0275\u0275elementEnd())}function dn(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"td",27),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&a){const t=o.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",t.status," ")}}function pn(a,o){1&a&&e.\u0275\u0275element(0,"th",31)}const cn=function(){return[1]};function un(a,o){if(1&a){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"td",32)(1,"button",33),e.\u0275\u0275listener("keyup.enter",function(){const i=e.\u0275\u0275restoreView(t).$implicit,r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.compoffReview(i))}),e.\u0275\u0275elementStart(2,"mat-icon",34),e.\u0275\u0275listener("click",function(){const i=e.\u0275\u0275restoreView(t).$implicit,r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.compoffReview(i))}),e.\u0275\u0275text(3,"visibility"),e.\u0275\u0275elementEnd()()()}2&a&&(e.\u0275\u0275advance(1),e.\u0275\u0275property("tabIndex",e.\u0275\u0275pureFunction0(1,cn)))}function fn(a,o){1&a&&e.\u0275\u0275element(0,"tr",35)}function vn(a,o){1&a&&e.\u0275\u0275element(0,"tr",36)}function _n(a,o){1&a&&(e.\u0275\u0275elementStart(0,"tr",37)(1,"td",38),e.\u0275\u0275text(2,"No data found"),e.\u0275\u0275elementEnd()())}const hn=function(){return[5,10,20]};let gn=(()=>{class a{constructor(t,n,l){this.LM=t,this.dialog=n,this.router=l,this.displayedColumns=["sno","appliedOn","empId","empName","fromDate","noOfHours","pendingSince","action"],this.dataSource=[],this.pageLoading=!0,this.arrayList=[]}ngOnInit(){this.userSession=JSON.parse(sessionStorage.getItem("user")||""),this.getCompoffs()}getCompoffs(){this.LM.getCompoffs({empId:null,rmId:this.userSession.id}).subscribe(n=>{n.status?(this.arrayList=n.data,this.dataSource=new m.by(this.arrayList),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort,this.pageLoading=!1):(this.arrayList=[],this.dataSource=new m.by(this.arrayList),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort,this.pageLoading=!1)})}getPageSizes(){var t=[];return this.dataSource.data.length>5&&t.push(5),this.dataSource.data.length>10&&t.push(10),this.dataSource.data.length>20&&t.push(20),t.push(this.dataSource.data.length),t}compoffReview(t){t.employeename=t.employee_name,t.leavestatus=t.status,t.url="/LeaveManagement/CompOffHistory",this.router.navigate(["/LeaveManagement/ReviewAndApprovals"],{state:{leaveData:t,isleave:!1,isleaveHistory:"compoff"}})}}return a.\u0275fac=function(t){return new(t||a)(e.\u0275\u0275directiveInject(F.t),e.\u0275\u0275directiveInject(O.uw),e.\u0275\u0275directiveInject(R.F0))},a.\u0275cmp=e.\u0275\u0275defineComponent({type:a,selectors:[["app-comp-off-history"]],viewQuery:function(t,n){if(1&t&&(e.\u0275\u0275viewQuery(M.NW,5),e.\u0275\u0275viewQuery(g.YE,5)),2&t){let l;e.\u0275\u0275queryRefresh(l=e.\u0275\u0275loadQuery())&&(n.paginator=l.first),e.\u0275\u0275queryRefresh(l=e.\u0275\u0275loadQuery())&&(n.sort=l.first)}},decls:38,vars:5,consts:[["fxLayout","column",1,"first-col"],[1,"headerbox"],[1,"title"],["fxLayout","column",1,"table-pad"],[1,"example-container","mat-elevation-z1"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","sno"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","appliedOn"],["mat-header-cell","","style","white-space: nowrap;",4,"matHeaderCellDef"],["mat-cell","","style","white-space: nowrap;",4,"matCellDef"],["matColumnDef","empId"],["matColumnDef","empName"],["matColumnDef","fromDate"],["mat-header-cell","","style","white-space: nowrap",4,"matHeaderCellDef"],["matColumnDef","noOfHours"],["matColumnDef","pendingSince"],["mat-header-cell","","mat-sort-header","","style","white-space: nowrap;",4,"matHeaderCellDef"],["matColumnDef","action"],["mat-header-cell","","style","padding: 0px;",4,"matHeaderCellDef"],["mat-cell","","style","padding: 0px; text-align: start;  cursor: pointer;",4,"matCellDef"],["class","headerbox title","mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],[3,"pageSizeOptions"],["mat-header-cell",""],["mat-cell",""],["mat-header-cell","",2,"white-space","nowrap"],["mat-cell","",2,"white-space","nowrap"],["mat-header-cell","","mat-sort-header","",2,"white-space","nowrap"],["mat-header-cell","",2,"padding","0px"],["mat-cell","",2,"padding","0px","text-align","start","cursor","pointer"],["mat-icon-button","",3,"tabIndex","keyup.enter"],["title","view",3,"click"],["mat-header-row","",1,"headerbox","title"],["mat-row",""],[1,"mat-row"],["colspan","9",1,"mat-cell",2,"text-align","center"]],template:function(t,n){1&t&&(e.\u0275\u0275elementStart(0,"div",0)(1,"mat-card")(2,"mat-card-header",1)(3,"mat-card-title",2),e.\u0275\u0275text(4," Comp Off History "),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(5,"mat-card-content"),e.\u0275\u0275element(6,"br"),e.\u0275\u0275elementStart(7,"div",3)(8,"div",4)(9,"table",5),e.\u0275\u0275elementContainerStart(10,6),e.\u0275\u0275template(11,Xa,2,0,"th",7),e.\u0275\u0275template(12,Ka,2,1,"td",8),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(13,9),e.\u0275\u0275template(14,Ja,2,0,"th",10),e.\u0275\u0275template(15,Za,3,4,"td",11),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(16,12),e.\u0275\u0275template(17,en,2,0,"th",10),e.\u0275\u0275template(18,tn,2,1,"td",8),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(19,13),e.\u0275\u0275template(20,an,2,0,"th",10),e.\u0275\u0275template(21,nn,2,1,"td",8),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(22,14),e.\u0275\u0275template(23,on,2,0,"th",15),e.\u0275\u0275template(24,ln,3,4,"td",8),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(25,16),e.\u0275\u0275template(26,rn,2,0,"th",15),e.\u0275\u0275template(27,sn,2,2,"td",8),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(28,17),e.\u0275\u0275template(29,mn,2,0,"th",18),e.\u0275\u0275template(30,dn,2,1,"td",8),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(31,19),e.\u0275\u0275template(32,pn,1,0,"th",20),e.\u0275\u0275template(33,un,4,2,"td",21),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275template(34,fn,1,0,"tr",22),e.\u0275\u0275template(35,vn,1,0,"tr",23),e.\u0275\u0275template(36,_n,3,0,"tr",24),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(37,"mat-paginator",25),e.\u0275\u0275elementEnd()()()()()),2&t&&(e.\u0275\u0275advance(9),e.\u0275\u0275property("dataSource",n.dataSource),e.\u0275\u0275advance(25),e.\u0275\u0275property("matHeaderRowDef",n.displayedColumns),e.\u0275\u0275advance(1),e.\u0275\u0275property("matRowDefColumns",n.displayedColumns),e.\u0275\u0275advance(2),e.\u0275\u0275property("pageSizeOptions",n.pageLoading?e.\u0275\u0275pureFunction0(4,hn):n.getPageSizes()))},dependencies:[B.lW,c.a8,c.dk,c.dn,c.n5,W.Hw,M.NW,g.YE,g.nU,m.BZ,m.fO,m.as,m.w1,m.Dz,m.nj,m.ge,m.ev,m.XQ,m.Gk,m.Ee,v.xw,u.uU],styles:['mat-card[_ngcontent-%COMP%]{transition:box-shadow .28s cubic-bezier(.4,0,.2,1);display:block;position:relative;padding-left:0;padding-right:0}  .mat-select-panel[aria-label="Items per page:"] mat-option:last-child:before{content:"All"}  .mat-select-panel[aria-label="Items per page:"] mat-option:last-child .mat-option-text{display:none}.headerbox[_ngcontent-%COMP%]{height:45px;background-color:#28acaf!important;align-items:center}.title[_ngcontent-%COMP%]{font-family:Roboto;font-size:20px;font-weight:500;font-stretch:normal;font-style:normal;letter-spacing:.32px;color:#fff;margin-bottom:0}  tr.mat-header-row{height:45px!important}  .mat-form-field-appearance-outline .mat-form-field-wrapper{margin:.2em 0!important}.example-container[_ngcontent-%COMP%]{overflow-x:auto;display:flex;flex-direction:column}@media only screen and (max-width: 800px) and (orientation: portrait){mat-header-row[_ngcontent-%COMP%], mat-row[_ngcontent-%COMP%]{width:150%}}table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:2px 10px}.table-pad[_ngcontent-%COMP%]{padding-left:15px;padding-right:15px}']}),a})();var P=f(80574),X=f(8277),S=f(3238),xn=f(92340),yn=f(15439),Q=f(54641),le=f(58493),T=f(99602),j=f(84385);const Cn=["table"];function En(a,o){if(1&a&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"mat-option",64),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd()),2&a){const t=o.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275property("value",t.empid),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate2("",t.empname+" ","-"," "+t.employee_code,"")}}function In(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"mat-form-field",62)(1,"mat-label"),e.\u0275\u0275text(2,"Employee Name and ID"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"mat-select",63)(4,"mat-option",21),e.\u0275\u0275text(5," All "),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(6,En,3,3,"ng-container",22),e.\u0275\u0275elementEnd()()),2&a){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(6),e.\u0275\u0275property("ngForOf",t.employeeDetails)}}function Ln(a,o){if(1&a){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",18)(1,"mat-form-field",6)(2,"mat-label"),e.\u0275\u0275text(3,"From Date"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"input",65),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const l=e.\u0275\u0275reference(7);return e.\u0275\u0275resetView(l.open())}),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(5,"mat-datepicker-toggle",66)(6,"mat-datepicker",null,67),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"mat-form-field",6)(9,"mat-label"),e.\u0275\u0275text(10,"To Date"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(11,"input",68),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const l=e.\u0275\u0275reference(14);return e.\u0275\u0275resetView(l.open())}),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(12,"mat-datepicker-toggle",66)(13,"mat-datepicker",null,69),e.\u0275\u0275elementEnd()()}if(2&a){const t=e.\u0275\u0275reference(7),n=e.\u0275\u0275reference(14),l=e.\u0275\u0275nextContext();e.\u0275\u0275advance(4),e.\u0275\u0275property("matDatepicker",t),e.\u0275\u0275advance(1),e.\u0275\u0275property("for",t),e.\u0275\u0275advance(6),e.\u0275\u0275property("matDatepicker",n)("min",l.minFromDate),e.\u0275\u0275advance(1),e.\u0275\u0275property("for",n)}}function Sn(a,o){if(1&a&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"mat-option",64),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd()),2&a){const t=o.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275property("value",t.id),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(t.leavename)}}function Dn(a,o){if(1&a&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"mat-option",64),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd()),2&a){const t=o.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275property("value",t.id),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(t.designation)}}function bn(a,o){if(1&a){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",70)(1,"div",71)(2,"a",72)(3,"img",73),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const l=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(l.exportPDF())}),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(4,"span",74),e.\u0275\u0275text(5," | "),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"a",75)(7,"img",76),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const l=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(l.exportAsXLSX())}),e.\u0275\u0275elementEnd()()()()}}function Mn(a,o){1&a&&(e.\u0275\u0275elementStart(0,"th",77),e.\u0275\u0275text(1,"S.No"),e.\u0275\u0275elementEnd())}function Fn(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"td",78),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&a){const t=o.index,n=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",t+1+n.paginator.pageIndex*n.paginator.pageSize," ")}}function Rn(a,o){1&a&&(e.\u0275\u0275elementStart(0,"th",79),e.\u0275\u0275text(1," Name "),e.\u0275\u0275elementEnd())}function wn(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"td",78)(1,"span"),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd()()),2&a){const t=o.$implicit;e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1("",t.employee_name," ")}}function Tn(a,o){1&a&&(e.\u0275\u0275elementStart(0,"th",80),e.\u0275\u0275text(1," Emp ID "),e.\u0275\u0275elementEnd())}function An(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"td",78)(1,"span"),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd()()),2&a){const t=o.$implicit;e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1("",t.employee_code," ")}}function On(a,o){1&a&&(e.\u0275\u0275elementStart(0,"th",80),e.\u0275\u0275text(1," Leave Type "),e.\u0275\u0275elementEnd())}function Pn(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"td",78)(1,"span"),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd()()),2&a){const t=o.$implicit;e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1("",t.leavetype," ")}}function Vn(a,o){1&a&&(e.\u0275\u0275elementStart(0,"th",79),e.\u0275\u0275text(1,"Designation "),e.\u0275\u0275elementEnd())}function Nn(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"td",78)(1,"span"),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd()()),2&a){const t=o.$implicit;e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1("",t.designation," ")}}function qn(a,o){1&a&&(e.\u0275\u0275elementStart(0,"th",80),e.\u0275\u0275text(1," Applied On "),e.\u0275\u0275elementEnd())}function kn(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"td",81)(1,"span"),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"date"),e.\u0275\u0275elementEnd()()),2&a){const t=o.$implicit;e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1("",e.\u0275\u0275pipeBind2(3,1,t.appliedon,"dd-MM-yyyy")," ")}}function Hn(a,o){1&a&&(e.\u0275\u0275elementStart(0,"th",77),e.\u0275\u0275text(1," From"),e.\u0275\u0275elementEnd())}function Un(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"td",81)(1,"span"),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"date"),e.\u0275\u0275elementEnd()()),2&a){const t=o.$implicit;e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1("",e.\u0275\u0275pipeBind2(3,1,t.fromdate,"dd-MM-yyyy")," ")}}function Bn(a,o){1&a&&(e.\u0275\u0275elementStart(0,"th",77),e.\u0275\u0275text(1," To "),e.\u0275\u0275elementEnd())}function Yn(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"td",81)(1,"span"),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"date"),e.\u0275\u0275elementEnd()()),2&a){const t=o.$implicit;e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1("",e.\u0275\u0275pipeBind2(3,1,t.todate,"dd-MM-yyyy")," ")}}function jn(a,o){1&a&&(e.\u0275\u0275elementStart(0,"th",77),e.\u0275\u0275text(1," Days "),e.\u0275\u0275elementEnd())}function zn(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"td",82)(1,"span"),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd()()),2&a){const t=o.$implicit;e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1("",t.leavecount," ")}}function Wn(a,o){1&a&&(e.\u0275\u0275elementStart(0,"th",79),e.\u0275\u0275text(1," Status"),e.\u0275\u0275elementEnd())}function $n(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"td",78)(1,"span"),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd()()),2&a){const t=o.$implicit;e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1("",t.leavestatus," ")}}function Gn(a,o){1&a&&(e.\u0275\u0275elementStart(0,"th",83),e.\u0275\u0275text(1," Approved By "),e.\u0275\u0275elementEnd())}function Qn(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"td",78)(1,"span"),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd()()),2&a){const t=o.$implicit;e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1("",t.approvedby," ")}}function Xn(a,o){1&a&&e.\u0275\u0275element(0,"tr",84)}function Kn(a,o){1&a&&e.\u0275\u0275element(0,"tr",85)}function Jn(a,o){1&a&&(e.\u0275\u0275elementStart(0,"tr",86)(1,"td",87),e.\u0275\u0275text(2,"No data found"),e.\u0275\u0275elementEnd()())}const Zn=function(){return[5,10,20]};Q.vfs=le.I.vfs;const eo=f(77429),to={parse:{dateInput:"LL"},display:{dateInput:"DD-MM-YYYY",monthYearLabel:"YYYY",dateA11yLabel:"LL",monthYearA11yLabel:"YYYY"}};let ao=(()=>{class a{constructor(t,n,l){this.LM=t,this.formBuilder=n,this.spinner=l,this.displayedColumns=["sno","employeeName","employeeId","leaveType","designation","appliedDate","startDate","toDate","noOfDays","status","approvedBy"],this.dataSource=[],this.pageLoading=!0,this.arrayList=[],this.leaveTypes=[],this.ishide=!0,this.onchangeflag=!1,this.designations=[],this.employeeDetails=[],this.page=1,this.count=0,this.tableSize=5,this.tableSizes=[5,25,50,"All"],this.pipe=new u.uU("en-US"),this.companyDBName=xn.N.dbName,this.isCustom=!1}onTableDataChange(t){this.onchangeflag=!0,this.page=t,this.Searchform()}onTableSizeChange(t){this.tableSize=t.target.value,this.onchangeflag=!0,this.page=1,this.Searchform()}ngOnInit(){this.isCustom=!1,this.searchForm=this.formBuilder.group({leaveType:["All"],leaveStatus:["All"],designation:["All"],fromDate:[new Date],toDate:[new Date],DateFormate:["currentWeek"],employeeId:["All"]}),this.userSession=JSON.parse(sessionStorage.getItem("user")||""),this.getLeaveTypes(),this.getDesignation(),this.getEmployeesForReportingManager();const t=new Date;let n=new Date(t.setDate(t.getDate()-t.getDay())),l=new Date(t.setDate(t.getDate()-t.getDay()));this.searchForm.controls.fromDate.setValue(n),this.searchForm.controls.toDate.setValue(new Date(l.setDate(l.getDate()+6))),this.searchForm.get("DateFormate")?.valueChanges.subscribe(i=>{switch(i){case"currentWeek":var r=new Date(t.setDate(t.getDate()-t.getDay()));this.searchForm.controls.fromDate.setValue(r),this.searchForm.controls.toDate.setValue(new Date(r.setDate(r.getDate()+6))),this.isCustom=!1;break;case"lastWeek":r=new Date(t.setDate(t.getDate()-t.getDay())),this.searchForm.controls.fromDate.setValue(new Date(r.setDate(r.getDate()-7))),this.searchForm.controls.toDate.setValue(new Date(r.setDate(r.getDate()+6))),this.isCustom=!1;break;case"currentMonth":this.searchForm.controls.fromDate.setValue(new Date(t.getFullYear(),t.getMonth(),1)),this.searchForm.controls.toDate.setValue(new Date(t.getFullYear(),t.getMonth()+1,0)),this.isCustom=!1;break;case"lastMonth":this.searchForm.controls.fromDate.setValue(new Date(t.getFullYear(),t.getMonth()-1,1)),this.searchForm.controls.toDate.setValue(new Date(t.getFullYear(),t.getMonth(),0)),this.isCustom=!1;break;case"quaterOne":this.searchForm.controls.fromDate.setValue(new Date("01-01-"+t.getFullYear().toString())),this.searchForm.controls.toDate.setValue(new Date("03-31-"+t.getFullYear().toString())),this.isCustom=!1;break;case"quaterTwo":this.searchForm.controls.fromDate.setValue(new Date("04-01-"+t.getFullYear().toString())),this.searchForm.controls.toDate.setValue(new Date("06-30-"+t.getFullYear().toString())),this.isCustom=!1;break;case"quaterThree":this.searchForm.controls.fromDate.setValue(new Date("07-01-"+t.getFullYear().toString())),this.searchForm.controls.toDate.setValue(new Date("09-30-"+t.getFullYear().toString())),this.isCustom=!1;break;case"quaterFour":this.searchForm.controls.fromDate.setValue(new Date("10-01-"+t.getFullYear().toString())),this.searchForm.controls.toDate.setValue(new Date("12-31-"+t.getFullYear().toString())),this.isCustom=!1;break;case"custom":this.searchForm.controls.fromDate.setValue(""),this.searchForm.controls.toDate.setValue(""),this.isCustom=!0}}),this.searchForm.get("fromDate")?.valueChanges.subscribe(i=>{this.minFromDate=i._d,this.searchForm.controls.toDate.setValue(new Date(this.minFromDate))}),this.searchForm.get("designation")?.valueChanges.subscribe(i=>{this.searchForm.controls.employeeId.setValue("All"),this.getEmployeesForReportingManager()}),this.Searchform()}getLeaveTypes(){this.LM.getMastertable({tableName:"lm_leavesmaster",status:"Active",pageNumber:1,pageSize:1e3,databaseName:this.companyDBName}).subscribe(n=>{n&&n.status&&(this.leaveTypes=n.data)})}getDesignation(){this.LM.getMastertable({tableName:"designationsmaster",status:1,pageNumber:1,pageSize:1e3,databaseName:this.companyDBName}).subscribe(n=>{n&&n.status&&(this.designations=n.data)})}getEmployeesForReportingManager(){this.LM.getEmployeesForReportingManager({managerId:this.userSession.id,departmentId:this.searchForm.controls.designation.value}).subscribe(n=>{n&&n.status&&(this.employeeDetails=n.data,this.ishide=this.employeeDetails.length>0)})}Searchform(){this.arrayList=[],this.dataSource=new m.by(this.arrayList),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort,this.pageLoading=!0,this.getPageSizes(),this.spinner.show();let t={employeeId:this.searchForm.controls.employeeId.value,managerId:this.userSession.id,leaveType:this.searchForm.controls.leaveType.value,leaveStatus:this.searchForm.controls.leaveStatus.value,designation:this.searchForm.controls.designation.value,fromDate:this.pipe.transform(this.searchForm.controls.fromDate.value,"yyyy-MM-dd"),toDate:this.pipe.transform(this.searchForm.controls.toDate.value,"yyyy-MM-dd"),pageNumber:1,pageSize:1e3};this.LM.getEmployeeLeaveDetailedReportForManager(t).subscribe(n=>{this.spinner.hide(),n.status?(this.arrayList=n.data,this.dataSource=new m.by(this.arrayList),this.dataSource.paginator=this.paginator,this.dataSource.paginator.pageSize=5,this.dataSource.sort=this.sort,this.pageLoading=!1):(this.arrayList=[],this.dataSource=new m.by(this.arrayList),this.dataSource.paginator=this.paginator,this.dataSource.paginator.pageSize=5,this.dataSource.sort=this.sort)})}resetform(){this.ngOnInit()}exportAsXLSX(){let t=this.pipe.transform(this.searchForm.controls.fromDate.value,"dd-MM-yyyy"),n=this.pipe.transform(this.searchForm.controls.toDate.value,"dd-MM-yyyy");const l=P.P6.table_to_sheet(document.getElementById("table")),i=P.P6.book_new();P.P6.book_append_sheet(i,l,"Detailed_Report"),P.NC(i,t+"-"+n+"-Detailed_Report.xlsx")}getPageSizes(){var t=[];return this.dataSource.data.length>5&&t.push(5),this.dataSource.data.length>10&&t.push(10),this.dataSource.data.length>20&&t.push(20),t.push(this.dataSource.data.length),t}exportPDF(){let t=this.pipe.transform(this.searchForm.controls.fromDate.value,"dd-MM-yyyy"),n=this.pipe.transform(this.searchForm.controls.toDate.value,"dd-MM-yyyy");var i=eo(this.table.nativeElement.innerHTML);Q.createPdf({info:{title:t+"-"+n+"-Detailed Report",author:"Sreeb tech",subject:"Theme",keywords:"Report"},footer:function(r,d){return{margin:10,columns:[{fontSize:9,text:[{text:"Page "+r.toString()+" of "+d}],alignment:"center"}]}},content:[{text:t+"-"+n+"-Detailed Report\n\n",style:"header",alignment:"center",fontSize:14},i],pageOrientation:"landscape",pageSize:"A4"}).download(t+"-"+n+"-Detailed Report.pdf")}}return a.\u0275fac=function(t){return new(t||a)(e.\u0275\u0275directiveInject(F.t),e.\u0275\u0275directiveInject(s.QS),e.\u0275\u0275directiveInject(b.t2))},a.\u0275cmp=e.\u0275\u0275defineComponent({type:a,selectors:[["app-detailed-report-for-manager"]],viewQuery:function(t,n){if(1&t&&(e.\u0275\u0275viewQuery(Cn,5),e.\u0275\u0275viewQuery(M.NW,5),e.\u0275\u0275viewQuery(g.YE,5)),2&t){let l;e.\u0275\u0275queryRefresh(l=e.\u0275\u0275loadQuery())&&(n.table=l.first),e.\u0275\u0275queryRefresh(l=e.\u0275\u0275loadQuery())&&(n.paginator=l.first),e.\u0275\u0275queryRefresh(l=e.\u0275\u0275loadQuery())&&(n.sort=l.first)}},features:[e.\u0275\u0275ProvidersFeature([{provide:S._A,useClass:X.t7,deps:[S.Ad]},{provide:S.sG,useValue:to}])],decls:110,vars:11,consts:[["fxLayout","column",1,"first-col"],[1,"headerbox"],[1,"title"],[1,"tableP",3,"formGroup"],["fxLayout","row","fxLayout.xs","column"],["fxFlex","32","fxFlex.lt-lg","50","class","mx-2 my-2","appearance","outline","style","padding-right: 3px;",4,"ngIf"],["fxFlex","32","fxFlex.lt-lg","50","appearance","outline",1,"mx-2","my-2"],["formControlName","DateFormate","required",""],["value","currentWeek"],["value","lastWeek"],["value","currentMonth"],["value","lastMonth"],["value","quaterOne"],["value","quaterTwo"],["value","quaterThree"],["value","quaterFour"],["value","custom"],["fxLayout","row","fxLayout.lt-lg","row wrap","fxLayout.xs","column",4,"ngIf"],["fxLayout","row","fxLayout.lt-lg","row wrap","fxLayout.xs","column"],["fxFlex","","appearance","outline",1,"mx-2","my-2"],["formControlName","leaveType"],["value","All"],[4,"ngFor","ngForOf"],["formControlName","leaveStatus"],["value","Approved"],["value","Submitted"],["value","Rejected"],["value","Cancel"],["value","Deleted"],["fxFlex","","fxFlex.lt-lg","48","appearance","outline",1,"mx-2","my-2"],["formControlName","designation"],["fxLayout","row",1,"showLine",2,"justify-content","center"],[1,"btn","btn-primary","mr-2","mb-2",3,"click"],[1,"btn","btn-danger","mr-2","mb-2",3,"click"],["fxLayout","row xs-column","fxLayoutAlign","end  center",4,"ngIf"],[1,"tablePadding"],[1,"mat-elevation-z1","example-container"],["id","table"],["table",""],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","sno"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","employeeName"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["matColumnDef","employeeId"],["mat-header-cell","","style","white-space: nowrap;",4,"matHeaderCellDef"],["matColumnDef","leaveType"],["matColumnDef","designation"],["matColumnDef","appliedDate"],["mat-cell","","style","white-space: nowrap;",4,"matCellDef"],["matColumnDef","startDate"],["matColumnDef","toDate"],["matColumnDef","noOfDays"],["mat-cell","","style","text-align: center;",4,"matCellDef"],["matColumnDef","status"],["matColumnDef","approvedBy"],["mat-header-cell","","mat-sort-header","","style","white-space: nowrap;",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],[3,"pageSizeOptions"],["fxFlex","32","fxFlex.lt-lg","50","appearance","outline",1,"mx-2","my-2",2,"padding-right","3px"],["fxFlex.xs","100","formControlName","employeeId"],[3,"value"],["matInput","","readonly","","placeholder","From Date","formControlName","fromDate",3,"matDatepicker","click"],["matSuffix","",1,"datepicker",3,"for"],["fromDate",""],["matInput","","readonly","","placeholder","To Date","formControlName","toDate",3,"matDatepicker","min","click"],["toDate",""],["fxLayout","row xs-column","fxLayoutAlign","end  center"],[2,"padding-right","25px"],["title","PDF"],["src","./assets/images/icons/pdf.png","width","20px","height","20px",3,"click"],[1,"exlprint"],["title","Excel"],["src","./assets/images/icons/excel.png",3,"click"],["mat-header-cell",""],["mat-cell",""],["mat-header-cell","","mat-sort-header",""],["mat-header-cell","",2,"white-space","nowrap"],["mat-cell","",2,"white-space","nowrap"],["mat-cell","",2,"text-align","center"],["mat-header-cell","","mat-sort-header","",2,"white-space","nowrap"],["mat-header-row",""],["mat-row",""],[1,"mat-row"],["colspan","10",1,"mat-cell",2,"text-align","center"]],template:function(t,n){1&t&&(e.\u0275\u0275elementStart(0,"div",0)(1,"mat-card")(2,"mat-card-header",1)(3,"mat-card-title",2),e.\u0275\u0275text(4," Detailed Report "),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(5,"div",3)(6,"div",4),e.\u0275\u0275template(7,In,7,1,"mat-form-field",5),e.\u0275\u0275elementStart(8,"mat-form-field",6)(9,"mat-select",7)(10,"mat-option",8),e.\u0275\u0275text(11," Current Week"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(12,"mat-option",9),e.\u0275\u0275text(13,"Last Week"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(14,"mat-option",10),e.\u0275\u0275text(15," Current Month"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(16,"mat-option",11),e.\u0275\u0275text(17," Last Month"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(18,"mat-option",12),e.\u0275\u0275text(19," Quarter 1(Jan-Mar)"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(20,"mat-option",13),e.\u0275\u0275text(21," Quarter 2(Apr-Jun)"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(22,"mat-option",14),e.\u0275\u0275text(23," Quarter 3(Jul-Sep)"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(24,"mat-option",15),e.\u0275\u0275text(25," Quarter 4(Oct-Dec)"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(26,"mat-option",16),e.\u0275\u0275text(27," Custom "),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275template(28,Ln,15,5,"div",17),e.\u0275\u0275elementStart(29,"div",18)(30,"mat-form-field",19)(31,"mat-label"),e.\u0275\u0275text(32,"Leave Type"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(33,"mat-select",20)(34,"mat-option",21),e.\u0275\u0275text(35," All "),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(36,Sn,3,2,"ng-container",22),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(37,"mat-form-field",19)(38,"mat-label"),e.\u0275\u0275text(39,"Leave Status"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(40,"mat-select",23)(41,"mat-option",21),e.\u0275\u0275text(42," All"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(43,"mat-option",24),e.\u0275\u0275text(44,"Approved"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(45,"mat-option",25),e.\u0275\u0275text(46," Submitted"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(47,"mat-option",26),e.\u0275\u0275text(48," Rejected"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(49,"mat-option",27),e.\u0275\u0275text(50," Cancelled"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(51,"mat-option",28),e.\u0275\u0275text(52," Deleted"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(53,"mat-form-field",29)(54,"mat-label"),e.\u0275\u0275text(55,"Designations"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(56,"mat-select",30)(57,"mat-option",21),e.\u0275\u0275text(58," All "),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(59,Dn,3,2,"ng-container",22),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(60,"div",31)(61,"span")(62,"button",32),e.\u0275\u0275listener("click",function(){return n.Searchform()}),e.\u0275\u0275text(63," Search "),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(64,"button",33),e.\u0275\u0275listener("click",function(){return n.resetform()}),e.\u0275\u0275elementStart(65,"span"),e.\u0275\u0275text(66,"Clear"),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275template(67,bn,8,0,"div",34),e.\u0275\u0275elementStart(68,"div",35)(69,"div",36)(70,"div",37,38)(72,"table",39),e.\u0275\u0275elementContainerStart(73,40),e.\u0275\u0275template(74,Mn,2,0,"th",41),e.\u0275\u0275template(75,Fn,2,1,"td",42),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(76,43),e.\u0275\u0275template(77,Rn,2,0,"th",44),e.\u0275\u0275template(78,wn,3,1,"td",42),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(79,45),e.\u0275\u0275template(80,Tn,2,0,"th",46),e.\u0275\u0275template(81,An,3,1,"td",42),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(82,47),e.\u0275\u0275template(83,On,2,0,"th",46),e.\u0275\u0275template(84,Pn,3,1,"td",42),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(85,48),e.\u0275\u0275template(86,Vn,2,0,"th",44),e.\u0275\u0275template(87,Nn,3,1,"td",42),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(88,49),e.\u0275\u0275template(89,qn,2,0,"th",46),e.\u0275\u0275template(90,kn,4,4,"td",50),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(91,51),e.\u0275\u0275template(92,Hn,2,0,"th",41),e.\u0275\u0275template(93,Un,4,4,"td",50),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(94,52),e.\u0275\u0275template(95,Bn,2,0,"th",41),e.\u0275\u0275template(96,Yn,4,4,"td",50),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(97,53),e.\u0275\u0275template(98,jn,2,0,"th",41),e.\u0275\u0275template(99,zn,3,1,"td",54),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(100,55),e.\u0275\u0275template(101,Wn,2,0,"th",44),e.\u0275\u0275template(102,$n,3,1,"td",42),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(103,56),e.\u0275\u0275template(104,Gn,2,0,"th",57),e.\u0275\u0275template(105,Qn,3,1,"td",42),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275template(106,Xn,1,0,"tr",58),e.\u0275\u0275template(107,Kn,1,0,"tr",59),e.\u0275\u0275template(108,Jn,3,0,"tr",60),e.\u0275\u0275elementEnd()(),e.\u0275\u0275element(109,"mat-paginator",61),e.\u0275\u0275elementEnd()()()()),2&t&&(e.\u0275\u0275advance(5),e.\u0275\u0275property("formGroup",n.searchForm),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",n.ishide),e.\u0275\u0275advance(21),e.\u0275\u0275property("ngIf",n.isCustom),e.\u0275\u0275advance(8),e.\u0275\u0275property("ngForOf",n.leaveTypes),e.\u0275\u0275advance(23),e.\u0275\u0275property("ngForOf",n.designations),e.\u0275\u0275advance(8),e.\u0275\u0275property("ngIf",n.arrayList.length>0),e.\u0275\u0275advance(5),e.\u0275\u0275property("dataSource",n.dataSource),e.\u0275\u0275advance(34),e.\u0275\u0275property("matHeaderRowDef",n.displayedColumns),e.\u0275\u0275advance(1),e.\u0275\u0275property("matRowDefColumns",n.displayedColumns),e.\u0275\u0275advance(2),e.\u0275\u0275property("pageSizeOptions",n.pageLoading?e.\u0275\u0275pureFunction0(10,Zn):n.getPageSizes()))},dependencies:[u.sg,u.O5,S.ey,c.a8,c.dk,c.n5,T.Mq,T.hl,T.nW,h.KE,h.hX,h.R9,V.Nt,M.NW,j.gD,g.YE,g.nU,m.BZ,m.fO,m.as,m.w1,m.Dz,m.nj,m.ge,m.ev,m.XQ,m.Gk,m.Ee,s.Fj,s.JJ,s.JL,s.Q7,s.sg,s.u,v.xw,v.Wh,v.yH,u.uU],styles:['.space[_ngcontent-%COMP%]{width:10%;white-space:nowrap;margin-top:10px;font-family:Roboto;font-size:16px;font-weight:400;font-stretch:normal;font-style:normal;letter-spacing:.32px;color:#000}.spacetd[_ngcontent-%COMP%]{margin-top:10px;font-family:Roboto;font-size:14px;font-weight:400;font-stretch:normal;font-style:normal;letter-spacing:.32px;color:#000}  .cdk-overlay-container{z-index:1050!important}mat-card[_ngcontent-%COMP%]{transition:box-shadow .28s cubic-bezier(.4,0,.2,1);display:block;position:relative;padding-left:0;padding-right:0}.tableP[_ngcontent-%COMP%]{padding:1%}.tablePadding[_ngcontent-%COMP%]{padding-left:2%;padding-right:2%;padding-top:2%}  .mat-select-panel[aria-label="Items per page:"] mat-option:last-child:before{content:"All";position:relative;display:block}  .mat-select-panel[aria-label="Items per page:"] mat-option:last-child .mat-option-text{display:none}.headerbox[_ngcontent-%COMP%]{height:45px;background-color:#28acaf!important;align-items:center}.title[_ngcontent-%COMP%]{font-family:Roboto;font-size:20px;font-weight:500;font-stretch:normal;font-style:normal;letter-spacing:.32px;color:#fff;margin-bottom:0}  tr.mat-header-row{height:45px!important}  .mat-form-field-appearance-outline .mat-form-field-wrapper{margin:.2em 0!important}.example-container[_ngcontent-%COMP%]{overflow-x:auto}@media only screen and (max-width: 768px) and (orientation: portrait){mat-header-row[_ngcontent-%COMP%], mat-row[_ngcontent-%COMP%]{width:150%}}table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:2px 10px}']}),a})();var no=f(69172);const oo=["table"];function lo(a,o){if(1&a&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"mat-option",22),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd()),2&a){const t=o.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275property("value",t.id),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(t.designation)}}function io(a,o){if(1&a&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"mat-option",22),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd()),2&a){const t=o.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275property("value",t.empid),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate2("",t.empname+" ","-"," "+t.employee_code,"")}}function ro(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"mat-form-field",6)(1,"mat-label"),e.\u0275\u0275text(2,"Employee Name and ID"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"mat-select",23)(4,"mat-option",8),e.\u0275\u0275text(5," All "),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(6,io,3,3,"ng-container",9),e.\u0275\u0275elementEnd()()),2&a){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(6),e.\u0275\u0275property("ngForOf",t.employeeDetails)}}function so(a,o){if(1&a&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"mat-option",22),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd()),2&a){const t=o.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275property("value",t.year_value),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(t.display_value)}}function mo(a,o){if(1&a){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",24)(1,"div")(2,"span",25),e.\u0275\u0275text(3," | "),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"a",26)(5,"img",27),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const l=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(l.exportPDF())}),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(6,"span",25),e.\u0275\u0275text(7," | "),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"a",28)(9,"img",29),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const l=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(l.exportAsXLSX())}),e.\u0275\u0275elementEnd()()()()}}function po(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"tr")(1,"th",30),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"th",30),e.\u0275\u0275text(4),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"th",30),e.\u0275\u0275text(6),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(7,"th",30),e.\u0275\u0275text(8),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"th",30),e.\u0275\u0275text(10),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(11,"th",30),e.\u0275\u0275text(12),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(13,"th",30),e.\u0275\u0275text(14),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(15,"th",30),e.\u0275\u0275text(16),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(17,"th",30),e.\u0275\u0275text(18),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(19,"th",30),e.\u0275\u0275text(20),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(21,"th",30),e.\u0275\u0275text(22),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(23,"th",30),e.\u0275\u0275text(24),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(25,"th",30),e.\u0275\u0275text(26),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(27,"th",30),e.\u0275\u0275text(28),e.\u0275\u0275elementEnd()()),2&a){const t=o.$implicit;e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t.column1),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t.column2),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t.column3),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t.column4),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t.column5),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t.column6),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t.column7),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t.column8),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t.column9),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t.column10),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t.column11),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t.column12),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t.column13),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t.column14)}}function co(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"tr")(1,"td",31),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"td",31),e.\u0275\u0275text(4),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"td",31),e.\u0275\u0275text(6),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(7,"td",31),e.\u0275\u0275text(8),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"td",31),e.\u0275\u0275text(10),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(11,"td",31),e.\u0275\u0275text(12),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(13,"td",31),e.\u0275\u0275text(14),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(15,"td",31),e.\u0275\u0275text(16),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(17,"td",31),e.\u0275\u0275text(18),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(19,"td",31),e.\u0275\u0275text(20),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(21,"td",31),e.\u0275\u0275text(22),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(23,"td",31),e.\u0275\u0275text(24),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(25,"td",31),e.\u0275\u0275text(26),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(27,"td",31),e.\u0275\u0275text(28),e.\u0275\u0275elementEnd()()),2&a){const t=o.$implicit;e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t.column1),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t.column2),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t.column3),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t.column4),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t.column5),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t.column6),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t.column7),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t.column8),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t.column9),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t.column10),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t.column11),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t.column12),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t.column13),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t.column14)}}function uo(a,o){1&a&&(e.\u0275\u0275elementStart(0,"tr")(1,"td",32),e.\u0275\u0275text(2,"No Data Found"),e.\u0275\u0275elementEnd()())}Q.vfs=le.I.vfs;const fo=f(77429);let vo=(()=>{class a{constructor(t,n,l,i){this.LM=t,this.formBuilder=n,this.spinner=l,this.excelService=i,this.designations=[],this.data=[],this.datatwo=[],this.departments=[],this.employeeDetails=[],this.userSession=[],this.summaryReportTableHeadings=[],this.summaryReports=[],this.calengerYearsdetails=[],this.today=new Date,this.ishide=!0,this.designationForPdf="All",this.employeeNameForPdf="All",this.userSession=JSON.parse(sessionStorage.getItem("user")||""),this.companyDBName=sessionStorage.getItem("companyName")?sessionStorage.getItem("companyName"):null,(new Date).getFullYear(),(new Date).getMonth(),this.adddate=(new Date).getMonth()<4?Number((new Date).getFullYear())-1:(new Date).getFullYear()}ngOnInit(){this.searchForm=this.formBuilder.group({employeeId:["All"],designationId:["All"],calenderYear:[this.adddate]}),this.getDesignation(),this.getDepartments(),this.getEmployeesForReportingManager(),this.calengerYears(),this.searchForm.get("designationId")?.valueChanges.subscribe(t=>{if(this.searchForm.controls.employeeId.setValue("All"),this.getEmployeesForReportingManager(),"All"!=this.searchForm.controls.designationId.value)for(let n=0;n<this.designations.length;n++)this.searchForm.controls.designationId.value===this.designations[n].id&&(this.designationForPdf=this.designations[n].designation);else this.designationForPdf="All"}),this.searchForm.get("employeeId")?.valueChanges.subscribe(t=>{if("All"!=this.searchForm.controls.employeeId.value)for(let n=0;n<this.employeeDetails.length;n++)this.searchForm.controls.employeeId.value===this.employeeDetails[n].empid&&(this.employeeNameForPdf=this.employeeDetails[n].empname+"-"+this.employeeDetails[n].employee_code);else this.employeeNameForPdf="All"}),this.Searchform()}getDesignation(){this.LM.getMastertable({tableName:"designationsmaster",status:1,pageNumber:1,pageSize:1e3,databaseName:this.companyDBName}).subscribe(n=>{n&&n.status&&(this.designations=n.data)})}getDepartments(){this.LM.getMastertable({tableName:"departmentsmaster",status:1,pageNumber:1,pageSize:1e3,databaseName:this.companyDBName}).subscribe(n=>{n&&n.status&&(this.departments=n.data)})}getEmployeesForReportingManager(){this.LM.getEmployeesForReportingManager({managerId:this.userSession.id,departmentId:this.searchForm.controls.designationId.value}).subscribe(n=>{n&&n.status&&(this.employeeDetails=n.data,this.ishide=this.employeeDetails.length>0)})}Searchform(){this.spinner.show(),this.LM.getSummaryReportForManager({managerId:this.userSession.id,employeeId:this.searchForm.controls.employeeId.value,designationId:this.searchForm.controls.designationId.value,departmentId:"All",calenderYear:this.searchForm.controls.calenderYear.value}).subscribe(n=>{if(this.spinner.hide(),this.summaryReportTableHeadings=[],this.summaryReports=[],this.datatwo=[],this.data=[],n&&n.status){for(let r=0;r<n.data.length;r++)this.data=Object.keys(n.data[r]),this.datatwo=Object.values(n.data[r]),this.summaryReports.push({column1:this.datatwo[0],column2:this.datatwo[1],column3:this.datatwo[2],column4:this.datatwo[3],column5:this.datatwo[4],column6:this.datatwo[5],column7:this.datatwo[6],column8:this.datatwo[7],column9:this.datatwo[8],column10:this.datatwo[9],column11:this.datatwo[10],column12:this.datatwo[11],column13:this.datatwo[12],column14:this.datatwo[13]});var i={column1:this.data[0].trim(),column2:this.data[1],column3:this.data[2],column4:this.data[3],column5:this.data[4],column6:this.data[5],column7:this.data[6],column8:this.data[7],column9:this.data[8],column10:this.data[9],column11:this.data[10],column12:this.data[11],column13:this.data[12],column14:this.data[13]};this.summaryReportTableHeadings.push(i)}})}resetform(){this.searchForm=this.formBuilder.group({employeeId:["All"],designationId:["All"],calenderYear:[(new Date).getFullYear()]}),this.Searchform()}calengerYears(){this.LM.getYearsForReport().subscribe(t=>{t&&t.status&&(this.calengerYearsdetails=t.data)})}exportAsXLSX(){let t=this.searchForm.controls.calenderYear.value;const n=P.P6.table_to_sheet(document.getElementById("table")),l=P.P6.book_new();P.P6.book_append_sheet(l,n,"Summary_Report"),P.NC(l,t+"-Summary_Report.xlsx")}exportPDF(){let t=this.searchForm.controls.calenderYear.value;var l=fo(this.table.nativeElement.innerHTML);Q.createPdf({info:{title:t+"-Summary Report",author:"Sreeb tech",subject:"Theme",keywords:"Report"},footer:function(i,r){return{margin:10,columns:[{fontSize:9,text:[{text:"Page "+i.toString()+" of "+r}],alignment:"center"}]}},content:[{text:t+"-Summary Report\n\n",style:"header",alignment:"center",fontSize:14},l],pageOrientation:"landscape",pageSize:"A4"}).download(t+"-Summary Report.pdf")}}return a.\u0275fac=function(t){return new(t||a)(e.\u0275\u0275directiveInject(F.t),e.\u0275\u0275directiveInject(s.QS),e.\u0275\u0275directiveInject(b.t2),e.\u0275\u0275directiveInject(no.r))},a.\u0275cmp=e.\u0275\u0275defineComponent({type:a,selectors:[["app-summary-report-for-manager"]],viewQuery:function(t,n){if(1&t&&e.\u0275\u0275viewQuery(oo,5),2&t){let l;e.\u0275\u0275queryRefresh(l=e.\u0275\u0275loadQuery())&&(n.table=l.first)}},decls:38,vars:8,consts:[["fxLayout","column",1,"first-col"],[2,"flex-flow","nowrap"],[1,"headerbox"],[1,"title"],[3,"formGroup"],["fxLayout","row","fxLayout.lt-lg","row wrap","fxLayout.xs","column",1,"dev-Pad"],["fxFlex","","fxFlex.xs","100","appearance","outline",1,"mx-2","my-2"],["formControlName","designationId","required",""],["value","All"],[4,"ngFor","ngForOf"],["fxFlex","","fxFlex.xs","100","class","mx-2 my-2","appearance","outline",4,"ngIf"],["fxFlex","","fxFlex.xs","100","fxFlex.lt-lg","48","appearance","outline",1,"mx-2","my-2"],["formControlName","calenderYear","required",""],["fxLayout","row",1,"showLine",2,"justify-content","center"],[1,"btn","btn-primary","mr-2","mb-2",3,"click"],[1,"btn","btn-danger","mr-2","mb-2",3,"click"],["style","margin-bottom: 10px;padding-right: 19px","fxLayout","row xs-column","fxLayoutAlign","end  center",4,"ngIf"],[1,"table-pad"],["id","table",1,"example-container"],["table",""],[1,"table"],[4,"ngIf"],[3,"value"],["formControlName","employeeId","required",""],["fxLayout","row xs-column","fxLayoutAlign","end  center",2,"margin-bottom","10px","padding-right","19px"],[1,"exlprint"],["title","PDF"],["src","./assets/images/icons/pdf.png","width","20px","height","20px",3,"click"],["title","Excel"],["src","./assets/images/icons/excel.png",3,"click"],[1,"space"],[1,"spacetd"],["colspan","10",2,"text-align","center"]],template:function(t,n){1&t&&(e.\u0275\u0275elementStart(0,"div",0)(1,"mat-card")(2,"div",1)(3,"mat-card-header",2)(4,"mat-card-title",3),e.\u0275\u0275text(5," Summary Report"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(6,"div",4)(7,"div",5)(8,"mat-form-field",6)(9,"mat-label"),e.\u0275\u0275text(10,"Designations"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(11,"mat-select",7)(12,"mat-option",8),e.\u0275\u0275text(13," All "),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(14,lo,3,2,"ng-container",9),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(15,ro,7,1,"mat-form-field",10),e.\u0275\u0275elementStart(16,"mat-form-field",11)(17,"mat-label"),e.\u0275\u0275text(18,"Years"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(19,"mat-select",12),e.\u0275\u0275template(20,so,3,2,"ng-container",9),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(21,"div",13)(22,"span")(23,"button",14),e.\u0275\u0275listener("click",function(){return n.Searchform()}),e.\u0275\u0275text(24," Search "),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(25,"button",15),e.\u0275\u0275listener("click",function(){return n.resetform()}),e.\u0275\u0275elementStart(26,"span"),e.\u0275\u0275text(27,"Clear"),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275template(28,mo,10,0,"div",16),e.\u0275\u0275elementStart(29,"div",17)(30,"div",18,19)(32,"table",20)(33,"thead"),e.\u0275\u0275template(34,po,29,14,"tr",9),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(35,"tbody"),e.\u0275\u0275template(36,co,29,14,"tr",9),e.\u0275\u0275template(37,uo,3,0,"tr",21),e.\u0275\u0275elementEnd()()()()()()),2&t&&(e.\u0275\u0275advance(6),e.\u0275\u0275property("formGroup",n.searchForm),e.\u0275\u0275advance(8),e.\u0275\u0275property("ngForOf",n.designations),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.ishide),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngForOf",n.calengerYearsdetails),e.\u0275\u0275advance(8),e.\u0275\u0275property("ngIf",n.summaryReports.length>0),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngForOf",n.summaryReportTableHeadings),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",n.summaryReports),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.summaryReports&&0===n.summaryReports.length))},dependencies:[u.sg,u.O5,S.ey,c.a8,c.dk,c.n5,h.KE,h.hX,j.gD,s.JJ,s.JL,s.Q7,s.sg,s.u,v.xw,v.Wh,v.yH],styles:['.space[_ngcontent-%COMP%]{width:7%;white-space:nowrap;margin-top:10px;font-family:Roboto;font-size:15px;font-weight:400;font-stretch:normal;font-style:normal;letter-spacing:.32px;color:#fff}.spacetd[_ngcontent-%COMP%]{width:7%;font-family:Roboto;font-size:14px;font-weight:400;font-stretch:normal;font-style:normal;letter-spacing:.32px;color:#000}table[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{border:1px solid}thead[_ngcontent-%COMP%]{background-color:#28acaf}  .table{color:#c3c3c3!important}  .cdk-overlay-container{z-index:1050!important}mat-card[_ngcontent-%COMP%]{transition:box-shadow .28s cubic-bezier(.4,0,.2,1);display:block;position:relative;padding-left:0;padding-right:0}.section[_ngcontent-%COMP%]{padding-top:1%;padding-left:1%;margin-bottom:2px;font-size:17px;color:#000;text-align:left;line-height:28px}.truncate-cell[_ngcontent-%COMP%]{max-width:120px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}  .mat-select-panel[aria-label="Items per page:"] mat-option:last-child:before{content:"All";position:relative;display:block}  .mat-select-panel[aria-label="Items per page:"] mat-option:last-child .mat-option-text{display:none}.headerbox[_ngcontent-%COMP%]{height:45px;background-color:#28acaf!important;align-items:center}.title[_ngcontent-%COMP%]{font-family:Roboto;font-size:20px;font-weight:500;font-stretch:normal;font-style:normal;letter-spacing:.32px;color:#fff;margin-bottom:0} tr .mat-header-row{height:45px!important}  .mat-form-field-appearance-outline .mat-form-field-wrapper{margin:.2em 0!important}  .table-striped tbody tr:nth-of-type(odd){background-color:#ffffff0d!important}.example-container[_ngcontent-%COMP%]{overflow-x:auto}.dev-Pad[_ngcontent-%COMP%]{padding-top:1%;padding-left:8px;padding-right:8px}.table-pad[_ngcontent-%COMP%]{padding-left:15px;padding-right:15px}']}),a})();var L=f(1015),ie=f(54120);function _o(a,o){1&a&&(e.\u0275\u0275elementStart(0,"th",26),e.\u0275\u0275text(1," S.No"),e.\u0275\u0275elementEnd())}function ho(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"td",27),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&a){const t=o.index,n=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",t+1+n.paginator.pageIndex*n.paginator.pageSize," ")}}function go(a,o){1&a&&(e.\u0275\u0275elementStart(0,"th",28),e.\u0275\u0275text(1," Applied On "),e.\u0275\u0275elementEnd())}function xo(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"td",29)(1,"span"),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"date"),e.\u0275\u0275elementEnd()()),2&a){const t=o.$implicit;e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind2(3,1,t.appliedon,"dd-MM-yyyy"))}}function yo(a,o){1&a&&(e.\u0275\u0275elementStart(0,"th",30),e.\u0275\u0275text(1," Leave Type "),e.\u0275\u0275elementEnd())}function Co(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"td",29)(1,"span"),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd()()),2&a){const t=o.$implicit;e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t.leavetype)}}function Eo(a,o){1&a&&(e.\u0275\u0275elementStart(0,"th",26),e.\u0275\u0275text(1," From"),e.\u0275\u0275elementEnd())}function Io(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"td",29)(1,"span"),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"date"),e.\u0275\u0275elementEnd()()),2&a){const t=o.$implicit;e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind2(3,1,t.fromdate,"dd-MM-yyyy"))}}function Lo(a,o){1&a&&(e.\u0275\u0275elementStart(0,"th",26),e.\u0275\u0275text(1," To"),e.\u0275\u0275elementEnd())}function So(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"td",29)(1,"span"),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"date"),e.\u0275\u0275elementEnd()()),2&a){const t=o.$implicit;e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind2(3,1,t.todate,"dd-MM-yyyy"))}}function Do(a,o){1&a&&(e.\u0275\u0275elementStart(0,"th",26),e.\u0275\u0275text(1," Days "),e.\u0275\u0275elementEnd())}function bo(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275text(1),e.\u0275\u0275elementStart(2,"span",32),e.\u0275\u0275text(3),e.\u0275\u0275elementEnd()()),2&a){const t=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1("",t.leavecount," "),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" + ",t.lop_count," ")}}function Mo(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&a){const t=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(t.leavecount)}}function Fo(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275text(1),e.\u0275\u0275elementStart(2,"span",32),e.\u0275\u0275text(3),e.\u0275\u0275elementEnd()()),2&a){const t=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1("",t.leavecount," "),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" + ",t.same_ltype_count," ")}}function Ro(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275text(1),e.\u0275\u0275elementStart(2,"span"),e.\u0275\u0275text(3),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(4),e.\u0275\u0275elementEnd()),2&a){const t=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1("",t.leavecount," + "),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",t.same_ltype_count,""),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" + ",t.lop_count,"")}}function wo(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"td",27),e.\u0275\u0275template(1,bo,4,2,"span",31),e.\u0275\u0275template(2,Mo,2,1,"span",31),e.\u0275\u0275template(3,Fo,4,2,"span",31),e.\u0275\u0275template(4,Ro,5,3,"span",31),e.\u0275\u0275elementEnd()),2&a){const t=o.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==t.same_ltype_count&&null!=t.lop_count),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==t.same_ltype_count&&null==t.lop_count),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null!=t.same_ltype_count&&null==t.lop_count),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null!=t.same_ltype_count&&null!=t.lop_count)}}function To(a,o){1&a&&(e.\u0275\u0275elementStart(0,"th",33),e.\u0275\u0275text(1," Status "),e.\u0275\u0275elementEnd())}function Ao(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"td",27)(1,"span"),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd()()),2&a){const t=o.$implicit;e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t.leavestatus)}}function Oo(a,o){1&a&&e.\u0275\u0275element(0,"th",26)}function Po(a,o){if(1&a){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",39),e.\u0275\u0275listener("keyup.enter",function(){e.\u0275\u0275restoreView(t);const l=e.\u0275\u0275nextContext().$implicit,i=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(i.delete(l))}),e.\u0275\u0275elementStart(1,"mat-icon",40),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const l=e.\u0275\u0275nextContext().$implicit,i=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(i.delete(l))}),e.\u0275\u0275text(2,"delete"),e.\u0275\u0275elementEnd()()}}function Vo(a,o){if(1&a){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",41),e.\u0275\u0275listener("keyup.enter",function(){e.\u0275\u0275restoreView(t);const l=e.\u0275\u0275nextContext().$implicit,i=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(i.edit(l))}),e.\u0275\u0275elementStart(1,"mat-icon",40),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const l=e.\u0275\u0275nextContext().$implicit,i=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(i.edit(l))}),e.\u0275\u0275text(2,"edit"),e.\u0275\u0275elementEnd()()}}function No(a,o){if(1&a){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",42),e.\u0275\u0275listener("keyup.enter",function(){e.\u0275\u0275restoreView(t);const l=e.\u0275\u0275nextContext().$implicit,i=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(i.cancel(l))}),e.\u0275\u0275elementStart(1,"mat-icon",40),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const l=e.\u0275\u0275nextContext().$implicit,i=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(i.cancel(l))}),e.\u0275\u0275text(2,"cancel"),e.\u0275\u0275elementEnd()()}}function qo(a,o){if(1&a){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"td",29),e.\u0275\u0275template(1,Po,3,0,"button",34),e.\u0275\u0275template(2,Vo,3,0,"button",35),e.\u0275\u0275template(3,No,3,0,"button",36),e.\u0275\u0275elementStart(4,"button",37),e.\u0275\u0275listener("keyup.enter",function(){const i=e.\u0275\u0275restoreView(t).$implicit,r=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(r.view(i))}),e.\u0275\u0275elementStart(5,"mat-icon",38),e.\u0275\u0275listener("click",function(){const i=e.\u0275\u0275restoreView(t).$implicit,r=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(r.view(i))}),e.\u0275\u0275text(6,"visibility"),e.\u0275\u0275elementEnd()()()}if(2&a){const t=o.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.deletable),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.editable),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.cancellable)}}function ko(a,o){1&a&&e.\u0275\u0275element(0,"tr",43)}function Ho(a,o){1&a&&e.\u0275\u0275element(0,"tr",44)}function Uo(a,o){1&a&&(e.\u0275\u0275elementStart(0,"tr",45)(1,"td",46),e.\u0275\u0275text(2,"No data found"),e.\u0275\u0275elementEnd()())}const Bo=function(){return[5,10,20]};function Yo(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"div",2)(1,"mat-card")(2,"mat-card-header",3)(3,"mat-card-title",4),e.\u0275\u0275text(4," Leave History "),e.\u0275\u0275elementEnd()(),e.\u0275\u0275element(5,"br"),e.\u0275\u0275elementStart(6,"div",5)(7,"div",6)(8,"table",7),e.\u0275\u0275elementContainerStart(9,8),e.\u0275\u0275template(10,_o,2,0,"th",9),e.\u0275\u0275template(11,ho,2,1,"td",10),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(12,11),e.\u0275\u0275template(13,go,2,0,"th",12),e.\u0275\u0275template(14,xo,4,4,"td",13),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(15,14),e.\u0275\u0275template(16,yo,2,0,"th",15),e.\u0275\u0275template(17,Co,3,1,"td",13),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(18,16),e.\u0275\u0275template(19,Eo,2,0,"th",9),e.\u0275\u0275template(20,Io,4,4,"td",13),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(21,17),e.\u0275\u0275template(22,Lo,2,0,"th",9),e.\u0275\u0275template(23,So,4,4,"td",13),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(24,18),e.\u0275\u0275template(25,Do,2,0,"th",9),e.\u0275\u0275template(26,wo,5,4,"td",10),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(27,19),e.\u0275\u0275template(28,To,2,0,"th",20),e.\u0275\u0275template(29,Ao,3,1,"td",10),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(30,21),e.\u0275\u0275template(31,Oo,1,0,"th",9),e.\u0275\u0275template(32,qo,7,3,"td",13),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275template(33,ko,1,0,"tr",22),e.\u0275\u0275template(34,Ho,1,0,"tr",23),e.\u0275\u0275template(35,Uo,3,0,"tr",24),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(36,"mat-paginator",25),e.\u0275\u0275elementEnd()()()()),2&a){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(8),e.\u0275\u0275property("dataSource",t.dataSource),e.\u0275\u0275advance(25),e.\u0275\u0275property("matHeaderRowDef",t.displayedColumns),e.\u0275\u0275advance(1),e.\u0275\u0275property("matRowDefColumns",t.displayedColumns),e.\u0275\u0275advance(2),e.\u0275\u0275property("pageSizeOptions",t.pageLoading?e.\u0275\u0275pureFunction0(4,Bo):t.getPageSizes())}}function jo(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"mat-form-field",51)(1,"mat-label"),e.\u0275\u0275text(2,"Approved On"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(3,"input",52),e.\u0275\u0275pipe(4,"date"),e.\u0275\u0275elementEnd()),2&a){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(3),e.\u0275\u0275propertyInterpolate("value",e.\u0275\u0275pipeBind2(4,3,t.viewdata.approvedon,"dd-MM-yyyy")),e.\u0275\u0275property("readonly",!0)("readonly",!0)}}function zo(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"mat-form-field",51)(1,"mat-label"),e.\u0275\u0275text(2,"Rejected On"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(3,"input",52),e.\u0275\u0275pipe(4,"date"),e.\u0275\u0275elementEnd()),2&a){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(3),e.\u0275\u0275propertyInterpolate("value",e.\u0275\u0275pipeBind2(4,3,t.viewdata.updatedon,"dd-MM-yyyy")),e.\u0275\u0275property("readonly",!0)("readonly",!0)}}function Wo(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"mat-form-field",51)(1,"mat-label"),e.\u0275\u0275text(2,"Deleted On"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(3,"input",52),e.\u0275\u0275pipe(4,"date"),e.\u0275\u0275elementEnd()),2&a){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(3),e.\u0275\u0275propertyInterpolate("value",e.\u0275\u0275pipeBind2(4,3,t.viewdata.updatedon,"dd-MM-yyyy")),e.\u0275\u0275property("readonly",!0)("readonly",!0)}}function $o(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"mat-form-field",51)(1,"mat-label"),e.\u0275\u0275text(2,"Cancelled On"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(3,"input",52),e.\u0275\u0275pipe(4,"date"),e.\u0275\u0275elementEnd()),2&a){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(3),e.\u0275\u0275propertyInterpolate("value",e.\u0275\u0275pipeBind2(4,3,t.viewdata.updatedon,"dd-MM-yyyy")),e.\u0275\u0275property("readonly",!0)("readonly",!0)}}function Go(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"mat-form-field",51)(1,"mat-label"),e.\u0275\u0275text(2,"Status"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(3,"input",52),e.\u0275\u0275elementEnd()),2&a){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(3),e.\u0275\u0275propertyInterpolate("value",t.viewdata.leavestatus),e.\u0275\u0275property("readonly",!0)("readonly",!0)}}function Qo(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"mat-form-field",62)(1,"mat-label"),e.\u0275\u0275text(2,"Worked Date"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(3,"input",52),e.\u0275\u0275pipe(4,"date"),e.\u0275\u0275elementEnd()),2&a){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(3),e.\u0275\u0275propertyInterpolate("value",e.\u0275\u0275pipeBind2(4,3,t.viewdata.worked_date,"dd-MM-yyyy")),e.\u0275\u0275property("readonly",!0)("readonly",!0)}}function Xo(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"mat-form-field",62)(1,"mat-label"),e.\u0275\u0275text(2,"Relationship"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(3,"input",52),e.\u0275\u0275elementEnd()),2&a){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(3),e.\u0275\u0275propertyInterpolate("value",t.viewdata.bereavement_relation),e.\u0275\u0275property("readonly",!0)("readonly",!0)}}function Ko(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"mat-form-field",57)(1,"mat-label"),e.\u0275\u0275text(2,"Reason for Rejection "),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(3,"textarea",63),e.\u0275\u0275elementEnd()),2&a){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(3),e.\u0275\u0275propertyInterpolate("value",t.viewdata.action_reason),e.\u0275\u0275property("readonly",!0)("readonly",!0)}}function Jo(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"mat-form-field",57)(1,"mat-label"),e.\u0275\u0275text(2,"Reason for Deletion"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(3,"textarea",52),e.\u0275\u0275elementEnd()),2&a){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(3),e.\u0275\u0275propertyInterpolate("value",t.viewdata.action_reason),e.\u0275\u0275property("readonly",!0)("readonly",!0)}}function Zo(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"mat-form-field",57)(1,"mat-label"),e.\u0275\u0275text(2,"Reason for Cancellation"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(3,"textarea",52),e.\u0275\u0275elementEnd()),2&a){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(3),e.\u0275\u0275propertyInterpolate("value",t.viewdata.action_reason),e.\u0275\u0275property("readonly",!0)("readonly",!0)}}function el(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"mat-form-field",57)(1,"mat-label"),e.\u0275\u0275text(2,"Lop Count"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(3,"input",52),e.\u0275\u0275elementEnd()),2&a){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(3),e.\u0275\u0275propertyInterpolate("value",t.viewdata.lop_count),e.\u0275\u0275property("readonly",!0)("readonly",!0)}}function tl(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"mat-form-field",57)(1,"mat-label"),e.\u0275\u0275text(2,"Sandwich Leave Count"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(3,"input",52),e.\u0275\u0275elementEnd()),2&a){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(3),e.\u0275\u0275propertyInterpolate("value",t.viewdata.same_ltype_count),e.\u0275\u0275property("readonly",!0)("readonly",!0)}}function al(a,o){if(1&a){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",66),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const l=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(l.fileView())}),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()}if(2&a){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(t.pdfName)}}function nl(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"div",55)(1,"div")(2,"label",64),e.\u0275\u0275text(3," Document"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(4,"br"),e.\u0275\u0275template(5,al,2,1,"button",65),e.\u0275\u0275elementEnd()()),2&a){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(5),e.\u0275\u0275property("ngIf",t.pdfName)}}function ol(a,o){if(1&a){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",47)(1,"mat-card")(2,"mat-card-header",3)(3,"mat-card-title",48),e.\u0275\u0275text(4),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(5,"mat-card-content",49)(6,"div",50)(7,"mat-form-field",51)(8,"mat-label"),e.\u0275\u0275text(9,"Applied On"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(10,"input",52),e.\u0275\u0275pipe(11,"date"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(12,jo,5,6,"mat-form-field",53),e.\u0275\u0275template(13,zo,5,6,"mat-form-field",53),e.\u0275\u0275template(14,Wo,5,6,"mat-form-field",53),e.\u0275\u0275template(15,$o,5,6,"mat-form-field",53),e.\u0275\u0275elementStart(16,"mat-form-field",54)(17,"mat-label"),e.\u0275\u0275text(18,"Type Of Leave"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(19,"input",52),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(20,Go,4,3,"mat-form-field",53),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(21,"div",50)(22,"mat-form-field",51)(23,"mat-label"),e.\u0275\u0275text(24,"From Date"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(25,"input",52),e.\u0275\u0275pipe(26,"date"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(27,"mat-form-field",51)(28,"mat-label"),e.\u0275\u0275text(29,"To Date"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(30,"input",52),e.\u0275\u0275pipe(31,"date"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(32,"mat-form-field",54)(33,"mat-label"),e.\u0275\u0275text(34,"Leave Count"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(35,"input",52),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(36,"div",50)(37,"mat-form-field",51)(38,"mat-label"),e.\u0275\u0275text(39,"Contact"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(40,"input",52),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(41,"mat-form-field",51)(42,"mat-label"),e.\u0275\u0275text(43,"Email"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(44,"input",52),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(45,"mat-form-field",54)(46,"mat-label"),e.\u0275\u0275text(47,"Reason"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(48,"input",52),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(49,"div",55),e.\u0275\u0275template(50,Qo,5,6,"mat-form-field",56),e.\u0275\u0275template(51,Xo,4,3,"mat-form-field",56),e.\u0275\u0275elementStart(52,"mat-form-field",57)(53,"mat-label"),e.\u0275\u0275text(54,"Manager"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(55,"input",52),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(56,Ko,4,3,"mat-form-field",58),e.\u0275\u0275template(57,Jo,4,3,"mat-form-field",58),e.\u0275\u0275template(58,Zo,4,3,"mat-form-field",58),e.\u0275\u0275template(59,el,4,3,"mat-form-field",58),e.\u0275\u0275template(60,tl,4,3,"mat-form-field",58),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(61,nl,6,1,"div",59),e.\u0275\u0275elementStart(62,"div",60)(63,"button",61),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const l=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(l.close())}),e.\u0275\u0275text(64,"Close"),e.\u0275\u0275elementEnd()()()()()}if(2&a){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate1(" ",t.viewdata.leavestatus+" Leave"," "),e.\u0275\u0275advance(6),e.\u0275\u0275propertyInterpolate("value",e.\u0275\u0275pipeBind2(11,41,t.viewdata.appliedon,"dd-MM-yyyy")),e.\u0275\u0275property("readonly",!0)("readonly",!0),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf","Approved"===t.viewdata.leavestatus),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","Rejected"===t.viewdata.leavestatus),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","Deleted"===t.viewdata.leavestatus),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","Cancelled"===t.viewdata.leavestatus),e.\u0275\u0275advance(4),e.\u0275\u0275propertyInterpolate("value",t.viewdata.leavetype),e.\u0275\u0275property("readonly",!0)("readonly",!0),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","Submitted"===t.viewdata.leavestatus),e.\u0275\u0275advance(5),e.\u0275\u0275propertyInterpolate("value",e.\u0275\u0275pipeBind2(26,44,t.viewdata.fromdate,"dd-MM-yyyy")),e.\u0275\u0275property("readonly",!0)("readonly",!0),e.\u0275\u0275advance(5),e.\u0275\u0275propertyInterpolate("value",e.\u0275\u0275pipeBind2(31,47,t.viewdata.todate,"dd-MM-yyyy")),e.\u0275\u0275property("readonly",!0)("readonly",!0),e.\u0275\u0275advance(5),e.\u0275\u0275propertyInterpolate("value",t.viewdata.leavecount),e.\u0275\u0275property("readonly",!0)("readonly",!0),e.\u0275\u0275advance(5),e.\u0275\u0275propertyInterpolate("value",t.viewdata.contactnumber),e.\u0275\u0275property("readonly",!0)("readonly",!0),e.\u0275\u0275advance(4),e.\u0275\u0275propertyInterpolate("value",t.viewdata.contactemail),e.\u0275\u0275property("readonly",!0)("readonly",!0),e.\u0275\u0275advance(4),e.\u0275\u0275propertyInterpolate("value",t.viewdata.leavereason),e.\u0275\u0275property("readonly",!0)("readonly",!0),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf","Comp Off Leave"===t.viewdata.leavetype),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","Bereavement Leave"===t.viewdata.leavetype),e.\u0275\u0275advance(4),e.\u0275\u0275propertyInterpolate("value",t.usersession.roles[0].rm_name),e.\u0275\u0275property("readonly",!0)("readonly",!0),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","Rejected"===t.viewdata.leavestatus),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","Deleted"===t.viewdata.leavestatus),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","Cancelled"===t.viewdata.leavestatus),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null!=t.viewdata.lop_count),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null!=t.viewdata.same_ltype_count),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.pdfName)}}let ll=(()=>{class a{constructor(t,n,l,i,r,d){this.router=t,this.spinner=n,this.LM=l,this.dialog=i,this.ts=r,this.emsService=d,this.isview=!1,this.isdata=!0,this.maxall=20,this.displayedColumns=["sno","appliedon","leavetype","fromdate","todate","days","status","action"],this.dataSource=[],this.pageLoading=!0,this.employeeEmailData=[]}ngOnInit(){this.getErrorMessages("LM16"),this.getErrorMessages("LM17"),this.getErrorMessages("LM73"),this.getErrorMessages("LM74"),this.usersession=JSON.parse(sessionStorage.getItem("user")||""),this.employeeId=this.usersession.id,this.activeModule=JSON.parse(sessionStorage.getItem("activeModule")||""),this.dataSource.paginator=this.paginator,this.getleavehistory(null,null),this.getEmployeeEmailData()}getleavehistory(t,n){this.LM.getleavehistory(this.usersession.id,1,1e3).subscribe(l=>{this.leavedata=l.data,this.dataSource=new m.by(this.leavedata),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort,this.pageLoading=!1})}view(t){this.isview=!0,this.isdata=!1,this.viewdata=t,(3==t.leavetypeid||5==t.leavetypeid)&&this.getUploadDocument(t)}close(){this.router.navigateByUrl("/",{skipLocationChange:!0}).then(()=>this.router.navigate(["/LeaveManagement/UserLeaveHistory"]))}cancel(t){this.deletedata=t,this.titleName="Do you really want to cancel the leave?",this.openDialogcancel()}openDialogcancel(){this.dialog.open(k.w,{width:"500px",position:{top:"100px"},data:{name:this.titleName,reason:this.reason}}).afterClosed().subscribe(n=>{this.deletedata.actionreason=n.reason,this.deletedata.emailData=this.employeeEmailData,""!=n&&this.LM.cancelLeaveRequest(this.deletedata).subscribe(l=>{l.status?(this.router.navigateByUrl("/",{skipLocationChange:!0}).then(()=>this.router.navigate(["/LeaveManagement/UserLeaveHistory"])),this.dialog.open(L.B,{position:{top:"70px"},disableClose:!0,data:this.msgLM74})):this.dialog.open(L.B,{position:{top:"70px"},disableClose:!0,data:this.msgLM17})})})}delete(t){this.deletedata=t,this.titleName="Do you really want to delete the leave?",this.openDialogdelete()}openDialogdelete(){this.dialog.open(k.w,{width:"500px",position:{top:"100px"},data:{name:this.titleName,reason:this.reason}}).afterClosed().subscribe(n=>{this.deletedata.actionreason=n.reason,this.deletedata.emailData=this.employeeEmailData,""!=n&&this.LM.setDeleteLeaveRequest(this.deletedata).subscribe(l=>{l.status?(this.router.navigateByUrl("/",{skipLocationChange:!0}).then(()=>this.router.navigate(["/LeaveManagement/UserLeaveHistory"])),this.dialog.open(L.B,{position:{top:"70px"},disableClose:!0,data:this.msgLM73})):this.dialog.open(L.B,{position:{top:"70px"},disableClose:!0,data:this.msgLM16})})})}edit(t){t.URL="/LeaveManagement/UserLeaveHistory",t.isdashboard=!0,this.router.navigate(["/LeaveManagement/LeaveRequest"],{state:{leaveData:t}})}getErrorMessages(t){this.ts.getErrorMessages(t,1,1).subscribe(n=>{n.status&&"LM16"==t?this.msgLM16=n.data[0].errormessage:n.status&&"LM17"==t?this.msgLM17=n.data[0].errormessage:n.status&&"LM73"==t?this.msgLM73=n.data[0].errormessage:n.status&&"LM74"==t&&(this.msgLM74=n.data[0].errormessage)})}getUploadDocument(t){this.spinner.show(),this.LM.getFilesMaster({employeeId:this.usersession.id,filecategory:3==t.leavetypeid?"SL":"ML",moduleId:this.activeModule.moduleid,requestId:t?t.id:null}).subscribe(l=>{if(l&&l.status)if(l.data&&l.data.length>0){let r=l.data[0].filename.split("_");var i=[];for(let p=0;p<=r.length;p++)p>2&&i.push(r[p]);this.pdfName=i.join(""),l.data[0].employeeId=this.usersession.id,this.LM.getProfileImage(l.data[0]).subscribe(p=>{if(this.spinner.hide(),p.success){let _=new Uint8Array(p.image.data);_.reduce((D,E)=>D+String.fromCharCode(E),"");const y=new Blob([_],{type:"application/pdf"});this.fileURL=URL.createObjectURL(y)}})}else this.spinner.hide();else this.spinner.hide()})}fileView(){window.open(this.fileURL)}getEmployeeEmailData(){this.employeeEmailData=[],this.emsService.getEmployeeEmailDataByEmpid(this.employeeId).subscribe(t=>{this.employeeEmailData=JSON.parse(t.data[0].jsonvalu)[0]})}getPageSizes(){var t=[];return this.dataSource.data.length>5&&t.push(5),this.dataSource.data.length>10&&t.push(10),this.dataSource.data.length>20&&t.push(20),t.push(this.dataSource.data.length),t}}return a.\u0275fac=function(t){return new(t||a)(e.\u0275\u0275directiveInject(R.F0),e.\u0275\u0275directiveInject(b.t2),e.\u0275\u0275directiveInject(F.t),e.\u0275\u0275directiveInject(O.uw),e.\u0275\u0275directiveInject(ie.r),e.\u0275\u0275directiveInject(H.b))},a.\u0275cmp=e.\u0275\u0275defineComponent({type:a,selectors:[["app-user-leave-history"]],viewQuery:function(t,n){if(1&t&&(e.\u0275\u0275viewQuery(M.NW,5),e.\u0275\u0275viewQuery(g.YE,5)),2&t){let l;e.\u0275\u0275queryRefresh(l=e.\u0275\u0275loadQuery())&&(n.paginator=l.first),e.\u0275\u0275queryRefresh(l=e.\u0275\u0275loadQuery())&&(n.sort=l.first)}},decls:2,vars:2,consts:[["fxLayout","column","class","first-col",4,"ngIf"],["fxLayout","column","style","background-color: white;",4,"ngIf"],["fxLayout","column",1,"first-col"],[1,"headerbox"],[1,"title"],["fxLayout","column",1,"table-pad"],[1,"example-container","mat-elevation-z1"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","sno"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","appliedon"],["mat-header-cell","","style","white-space: nowrap;",4,"matHeaderCellDef"],["mat-cell","","style","white-space: nowrap;",4,"matCellDef"],["matColumnDef","leavetype"],["mat-header-cell","","mat-sort-header","","style","white-space: nowrap;",4,"matHeaderCellDef"],["matColumnDef","fromdate"],["matColumnDef","todate"],["matColumnDef","days"],["matColumnDef","status"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["matColumnDef","action"],["class","headerbox title","mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],[3,"pageSizeOptions"],["mat-header-cell",""],["mat-cell",""],["mat-header-cell","",2,"white-space","nowrap"],["mat-cell","",2,"white-space","nowrap"],["mat-header-cell","","mat-sort-header","",2,"white-space","nowrap"],[4,"ngIf"],["title","Leave deduction policy",2,"color","red"],["mat-header-cell","","mat-sort-header",""],["mat-icon-button","","title","Delete",3,"keyup.enter",4,"ngIf"],["mat-icon-button","","title","Edit",3,"keyup.enter",4,"ngIf"],["mat-icon-button","","title","Cancel",3,"keyup.enter",4,"ngIf"],["mat-icon-button","","title","View",3,"keyup.enter"],[2,"font-size","30px","overflow","visible",3,"click"],["mat-icon-button","","title","Delete",3,"keyup.enter"],[2,"overflow","visible",3,"click"],["mat-icon-button","","title","Edit",3,"keyup.enter"],["mat-icon-button","","title","Cancel",3,"keyup.enter"],["mat-header-row","",1,"headerbox","title"],["mat-row",""],[1,"mat-row"],["colspan","8",1,"mat-cell",2,"text-align","center"],["fxLayout","column",2,"background-color","white"],[1,"title",2,"position","center"],[1,"dev-Pad"],["fxLayout","row","fxLayout.xs","column","fxLayout.lt-lg","row wrap","fxLayoutAlign.xs","center center"],["fxFlex.xs","100","fxFlex","","appearance","outline",1,"mx-2","my-2"],["matInput","",3,"readonly","value"],["fxFlex.xs","100","fxFlex","","class","mx-2 my-2","appearance","outline",4,"ngIf"],["fxFlex.xs","100","fxFlex","","fxFlex.lt-lg","48","appearance","outline",1,"mx-2","my-2"],["fxLayout","row","fxLayout.xs","column","fxLayoutAlign.xs","center center"],["fxFlex.xs","100","fxFlex","32","class","mx-2 my-2","appearance","outline",4,"ngIf"],["fxFlex.xs","100","fxFlex","32","fxFlex.lt-lg","48","appearance","outline",1,"mx-2","my-2"],["fxFlex.xs","100","fxFlex","32","fxFlex.lt-lg","48","class","mx-2 my-2","appearance","outline",4,"ngIf"],["fxLayout","row","fxLayout.xs","column","fxLayoutAlign.xs","center center",4,"ngIf"],["fxLayout","row","fxLayout.xs","column","fxFlex.xs","100%","fxLayoutAlign","center"],[1,"btn","btn-danger","mr-2","mb-2",3,"click"],["fxFlex.xs","100","fxFlex","32","appearance","outline",1,"mx-2","my-2"],["matInput","","value","viewdata.action_reason",3,"readonly","value"],[2,"margin-left","10px"],["class","link","style","margin-left: 10px",3,"click",4,"ngIf"],[1,"link",2,"margin-left","10px",3,"click"]],template:function(t,n){1&t&&(e.\u0275\u0275template(0,Yo,37,5,"div",0),e.\u0275\u0275template(1,ol,65,50,"div",1)),2&t&&(e.\u0275\u0275property("ngIf",n.isdata),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.isview))},dependencies:[u.O5,B.lW,c.a8,c.dk,c.dn,c.n5,W.Hw,h.KE,h.hX,V.Nt,M.NW,g.YE,g.nU,m.BZ,m.fO,m.as,m.w1,m.Dz,m.nj,m.ge,m.ev,m.XQ,m.Gk,m.Ee,v.xw,v.Wh,v.yH,u.uU],styles:['button.link[_ngcontent-%COMP%]{background:transparent;color:#00f;border:none;outline:0}button.link[_ngcontent-%COMP%]:hover{color:#80286a}mat-card[_ngcontent-%COMP%]{transition:box-shadow .28s cubic-bezier(.4,0,.2,1);display:block;position:relative;padding-left:0;padding-right:0}  .mat-select-panel[aria-label="Items per page:"] mat-option:last-child:before{content:"All";position:relative;display:block}  .mat-select-panel[aria-label="Items per page:"] mat-option:last-child .mat-option-text{display:none}.headerbox[_ngcontent-%COMP%]{height:45px;background-color:#28acaf!important;align-items:center}.title[_ngcontent-%COMP%]{font-family:Roboto;font-size:20px;font-weight:500;font-stretch:normal;font-style:normal;letter-spacing:.32px;color:#fff;margin-bottom:0}  tr.mat-header-row{height:45px!important}  .mat-form-field-appearance-outline .mat-form-field-wrapper{margin:.2em 0!important}.example-container[_ngcontent-%COMP%]{overflow-x:auto}.dev-Pad[_ngcontent-%COMP%]{padding:1%}.table-pad[_ngcontent-%COMP%]{padding-left:15px;padding-right:15px}@media only screen and (max-width: 800px) and (orientation: portrait){mat-header-row[_ngcontent-%COMP%], mat-row[_ngcontent-%COMP%]{width:150%}}table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:2px 10px}']}),a})();function il(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"div",9)(1,"mat-label"),e.\u0275\u0275text(2,"Total"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"mat-label"),e.\u0275\u0275text(4),e.\u0275\u0275elementEnd()()),2&a){const t=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate(t.total)}}function rl(a,o){if(1&a&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"mat-card",7)(2,"mat-label",8),e.\u0275\u0275text(3),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(4,"mat-divider"),e.\u0275\u0275elementStart(5,"div",9)(6,"mat-label"),e.\u0275\u0275text(7,"Used"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"mat-label"),e.\u0275\u0275text(9),e.\u0275\u0275elementEnd()(),e.\u0275\u0275element(10,"mat-divider"),e.\u0275\u0275elementStart(11,"div",9)(12,"mat-label"),e.\u0275\u0275text(13,"Available"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(14,"mat-label"),e.\u0275\u0275text(15),e.\u0275\u0275elementEnd()(),e.\u0275\u0275element(16,"mat-divider"),e.\u0275\u0275template(17,il,5,1,"div",10),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd()),2&a){const t=o.$implicit;e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(t.display_name),e.\u0275\u0275advance(6),e.\u0275\u0275textInterpolate(t.used),e.\u0275\u0275advance(6),e.\u0275\u0275textInterpolate(t.leave_balance),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",t.total)}}let sl=(()=>{class a{constructor(t,n){this.router=t,this.LM=n,this.leavedata=[],this.usersession=JSON.parse(sessionStorage.getItem("user")||"")}ngOnInit(){this.getLeaveBalance()}getLeaveBalance(){this.LM.getLeaveBalance(this.usersession.id).subscribe(t=>{if(t.status)for(let n=0;n<t.data[0].length;n++)"Marriage Leave"===t.data[0][n].leavename&&"Single"===this.usersession.maritalstatus?this.leavedata.push(t.data[0][n]):"Maternity Leave"===t.data[0][n].leavename&&"Married"===this.usersession.maritalstatus?"Female"===this.usersession.gender&&this.leavedata.push(t.data[0][n]):"Paternity Leave"===t.data[0][n].leavename&&"Married"===this.usersession.maritalstatus?"Male"===this.usersession.gender&&this.leavedata.push(t.data[0][n]):"Paternity Leave"!==t.data[0][n].leavename&&"Marriage Leave"!==t.data[0][n].leavename&&"Maternity Leave"!==t.data[0][n].leavename&&this.leavedata.push(t.data[0][n])})}}return a.\u0275fac=function(t){return new(t||a)(e.\u0275\u0275directiveInject(R.F0),e.\u0275\u0275directiveInject(F.t))},a.\u0275cmp=e.\u0275\u0275defineComponent({type:a,selectors:[["app-user-leave-balance"]],decls:9,vars:1,consts:[["fxLayout","column",1,"first-col"],[1,"headerbox"],["fxLayout","row","fxFlex","50"],[1,"title"],["fxLayout","column"],["fxLayout","row wrap",1,"tableP"],[4,"ngFor","ngForOf"],[1,"outline",2,"width","250px","margin","10px","padding","1%"],["fxLayoutAlign","center",2,"font-size","17px"],["fxLayout","row","fxLayoutAlign","space-between",2,"padding","5px"],["fxLayout","row","fxLayoutAlign","space-between","style","padding:5px",4,"ngIf"]],template:function(t,n){1&t&&(e.\u0275\u0275elementStart(0,"div",0)(1,"mat-card")(2,"mat-card-header",1)(3,"div",2)(4,"mat-card-title",3),e.\u0275\u0275text(5," Leave Balance "),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(6,"div",4)(7,"div",5),e.\u0275\u0275template(8,rl,18,4,"ng-container",6),e.\u0275\u0275elementEnd()()()()),2&t&&(e.\u0275\u0275advance(8),e.\u0275\u0275property("ngForOf",n.leavedata))},dependencies:[u.sg,u.O5,c.a8,c.dk,c.n5,Y.d,h.hX,v.xw,v.Wh,v.yH],styles:['mat-card[_ngcontent-%COMP%]{transition:box-shadow .28s cubic-bezier(.4,0,.2,1);display:block;position:relative;padding-left:0;padding-right:0}.tableP[_ngcontent-%COMP%]{padding-left:1%;padding-right:1%;padding-bottom:1%}  .mat-select-panel[aria-label="Items per page:"] mat-option:last-child:before{content:"All"}  .mat-select-panel[aria-label="Items per page:"] mat-option:last-child .mat-option-text{display:none}.headerbox[_ngcontent-%COMP%]{height:45px;background-color:#28acaf!important;align-items:center}.title[_ngcontent-%COMP%]{font-family:Roboto;font-size:20px;font-weight:500;font-stretch:normal;font-style:normal;letter-spacing:.32px;color:#fff;margin-bottom:0}  .mat-card-header-text{margin:0 6px!important} tr .mat-header-row{height:45px!important}  .mat-form-field-appearance-outline .mat-form-field-wrapper{margin:.2em 0!important}.outline[_ngcontent-%COMP%]{border-radius:6px;border-style:solid;border-width:1px;border-color:#28acaf;background-color:#fff}']}),a})();var re=f(14362);function ml(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"mat-error",36),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&a){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",t.msgLM3," ")}}function dl(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"div")(1,"mat-option",39),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd()()),2&a){const t=o.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275propertyInterpolate("value",t.value),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(t.value)}}function pl(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"mat-error",36),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&a){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",t.msgLM3," ")}}function cl(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"mat-form-field",6)(1,"mat-label"),e.\u0275\u0275text(2,"Worked Hours"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"mat-select",37),e.\u0275\u0275elementContainerStart(4),e.\u0275\u0275template(5,dl,3,2,"div",38),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(6,pl,2,1,"mat-error",10),e.\u0275\u0275elementEnd()),2&a){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(3),e.\u0275\u0275property("disabled",t.isview)("tabIndex",2),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",t.minimumHours),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==t.CompoffForm.controls.hours.errors?null:t.CompoffForm.controls.hours.errors.required)}}function ul(a,o){1&a&&(e.\u0275\u0275elementStart(0,"mat-form-field",6)(1,"mat-label"),e.\u0275\u0275text(2,"Worked Hours"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(3,"input",40),e.\u0275\u0275elementEnd()),2&a&&(e.\u0275\u0275advance(3),e.\u0275\u0275property("tabIndex",2))}function fl(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"mat-form-field",41)(1,"mat-label"),e.\u0275\u0275text(2,"Minutes"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"mat-select",42),e.\u0275\u0275elementContainerStart(4),e.\u0275\u0275elementStart(5,"mat-option",43),e.\u0275\u0275text(6,"00"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(7,"mat-option",44),e.\u0275\u0275text(8,"15"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"mat-option",45),e.\u0275\u0275text(10,"30"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(11,"mat-option",46),e.\u0275\u0275text(12,"45"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementEnd()()),2&a){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(3),e.\u0275\u0275property("disabled",t.isview)("tabIndex",3)}}function vl(a,o){1&a&&(e.\u0275\u0275elementStart(0,"mat-form-field",41)(1,"mat-label"),e.\u0275\u0275text(2,"Minutes"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(3,"input",47),e.\u0275\u0275elementEnd()),2&a&&(e.\u0275\u0275advance(3),e.\u0275\u0275property("tabIndex",3))}function _l(a,o){1&a&&(e.\u0275\u0275elementStart(0,"mat-form-field",15)(1,"mat-label"),e.\u0275\u0275text(2,"Status"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(3,"input",48),e.\u0275\u0275elementEnd())}function hl(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"mat-error",36),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&a){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",t.msgLM1," ")}}function gl(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"div",13)(1,"mat-form-field",49)(2,"mat-label"),e.\u0275\u0275text(3,"Reject Reason"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"textarea",50),e.\u0275\u0275text(5,"            "),e.\u0275\u0275elementEnd()()()),2&a){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(4),e.\u0275\u0275property("readonly",t.isReject)}}function xl(a,o){if(1&a){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",51)(1,"button",52),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const l=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(l.submit())}),e.\u0275\u0275elementStart(2,"span"),e.\u0275\u0275text(3,"Submit"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(4,"button",53),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const l=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(l.cancel())}),e.\u0275\u0275elementStart(5,"span"),e.\u0275\u0275text(6,"Cancel"),e.\u0275\u0275elementEnd()()()}2&a&&(e.\u0275\u0275advance(1),e.\u0275\u0275property("tabIndex",5),e.\u0275\u0275advance(3),e.\u0275\u0275property("tabIndex",6))}function yl(a,o){if(1&a){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",51)(1,"button",53),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const l=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(l.cancel())}),e.\u0275\u0275elementStart(2,"span"),e.\u0275\u0275text(3,"Close"),e.\u0275\u0275elementEnd()()()}2&a&&(e.\u0275\u0275advance(1),e.\u0275\u0275property("tabIndex",7))}function Cl(a,o){1&a&&(e.\u0275\u0275elementStart(0,"th",54),e.\u0275\u0275text(1,"Applied On"),e.\u0275\u0275elementEnd())}function El(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"td",55)(1,"span"),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"date"),e.\u0275\u0275elementEnd()()),2&a){const t=o.$implicit;e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind2(3,1,t.applied_date,"dd-MM-yyyy"))}}function Il(a,o){1&a&&(e.\u0275\u0275elementStart(0,"th",54),e.\u0275\u0275text(1,"Worked Date"),e.\u0275\u0275elementEnd())}function Ll(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"td",55)(1,"span"),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"date"),e.\u0275\u0275elementEnd()()),2&a){const t=o.$implicit;e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind2(3,1,t.comp_off_worked_date,"dd-MM-yyyy"))}}function Sl(a,o){1&a&&(e.\u0275\u0275elementStart(0,"th",54),e.\u0275\u0275text(1,"Worked Hours"),e.\u0275\u0275elementEnd())}function Dl(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"td",56)(1,"span"),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd()()),2&a){const t=o.$implicit;e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate2("",t.worked_hours," : ",0===t.worked_minutes?"00":t.worked_minutes,"")}}function bl(a,o){1&a&&(e.\u0275\u0275elementStart(0,"th",57),e.\u0275\u0275text(1,"Status"),e.\u0275\u0275elementEnd())}function Ml(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"td",56)(1,"span"),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd()()),2&a){const t=o.$implicit;e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t.status)}}function Fl(a,o){1&a&&(e.\u0275\u0275elementStart(0,"th",57),e.\u0275\u0275text(1,"Approver"),e.\u0275\u0275elementEnd())}function Rl(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"td",56)(1,"span"),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd()()),2&a){const t=o.$implicit;e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t.approvedby)}}function wl(a,o){1&a&&e.\u0275\u0275element(0,"th",57)}function Tl(a,o){if(1&a){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"td",56)(1,"button",58),e.\u0275\u0275listener("keyup.enter",function(){const i=e.\u0275\u0275restoreView(t).$implicit,r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.view(i))}),e.\u0275\u0275elementStart(2,"mat-icon",59),e.\u0275\u0275listener("click",function(){const i=e.\u0275\u0275restoreView(t).$implicit,r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.view(i))}),e.\u0275\u0275text(3," visibility"),e.\u0275\u0275elementEnd()()()}2&a&&(e.\u0275\u0275advance(1),e.\u0275\u0275property("tabIndex",8))}function Al(a,o){1&a&&e.\u0275\u0275element(0,"tr",60)}function Ol(a,o){1&a&&e.\u0275\u0275element(0,"tr",61)}function Pl(a,o){1&a&&(e.\u0275\u0275elementStart(0,"tr",62)(1,"td",63),e.\u0275\u0275text(2," No data found "),e.\u0275\u0275elementEnd()())}const Vl={parse:{dateInput:"LL"},display:{dateInput:"DD-MM-YYYY",monthYearLabel:"YYYY",dateA11yLabel:"LL",monthYearA11yLabel:"YYYY"}};let Nl=(()=>{class a{constructor(t,n,l,i,r,d,p){this.formBuilder=t,this.router=n,this.LM=l,this.attendanceService=i,this.datepipe=r,this.dialog=d,this.EMS=p,this.CompoffForm=s.nJ,this.compOffDates=[],this.compOffDateshide=[],this.minimumHours=[],this.usersession=[],this.calender={},this.compOffDetails=[],this.today=new Date,this.ishide=!0,this.isview=!1,this.isReject=!1,this.displayedColumns=["appliedon","workeddate","hours","status","approver","action"],this.dataSource=[],this.currentYear=(new Date).getDate(),this.pipe=new u.uU("en-US"),this.employeeEmailData=[],this.textPattern="^[a-zA-Z]+(s+[a-zA-Z]+)*$",this.usersession=JSON.parse(sessionStorage.getItem("user")||""),this.year=this.today.getFullYear(),this.month=this.today.getMonth(),this.max=new Date}ngOnInit(){this.getErrorMessages("LM1"),this.getErrorMessages("LM3"),this.getErrorMessages("LM79"),this.getErrorMessages("LM76"),this.getErrorMessages("LM7"),this.getErrorMessages("LM117"),this.getErrorMessages("LM136"),this.getCompOffMinWorkingHours(),this.getCompOff(),this.getCompoffCalender(),this.getDurationforBackdatedCompoffLeave(),this.CompoffForm=this.formBuilder.group({empId:[""],empName:[""],workeddate:["",s.kI.required],hours:["",s.kI.required],minutes:[""],reason:["",[s.kI.required,this.noWhitespaceValidator()]],status:[""],rejectreason:[""]}),this.CompoffForm.get("workeddate")?.valueChanges.subscribe(t=>{this.getEmployeeShiftDetailsByIdWithDates()}),this.CompoffForm.get("hours")?.valueChanges.subscribe(t=>{24==t?(this.CompoffForm.controls.minutes.setValue("00"),this.ishide=!1):this.ishide=!0}),this.getEmployeeEmailData()}getCompOffMinWorkingHours(){this.LM.getCompOffMinWorkingHours().subscribe(t=>{if(t.status)for(let n=t.data[0].value;n<=24;n++)this.minimumHours.push({value:n})})}getCompOff(){this.LM.getCompOff(this.usersession.id,null).subscribe(t=>{t.status&&(this.compOffDetails=t.data,this.dataSource=new m.by(this.compOffDetails),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort)})}getDurationforBackdatedCompoffLeave(){this.LM.getDurationforBackdatedCompoffLeave(this.calender).subscribe(t=>{var n=this.today.setDate(this.today.getDate()-t.data[0].value);t.status&&(this.min=new Date(this.usersession.dateofjoin)>n?new Date(this.usersession.dateofjoin):new Date(n))})}getEmployeeShiftDetailsByIdWithDates(){let t={employee_id:this.usersession.id,fromd_date:this.pipe.transform(new Date,"yyyy-MM-dd"),to_date:this.pipe.transform(new Date,"yyyy-MM-dd")};this.attendanceService.getEmployeeShiftByDates(t).subscribe(n=>{n.status&&(n.data.length>0?n.data.length>1&&this.dialog.open(L.B,{position:{top:"70px"},disableClose:!0,data:"Unable to request. please check the configure shift."}):this.dialog.open(L.B,{position:{top:"70px"},disableClose:!0,data:"Unable to request. please configure the shift before request"}))})}getCompoffCalender(){this.calender.employeeId=this.usersession.id,this.calender.year=this.year.toString(),this.LM.getCompoffCalender(this.calender).subscribe(t=>{if(t.status){for(let n=0;n<t.data.length;n++)this.compOffDates.push(new Date(t.data[n].edate+" 00:00:00"));this.myDateFilter=n=>{let l=!1;return this.compOffDates.forEach(i=>{this.pipe.transform(i,"yyyy/MM/dd")==this.pipe.transform(n,"yyyy/MM/dd")&&(l=!0)}),l}}})}submit(){if(this.CompoffForm.valid){let t={rmId:this.usersession.roles[0].rmid,id:null,remarks:null,status:"Submitted",empRollnumber:this.usersession.id,empName:this.usersession.firstname+" "+this.usersession.lastname,empId:this.usersession.id,workedMinutes:this.CompoffForm.controls.minutes.value?this.CompoffForm.controls.minutes.value:0,workDate:this.datepipe.transform(this.CompoffForm.controls.workeddate.value,"yyyy-MM-dd"),reason:this.CompoffForm.controls.reason.value.trim(),workedHours:this.CompoffForm.controls.hours.value,emaildata:this.employeeEmailData};this.LM.setCompOff(t).subscribe(n=>{n.status?(this.router.navigateByUrl("/",{skipLocationChange:!0}).then(()=>this.router.navigate(["/LeaveManagement/UserCompOff"])),this.dialog.open(L.B,{position:{top:"70px"},disableClose:!0,data:this.msgLM136})):this.dialog.open(L.B,{position:{top:"70px"},disableClose:!0,data:this.msgLM137})})}}view(t){this.isview=!0,this.isReject=!1,"Rejected"==t.status&&(this.isReject=!0),this.CompoffForm.controls.empId.setValue(),this.CompoffForm.controls.empName.setValue(1),this.CompoffForm.controls.workeddate.setValue(new Date(t.comp_off_worked_date)),this.CompoffForm.controls.workeddate.disable(),this.CompoffForm.controls.hours.setValue(t.worked_hours),this.CompoffForm.controls.minutes.setValue(0==t.worked_minutes?"00":t.worked_minutes),this.CompoffForm.controls.reason.setValue(t.reason),this.CompoffForm.controls.status.setValue(t.status),this.CompoffForm.controls.rejectreason.setValue(t.remarks)}cancel(){this.router.navigateByUrl("/",{skipLocationChange:!0}).then(()=>this.router.navigate(["/LeaveManagement/UserCompOff"]))}onChangeHour(t){}getErrorMessages(t){this.LM.getErrorMessages(t,1,1).subscribe(n=>{n.status&&"LM79"==t?this.msgLM79=n.data[0].errormessage:n.status&&"LM136"==t?this.msgLM136=n.data[0].errormessage:n.status&&"LM1"==t?this.msgLM1=n.data[0].errormessage:n.status&&"LM3"==t?this.msgLM3=n.data[0].errormessage:n.status&&"LM7"==t?this.msgLM7=n.data[0].errormessage:n.status&&"LM137"==t&&(this.msgLM137=n.data[0].errormessage)})}getEmployeeEmailData(){this.employeeEmailData=[],this.EMS.getEmployeeEmailDataByEmpid(this.usersession.id).subscribe(t=>{this.employeeEmailData=JSON.parse(t.data[0].jsonvalu)[0]})}noWhitespaceValidator(){return t=>0===(t.value||"").trim().length?{whitespace:!0}:null}}return a.\u0275fac=function(t){return new(t||a)(e.\u0275\u0275directiveInject(s.QS),e.\u0275\u0275directiveInject(R.F0),e.\u0275\u0275directiveInject(F.t),e.\u0275\u0275directiveInject(re.v),e.\u0275\u0275directiveInject(u.uU),e.\u0275\u0275directiveInject(O.uw),e.\u0275\u0275directiveInject(H.b))},a.\u0275cmp=e.\u0275\u0275defineComponent({type:a,selectors:[["app-user-compoff"]],viewQuery:function(t,n){if(1&t&&(e.\u0275\u0275viewQuery(M.NW,5),e.\u0275\u0275viewQuery(g.YE,5)),2&t){let l;e.\u0275\u0275queryRefresh(l=e.\u0275\u0275loadQuery())&&(n.paginator=l.first),e.\u0275\u0275queryRefresh(l=e.\u0275\u0275loadQuery())&&(n.sort=l.first)}},features:[e.\u0275\u0275ProvidersFeature([{provide:S._A,useClass:X.t7,deps:[S.Ad]},{provide:S.sG,useValue:Vl}])],decls:56,vars:22,consts:[["fxLayout","column",1,"first-col"],[1,"headerbox"],[1,"title"],[1,"main-Pad"],["autocomplete","off",2,"padding-top","1%",3,"formGroup"],["fxLayout","row","fxLayout.lt-lg","row wrap","fxLayout.xs","column","fxLayoutAlign.xs","center"],["fxFlex.xs","100","fxFlex","","appearance","outline",1,"mx-2","my-2"],["matInput","","readonly","","placeholder","DD-MM-YYYY","formControlName","workeddate","required","",3,"min","max","matDatepicker","matDatepickerFilter","tabIndex","click"],["matSuffix","",1,"datepicker",3,"for"],["date",""],["class","con-error",4,"ngIf"],["fxFlex.xs","100","fxFlex","","class","mx-2 my-2","appearance","outline",4,"ngIf"],["fxFlex.xs","100","fxFlex","","fxFlex.lt-lg","48","class","mx-2 my-2","appearance","outline",4,"ngIf"],["fxLayout","row","fxLayout.xs","column","fxLayoutAlign.xs","center"],["fxFlex.xs","100","fxFlex","32","fxFlex.lt-lg","100","class","mx-2 my-2","appearance","outline",4,"ngIf"],["fxFlex.xs","100","fxFlex","32","fxFlex.lt-lg","100","appearance","outline",1,"mx-2","my-2"],["formControlName","reason","matInput","","placeholder","","required","","maxlength","250",3,"readonly","tabIndex"],["fxLayout","row","fxLayout.xs","column","fxLayoutAlign.xs","center",4,"ngIf"],["fxLayoutAlign","center",4,"ngIf"],[1,"line_break"],["fxLayout","column",1,"tableP"],[1,"example-container","mat-elevation-z1"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","appliedon"],["mat-header-cell","","style","white-space: nowrap;",4,"matHeaderCellDef"],["mat-cell","","style","white-space: nowrap;",4,"matCellDef"],["matColumnDef","workeddate"],["matColumnDef","hours"],["mat-cell","",4,"matCellDef"],["matColumnDef","status"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["matColumnDef","approver"],["matColumnDef","action"],["class","headerbox title","mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],[1,"con-error"],["formControlName","hours","required","",3,"disabled","tabIndex"],[4,"ngFor","ngForOf"],[3,"value"],["formControlName","hours","readonly","","matInput","",3,"tabIndex"],["fxFlex.xs","100","fxFlex","","fxFlex.lt-lg","48","appearance","outline",1,"mx-2","my-2"],["formControlName","minutes",3,"disabled","tabIndex"],["value","00"],["value","15"],["value","30"],["value","45"],["formControlName","minutes","readonly","","matInput","",3,"tabIndex"],["formControlName","status","readonly","","matInput",""],["fxFlex.xs","100","fxFlex","32","appearance","outline",1,"mx-2","my-2"],["formControlName","rejectreason","matInput","","placeholder","","required","","maxlength","250",3,"readonly"],["fxLayoutAlign","center"],["type","submit",1,"btn","btn-primary","mr-2","mb-2",3,"tabIndex","click"],[1,"btn","btn-danger","mr-2","mb-2",3,"tabIndex","click"],["mat-header-cell","",2,"white-space","nowrap"],["mat-cell","",2,"white-space","nowrap"],["mat-cell",""],["mat-header-cell","","mat-sort-header",""],["mat-icon-button","",3,"tabIndex","keyup.enter"],["title","view",1,"mr-2",3,"click"],["mat-header-row","",1,"headerbox","title"],["mat-row",""],[1,"mat-row"],["colspan","5",1,"mat-cell",2,"text-align","center"]],template:function(t,n){if(1&t){const l=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",0)(1,"mat-card")(2,"mat-card-header",1)(3,"mat-card-title",2),e.\u0275\u0275text(4," Comp Off "),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(5,"div",3)(6,"form",4)(7,"div",5)(8,"mat-form-field",6)(9,"mat-label"),e.\u0275\u0275text(10,"Worked Date "),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(11,"input",7),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(l);const r=e.\u0275\u0275reference(14);return e.\u0275\u0275resetView(r.open())}),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(12,"mat-datepicker-toggle",8)(13,"mat-datepicker",null,9),e.\u0275\u0275template(15,ml,2,1,"mat-error",10),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(16,cl,7,4,"mat-form-field",11),e.\u0275\u0275template(17,ul,4,1,"mat-form-field",11),e.\u0275\u0275template(18,fl,13,2,"mat-form-field",12),e.\u0275\u0275template(19,vl,4,1,"mat-form-field",12),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(20,"div",13),e.\u0275\u0275template(21,_l,4,0,"mat-form-field",14),e.\u0275\u0275elementStart(22,"mat-form-field",15)(23,"mat-label"),e.\u0275\u0275text(24,"Reason"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(25,"textarea",16),e.\u0275\u0275text(26,"                      "),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(27,hl,2,1,"mat-error",10),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(28,gl,6,1,"div",17),e.\u0275\u0275template(29,xl,7,2,"div",18),e.\u0275\u0275template(30,yl,4,1,"div",18),e.\u0275\u0275elementEnd()(),e.\u0275\u0275element(31,"hr",19),e.\u0275\u0275elementStart(32,"div",20)(33,"div",21)(34,"table",22),e.\u0275\u0275elementContainerStart(35,23),e.\u0275\u0275template(36,Cl,2,0,"th",24),e.\u0275\u0275template(37,El,4,4,"td",25),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(38,26),e.\u0275\u0275template(39,Il,2,0,"th",24),e.\u0275\u0275template(40,Ll,4,4,"td",25),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(41,27),e.\u0275\u0275template(42,Sl,2,0,"th",24),e.\u0275\u0275template(43,Dl,3,2,"td",28),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(44,29),e.\u0275\u0275template(45,bl,2,0,"th",30),e.\u0275\u0275template(46,Ml,3,1,"td",28),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(47,31),e.\u0275\u0275template(48,Fl,2,0,"th",30),e.\u0275\u0275template(49,Rl,3,1,"td",28),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(50,32),e.\u0275\u0275template(51,wl,1,0,"th",30),e.\u0275\u0275template(52,Tl,4,1,"td",28),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275template(53,Al,1,0,"tr",33),e.\u0275\u0275template(54,Ol,1,0,"tr",34),e.\u0275\u0275template(55,Pl,3,0,"tr",35),e.\u0275\u0275elementEnd()()()()()}if(2&t){const l=e.\u0275\u0275reference(14);e.\u0275\u0275advance(6),e.\u0275\u0275property("formGroup",n.CompoffForm),e.\u0275\u0275advance(5),e.\u0275\u0275property("min",n.min)("max",n.max)("matDatepicker",l)("matDatepickerFilter",n.myDateFilter)("tabIndex",1),e.\u0275\u0275advance(1),e.\u0275\u0275property("for",l),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",null==n.CompoffForm.controls.workeddate.errors?null:n.CompoffForm.controls.workeddate.errors.required),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!n.isview),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.isview),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.ishide&&!n.isview),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.isview),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",n.isview),e.\u0275\u0275advance(4),e.\u0275\u0275property("readonly",n.isview)("tabIndex",4),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",(null==n.CompoffForm.controls.reason.errors?null:n.CompoffForm.controls.reason.errors.required)||(null==n.CompoffForm.controls.reason.errors?null:n.CompoffForm.controls.reason.errors.whitespace)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.isReject),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!n.isview),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.isview),e.\u0275\u0275advance(4),e.\u0275\u0275property("dataSource",n.dataSource),e.\u0275\u0275advance(19),e.\u0275\u0275property("matHeaderRowDef",n.displayedColumns),e.\u0275\u0275advance(1),e.\u0275\u0275property("matRowDefColumns",n.displayedColumns)}},dependencies:[u.sg,u.O5,S.ey,B.lW,c.a8,c.dk,c.n5,T.Mq,T.hl,T.nW,W.Hw,h.TO,h.KE,h.hX,h.R9,V.Nt,j.gD,g.YE,g.nU,m.BZ,m.fO,m.as,m.w1,m.Dz,m.nj,m.ge,m.ev,m.XQ,m.Gk,m.Ee,s._Y,s.Fj,s.JJ,s.JL,s.Q7,s.nD,s.sg,s.u,v.xw,v.Wh,v.yH,u.uU],styles:['.cdk-overlay-container{z-index:1050!important}mat-card[_ngcontent-%COMP%]{transition:box-shadow .28s cubic-bezier(.4,0,.2,1);display:block;position:relative;padding-left:0;padding-right:0}.main-Pad[_ngcontent-%COMP%]{padding-top:1%;padding-left:8px;padding-right:8px}.tableP[_ngcontent-%COMP%]{padding-left:15px;padding-right:15px;padding-bottom:1%}  .mat-select-panel[aria-label="Items per page:"] mat-option:last-child:before{content:"All"}  .mat-select-panel[aria-label="Items per page:"] mat-option:last-child .mat-option-text{display:none}.headerbox[_ngcontent-%COMP%]{height:45px;background-color:#28acaf!important;align-items:center}.title[_ngcontent-%COMP%]{font-family:Roboto;font-size:20px;font-weight:500;font-stretch:normal;font-style:normal;letter-spacing:.32px;color:#fff;margin-bottom:0}  tr.mat-header-row{height:45px!important}  .mat-form-field-appearance-outline .mat-form-field-wrapper{margin:.2em 0!important}.line_break[_ngcontent-%COMP%]{width:100%;height:5px;float:left;color:#000;padding-top:3px;background-color:#ffffff80}.example-container[_ngcontent-%COMP%]{overflow-x:auto;display:flex;flex-direction:column}@media only screen and (max-width: 800px) and (orientation: portrait){mat-header-row[_ngcontent-%COMP%], mat-row[_ngcontent-%COMP%]{width:150%}}table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:2px 10px}']}),a})();var se=f(21784),ve=f(8338);function ql(a,o){1&a&&e.\u0275\u0275element(0,"img",30)}function kl(a,o){if(1&a&&e.\u0275\u0275element(0,"img",31),2&a){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("src",t.imageurls,e.\u0275\u0275sanitizeUrl)}}function Hl(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"mat-error",32),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&a){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",t.LM1," ")}}function Ul(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"mat-error",32),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&a){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",t.LM1," ")}}function Bl(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"mat-error",32),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&a){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",t.LM1," ")}}function Yl(a,o){1&a&&(e.\u0275\u0275elementStart(0,"mat-error",32),e.\u0275\u0275text(1," Please enter valid email "),e.\u0275\u0275elementEnd())}function jl(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"mat-error",32),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&a){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",t.LM1," ")}}function zl(a,o){1&a&&(e.\u0275\u0275elementStart(0,"mat-error",32),e.\u0275\u0275text(1," Please enter valid mobile number "),e.\u0275\u0275elementEnd())}function Wl(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"mat-error",32),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&a){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",t.LM1," ")}}function $l(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"div")(1,"mat-option",33),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd()()),2&a){const t=o.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275property("value",t.id),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(t.country)}}function Gl(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"mat-error",32),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&a){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",t.LM2," ")}}function Ql(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"div")(1,"mat-option",33),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd()()),2&a){const t=o.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275property("value",t.id),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(t.state)}}function Xl(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"mat-error",32),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&a){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",t.LM2," ")}}function Kl(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"div")(1,"mat-option",33),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd()()),2&a){const t=o.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275property("value",t.id),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(t.location)}}function Jl(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"mat-error",32),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&a){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",t.LM2," ")}}function Zl(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"mat-error",32),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&a){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",t.LM1," ")}}function ei(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"mat-error",32),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&a){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",t.LM54," ")}}let ti=(()=>{class a{constructor(t,n,l,i,r,d,p){this.router=t,this.LM=n,this.LMS=l,this.formBuilder=i,this.dialog=r,this.spinner=d,this.MainComponent=p,this.editForm=s.nJ,this.profileId=null,this.profileInfo=null,this.imageurls=null,this.formData=new FormData,this.isFileImage=!1,this.message=[],this.progressInfos=[],this.previews=[],this.CountryDetails=[],this.stateDetails=[],this.cityDetails=[],this.employeedata=[],this.isRemoveImage=!0,this.validpic=!0,this.LM117="",this.LM118="",this.LM119="",this.LM138="",this.LM54="",this.LM2="",this.LM1="",this.spinner.hide(),this.getErrorMessages("LM117"),this.getErrorMessages("LM118"),this.getErrorMessages("LM119"),this.getErrorMessages("LM3"),this.getErrorMessages("LM1"),this.getErrorMessages("LM138"),this.getErrorMessages("LM54")}ngOnInit(){this.companyDBName=sessionStorage.getItem("companyName")?sessionStorage.getItem("companyName"):null,this.userSession=JSON.parse(sessionStorage.getItem("user")||""),this.editForm=this.formBuilder.group({firstName:["",s.kI.required],lastName:["",s.kI.required],middlename:[""],email:["",[s.kI.email,s.kI.pattern("^[a-zA-Z0-9.-]{1,}@[a-zA-Z.-]{2,}[.]{1}[a-zA-Z]{2,}")]],contact:["",[s.kI.required,s.kI.pattern("[4-9]\\d{9}")]],address:["",s.kI.required],countryId:["",s.kI.required],stateId:["",s.kI.required],cityId:["",s.kI.required],zipCode:["",s.kI.required]}),this.getUploadImage(),this.getCountry(),this.getEmployeeInformation(),this.editForm.get("countryId")?.valueChanges.subscribe(t=>{this.stateDetails=[],this.LM.getStates(t).subscribe(n=>{n&&n.status&&(this.stateDetails=n.data,null!=this.employeedata&&this.editForm.controls.stateId.setValue(this.employeedata.state))})}),this.editForm.get("stateId")?.valueChanges.subscribe(t=>{this.cityDetails=[],this.LM.getCities(t).subscribe(n=>{n&&n.status&&(this.cityDetails=n.data,this.editForm.controls.cityId.setValue(""),this.employeedata.state===this.editForm.controls.stateId.value&&this.editForm.controls.cityId.setValue(this.employeedata.city))})})}editProfile(){if(this.editForm.valid){var t={id:this.userSession.id,firstName:this.editForm.controls.firstName.value,middlename:this.editForm.controls.middlename.value,lastName:this.editForm.controls.lastName.value,email:this.editForm.controls.email.value,contact:this.editForm.controls.contact.value,address:this.editForm.controls.address.value,countryId:this.editForm.controls.countryId.value,stateId:this.editForm.controls.stateId.value,cityId:this.editForm.controls.cityId.value,zipCode:this.editForm.controls.zipCode.value};this.spinner.show(),this.LM.SetEditProfile(t).subscribe(n=>{n&&n.status?this.file?this.LM.getFilepathsMaster(1).subscribe(l=>{l&&l.status?this.LM.setFilesMaster({id:this.profileId?this.profileId:null,employeeId:this.userSession.id,filecategory:"PROFILE",moduleId:1,documentnumber:"",fileName:this.file.name,modulecode:l.data[0].module_code,requestId:null,status:"Submitted"}).subscribe(r=>{if(r&&r.status){let d=JSON.stringify(r.data[0]);this.formData.append("info",d),this.formData.append("file",this.file),this.LM.setProfileImage(this.formData).subscribe(p=>{this.formData.delete("file"),this.formData.delete("info"),this.spinner.hide(),p&&p.status?(this.MainComponent.getUploadImage(),this.dialog.open(C.S,{position:{top:"70px"},disableClose:!0,data:{Message:this.LM118,url:"/main/MainDashboard"}})):this.dialog.open(C.S,{position:{top:"70px"},disableClose:!0,data:{Message:this.LM138,url:"/LeaveManagement/EditProfile"}}),this.file=null,this.fileImageToggler(),this.getUploadImage(),this.isRemoveImage=!0})}else this.spinner.hide(),this.LM.deleteFilesMaster(l.data[0].id).subscribe(d=>{}),this.getUploadImage(),this.dialog.open(C.S,{position:{top:"70px"},disableClose:!0,data:{Message:this.LM138,url:"/LeaveManagement/EditProfile"}})}):(this.getUploadImage(),this.spinner.hide(),this.dialog.open(C.S,{position:{top:"70px"},disableClose:!0,data:{Message:this.LM138,url:"/LeaveManagement/EditProfile"}}))}):(this.spinner.hide(),this.MainComponent.ngOnInit(),this.dialog.open(C.S,{position:{top:"70px"},disableClose:!0,data:{Message:this.LM118,url:"/main/MainDashboard"}})):(this.getUploadImage(),this.spinner.hide(),this.dialog.open(C.S,{position:{top:"70px"},disableClose:!0,data:{Message:this.LM119,url:"/LeaveManagement/EditProfile"}}))})}}getCountry(){this.LM.getMastertable({tableName:"countrymaster",status:null,pageNumber:1,pageSize:10,databaseName:this.companyDBName}).subscribe(n=>{n&&n.status&&(this.CountryDetails=n.data)})}onSelectFile(t){this.isRemoveImage=!1,this.imageurls=null,this.file=null,this.file=t.target.files[0];let n=this.file.type.split("/");if(this.file&&"image"==n[0])if(this.file.size<=1024e3){if(this.fileImageToggler(),t.target.files&&t.target.files[0]){this.validpic=!0;var l=t.target.files.length;for(let r=0;r<l;r++){var i=new FileReader;i.onload=d=>{this.imageurls=d.target.result},i.readAsDataURL(t.target.files[r])}}}else this.dialog.open(C.S,{position:{top:"70px"},disableClose:!0,data:{Message:this.LM117}}),this.getUploadImage();else this.getUploadImage(),this.validpic=!1,this.dialog.open(C.S,{position:{top:"70px"},disableClose:!0,data:{Message:"Please upload a valid Image.",url:"/LeaveManagement/EditProfile"}})}submit(t){null==this.file||this.file.size<=1024e3&&this.validpic?this.editProfile():this.dialog.open(C.S,{position:{top:"70px"},disableClose:!0,data:{Message:this.LM117,url:"/LeaveManagement/EditProfile"}})}fileImageToggler(){this.isFileImage=!this.isFileImage}getUploadImage(){this.LM.getFilesMaster({employeeId:this.userSession.id,candidateId:null,filecategory:"PROFILE",moduleId:1,requestId:null,status:"Submitted"}).subscribe(n=>{n&&n.status&&n.data[0]?(this.profileId=n.data[0].id,this.profileInfo=JSON.stringify(n.data[0]),n.data[0].employeeId=this.userSession.id,this.LM.getProfileImage(n.data[0]).subscribe(i=>{if(i.success){const d=new Uint8Array(i.image.data).reduce((_,x)=>_+String.fromCharCode(x),"");let p=btoa(d);this.imageurls="data:image/png;base64,"+p}else this.isRemoveImage=!1,this.imageurls=null})):(this.isRemoveImage=!1,this.imageurls=null)})}getEmployeeInformation(){this.LM.getEmployeeInformation(this.userSession.id).subscribe(t=>{t&&t.status&&(this.employeedata=JSON.parse(t.data[0].json)[0],this.editForm.controls.firstName.setValue(this.employeedata.firstname),this.editForm.controls.middlename.setValue(this.employeedata.middlename),this.editForm.controls.lastName.setValue(this.employeedata.lastname),this.editForm.controls.email.setValue(this.employeedata.personalemail),this.editForm.controls.contact.setValue(this.employeedata.contactnumber),this.editForm.controls.address.setValue(this.employeedata.address),this.editForm.controls.countryId.setValue(this.employeedata.country),this.editForm.controls.zipCode.setValue(this.employeedata.pincode),this.editForm.controls.stateId.setValue(this.employeedata.state),this.editForm.controls.cityId.setValue(this.employeedata.city))})}cancel(){this.router.navigateByUrl("/",{skipLocationChange:!0}).then(()=>this.router.navigate(["/main/MainDashboard"]))}getErrorMessages(t){this.LM.getErrorMessages(t,1,1).subscribe(n=>{n.status&&"LM117"==t?this.LM117=n.data[0].errormessage:n.status&&"LM118"==t?this.LM118=n.data[0].errormessage:n.status&&"LM119"==t?this.LM119=n.data[0].errormessage:n.status&&"LM3"==t?this.LM2=n.data[0].errormessage:n.status&&"LM1"==t?this.LM1=n.data[0].errormessage:n.status&&"LM138"==t?this.LM138=n.data[0].errormessage:n.status&&"LM54"==t&&(this.LM54=n.data[0].errormessage)})}alphabetKeyPress(t){let l=String.fromCharCode(t.charCode);8!=t.keyCode&&!/[a-zA-Z ]/.test(l)&&t.preventDefault()}}return a.\u0275fac=function(t){return new(t||a)(e.\u0275\u0275directiveInject(R.F0),e.\u0275\u0275directiveInject(F.t),e.\u0275\u0275directiveInject(se.D),e.\u0275\u0275directiveInject(s.QS),e.\u0275\u0275directiveInject(O.uw),e.\u0275\u0275directiveInject(b.t2),e.\u0275\u0275directiveInject(ue.C))},a.\u0275cmp=e.\u0275\u0275defineComponent({type:a,selectors:[["app-edit-profile"]],decls:88,vars:18,consts:[["fxLayout","column"],["autocomplete","off",3,"formGroup"],["fxLayout","row","fxLayoutAlign","center"],["for","fileInput",1,"hoverable1"],["class","img1","src","../../../assets/img/profile.jpg","alt","user-img",4,"ngIf"],["class","img1",3,"src",4,"ngIf"],[1,"hover-text"],[1,"background"],["id","fileInput","accept","image/*","type","file",3,"change"],[1,"tableP"],["fxLayout","row","fxLayout.xs","column"],["fxFlex.xs","100","fxFlex","","appearance","outline",1,"mx-2","my-2"],["formControlName","firstName","required","","matInput","","placeholder","First Name",3,"keypress"],["class","con-error",4,"ngIf"],["formControlName","middlename","matInput","","placeholder","Middle Name",3,"keypress"],["formControlName","lastName","required","","matInput","","placeholder","Last Name",3,"keypress"],["formControlName","email","matInput","","placeholder","","maxlength","100"],["formControlName","contact","onlyNumber","","required","","matInput","","placeholder","","maxlength","10","minlength","10"],["formControlName","address","required","","matInput","","placeholder","","maxlength","100"],["fxLayout","row","fxLayout.xs","column","fxLayoutAlign.xs","center center"],["required","","formControlName","countryId","required",""],[4,"ngFor","ngForOf"],["formControlName","stateId","required",""],["formControlName","cityId","required",""],["fxFlex.xs","100","fxFlex","32","appearance","outline",1,"mx-2","my-2"],["formControlName","zipCode","onlyNumber","","required","","matInput","","placeholder","","minlength","6","maxlength","6"],["fxLayout","row","fxLayoutAlign","center","fxLayoutAlign.xs","center center"],["type","submit",1,"btn","btn-primary","mr-2","mb-2",3,"click"],["type","submit",1,"btn","btn-danger","mr-2","mb-2",3,"click"],["size","medium","type","ball-fussion"],["src","../../../assets/img/profile.jpg","alt","user-img",1,"img1"],[1,"img1",3,"src"],[1,"con-error"],[3,"value"]],template:function(t,n){1&t&&(e.\u0275\u0275elementStart(0,"div",0)(1,"form",1)(2,"mat-card")(3,"mat-card-header")(4,"mat-card-title"),e.\u0275\u0275text(5," Edit Profile "),e.\u0275\u0275elementEnd()(),e.\u0275\u0275element(6,"br"),e.\u0275\u0275elementStart(7,"div",2)(8,"label",3),e.\u0275\u0275template(9,ql,1,0,"img",4),e.\u0275\u0275template(10,kl,1,1,"img",5),e.\u0275\u0275elementStart(11,"div",6)(12,"mat-icon"),e.\u0275\u0275text(13,"camera_enhance"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275element(14,"div",7),e.\u0275\u0275elementStart(15,"input",8),e.\u0275\u0275listener("change",function(i){return n.onSelectFile(i)}),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(16,"div",9)(17,"div",10)(18,"mat-form-field",11)(19,"mat-label"),e.\u0275\u0275text(20,"First Name"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(21,"input",12),e.\u0275\u0275listener("keypress",function(i){return n.alphabetKeyPress(i)}),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(22,Hl,2,1,"mat-error",13),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(23,"mat-form-field",11)(24,"mat-label"),e.\u0275\u0275text(25,"Middle Name"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(26,"input",14),e.\u0275\u0275listener("keypress",function(i){return n.alphabetKeyPress(i)}),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(27,Ul,2,1,"mat-error",13),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(28,"mat-form-field",11)(29,"mat-label"),e.\u0275\u0275text(30,"Last Name"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(31,"input",15),e.\u0275\u0275listener("keypress",function(i){return n.alphabetKeyPress(i)}),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(32,Bl,2,1,"mat-error",13),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(33,"div",10)(34,"mat-form-field",11)(35,"mat-label"),e.\u0275\u0275text(36,"Email"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(37,"input",16),e.\u0275\u0275template(38,Yl,2,0,"mat-error",13),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(39,"mat-form-field",11)(40,"mat-label"),e.\u0275\u0275text(41,"Contact"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(42,"input",17),e.\u0275\u0275template(43,jl,2,1,"mat-error",13),e.\u0275\u0275template(44,zl,2,0,"mat-error",13),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(45,"mat-form-field",11)(46,"mat-label"),e.\u0275\u0275text(47,"Address"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(48,"input",18),e.\u0275\u0275template(49,Wl,2,1,"mat-error",13),e.\u0275\u0275elementEnd()(),e.\u0275\u0275element(50,"div",19),e.\u0275\u0275elementStart(51,"div",10)(52,"mat-form-field",11)(53,"mat-label"),e.\u0275\u0275text(54,"Country"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(55,"mat-select",20),e.\u0275\u0275elementContainerStart(56),e.\u0275\u0275template(57,$l,3,2,"div",21),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(58,Gl,2,1,"mat-error",13),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(59,"mat-form-field",11)(60,"mat-label"),e.\u0275\u0275text(61,"State"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(62,"mat-select",22),e.\u0275\u0275elementContainerStart(63),e.\u0275\u0275template(64,Ql,3,2,"div",21),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(65,Xl,2,1,"mat-error",13),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(66,"mat-form-field",11)(67,"mat-label"),e.\u0275\u0275text(68,"City"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(69,"mat-select",23),e.\u0275\u0275elementContainerStart(70),e.\u0275\u0275template(71,Kl,3,2,"div",21),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(72,Jl,2,1,"mat-error",13),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(73,"div",10)(74,"mat-form-field",24)(75,"mat-label"),e.\u0275\u0275text(76,"Pincode"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(77,"input",25),e.\u0275\u0275template(78,Zl,2,1,"mat-error",13),e.\u0275\u0275template(79,ei,2,1,"mat-error",13),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(80,"div",26)(81,"button",27),e.\u0275\u0275listener("click",function(){return n.submit(!0)}),e.\u0275\u0275elementStart(82,"span"),e.\u0275\u0275text(83,"Submit"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(84,"button",28),e.\u0275\u0275listener("click",function(){return n.cancel()}),e.\u0275\u0275elementStart(85,"span"),e.\u0275\u0275text(86,"Cancel"),e.\u0275\u0275elementEnd()()()()()()(),e.\u0275\u0275element(87,"ngx-spinner",29)),2&t&&(e.\u0275\u0275advance(1),e.\u0275\u0275property("formGroup",n.editForm),e.\u0275\u0275advance(8),e.\u0275\u0275property("ngIf",!n.imageurls),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.imageurls),e.\u0275\u0275advance(12),e.\u0275\u0275property("ngIf",null==n.editForm.controls.firstName.errors?null:n.editForm.controls.firstName.errors.required),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngIf",null==n.editForm.controls.middlename.errors?null:n.editForm.controls.middlename.errors.required),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngIf",null==n.editForm.controls.lastName.errors?null:n.editForm.controls.lastName.errors.required),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngIf",(null==n.editForm.controls.email.errors?null:n.editForm.controls.email.errors.email)||(null==n.editForm.controls.email.errors?null:n.editForm.controls.email.errors.pattern)),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngIf",null==n.editForm.controls.contact.errors?null:n.editForm.controls.contact.errors.required),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.editForm.get("contact").hasError("pattern")),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngIf",null==n.editForm.controls.address.errors?null:n.editForm.controls.address.errors.required),e.\u0275\u0275advance(8),e.\u0275\u0275property("ngForOf",n.CountryDetails),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==n.editForm.controls.countryId.errors?null:n.editForm.controls.countryId.errors.required),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngForOf",n.stateDetails),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==n.editForm.controls.stateId.errors?null:n.editForm.controls.stateId.errors.required),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngForOf",n.cityDetails),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==n.editForm.controls.cityId.errors?null:n.editForm.controls.cityId.errors.required),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngIf",null==n.editForm.controls.zipCode.errors?null:n.editForm.controls.zipCode.errors.required),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==n.editForm.controls.zipCode.errors?null:n.editForm.controls.zipCode.errors.minlength))},dependencies:[u.sg,u.O5,S.ey,c.a8,c.dk,c.n5,W.Hw,h.TO,h.KE,h.hX,V.Nt,j.gD,s._Y,s.Fj,s.JJ,s.JL,s.Q7,s.wO,s.nD,s.sg,s.u,v.xw,v.Wh,v.yH,b.Ro,ve.p],styles:[".btn-file[_ngcontent-%COMP%]{position:relative;overflow:hidden}.btn-file[_ngcontent-%COMP%]   input[type=file][_ngcontent-%COMP%]{position:absolute;top:0;right:0;min-width:100%;min-height:100%;font-size:100px;text-align:right;filter:alpha(opacity=0);opacity:0;outline:none;background:white;cursor:inherit;display:block}.custom-image[_ngcontent-%COMP%]{margin-bottom:10px;height:193px;width:188px}.custom-button-save[_ngcontent-%COMP%]{width:33%}.custom-font-white[_ngcontent-%COMP%]{color:#fff}.custom-view-mbt-1[_ngcontent-%COMP%]{margin-bottom:1rem}.profileImage[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.customForImage[_ngcontent-%COMP%]{border:ridge;padding:20px}.custopmDiv[_ngcontent-%COMP%]{justify-content:center}.img1[_ngcontent-%COMP%]{height:100%;width:100%;border-radius:50%}.hoverable1[_ngcontent-%COMP%]{position:relative;display:block;cursor:pointer;height:150px;width:150px;border:2px solid #28acaf;border-radius:50%}.hoverable1[_ngcontent-%COMP%]   .hover-text[_ngcontent-%COMP%]{position:absolute;display:none;top:50%;left:50%;transform:translate(-50%,-50%);z-index:2}.hoverable1[_ngcontent-%COMP%]   .background[_ngcontent-%COMP%]{position:absolute;display:none;inset:0;background-color:#ffffff80;pointer-events:none;border-radius:50%;z-index:1}.hoverable1[_ngcontent-%COMP%]:hover   .hover-text[_ngcontent-%COMP%], .hoverable1[_ngcontent-%COMP%]:hover   .background[_ngcontent-%COMP%]{display:block}#fileInput[_ngcontent-%COMP%]{display:none}mat-card[_ngcontent-%COMP%]{transition:box-shadow .28s cubic-bezier(.4,0,.2,1);display:block;position:relative;padding-left:1%;padding-right:0}.tableP[_ngcontent-%COMP%]{padding:1%}"]}),a})();const ai=["calendar"];function ni(a,o){if(1&a&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"mat-card",14)(2,"div",15),e.\u0275\u0275element(3,"img",16),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"div",17)(5,"mat-label")(6,"span",18),e.\u0275\u0275text(7),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(8,"div",19)(9,"mat-label")(10,"span",18),e.\u0275\u0275text(11),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementContainerEnd()),2&a){const t=o.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275styleProp("background",t.leavecolor),e.\u0275\u0275advance(6),e.\u0275\u0275textInterpolate1(" ",t.display_name,""),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate(t.leave_balance)}}function oi(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"div",6)(1,"mat-card",7)(2,"mat-card-header",8)(3,"div",9)(4,"mat-card-title",10),e.\u0275\u0275text(5," Leave Balance "),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(6,"mat-card-content",11)(7,"div",12),e.\u0275\u0275template(8,ni,12,4,"ng-container",13),e.\u0275\u0275elementEnd()()()()),2&a){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(8),e.\u0275\u0275property("ngForOf",t.leavebalance)}}function li(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"div",5),e.\u0275\u0275template(1,oi,9,1,"div",3),e.\u0275\u0275elementEnd()),2&a){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.isdata)}}function ii(a,o){1&a&&(e.\u0275\u0275elementStart(0,"th",38),e.\u0275\u0275text(1," Day "),e.\u0275\u0275elementEnd())}function ri(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"td",39)(1,"span"),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd()()),2&a){const t=o.$implicit;e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t.day)}}function si(a,o){1&a&&(e.\u0275\u0275elementStart(0,"th",38),e.\u0275\u0275text(1," Date "),e.\u0275\u0275elementEnd())}function mi(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"td",40)(1,"span"),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"date"),e.\u0275\u0275elementEnd()()),2&a){const t=o.$implicit;e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind2(3,1,t.date,"dd-MM-yyyy"))}}function di(a,o){1&a&&(e.\u0275\u0275elementStart(0,"th",38),e.\u0275\u0275text(1," Holiday"),e.\u0275\u0275elementEnd())}function pi(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"td",39)(1,"span"),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd()()),2&a){const t=o.$implicit;e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t.description)}}function ci(a,o){1&a&&e.\u0275\u0275element(0,"tr",41)}function ui(a,o){1&a&&e.\u0275\u0275element(0,"tr",42)}function fi(a,o){1&a&&(e.\u0275\u0275elementStart(0,"tr",43)(1,"td",44),e.\u0275\u0275text(2,"No data found"),e.\u0275\u0275elementEnd()())}function vi(a,o){if(1&a){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",20)(1,"div",21)(2,"mat-card",22)(3,"mat-card-header",8)(4,"div",9)(5,"mat-card-title",10),e.\u0275\u0275text(6," Calendar"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275element(7,"full-calendar",23,24),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"mat-card",25)(10,"mat-card-header",8)(11,"div",9)(12,"mat-card-title",10),e.\u0275\u0275text(13," Holidays List"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275element(14,"br"),e.\u0275\u0275elementStart(15,"mat-card-content")(16,"table",26),e.\u0275\u0275elementContainerStart(17,27),e.\u0275\u0275template(18,ii,2,0,"th",28),e.\u0275\u0275template(19,ri,3,1,"td",29),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(20,30),e.\u0275\u0275template(21,si,2,0,"th",28),e.\u0275\u0275template(22,mi,4,4,"td",31),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(23,32),e.\u0275\u0275template(24,di,2,0,"th",28),e.\u0275\u0275template(25,pi,3,1,"td",29),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275template(26,ci,1,0,"tr",33),e.\u0275\u0275template(27,ui,1,0,"tr",34),e.\u0275\u0275template(28,fi,3,0,"tr",35),e.\u0275\u0275elementEnd()(),e.\u0275\u0275element(29,"br"),e.\u0275\u0275elementStart(30,"div",36)(31,"button",37),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const l=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(l.viewall())}),e.\u0275\u0275text(32,"View All"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275element(33,"mat-divider"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(34,"br"),e.\u0275\u0275elementEnd()}if(2&a){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(7),e.\u0275\u0275property("options",t.calendarOptions),e.\u0275\u0275advance(9),e.\u0275\u0275property("dataSource",t.holidaydatasource),e.\u0275\u0275advance(10),e.\u0275\u0275property("matHeaderRowDef",t.holidaysColumns),e.\u0275\u0275advance(1),e.\u0275\u0275property("matRowDefColumns",t.holidaysColumns)}}function _i(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"mat-form-field",48)(1,"mat-label"),e.\u0275\u0275text(2,"Approved On"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(3,"input",49),e.\u0275\u0275pipe(4,"date"),e.\u0275\u0275elementEnd()),2&a){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(3),e.\u0275\u0275propertyInterpolate("value",e.\u0275\u0275pipeBind2(4,3,t.viewdata.approvedon,"mediumDate")),e.\u0275\u0275property("readonly",!0)("readonly",!0)}}function hi(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"mat-form-field",48)(1,"mat-label"),e.\u0275\u0275text(2,"Rejected On"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(3,"input",49),e.\u0275\u0275elementEnd()),2&a){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(3),e.\u0275\u0275propertyInterpolate("value",t.viewdata.updatedon),e.\u0275\u0275property("readonly",!0)("readonly",!0)}}function gi(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"mat-form-field",48)(1,"mat-label"),e.\u0275\u0275text(2,"Deleted On"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(3,"input",49),e.\u0275\u0275pipe(4,"date"),e.\u0275\u0275elementEnd()),2&a){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(3),e.\u0275\u0275propertyInterpolate("value",e.\u0275\u0275pipeBind2(4,3,t.viewdata.updatedon,"mediumDate")),e.\u0275\u0275property("readonly",!0)("readonly",!0)}}function xi(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"mat-form-field",48)(1,"mat-label"),e.\u0275\u0275text(2,"Cancelled On"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(3,"input",49),e.\u0275\u0275pipe(4,"date"),e.\u0275\u0275elementEnd()),2&a){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(3),e.\u0275\u0275propertyInterpolate("value",e.\u0275\u0275pipeBind2(4,3,t.viewdata.updatedon,"mediumDate")),e.\u0275\u0275property("readonly",!0)("readonly",!0)}}function yi(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"mat-form-field",48)(1,"mat-label"),e.\u0275\u0275text(2,"Leave Count"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(3,"input",49),e.\u0275\u0275elementEnd()),2&a){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(3),e.\u0275\u0275propertyInterpolate("value",t.viewdata.leavecount),e.\u0275\u0275property("readonly",!0)("readonly",!0)}}function Ci(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"mat-form-field",48)(1,"mat-label"),e.\u0275\u0275text(2,"Reason for Rejection "),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(3,"input",53),e.\u0275\u0275elementEnd()),2&a){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(3),e.\u0275\u0275propertyInterpolate("value",t.viewdata.action_reason),e.\u0275\u0275property("readonly",!0)("readonly",!0)}}function Ei(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"mat-form-field",48)(1,"mat-label"),e.\u0275\u0275text(2,"Reason for Deletion"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(3,"input",49),e.\u0275\u0275elementEnd()),2&a){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(3),e.\u0275\u0275propertyInterpolate("value",t.viewdata.action_reason),e.\u0275\u0275property("readonly",!0)("readonly",!0)}}function Ii(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"mat-form-field",48)(1,"mat-label"),e.\u0275\u0275text(2,"Reason for Cancellation"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(3,"input",49),e.\u0275\u0275elementEnd()),2&a){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(3),e.\u0275\u0275propertyInterpolate("value",t.viewdata.action_reason),e.\u0275\u0275property("readonly",!0)("readonly",!0)}}function Li(a,o){if(1&a){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",6)(1,"mat-card")(2,"mat-card-header",45)(3,"div",46)(4,"mat-card-title"),e.\u0275\u0275text(5),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275element(6,"br"),e.\u0275\u0275elementStart(7,"div",47)(8,"mat-form-field",48)(9,"mat-label"),e.\u0275\u0275text(10,"Applied On"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(11,"input",49),e.\u0275\u0275pipe(12,"date"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(13,_i,5,6,"mat-form-field",50),e.\u0275\u0275template(14,hi,4,3,"mat-form-field",50),e.\u0275\u0275template(15,gi,5,6,"mat-form-field",50),e.\u0275\u0275template(16,xi,5,6,"mat-form-field",50),e.\u0275\u0275elementStart(17,"mat-form-field",48)(18,"mat-label"),e.\u0275\u0275text(19,"Type Of Leave"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(20,"input",49),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(21,yi,4,3,"mat-form-field",50),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(22,"div",47)(23,"mat-form-field",48)(24,"mat-label"),e.\u0275\u0275text(25,"From Date"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(26,"input",49),e.\u0275\u0275pipe(27,"date"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(28,"mat-form-field",48)(29,"mat-label"),e.\u0275\u0275text(30,"To Date"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(31,"input",49),e.\u0275\u0275pipe(32,"date"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(33,"mat-form-field",48)(34,"mat-label"),e.\u0275\u0275text(35,"Reason"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(36,"input",49),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(37,"div",47)(38,"mat-form-field",48)(39,"mat-label"),e.\u0275\u0275text(40,"Contact"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(41,"input",49),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(42,"mat-form-field",48)(43,"mat-label"),e.\u0275\u0275text(44,"Email"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(45,"input",49),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(46,"mat-form-field",48)(47,"mat-label"),e.\u0275\u0275text(48,"Manager"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(49,"input",49),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(50,"div",47),e.\u0275\u0275template(51,Ci,4,3,"mat-form-field",50),e.\u0275\u0275template(52,Ei,4,3,"mat-form-field",50),e.\u0275\u0275template(53,Ii,4,3,"mat-form-field",50),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(54,"div",51)(55,"button",52),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const l=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(l.close())}),e.\u0275\u0275text(56,"Close"),e.\u0275\u0275elementEnd()()()()}if(2&a){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate1("",t.viewdata.leavestatus+" Leave"," "),e.\u0275\u0275advance(6),e.\u0275\u0275propertyInterpolate("value",e.\u0275\u0275pipeBind2(12,33,t.viewdata.appliedon,"mediumDate")),e.\u0275\u0275property("readonly",!0)("readonly",!0),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf","Approved"===t.viewdata.leavestatus),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","Rejected"===t.viewdata.leavestatus),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","Deleted"===t.viewdata.leavestatus),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","Cancelled"===t.viewdata.leavestatus),e.\u0275\u0275advance(4),e.\u0275\u0275propertyInterpolate("value",t.viewdata.leavetype),e.\u0275\u0275property("readonly",!0)("readonly",!0),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","Submitted"===t.viewdata.leavestatus),e.\u0275\u0275advance(5),e.\u0275\u0275propertyInterpolate("value",e.\u0275\u0275pipeBind2(27,36,t.viewdata.fromdate,"mediumDate")),e.\u0275\u0275property("readonly",!0)("readonly",!0),e.\u0275\u0275advance(5),e.\u0275\u0275propertyInterpolate("value",e.\u0275\u0275pipeBind2(32,39,t.viewdata.todate,"mediumDate")),e.\u0275\u0275property("readonly",!0)("readonly",!0),e.\u0275\u0275advance(5),e.\u0275\u0275propertyInterpolate("value",t.viewdata.leavereason),e.\u0275\u0275property("readonly",!0)("readonly",!0),e.\u0275\u0275advance(5),e.\u0275\u0275propertyInterpolate("value",t.viewdata.contactnumber),e.\u0275\u0275property("readonly",!0)("readonly",!0),e.\u0275\u0275advance(4),e.\u0275\u0275propertyInterpolate("value",t.viewdata.contactemail),e.\u0275\u0275property("readonly",!0)("readonly",!0),e.\u0275\u0275advance(4),e.\u0275\u0275propertyInterpolate("value",t.usersession.roles[0].rm_name),e.\u0275\u0275property("readonly",!0)("readonly",!0),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf","Rejected"===t.viewdata.leavestatus),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","Deleted"===t.viewdata.leavestatus),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","Cancelled"===t.viewdata.leavestatus)}}function Si(a,o){1&a&&(e.\u0275\u0275elementStart(0,"th",38),e.\u0275\u0275text(1," Day "),e.\u0275\u0275elementEnd())}function Di(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"td",39)(1,"span"),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd()()),2&a){const t=o.$implicit;e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t.day)}}function bi(a,o){1&a&&(e.\u0275\u0275elementStart(0,"th",38),e.\u0275\u0275text(1," Date "),e.\u0275\u0275elementEnd())}function Mi(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"td",39)(1,"span"),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"date"),e.\u0275\u0275elementEnd()()),2&a){const t=o.$implicit;e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind2(3,1,t.date,"dd-MM-yyyy"))}}function Fi(a,o){1&a&&(e.\u0275\u0275elementStart(0,"th",58),e.\u0275\u0275text(1," Holiday"),e.\u0275\u0275elementEnd())}function Ri(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"td",39)(1,"span"),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd()()),2&a){const t=o.$implicit;e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t.description)}}function wi(a,o){1&a&&e.\u0275\u0275element(0,"tr",41)}function Ti(a,o){1&a&&e.\u0275\u0275element(0,"tr",42)}function Ai(a,o){1&a&&(e.\u0275\u0275elementStart(0,"tr",43)(1,"td",59),e.\u0275\u0275text(2,"No data found"),e.\u0275\u0275elementEnd()())}function Oi(a,o){if(1&a){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",5)(1,"mat-card-header",8)(2,"div",9)(3,"mat-card-title",10),e.\u0275\u0275text(4," Holiday List "),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(5,"div",54)(6,"div",55)(7,"table",26),e.\u0275\u0275elementContainerStart(8,27),e.\u0275\u0275template(9,Si,2,0,"th",28),e.\u0275\u0275template(10,Di,3,1,"td",29),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(11,30),e.\u0275\u0275template(12,bi,2,0,"th",28),e.\u0275\u0275template(13,Mi,4,4,"td",29),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(14,32),e.\u0275\u0275template(15,Fi,2,0,"th",56),e.\u0275\u0275template(16,Ri,3,1,"td",29),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275template(17,wi,1,0,"tr",33),e.\u0275\u0275template(18,Ti,1,0,"tr",34),e.\u0275\u0275template(19,Ai,3,0,"tr",35),e.\u0275\u0275elementEnd()(),e.\u0275\u0275element(20,"br"),e.\u0275\u0275elementStart(21,"div",57)(22,"button",52),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const l=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(l.close())}),e.\u0275\u0275text(23,"Close"),e.\u0275\u0275elementEnd()()()()}if(2&a){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(7),e.\u0275\u0275property("dataSource",t.holidaysalldatasource),e.\u0275\u0275advance(10),e.\u0275\u0275property("matHeaderRowDef",t.holidaysColumns),e.\u0275\u0275advance(1),e.\u0275\u0275property("matRowDefColumns",t.holidaysColumns)}}let Pi=(()=>{class a{constructor(t,n,l,i,r,d,p,_){this.router=t,this.LM=n,this.datepipe=l,this.ts=i,this.dialog=r,this.spinner=d,this.element=p,this.renderer=_,this.initialEvents=[],this.calendarOptions={headerToolbar:{left:"prev",center:"title",right:"next"},customButtons:{next:{click:this.nextMonth.bind(this)},prev:{click:this.prevMonth.bind(this)}},height:380,initialView:"dayGridMonth",weekends:!0,editable:!1,selectable:!0,selectMirror:!0,dayMaxEvents:!0},this.leavedata=[],this.leavebalance=[],this.holidaysList=[],this.holidaysListall=[],this.allleaves=[],this.leavsemaster=[],this.calenderleaves=[],this.arrayList=[],this.currentYear=(new Date).getDate(),this.pipe=new u.uU("en-US"),this.today=new Date,this.isview=!1,this.isdata=!0,this.isholidays=!1,this.maxall=20,this.calendarCount=[],this.holidaysColumns=["day","date","holiday"],this.displayedColumns=["appliedon","leavetype","fromdate","todate","days","status","approver","action"],this.dataSource=[],this.holidaydatasource=[],this.holidaysalldatasource=[]}ngOnInit(){this.getErrorMessages("LM16"),this.getErrorMessages("LM17"),this.getErrorMessages("LM73"),this.getErrorMessages("LM74"),this.usersession=JSON.parse(sessionStorage.getItem("user")||""),this.dataSource.paginator=this.paginator,this.getleavehistory(null,null),this.getHolidaysList(),this.getLeaveBalance(),this.getuserleavecalender()}getuserleavecalender(){this.spinner.show(),this.LM.getuserleavecalender(this.usersession.id).subscribe(t=>{this.spinner.hide(),this.calenderleaves=t.data,this.arrayList=t.data,this.arrayList.forEach(n=>{this.initialEvents.push({title:n.ltype,start:n.edate,color:n.color,icon:"fa-times-circle"})}),this.calendarOptions.events=this.initialEvents})}dateClass(){return t=>this.calenderleaves.map(l=>new Date(l)).some(l=>l.getDate()===t.getDate()&&l.getMonth()===t.getMonth()&&l.getFullYear()===t.getFullYear())?"special-date":""}getleavehistory(t,n){this.LM.getleavehistory(this.usersession.id,1,5).subscribe(l=>{this.allleaves=l,this.leavedata=l.data,this.dataSource=new m.by(this.leavedata)})}getHolidaysList(){this.LM.getHolidaysList(this.usersession.id).subscribe(t=>{if(t&&t.status)for(let n=0;n<t.data[0].length;n++)n<=2&&(this.holidaysList.push(t.data[0][n]),this.holidaydatasource=new m.by(this.holidaysList))})}getLeaveBalance(){this.LM.getLeaveBalance(this.usersession.id).subscribe(t=>{if(t.status)for(let n=0;n<t.data[0].length;n++)"Marriage Leave"===t.data[0][n].leavename&&"Single"===this.usersession.maritalstatus?this.leavebalance.push(t.data[0][n]):"Maternity Leave"===t.data[0][n].leavename&&"Married"===this.usersession.maritalstatus?"Female"===this.usersession.gender&&this.leavebalance.push(t.data[0][n]):"Paternity Leave"===t.data[0][n].leavename&&"Married"===this.usersession.maritalstatus?"Male"===this.usersession.gender&&this.leavebalance.push(t.data[0][n]):"Paternity Leave"!==t.data[0][n].leavename&&"Marriage Leave"!==t.data[0][n].leavename&&"Maternity Leave"!==t.data[0][n].leavename&&this.leavebalance.push(t.data[0][n])})}onSelect(t){this.today=t}view(t){this.isview=!0,this.isdata=!1,this.viewdata=t}viewall(){this.LM.getHolidays((new Date).getFullYear(),this.usersession.worklocation,1,1e3).subscribe(t=>{this.holidaysListall=t,this.holidaysListall=this.holidaysListall.data,this.holidaysalldatasource=new m.by(this.holidaysListall)}),this.isdata=!1,this.isholidays=!0}close(){this.router.navigateByUrl("/",{skipLocationChange:!0}).then(()=>this.router.navigate(["/LeaveManagement/UserDashboard"]))}cancel(t){this.deletedata=t,this.titleName="Do you really want to cancel the leave?",this.openDialogcancel()}openDialogcancel(){this.dialog.open(k.w,{width:"500px",position:{top:"100px"},data:{name:this.titleName,reason:this.reason}}).afterClosed().subscribe(n=>{this.deletedata.actionreason=n.reason,""!=n&&this.LM.cancelLeaveRequest(this.deletedata).subscribe(l=>{l.status?(this.router.navigateByUrl("/",{skipLocationChange:!0}).then(()=>this.router.navigate(["/LeaveManagement/UserDashboard"])),this.dialog.open(L.B,{position:{top:"70px"},disableClose:!0,data:"Leave request cancelled successfully."})):this.dialog.open(L.B,{position:{top:"70px"},disableClose:!0,data:"Unable to caancel leave request."})})})}delete(t){this.deletedata=t,this.titleName="Do you really want to delete the leave?",this.openDialogdelete()}openDialogdelete(){this.dialog.open(k.w,{width:"500px",position:{top:"100px"},data:{name:this.titleName,reason:this.reason}}).afterClosed().subscribe(n=>{this.deletedata.actionreason=n.reason,""!=n&&this.LM.setDeleteLeaveRequest(this.deletedata).subscribe(l=>{l.status?(this.router.navigateByUrl("/",{skipLocationChange:!0}).then(()=>this.router.navigate(["/LeaveManagement/UserDashboard"])),this.dialog.open(L.B,{position:{top:"70px"},disableClose:!0,data:"Leaverequest deleted successfully."})):this.dialog.open(L.B,{position:{top:"70px"},disableClose:!0,data:"Unable to delete leaverequest."})})})}nextMonth(){this.calendarApi=this.calendarComponent.getApi(),this.calendarApi.next()}prevMonth(){this.calendarApi=this.calendarComponent.getApi(),this.calendarApi.prev()}currentMonth(){this.calendarApi=this.calendarComponent.getApi(),this.calendarApi.today()}edit(t){t.URL="/LeaveManagement/UserDashboard",this.router.navigate(["/LeaveManagement/LeaveRequest"],{state:{leaveData:t}})}getErrorMessages(t){this.ts.getErrorMessages(t,1,1).subscribe(n=>{n.status&&"LM16"==t?this.msgLM16=n.data[0].errormessage:n.status&&"LM17"==t?this.msgLM17=n.data[0].errormessage:n.status&&"LM73"==t?this.msgLM73=n.data[0].errormessage:n.status&&"LM74"==t&&(this.msgLM74=n.data[0].errormessage)})}calendarCountViewNoMore(){setTimeout(()=>{this.sampleElement=this.element.nativeElement.querySelectorAll(".fc-daygrid-more-link");for(var t=this.element.nativeElement.querySelectorAll(".fc-daygrid-more-link.fc-more-link"),n=0;n<this.sampleElement.length;n++)this.calendarCount[n]=this.sampleElement[n].innerHTML.substring(0,this.sampleElement[n].innerHTML.length-4),this.sampleElement[n].innerHTML=this.calendarCount[n];for(var l=0;l<t.length;l++)null!=t[l]&&this.renderer.listen(t[l],"click",()=>{this.closePopUpOver()})},1e3)}closePopUpOver(){var t=this.element.nativeElement.querySelectorAll(".fc-popover-close.fc-icon.fc-icon-x");setTimeout(()=>{for(var n=0;n<t.length;n++)this.renderer.listen(t[n],"click",()=>{this.sampleElement=this.element.nativeElement.querySelectorAll(".fc-daygrid-more-link");for(var l=0;l<this.sampleElement.length;l++)this.sampleElement[l].innerHTML=this.calendarCount[l]})},500)}}return a.\u0275fac=function(t){return new(t||a)(e.\u0275\u0275directiveInject(R.F0),e.\u0275\u0275directiveInject(F.t),e.\u0275\u0275directiveInject(u.uU),e.\u0275\u0275directiveInject(ie.r),e.\u0275\u0275directiveInject(O.uw),e.\u0275\u0275directiveInject(b.t2),e.\u0275\u0275directiveInject(e.ElementRef),e.\u0275\u0275directiveInject(e.Renderer2))},a.\u0275cmp=e.\u0275\u0275defineComponent({type:a,selectors:[["app-user-dashboard"]],viewQuery:function(t,n){if(1&t&&(e.\u0275\u0275viewQuery(ai,5),e.\u0275\u0275viewQuery(M.NW,5),e.\u0275\u0275viewQuery(g.YE,5)),2&t){let l;e.\u0275\u0275queryRefresh(l=e.\u0275\u0275loadQuery())&&(n.calendarComponent=l.first),e.\u0275\u0275queryRefresh(l=e.\u0275\u0275loadQuery())&&(n.paginator=l.first),e.\u0275\u0275queryRefresh(l=e.\u0275\u0275loadQuery())&&(n.sort=l.first)}},decls:7,vars:4,consts:[["fxLayout","column",1,"first-col"],["fxLayout","column","style","padding-top: 16px;",4,"ngIf"],["fxLayout","column","style","padding-top: 1%;",4,"ngIf"],["fxLayout","column",4,"ngIf"],["size","medium","type","ball-fussion"],["fxLayout","column",2,"padding-top","16px"],["fxLayout","column"],[2,"flex-flow","nowrap"],[1,"headerbox"],["fxLayout","row","fxFlex","50"],[1,"title"],["fxLayout","row","fxLayout.xs","column","fxFlex","100","fxFlex.xs","100"],["fxLayout","row",2,"flex-wrap","nowrap","overflow-x","auto"],[4,"ngFor","ngForOf"],[2,"width","180px","margin","10px"],["fxLayout","row","fxLayoutAlign","space-between",2,"padding","5%"],["src","assets/img/earned-lave-icon.png","alt","","title",""],["fxLayout","row","fxLayoutAlign","space-between",2,"padding-left","5%"],[2,"color","white"],["fxLayout","row","fxLayoutAlign","space-between",2,"padding","5%",";text-align","center"],["fxLayout","column",2,"padding-top","1%"],["fxLayout","row","fxLayout.xs","column","fxLayout.lt-lg","column"],["fxFlex","65","fxFlex.xs","100",2,"margin-right","1%"],[2,"width","auto","height","80%",3,"options"],["calendar",""],["fxFlex","35","fxFlex.xs","100"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","day"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","date"],["mat-cell","","class","no-break",4,"matCellDef"],["matColumnDef","holiday"],["class","headerbox title","mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["fxLayout","row","fxLayoutAlign","center"],[1,"btn","btn-primary","custom","mr-2","mb-2",3,"click"],["mat-header-cell",""],["mat-cell",""],["mat-cell","",1,"no-break"],["mat-header-row","",1,"headerbox","title"],["mat-row",""],[1,"mat-row"],["colspan","10",1,"mat-cell",2,"text-align","center"],[1,""],[2,"text-align","center"],["fxLayout","row","fxLayout.xs","column","fxLayoutAlign.xs","center center"],["fxFlex.xs","100","fxFlex","30","appearance","outline",1,"mx-2","my-2"],["matInput","",3,"readonly","value"],["fxFlex.xs","100","fxFlex","30","class","mx-2 my-2","appearance","outline",4,"ngIf"],["fxLayout","row","fxLayout.xs","column","fxFlex.xs","100%","fxLayoutAlign","end"],[1,"btn","btn-danger","mr-2","mb-2",3,"click"],["matInput","","value","viewdata.action_reason",3,"readonly","value"],[1,"tableP"],[1,"mat-elevation-z1"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["fxLayout","row","fxLayout.xs","column","fxFlex.xs","100%","fxLayoutAlign","center"],["mat-header-cell","","mat-sort-header",""],["colspan","8",1,"mat-cell",2,"text-align","center"]],template:function(t,n){1&t&&(e.\u0275\u0275elementStart(0,"div",0)(1,"mat-card"),e.\u0275\u0275template(2,li,2,1,"div",1),e.\u0275\u0275template(3,vi,35,4,"div",2),e.\u0275\u0275template(4,Li,57,42,"div",3),e.\u0275\u0275template(5,Oi,24,3,"div",1),e.\u0275\u0275element(6,"ngx-spinner",4),e.\u0275\u0275elementEnd()()),2&t&&(e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",n.isdata),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.isdata),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.isview),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.isholidays))},dependencies:[u.sg,u.O5,c.a8,c.dk,c.dn,c.n5,Y.d,h.KE,h.hX,V.Nt,g.YE,g.nU,m.BZ,m.fO,m.as,m.w1,m.Dz,m.nj,m.ge,m.ev,m.XQ,m.Gk,m.Ee,v.xw,v.Wh,v.yH,b.Ro,ne.woE,u.uU],styles:['.mat-calendar-body-disabled[_ngcontent-%COMP%] > .mat-calendar-body-cell-content[_ngcontent-%COMP%]:not(.mat-calendar-body-selected):not(.mat-calendar-body-comparison-identical){background-color:red!important;color:#00000061}[_ngcontent-%COMP%]::-webkit-scrollbar{width:0px}mat-card[_ngcontent-%COMP%]{transition:box-shadow .28s cubic-bezier(.4,0,.2,1);display:block;position:relative;padding:0}.tableP[_ngcontent-%COMP%]{padding:2% 1% 1%}  .mat-select-panel[aria-label="Items per page:"] mat-option:last-child:before{content:"All";position:relative;display:block}  .mat-select-panel[aria-label="Items per page:"] mat-option:last-child .mat-option-text{display:none}.headerbox[_ngcontent-%COMP%]{height:45px;background-color:#28acaf!important;align-items:center}.title[_ngcontent-%COMP%]{font-family:Roboto;font-size:20px;font-weight:500;font-stretch:normal;font-style:normal;letter-spacing:.32px;color:#fff;margin-bottom:0}  .mat-card-header-text{margin:0 6px!important} tr .mat-header-row{height:45px!important}  .mat-form-field-appearance-outline .mat-form-field-wrapper{margin:.2em 0!important}.custom[_ngcontent-%COMP%]{width:100px!important}table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:2px 10px}']}),a})();var N=f(15861),_e=f(66608),he=f(11481),me=f(56709);function Vi(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"div")(1,"mat-option",32),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd()()),2&a){const t=o.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275propertyInterpolate("value",t.id),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(t.display_name)}}function Ni(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"mat-error",33),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&a){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",t.msgLM3," ")}}function qi(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"div")(1,"mat-option",32),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"date"),e.\u0275\u0275elementEnd()()),2&a){const t=o.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275propertyInterpolate("value",t.comp_off_date),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind2(3,2,t.comp_off_date,"dd-MM-yyyy"))}}function ki(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"mat-error",33),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&a){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",t.msgLM3," ")}}function Hi(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"mat-form-field",36)(1,"mat-label"),e.\u0275\u0275text(2,"Worked Date"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"mat-select",37),e.\u0275\u0275elementContainerStart(4),e.\u0275\u0275template(5,qi,4,5,"div",9),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(6,ki,2,1,"mat-error",10),e.\u0275\u0275elementEnd()),2&a){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(5),e.\u0275\u0275property("ngForOf",t.compOffApprovedDates),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==t.leaveRequestForm.controls.compoffApprovedDate.errors?null:t.leaveRequestForm.controls.compoffApprovedDate.errors.required)}}function Ui(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"div")(1,"mat-option",32),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd()()),2&a){const t=o.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275propertyInterpolate("value",t.id),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(t.name)}}function Bi(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"mat-error",33),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&a){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",t.msgLM3," ")}}function Yi(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"mat-form-field",7)(1,"mat-label"),e.\u0275\u0275text(2,"Employee Relations"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"mat-select",38),e.\u0275\u0275elementContainerStart(4),e.\u0275\u0275template(5,Ui,3,2,"div",9),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(6,Bi,2,1,"mat-error",10),e.\u0275\u0275elementEnd()),2&a){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(5),e.\u0275\u0275property("ngForOf",t.employeeRelations),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==t.leaveRequestForm.controls.relation.errors?null:t.leaveRequestForm.controls.relation.errors.required)}}function ji(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"div",4),e.\u0275\u0275template(1,Hi,7,2,"mat-form-field",34),e.\u0275\u0275template(2,Yi,7,2,"mat-form-field",35),e.\u0275\u0275elementEnd()),2&a){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",9==t.leaveRequestForm.controls.leaveTypeId.value),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",8==t.leaveRequestForm.controls.leaveTypeId.value)}}function zi(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"mat-error",33),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&a){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",t.msgLM3," ")}}function Wi(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"mat-checkbox",45),e.\u0275\u0275text(1,"Second Half"),e.\u0275\u0275elementEnd()),2&a){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275attribute("disabled",t.isDisableSecondHalf)}}function $i(a,o){if(1&a){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",39)(1,"mat-form-field",40)(2,"mat-label"),e.\u0275\u0275text(3,"From Date "),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"input",41),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const l=e.\u0275\u0275reference(7);return e.\u0275\u0275resetView(l.open())}),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(5,"mat-datepicker-toggle",42)(6,"mat-datepicker",null,43),e.\u0275\u0275template(8,zi,2,1,"mat-error",10),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"div"),e.\u0275\u0275template(10,Wi,2,1,"mat-checkbox",44),e.\u0275\u0275elementEnd()()}if(2&a){const t=e.\u0275\u0275reference(7),n=e.\u0275\u0275nextContext();e.\u0275\u0275advance(4),e.\u0275\u0275property("min",n.minDate)("max",n.fromMaxDate)("matDatepicker",t)("matDatepickerFilter",n.fromDateFilter),e.\u0275\u0275advance(1),e.\u0275\u0275property("for",t),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",null==n.leaveRequestForm.controls.fromDate.errors?null:n.leaveRequestForm.controls.fromDate.errors.required),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",n.isSecondHalf)}}function Gi(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"mat-error",33),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&a){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",t.msgLM3," ")}}function Qi(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"mat-checkbox",50),e.\u0275\u0275text(1,"First Half"),e.\u0275\u0275elementEnd()),2&a){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275attribute("disabled",t.isDisableFirstHalf)}}function Xi(a,o){if(1&a){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",46)(1,"mat-form-field",40)(2,"mat-label"),e.\u0275\u0275text(3,"To Date"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"input",47),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const l=e.\u0275\u0275reference(7);return e.\u0275\u0275resetView(l.open())}),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(5,"mat-datepicker-toggle",42)(6,"mat-datepicker",null,48),e.\u0275\u0275template(8,Gi,2,1,"mat-error",10),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"div"),e.\u0275\u0275template(10,Qi,2,1,"mat-checkbox",49),e.\u0275\u0275elementEnd()()}if(2&a){const t=e.\u0275\u0275reference(7),n=e.\u0275\u0275nextContext();e.\u0275\u0275advance(4),e.\u0275\u0275property("min",n.leaveRequestForm.controls.fromDate.value)("max",n.maxDate)("matDatepicker",t)("matDatepickerFilter",n.toDateFilter),e.\u0275\u0275attribute("disabled",!0),e.\u0275\u0275advance(1),e.\u0275\u0275property("for",t),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",null==n.leaveRequestForm.controls.toDate.errors?null:n.leaveRequestForm.controls.toDate.errors.required),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",n.isFirstHalf)}}function Ki(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"mat-error",33),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&a){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",t.msgLM3," ")}}function Ji(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"mat-checkbox",53),e.\u0275\u0275text(1,"Second Half"),e.\u0275\u0275elementEnd()),2&a){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275attribute("disabled",t.isDisableSecondHalf)}}function Zi(a,o){if(1&a){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",46)(1,"mat-form-field",40)(2,"mat-label"),e.\u0275\u0275text(3,"From Date "),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"input",41),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const l=e.\u0275\u0275reference(7);return e.\u0275\u0275resetView(l.open())}),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(5,"mat-datepicker-toggle",42)(6,"mat-datepicker",null,43),e.\u0275\u0275template(8,Ki,2,1,"mat-error",10),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"span",51),e.\u0275\u0275template(10,Ji,2,1,"mat-checkbox",52),e.\u0275\u0275elementEnd()()}if(2&a){const t=e.\u0275\u0275reference(7),n=e.\u0275\u0275nextContext();e.\u0275\u0275advance(4),e.\u0275\u0275property("min",n.minDate)("max",5==n.leaveRequestForm.controls.leaveTypeId.value||6==n.leaveRequestForm.controls.leaveTypeId.value||7==n.leaveRequestForm.controls.leaveTypeId.value||8==n.leaveRequestForm.controls.leaveTypeId.value?"":n.fromMaxDate)("matDatepicker",t)("matDatepickerFilter",n.fromDateFilter),e.\u0275\u0275advance(1),e.\u0275\u0275property("for",t),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",null==n.leaveRequestForm.controls.fromDate.errors?null:n.leaveRequestForm.controls.fromDate.errors.required),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",n.isSecondHalf)}}function er(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"mat-error",33),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&a){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",t.msgLM3," ")}}function tr(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"mat-checkbox",56),e.\u0275\u0275text(1,"First Half"),e.\u0275\u0275elementEnd()),2&a){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275attribute("disabled",t.isDisableFirstHalf)}}function ar(a,o){if(1&a){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",46)(1,"mat-form-field",40)(2,"mat-label"),e.\u0275\u0275text(3,"To Date "),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"input",54),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const l=e.\u0275\u0275reference(7);return e.\u0275\u0275resetView(l.open())}),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(5,"mat-datepicker-toggle",42)(6,"mat-datepicker",null,48),e.\u0275\u0275template(8,er,2,1,"mat-error",10),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"span",51),e.\u0275\u0275template(10,tr,2,1,"mat-checkbox",55),e.\u0275\u0275elementEnd()()}if(2&a){const t=e.\u0275\u0275reference(7),n=e.\u0275\u0275nextContext();e.\u0275\u0275advance(4),e.\u0275\u0275property("min",n.leaveRequestForm.controls.fromDate.value)("max",5==n.leaveRequestForm.controls.leaveTypeId.value||6==n.leaveRequestForm.controls.leaveTypeId.value||7==n.leaveRequestForm.controls.leaveTypeId.value||8==n.leaveRequestForm.controls.leaveTypeId.value?"":n.maxDate)("matDatepicker",t)("matDatepickerFilter",n.toDateFilter)("disabled",n.compofftdatehide),e.\u0275\u0275advance(1),e.\u0275\u0275property("for",t),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",null==n.leaveRequestForm.controls.toDate.errors?null:n.leaveRequestForm.controls.toDate.errors.required),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",n.isFirstHalf)}}function nr(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"mat-checkbox",59),e.\u0275\u0275text(1,"First Half"),e.\u0275\u0275elementEnd()),2&a){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275attribute("disabled",t.isDisableFirstHalf)}}function or(a,o){if(1&a){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",46)(1,"mat-form-field",40)(2,"mat-label"),e.\u0275\u0275text(3,"To Date "),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"input",57),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const l=e.\u0275\u0275reference(7);return e.\u0275\u0275resetView(l.open())}),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(5,"mat-datepicker-toggle",42)(6,"mat-datepicker",null,48),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"div"),e.\u0275\u0275template(9,nr,2,1,"mat-checkbox",58),e.\u0275\u0275elementEnd()()}if(2&a){const t=e.\u0275\u0275reference(7),n=e.\u0275\u0275nextContext();e.\u0275\u0275advance(4),e.\u0275\u0275property("min",n.leaveRequestForm.controls.fromDate.value)("max",5==n.leaveRequestForm.controls.leaveTypeId.value||6==n.leaveRequestForm.controls.leaveTypeId.value||7==n.leaveRequestForm.controls.leaveTypeId.value||8==n.leaveRequestForm.controls.leaveTypeId.value?"":n.maxDate)("matDatepicker",t),e.\u0275\u0275attribute("disabled",!0),e.\u0275\u0275advance(1),e.\u0275\u0275property("for",t),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngIf",n.isFirstHalf)}}function lr(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"mat-error",33),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&a){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",t.msgLM1," ")}}function ir(a,o){if(1&a){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",68),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const l=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(l.fileView())}),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()}if(2&a){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",t.pdfName," ")}}function rr(a,o){if(1&a){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"input",69),e.\u0275\u0275listener("change",function(l){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(i.onSelectFile(l))}),e.\u0275\u0275elementEnd()}}function sr(a,o){if(1&a){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"mat-icon",70),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const l=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(l.editdoc())}),e.\u0275\u0275text(1,"edit"),e.\u0275\u0275elementEnd()}}function mr(a,o){if(1&a){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"mat-icon",71),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const l=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(l.delete())}),e.\u0275\u0275text(1,"delete"),e.\u0275\u0275elementEnd()}}function dr(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"mat-error",72),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&a){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",t.msgLM142," ")}}function pr(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"div",4)(1,"div",60)(2,"label",61),e.\u0275\u0275text(3,"Supporting Document"),e.\u0275\u0275elementStart(4,"mat-icon",62),e.\u0275\u0275text(5,"info"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275element(6,"br"),e.\u0275\u0275template(7,ir,2,1,"button",63),e.\u0275\u0275template(8,rr,1,0,"input",64),e.\u0275\u0275text(9," \xa0 "),e.\u0275\u0275template(10,sr,2,0,"mat-icon",65),e.\u0275\u0275text(11," \xa0 "),e.\u0275\u0275template(12,mr,2,0,"mat-icon",66),e.\u0275\u0275text(13," \xa0 "),e.\u0275\u0275template(14,dr,2,1,"mat-error",67),e.\u0275\u0275elementEnd()()),2&a){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(7),e.\u0275\u0275property("ngIf",t.pdfName),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!t.pdfName),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",t.pdfName),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",t.leaveRequestForm.controls.document.value&&t.iseditDoc),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",t.submitted&&(null==t.leaveRequestForm.controls.document.errors?null:t.leaveRequestForm.controls.document.errors.required))}}function cr(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"mat-error",33),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&a){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",t.msgLM1," ")}}function ur(a,o){1&a&&(e.\u0275\u0275elementStart(0,"mat-error",73),e.\u0275\u0275text(1," Please enter valid number "),e.\u0275\u0275elementEnd())}function fr(a,o){1&a&&(e.\u0275\u0275elementStart(0,"mat-error",33),e.\u0275\u0275text(1," Please enter valid email "),e.\u0275\u0275elementEnd())}function vr(a,o){if(1&a&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"tr")(2,"td"),e.\u0275\u0275text(3),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"td",29),e.\u0275\u0275text(5),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"td",29),e.\u0275\u0275text(7),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"td",29),e.\u0275\u0275text(9),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementContainerEnd()),2&a){const t=o.$implicit;e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(t.display_name),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t.used),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t.leave_balance),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t.total)}}function _r(a,o){1&a&&(e.\u0275\u0275elementStart(0,"tr")(1,"td",74),e.\u0275\u0275text(2,"No Data Found"),e.\u0275\u0275elementEnd()())}const hr={parse:{dateInput:"LL"},display:{dateInput:"DD-MM-YYYY",monthYearLabel:"YYYY",dateA11yLabel:"LL",monthYearA11yLabel:"YYYY"}};let gr=(()=>{class a{constructor(t,n,l,i,r,d,p,_,x,y){this.sanitizer=t,this.router=n,this.location=l,this.LM=i,this.formBuilder=r,this.dialog=d,this.spinner=p,this.LMSC=_,this.emsService=x,this.attendanceService=y,this.leaveRequestForm=s.nJ,this.leavebalance=[],this.userSession=[],this.leavesTypeData=[],this.existingCount=[],this.fromdate=[],this.todate=[],this.holidays=[],this.FromDatesHalfDays=[],this.ToDatesHalfDays=[],this.iseditDoc=!0,this.isnormalleave=!1,this.isnormalflag=!1,this.isedited=!1,this.pipe=new u.uU("en-US"),this.isFirstHalf=!0,this.isSecondHalf=!0,this.pdfName=null,this.isDisableFirstHalf=!1,this.isDisableSecondHalf=!1,this.document=!1,this.isValidateLeave=!1,this.compofftdatehide=!1,this.compOffApprovedDates=[],this.isCompOff=!0,this.employeeRelations=[],this.isFile=!0,this.submitted=!1,this.documentId=null,this.documentInfo=null,this.employeeEmailData=[],this.isedit=!1,this.twoleavedisplayname=null,this.number=0,this.ispdf=!1,this.formData=new FormData,this.getDurationFoBackDatedLeave(),this.getleavecyclelastmonth(),this.leaveInfo=this.location.getState(),this.leaveData=this.leaveInfo.leaveData,null!=this.leaveData&&(this.isedit=!0,this.isnormalflag=!0)}ngOnInit(){this.userSession=JSON.parse(sessionStorage.getItem("user")||""),this.employeeId=this.userSession.id,this.activeModule=JSON.parse(sessionStorage.getItem("activeModule")||""),this.leaveRequestForm=this.formBuilder.group({leaveTypeId:["",s.kI.required],compoffApprovedDate:[""],relation:[""],fromDate:["",s.kI.required],toDate:["",s.kI.required],toDateHalf:[""],fromDateHalf:[""],leaveCount:["",s.kI.required],reason:["",[s.kI.required,this.noWhitespaceValidator()]],contact:[this.userSession.contactnumber,s.kI.required],emergencyEmail:["",[s.kI.email,s.kI.pattern("^[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,4}$")]],document:[""]}),this.getLeaveBalance(),this.getLeavesTypeInfo(),this.getApprovedCompoffs(),this.getEmployeeRelationsForBereavementLeave(),this.getDaystobedisabledfromdate(),this.getDaystobedisabledtodate(),this.getEmployeeEmailData(),this.leaveRequestForm.controls.fromDateHalf.setValue(!!this.leaveData&&"0"!=this.leaveData.fromhalfdayleave,{emitEvent:!1}),this.leaveRequestForm.controls.toDateHalf.setValue(!!this.leaveData&&"0"!=this.leaveData.tohalfdayleave,{emitEvent:!1}),this.leaveRequestForm.controls.leaveCount.setValue(this.leaveData?this.leaveData.leavecount:"",{emitEvent:!1}),this.leaveRequestForm.controls.reason.setValue(this.leaveData?this.leaveData.leavereason:"",{emitEvent:!1}),this.leaveRequestForm.controls.contact.setValue(this.leaveData?this.leaveData.contactnumber:"",{emitEvent:!1}),this.leaveRequestForm.controls.emergencyEmail.setValue(this.leaveData?this.leaveData.contactemail:""),this.leaveRequestForm.get("leaveTypeId")?.valueChanges.subscribe(t=>{this.isFile=!0,this.isFirstHalf=!0,this.isSecondHalf=!0,this.getEmployeeShiftDetailsByIdWithDates(),t&&(this.document=!1,this.leaveRequestForm.controls.fromDate.setValue("",{emitEvent:!1}),this.leaveRequestForm.controls.toDate.setValue("",{emitEvent:!1}),this.leaveRequestForm.controls.fromDateHalf.setValue("",{emitEvent:!1}),this.leaveRequestForm.controls.toDateHalf.setValue("",{emitEvent:!1}),this.leaveRequestForm.controls.leaveCount.setValue(""),this.leaveRequestForm.controls.reason.setValue(""),this.leaveRequestForm.controls.reason.setValue(""),this.leaveRequestForm.controls.contact.setValue(this.userSession.contactnumber),this.leaveRequestForm.controls.emergencyEmail.setValue(""),this.leaveRequestForm.controls.compoffApprovedDate.setValue(""),this.leaveRequestForm.controls.relation.setValue(""),("5"==this.leaveRequestForm.controls.leaveTypeId.value||"6"==this.leaveRequestForm.controls.leaveTypeId.value||"7"==this.leaveRequestForm.controls.leaveTypeId.value||"8"==this.leaveRequestForm.controls.leaveTypeId.value)&&this.getMaxCountPerTermValue(),"8"==this.leaveRequestForm.controls.leaveTypeId.value?(this.leaveRequestForm.controls.relation.setValidators([s.kI.required]),this.leaveRequestForm.controls.relation.updateValueAndValidity(),this.leaveRequestForm.controls.compoffApprovedDate.clearValidators(),this.leaveRequestForm.controls.compoffApprovedDate.updateValueAndValidity()):"9"==this.leaveRequestForm.controls.leaveTypeId.value?(this.isFirstHalf=!1,this.isSecondHalf=!1,this.leaveRequestForm.controls.compoffApprovedDate.setValidators([s.kI.required]),this.leaveRequestForm.controls.compoffApprovedDate.updateValueAndValidity(),this.leaveRequestForm.controls.relation.clearValidators(),this.leaveRequestForm.controls.relation.updateValueAndValidity()):(this.leaveRequestForm.controls.compoffApprovedDate.clearValidators(),this.leaveRequestForm.controls.compoffApprovedDate.updateValueAndValidity(),this.leaveRequestForm.controls.relation.clearValidators(),this.leaveRequestForm.controls.relation.updateValueAndValidity()))}),this.leaveRequestForm.get("fromDate")?.valueChanges.subscribe(t=>{t&&(this.leaveRequestForm.controls.toDate.setValue("",{emitEvent:!1}),this.leaveRequestForm.controls.fromDateHalf.setValue("",{emitEvent:!1}),this.leaveRequestForm.controls.toDateHalf.setValue("",{emitEvent:!1}),9!=this.leaveRequestForm.controls.leaveTypeId.value?(this.compofftdatehide=!1,this.changeFromDate(t)):(this.maxDate=this.fromMaxDate,this.compofftdatehide=!0,this.changeCompOffFromDate(t)))}),this.leaveRequestForm.get("toDate")?.valueChanges.subscribe(t=>{t&&this.changeToDate(t)}),this.leaveRequestForm.get("fromDateHalf")?.valueChanges.subscribe(t=>{this.changeHalfs()}),this.leaveRequestForm.get("compoffApprovedDate")?.valueChanges.subscribe(t=>{this.getDaystobedisabledfromdate(),""!=t&&this.getCompOffValidityDuration(t)}),this.leaveRequestForm.get("toDateHalf")?.valueChanges.subscribe(t=>{this.changeHalfs()}),this.getErrorMessages("LM1"),this.getErrorMessages("LM3"),this.getErrorMessages("LM79"),this.getErrorMessages("LM76"),this.getErrorMessages("LM7"),this.getErrorMessages("LM117"),this.getErrorMessages("LM119"),this.getErrorMessages("LM140"),this.getErrorMessages("LM141"),this.getErrorMessages("LM142"),this.leaveRequestForm.controls.contact.setValue(this.userSession.contactnumber),this.leaveRequestForm.controls.leaveCount.disable()}changeHalfs(){this.leaveRequestForm.controls.leaveTypeId.value&&this.leaveRequestForm.controls.fromDate.value&&this.leaveRequestForm.controls.toDate.value&&(this.eventBasedLeave(this.leaveRequestForm.controls.fromDate.value),this.setValidateLeave())}getLeaveBalance(){this.LM.getLeaveBalance(this.userSession.id).subscribe(t=>{t&&t.status&&(this.leavebalance=this.leaveTypes(t.data[0],!0))})}getEmployeeShiftDetailsByIdWithDates(){let t={employee_id:this.userSession.id,fromd_date:this.pipe.transform(new Date,"yyyy-MM-dd"),to_date:this.pipe.transform(new Date,"yyyy-MM-dd")};this.attendanceService.getEmployeeShiftByDates(t).subscribe(n=>{n.status&&(n.data.length>0?n.data.length>1&&this.dialog.open(L.B,{position:{top:"70px"},disableClose:!0,data:"Unable to request. please check the configure shift."}):this.dialog.open(L.B,{position:{top:"70px"},disableClose:!0,data:"Please configure the shift before requesting. Unable to request."}))})}leaveTypes(t,n){for(var l=[],i=0;i<t.length;i++)"Marriage Leave"===t[i].leavename&&"Single"===this.userSession.maritalstatus?l.push(t[i]):"Maternity Leave"===t[i].leavename&&"Married"===this.userSession.maritalstatus?"Female"===this.userSession.gender&&l.push(t[i]):"Paternity Leave"===t[i].leavename&&"Married"===this.userSession.maritalstatus?"Male"===this.userSession.gender&&l.push(t[i]):"Paternity Leave"!==t[i].leavename&&"Marriage Leave"!==t[i].leavename&&"Maternity Leave"!==t[i].leavename&&l.push(t[i]);return l}getLeavesTypeInfo(){var t=this;return(0,N.Z)(function*(){yield t.LM.getLeavesTypeInfo().subscribe(n=>{if(n.status){t.leavesTypeData=t.leaveTypes(n.data,!1),t.leaveRequestForm.controls.leaveTypeId.setValue(t.leaveData?t.leaveData.leavetypeid.toString():"",{emitEvent:!1}),(t.leaveData&&3==t.leaveData.leavetypeid||t.leaveData&&5==t.leaveData.leavetypeid)&&(t.leaveRequestForm.controls.document.value=!0,t.getUploadDocument()),t.leaveData&&(t.isValidateLeave=!0),("5"==t.leaveRequestForm.controls.leaveTypeId.value||"6"==t.leaveRequestForm.controls.leaveTypeId.value||"7"==t.leaveRequestForm.controls.leaveTypeId.value||"8"==t.leaveRequestForm.controls.leaveTypeId.value)&&t.getMaxCountPerTermValue();for(let l=0;l<t.leavesTypeData.length;l++)t.existingCount[t.leavesTypeData[l].id]=t.leavesTypeData[l].leavetypecount}})})()}getDaystobedisabledfromdate(){9==this.leaveRequestForm.controls.leaveTypeId.value&&this.leaveRequestForm.controls.compoffApprovedDate.value?this.LM.getDaysToBeDisabledForFromDateCompOff({employeeId:this.userSession.id,leaveId:this.leaveData?this.leaveData.id:null,workedDateValue:this.leaveRequestForm.controls.compoffApprovedDate.value}).then(n=>{if(n&&n.status){this.fromdate=n.data;for(var l=0;l<n.data.length;l++)n.data[l].first_half&&n.data[l].second_half?this.holidays.push(new Date(n.data[l].edate+" 00:00:00")):this.FromDatesHalfDays.push(n.data[l]);this.fromDateFilter=i=>{let r=!0;return this.holidays.forEach(d=>{this.pipe.transform(d,"yyyy/MM/dd")==this.pipe.transform(i,"yyyy/MM/dd")&&(r=!1)}),r},this.leaveRequestForm.get("fromDate").setValue(this.leaveData?new Date(this.leaveData.fromdate):"",{emitEvent:!1})}}):this.LM.getDaysToBeDisabledFromDate(this.userSession.id,this.leaveData?this.leaveData.id:null).then(t=>{if(t&&t.status){this.fromdate=t.data;for(var n=0;n<t.data.length;n++)t.data[n].first_half&&t.data[n].second_half?this.holidays.push(new Date(t.data[n].edate+" 00:00:00")):this.FromDatesHalfDays.push(t.data[n]);this.fromDateFilter=l=>{let i=!0;return this.holidays.forEach(r=>{this.pipe.transform(r,"yyyy/MM/dd")==this.pipe.transform(l,"yyyy/MM/dd")&&(i=!1)}),i},this.leaveRequestForm.get("fromDate").setValue(this.leaveData?new Date(this.leaveData.fromdate):"",{emitEvent:!1})}})}getDaystobedisabledtodate(){var t=this;return(0,N.Z)(function*(){t.todate=[],t.LM.getDaysToBeDisabledToDate(t.userSession.id,t.leaveData?t.leaveData.id:null).then(l=>{if(l&&l.status){for(var i=0;i<l.data.length;i++)l.data[i].first_half&&l.data[i].second_half?t.todate.push(new Date(l.data[i].edate)):t.ToDatesHalfDays.push(l.data[i]);t.toDateFilter=r=>{let d=!0;return t.todate.forEach(p=>{t.pipe.transform(p,"yyyy/MM/dd")==t.pipe.transform(r,"yyyy/MM/dd")&&(d=!1)}),d},t.leaveRequestForm.controls.toDate.setValue(t.leaveData?new Date(t.leaveData.todate):"",{emitEvent:!1}),t.leaveRequestForm.controls.relation.setValue(t.leaveData&&t.leaveData.bereavement_id?t.leaveData.bereavement_id.toString():"",{emitEvent:!1}),t.leaveRequestForm.controls.compoffApprovedDate.setValue(t.leaveData&&t.leaveData.worked_date?t.leaveData.worked_date:"")}})})()}cancel(t){this.router.navigateByUrl("/",{skipLocationChange:!0}).then(()=>this.router.navigate(["/LeaveManagement/LeaveRequest"]))}changeCompOffFromDate(t){this.leaveRequestForm.controls.toDate.setValue(t,{emitEvent:!1});for(let n=0;n<this.FromDatesHalfDays.length;n++)if(this.FromDatesHalfDays[n].edate===this.pipe.transform(t,"yyyy-MM-dd")){if(0===this.FromDatesHalfDays[n].first_half&&this.FromDatesHalfDays[n].second_half){this.leaveRequestForm.controls.toDateHalf.setValue(!0,{emitEvent:!1}),this.isDisableFirstHalf=!1,this.isDisableSecondHalf=!1,this.leaveRequestForm.controls.fromDateHalf.setValue(!1,{emitEvent:!1}),this.isSecondHalf=!1,this.isFirstHalf=!1,this.leaveRequestForm.controls.toDate.setValue(t,{emitEvent:!1}),this.leaveRequestForm.controls.leaveTypeId.value&&this.leaveRequestForm.controls.fromDate.value&&this.leaveRequestForm.controls.toDate.value&&this.setValidateLeave();break}if(this.FromDatesHalfDays[n].first_half&&0===this.FromDatesHalfDays[n].second_half){this.leaveRequestForm.controls.toDateHalf.setValue(!1,{emitEvent:!1}),this.isDisableFirstHalf=!1,this.isDisableSecondHalf=!0,this.leaveRequestForm.controls.fromDateHalf.setValue(!0,{emitEvent:!1}),this.isSecondHalf=!0,this.isFirstHalf=!1,this.leaveRequestForm.controls.leaveTypeId.value&&this.leaveRequestForm.controls.fromDate.value&&this.leaveRequestForm.controls.toDate.value&&this.setValidateLeave();break}}else this.leaveRequestForm.controls.toDateHalf.setValue(!1,{emitEvent:!1}),this.isDisableFirstHalf=!1,this.isDisableSecondHalf=!1,this.leaveRequestForm.controls.fromDateHalf.setValue(!1,{emitEvent:!1}),this.isSecondHalf=!1,this.isSecondHalf=!0,this.isFirstHalf=!0;this.leaveRequestForm.controls.leaveTypeId.value&&this.leaveRequestForm.controls.fromDate.value&&this.leaveRequestForm.controls.toDate.value&&this.setValidateLeave()}changeFromDate(t){this.leaveRequestForm.controls.toDate.reset(),this.leaveRequestForm.controls.leaveCount.setValue("");var n={id:this.userSession.id,date:this.pipe.transform(t,"yyyy-MM-dd"),leaveid:this.leaveData?this.leaveData.id:null};this.LM.getNextLeaveDate(n).then(l=>{if(l&&l.status){for(let r=0;r<l.data.length;r++)"0"!==l.data[r].first_half&&this.todate.push(new Date(l.data[r].fromdate));var i=0!==l.data.length?new Date(l.data[0].fromdate):"";if(this.nextLeaveDate=i,"8"!==this.leaveRequestForm.controls.leaveTypeId.value&&"7"!==this.leaveRequestForm.controls.leaveTypeId.value&&"6"!==this.leaveRequestForm.controls.leaveTypeId.value&&"5"!==this.leaveRequestForm.controls.leaveTypeId.value&&(this.maxDate=i?new Date(i):this.toMaxDate),this.FromDatesHalfDays.length>0)for(let r=0;r<this.FromDatesHalfDays.length;r++){if(this.FromDatesHalfDays[r].edate===this.pipe.transform(t,"yyyy-MM-dd")){this.FromDatesHalfDays[r].first_half&&0===this.FromDatesHalfDays[r].second_half?(this.leaveRequestForm.controls.fromDateHalf.setValue(!0,{emitEvent:!1}),this.leaveRequestForm.controls.toDateHalf.setValue(!1,{emitEvent:!1}),this.leaveRequestForm.controls.toDateHalf.setValue(!0,{emitEvent:!1}),this.isDisableSecondHalf=!0,this.isDisableFirstHalf=!1,this.isFirstHalf=!1,this.eventBasedLeave(t),this.leaveRequestForm.controls.leaveTypeId.value&&this.leaveRequestForm.controls.fromDate.value&&this.leaveRequestForm.controls.toDate.value&&this.setValidateLeave()):0===this.FromDatesHalfDays[r].first_half&&this.FromDatesHalfDays[r].second_half&&(this.eventBasedLeave(t),this.leaveRequestForm.controls.toDateHalf.setValue(!0,{emitEvent:!1}),this.isDisableFirstHalf=!0,this.isDisableSecondHalf=!1,this.leaveRequestForm.controls.fromDateHalf.setValue(!1,{emitEvent:!1}),this.maxDate=t,this.leaveRequestForm.controls.toDate.setValue(t),this.isSecondHalf=!1,this.validEventLeave(),this.leaveRequestForm.controls.leaveTypeId.value&&this.leaveRequestForm.controls.fromDate.value&&this.leaveRequestForm.controls.toDate.value&&this.setValidateLeave());break}this.leaveRequestForm.controls.toDate.setValue(this.leaveData?new Date(this.leaveData.todate):"",{emitEvent:!1}),this.leaveRequestForm.controls.fromDateHalf.setValue(!1,{emitEvent:!1}),this.leaveRequestForm.controls.toDateHalf.setValue(!1,{emitEvent:!1}),this.isFirstHalf=!0,this.isSecondHalf=!0,this.isDisableSecondHalf=!1,this.isDisableFirstHalf=!1,r===this.FromDatesHalfDays.length-1&&(this.eventBasedLeave(t),this.leaveRequestForm.controls.leaveCount.setValue("",{emitEvent:!1}),this.leaveRequestForm.controls.leaveTypeId.value&&this.leaveRequestForm.controls.fromDate.value&&this.leaveRequestForm.controls.toDate.value&&this.setValidateLeave())}else this.eventBasedLeave(t),this.leaveRequestForm.controls.leaveCount.setValue("",{emitEvent:!1}),this.leaveRequestForm.controls.leaveTypeId.value&&this.leaveRequestForm.controls.fromDate.value&&this.leaveRequestForm.controls.toDate.value&&this.setValidateLeave()}else this.leaveRequestForm.controls.leaveCount.setValue("",{emitEvent:!1}),this.leaveRequestForm.controls.leaveTypeId.value&&this.leaveRequestForm.controls.fromDate.value&&this.leaveRequestForm.controls.toDate.value&&this.setValidateLeave()})}changeToDate(t){for(let n=0;n<this.ToDatesHalfDays.length;n++){if(this.ToDatesHalfDays[n].edate===this.pipe.transform(t,"yyyy-MM-dd")){this.ToDatesHalfDays[n].first_half&&0===this.ToDatesHalfDays[n].second_half?(this.leaveRequestForm.controls.toDateHalf.setValue(!1,{emitEvent:!1}),this.leaveRequestForm.controls.fromDateHalf.setValue(!0,{emitEvent:!1}),this.isFirstHalf=!1,this.isDisableSecondHalf=!0,this.isDisableFirstHalf=!1):0===this.ToDatesHalfDays[n].first_half&&this.ToDatesHalfDays[n].second_half&&(this.leaveRequestForm.controls.fromDate.value===this.leaveRequestForm.controls.toDate.value?(this.leaveRequestForm.controls.toDateHalf.setValue(!0,{emitEvent:!1}),this.leaveRequestForm.controls.fromDateHalf.setValue(!1,{emitEvent:!1}),this.leaveRequestForm.controls.toDate.setValue(t,{emitEvent:!1}),this.isSecondHalf=!1,this.isDisableSecondHalf=!1,this.isDisableFirstHalf=!0):this.leaveRequestForm.controls.fromDateHalf.value&&0===this.ToDatesHalfDays[n].first_half?(this.isSecondHalf=!0,this.isFirstHalf=!0,this.leaveRequestForm.controls.toDateHalf.setValue(!0,{emitEvent:!1}),this.leaveRequestForm.controls.fromDateHalf.setValue(!0,{emitEvent:!1}),this.isDisableSecondHalf=!0,this.isDisableFirstHalf=!0):(this.isSecondHalf=!0,this.leaveRequestForm.controls.toDateHalf.setValue(!0,{emitEvent:!1}),this.leaveRequestForm.controls.fromDateHalf.setValue(!1,{emitEvent:!1}),this.isDisableSecondHalf=!1,this.isDisableFirstHalf=!0));break}this.isSecondHalf=!0,this.isFirstHalf=!0,this.isDisableFirstHalf=!1,this.leaveRequestForm.controls.toDateHalf.setValue(!1,{emitEvent:!1}),this.leaveRequestForm.controls.fromDateHalf.setValue(!!this.leaveRequestForm.controls.fromDateHalf.value,{emitEvent:!1})}this.leaveRequestForm.controls.leaveCount.setValue(""),this.leaveRequestForm.controls.leaveTypeId.value&&this.leaveRequestForm.controls.fromDate.value&&this.leaveRequestForm.controls.toDate.value&&this.setValidateLeave()}setValidateLeave(){var t=this,n=[];let l={empid:this.userSession.id,fromDate:this.pipe.transform(this.leaveRequestForm.controls.fromDate.value,"yyyy-MM-dd"),toDate:this.pipe.transform(this.leaveRequestForm.controls.toDate.value,"yyyy-MM-dd"),fromDateHalf:this.leaveRequestForm.controls.fromDateHalf.value,toDateHalf:this.leaveRequestForm.controls.toDateHalf.value,leaveTypeId:this.leaveRequestForm.controls.leaveTypeId.value,document:!!this.leaveRequestForm.controls.document.value,leaveId:this.leaveData?this.leaveData.id:null};this.originalleavecount="",this.LM.setValidateLeave(l).subscribe(function(){var i=(0,N.Z)(function*(r){if(r&&r.status){var d=JSON.parse(r.data[0].count_json);t.isedited=1==r.data[0].edit_flag,t.leavedeductionpolicydata={},t.leavedeductionpolicydata2={},0==r.data[0].is_normal_leave?(t.originalleavecount=r.data[0].leave_count,t.zerodisplayname=r.data[0].display_name,t.onedisplayname=r.data[1].display_name,t.zeroleavecount=r.data[0].leave_count,t.oneleavecount=r.data[1].leave_count,t.twoleavedisplayname=3==r.data.length?r.data[2].display_name:null,t.twoleavecount=3==r.data.length?r.data[2].leave_count:null,t.isnormalflag=!1,t.isnormalleave=!0,t.leavedeductionpolicydata={employee_id:r.data[0].empid,leavetype_id_original:r.data[0].ltype_id,fromdate_original:r.data[0].fdate,todate_original:r.data[0].tdate,leavetype_id:r.data[1].ltype_id,fromdate:r.data[1].fdate,todate:r.data[1].tdate,leavecount:r.data[1].leave_count,leavestatus:"Submitted",action_reason:""},t.leavedeductionpolicydata2=3==r.data.length?{employee_id:r.data[0].empid,leavetype_id_original:r.data[0].ltype_id,fromdate_original:r.data[0].fdate,todate_original:r.data[0].tdate,leavetype_id:r.data[2].ltype_id,fromdate:r.data[2].fdate,todate:r.data[2].tdate,leavecount:r.data[2].leave_count,leavestatus:"Submitted",action_reason:""}:null,t.submitted&&t.dialog.open(_e.y,{position:{top:"70px"},disableClose:!0,data:{content:"Based on your company's leave policies, the following leaves will be deducted from your leave balance.",message0:r.data[0].display_name+" : "+r.data[0].leave_count,message1:r.data[1].display_name+" : "+r.data[1].leave_count,message2:r.data[2].display_name+" : "+t.twoleavecount,query:"Do you wish to continue?",YES:"YES",NO:"No"}}).afterClosed().subscribe(_=>{if("YES"==_){let x="";if(t.leavesTypeData.forEach(y=>{y.id==t.leaveRequestForm.controls.leaveTypeId.value&&(x=y.display_name)}),t.isFile){let y={id:t.leaveData?t.leaveData.id:"",empid:t.userSession.id,fromDate:t.pipe.transform(t.leaveRequestForm.controls.fromDate.value,"yyyy-MM-dd"),compOffWorkedDate:t.leaveRequestForm.controls.compoffApprovedDate.value,relation:t.leaveRequestForm.controls.relation.value,toDate:t.pipe.transform(t.leaveRequestForm.controls.toDate.value,"yyyy-MM-dd"),fromDateHalf:t.leaveRequestForm.controls.fromDateHalf.value,toDateHalf:t.leaveRequestForm.controls.toDateHalf.value,leaveTypeId:t.leaveRequestForm.controls.leaveTypeId.value,leaveCount:t.originalleavecount,reason:t.leaveRequestForm.controls.reason.value,contact:t.leaveRequestForm.controls.contact.value,emergencyEmail:t.leaveRequestForm.controls.emergencyEmail.value,document:t.leaveRequestForm.controls.document.value,status:t.isedited?"Edited":"Submitted",emailData:t.employeeEmailData,leavetypename:x};t.LM.setEmployeeLeave(y).subscribe(function(){var D=(0,N.Z)(function*(E){E&&E.status?t.isnormalleave?t.file?t.LM.getFilepathsMaster(t.activeModule.moduleid).subscribe(w=>{w&&w.status&&t.LM.setFilesMaster({id:t.documentId?t.documentId:null,employeeId:t.userSession.id,candidateId:null,filecategory:3==t.leaveRequestForm.controls.leaveTypeId.value?"SL":"ML",moduleId:t.activeModule.moduleid,documentnumber:"",fileName:t.file.name,modulecode:w.data[0].module_code,requestId:E.data[0].last_insert_id,status:"Submitted"}).subscribe(q=>{if(q&&q.status){t.isnormalflag&&t.setLeavePolicyDeduction();let U=JSON.stringify(q.data[0]);t.formData.append("info",U),t.formData.append("file",t.file,t.file.name),t.LM.setProfileImage(t.formData).subscribe(function(){var $=(0,N.Z)(function*(G){t.formData.delete("file"),t.formData.delete("info"),G&&G.status&&t.documentId&&t.LMSC.removeImage(t.documentInfo).subscribe(pe=>{}),t.open(E.isLeaveUpdated?t.msgLM76:t.msgLM79,"8%","500px","250px",!1,"/LeaveManagement/UserDashboard"),t.file=null});return function(G){return $.apply(this,arguments)}}())}else t.LM.deleteFilesMaster(E.data[0].id).subscribe(U=>{})})}):(yield t.setLeavePolicyDeduction(),t.open(E.isLeaveUpdated?t.msgLM76:t.msgLM79,"8%","500px","250px",!1,"/LeaveManagement/UserDashboard")):t.file?t.LM.getFilepathsMaster(t.activeModule.moduleid).subscribe(w=>{w&&w.status&&t.LM.setFilesMaster({id:t.documentId?t.documentId:null,employeeId:t.userSession.id,candidateId:null,filecategory:3==t.leaveRequestForm.controls.leaveTypeId.value?"SL":"ML",moduleId:t.activeModule.moduleid,documentnumber:"",fileName:t.file.name,modulecode:w.data[0].module_code,requestId:E.data[0].last_insert_id,status:"Submitted"}).subscribe(q=>{if(q&&q.status){let U=JSON.stringify(q.data[0]);t.formData.append("info",U),t.formData.append("file",t.file,t.file.name),t.LM.setProfileImage(t.formData).subscribe($=>{t.formData.delete("file"),t.formData.delete("info"),$&&$.status&&t.documentId&&t.LMSC.removeImage(t.documentInfo).subscribe(G=>{}),t.open(E.isLeaveUpdated?t.msgLM76:t.msgLM79,"8%","500px","250px",!1,"/LeaveManagement/UserDashboard"),t.file=null})}else t.LM.deleteFilesMaster(E.data[0].id).subscribe(U=>{})})}):t.open(E.isLeaveUpdated?t.msgLM76:t.msgLM79,"8%","500px","250px",!1,"/LeaveManagement/UserDashboard"):t.open({Message:t.msgLM119},"8%","500px","250px",!1,"/LeaveManagement/UserDashboard")});return function(E){return D.apply(this,arguments)}}())}else t.isFile=!1,t.open(t.ispdf?t.msgLM141:t.msgLM140,"8%","500px","250px",!1,"/LeaveManagement/LeaveRequest")}else t.isnormalflag=!1})):(t.isnormalleave=!1,t.isnormalflag=!0);for(let p=0;p<d.length;p++)n.push(d[p].message);t.leaveRequestForm.controls.leaveCount.setValue(JSON.parse(r.data[0].count_json)[0].leavecount),r.status&&1===d[0].message?(d[0].fileupload&&!t.leaveRequestForm.controls.document.value&&(t.document=!1,t.leaveRequestForm.controls.document.setValidators(),t.leaveRequestForm.get("document").updateValueAndValidity()),t.isValidateLeave=!0):(d[0].fileupload||(t.document=!0,t.leaveRequestForm.controls.document.setValidators([s.kI.required]),t.leaveRequestForm.get("document").updateValueAndValidity()),t.isValidateLeave=!1,t.open(d,"8%","40%","400px",!0,"/LeaveManagement/LeaveRequest"))}});return function(r){return i.apply(this,arguments)}}())}open(t,n,l,i,r,d){this.dialog.open(C.S,{position:{top:"70px"},data:{Message:t,flag:r,url:d}}).afterClosed().subscribe(_=>{})}setApplyLeave(){var t=this;if(this.submitted=!0,"VALID"===this.leaveRequestForm.status&&this.leaveRequestForm.controls.fromDate.value<=this.leaveRequestForm.controls.toDate.value&&(this.isnormalflag||this.submitleavepolicy(),this.isnormalflag&&(this.setValidateLeave(),this.isValidateLeave&&this.validEventLeave()))){let n="";if(this.leavesTypeData.forEach(l=>{l.id==this.leaveRequestForm.controls.leaveTypeId.value&&(n=l.display_name)}),this.isFile){let l={id:this.leaveData?this.leaveData.id:"",empid:this.userSession.id,fromDate:this.pipe.transform(this.leaveRequestForm.controls.fromDate.value,"yyyy-MM-dd"),compOffWorkedDate:this.leaveRequestForm.controls.compoffApprovedDate.value,relation:this.leaveRequestForm.controls.relation.value,toDate:this.pipe.transform(this.leaveRequestForm.controls.toDate.value,"yyyy-MM-dd"),fromDateHalf:this.leaveRequestForm.controls.fromDateHalf.value,toDateHalf:this.leaveRequestForm.controls.toDateHalf.value,leaveTypeId:this.leaveRequestForm.controls.leaveTypeId.value,leaveCount:this.leaveRequestForm.controls.leaveCount.value,reason:this.leaveRequestForm.controls.reason.value,contact:this.leaveRequestForm.controls.contact.value,emergencyEmail:this.leaveRequestForm.controls.emergencyEmail.value,document:this.leaveRequestForm.controls.document.value,status:this.isedited?"Edited":"Submitted",emailData:this.employeeEmailData,leavetypename:n};this.LM.setEmployeeLeave(l).subscribe(function(){var i=(0,N.Z)(function*(r){r&&r.status?t.isnormalleave?t.file?t.LM.getFilepathsMaster(t.activeModule.moduleid).subscribe(d=>{d&&d.status&&t.LM.setFilesMaster({id:t.documentId?t.documentId:null,employeeId:t.userSession.id,candidateId:null,filecategory:3==t.leaveRequestForm.controls.leaveTypeId.value?"SL":"ML",moduleId:t.activeModule.moduleid,documentnumber:"",fileName:t.file.name,modulecode:d.data[0].module_code,requestId:r.data[0].last_insert_id,status:"Submitted"}).subscribe(_=>{if(_&&_.status){t.isnormalflag&&t.setLeavePolicyDeduction();let x=JSON.stringify(_.data[0]);t.formData.append("info",x),t.formData.append("file",t.file,t.file.name),t.LM.setProfileImage(t.formData).subscribe(function(){var y=(0,N.Z)(function*(D){t.formData.delete("file"),t.formData.delete("info"),D&&D.status?(t.documentId&&t.LMSC.removeImage(t.documentInfo).subscribe(E=>{}),t.open(r.isLeaveUpdated?t.msgLM76:t.msgLM79,"8%","500px","250px",!1,"/LeaveManagement/UserDashboard")):(t.open(r.isLeaveUpdated?t.msgLM76:t.msgLM79,"8%","500px","250px",!1,"/LeaveManagement/UserDashboard"),(yield t.isnormalflag)&&t.setLeavePolicyDeduction()),t.file=null});return function(D){return y.apply(this,arguments)}}())}else t.LM.deleteFilesMaster(r.data[0].id).subscribe(x=>{})})}):!t.isnormalflag||(yield t.setLeavePolicyDeduction()):t.file?t.LM.getFilepathsMaster(t.activeModule.moduleid).subscribe(d=>{d&&d.status&&t.LM.setFilesMaster({id:t.documentId?t.documentId:null,employeeId:t.userSession.id,candidateId:null,filecategory:3==t.leaveRequestForm.controls.leaveTypeId.value?"SL":"ML",moduleId:t.activeModule.moduleid,documentnumber:"",fileName:t.file.name,modulecode:d.data[0].module_code,requestId:r.data[0].last_insert_id,status:"Submitted"}).subscribe(_=>{if(_&&_.status){let x=JSON.stringify(_.data[0]);t.formData.append("info",x),t.formData.append("file",t.file,t.file.name),t.LM.setProfileImage(t.formData).subscribe(y=>{t.formData.delete("file"),t.formData.delete("info"),y&&y.status&&t.documentId&&t.LMSC.removeImage(t.documentInfo).subscribe(D=>{}),t.open(r.isLeaveUpdated?t.msgLM76:t.msgLM79,"8%","500px","250px",!1,"/LeaveManagement/UserDashboard"),t.file=null})}else t.LM.deleteFilesMaster(r.data[0].id).subscribe(x=>{})})}):t.open(r.isLeaveUpdated?t.msgLM76:t.msgLM79,"8%","500px","250px",!1,"/LeaveManagement/UserDashboard"):t.open({Message:t.msgLM119},"8%","500px","250px",!1,"/LeaveManagement/UserDashboard")});return function(r){return i.apply(this,arguments)}}())}else this.isFile=!1,this.open(this.ispdf?this.msgLM141:this.msgLM140,"8%","500px","250px",!1,"/LeaveManagement/LeaveRequest")}}fileView(){window.open(this.fileURL)}getUploadDocument(){this.spinner.show(),this.LM.getFilesMaster({employeeId:this.userSession.id,candidateId:null,filecategory:3==this.leaveData.leavetypeid?"SL":"ML",moduleId:this.activeModule.moduleid,requestId:this.leaveData?this.leaveData.id:null,status:"Submitted"}).subscribe(n=>{n&&n.status&&n.data.length>0?(this.documentId=n.data[0].id,this.documentInfo=JSON.stringify(n.data[0]),this.pdfName=n.data[0].fname,n.data[0].employeeId=this.userSession.id,this.LM.getProfileImage(n.data[0]).subscribe(i=>{if(this.spinner.hide(),i.success){this.document=!0,this.leaveRequestForm.controls.document.value=!0,this.leaveRequestForm.controls.document.clearValidators(),this.leaveRequestForm.controls.document.updateValueAndValidity(),this.iseditDoc=!1;let r=new Uint8Array(i.image.data);r.reduce((_,x)=>_+String.fromCharCode(x),"");const p=new Blob([r],{type:"application/pdf"});this.fileURL=URL.createObjectURL(p)}})):this.spinner.hide()})}getErrorMessages(t){this.LM.getErrorMessages(t,1,1).subscribe(n=>{n.status&&"LM79"==t?this.msgLM79=n.data[0].errormessage:n.status&&"LM76"==t?this.msgLM76=n.data[0].errormessage:n.status&&"LM1"==t?this.msgLM1=n.data[0].errormessage:n.status&&"LM3"==t?this.msgLM3=n.data[0].errormessage:n.status&&"LM7"==t?this.msgLM7=n.data[0].errormessage:n.status&&"LM119"==t?this.msgLM119=n.data[0].errormessage:n.status&&"LM140"==t?this.msgLM140=n.data[0].errormessage:n.status&&"LM141"==t?this.msgLM141=n.data[0].errormessage:n.status&&"LM142"==t&&(this.msgLM142=n.data[0].errormessage)})}getDurationFoBackDatedLeave(){this.LM.getDurationFoBackDatedLeave().subscribe(t=>{if(t&&t.status)if(this.roleValue=t.data[0].value,new Date<new Date(this.userSession.dateofjoin))this.minDate=new Date(this.userSession.dateofjoin);else{let n=new Date(this.userSession.dateofjoin),l=new Date,i=Math.floor((Date.UTC(l.getFullYear(),l.getMonth(),l.getDate())-Date.UTC(n.getFullYear(),n.getMonth(),n.getDate()))/864e5);Number(i)>Number(this.roleValue)?(this.minDate=new Date,this.minDate.setDate(this.minDate.getDate()-this.roleValue)):this.minDate=n}})}getleavecyclelastmonth(){this.LM.getleavecyclelastmonth().subscribe(t=>{t&&t.status&&(this.toMaxDate=new Date(t.data[0].last_date),this.maxDate=new Date(t.data[0].last_date),this.fromMaxDate=new Date(t.data[0].last_date))})}editdoc(){this.pdfName=null}getApprovedCompoffs(){this.LM.getApprovedCompoffs({id:this.userSession.id,leaveId:this.leaveData?this.leaveData.id:null}).subscribe(n=>{n&&n.status&&(this.compOffApprovedDates=n.data,this.leaveRequestForm.controls.compoffApprovedDate.setValue(this.leaveData&&this.leaveData.worked_date?this.leaveData.worked_date:""))})}getEmployeeRelationsForBereavementLeave(){this.LM.getEmployeeRelationsForBereavementLeave({id:this.userSession.id,leaveId:this.leaveData?this.leaveData.id:null}).subscribe(n=>{n&&n.status&&(this.employeeRelations=n.data)})}getMaxCountPerTermValue(){this.LM.getMaxCountPerTermValue(this.leaveRequestForm.controls.leaveTypeId.value).subscribe(t=>{t&&t.status&&(this.maxCountPerTermValue=parseInt(t.data[0].max_count)-1)})}eventBasedLeave(t){if("8"===this.leaveRequestForm.controls.leaveTypeId.value||"7"===this.leaveRequestForm.controls.leaveTypeId.value||"6"===this.leaveRequestForm.controls.leaveTypeId.value||"5"===this.leaveRequestForm.controls.leaveTypeId.value){var n=new Date(t);this.leaveRequestForm.controls.fromDateHalf.value?(this.isFirstHalf=!0,this.isDisableFirstHalf=!0,this.leaveRequestForm.controls.toDateHalf.setValue(!0,{emitEvent:!1}),this.leaveRequestForm.controls.toDate.setValue(new Date(n.setDate(n.getDate()+this.maxCountPerTermValue+1)),{emitEvent:!1})):this.leaveRequestForm.controls.toDate.setValue(new Date(n.setDate(n.getDate()+this.maxCountPerTermValue)),{emitEvent:!1})}}validEventLeave(){if("8"===this.leaveRequestForm.controls.leaveTypeId.value||"7"===this.leaveRequestForm.controls.leaveTypeId.value||"6"===this.leaveRequestForm.controls.leaveTypeId.value||"5"===this.leaveRequestForm.controls.leaveTypeId.value){if(this.leaveRequestForm.controls.fromDate.value<this.nextLeaveDate&&this.nextLeaveDate<this.leaveRequestForm.controls.toDate.value){var t=[{message:"Please cancel the leave on "+this.pipe.transform(new Date(this.nextLeaveDate),"dd-MM-yyyy")+" day"},{message:"Please change from date"}];return this.open(t,"8%","40%","400px",!0,"/LeaveManagement/LeaveRequest"),!1}return this.maxCountPerTermValue+1!=parseInt(this.leaveRequestForm.controls.leaveCount.value)?(this.open(t=[{message:"Total Leave count should be "+(this.maxCountPerTermValue+1)+" days"},{message:"Please change from date"}],"8%","40%","400px",!0,"/LeaveManagement/LeaveRequest"),!1):!(!this.leaveRequestForm.controls.fromDateHalf.value&&this.leaveRequestForm.controls.toDateHalf.value&&(this.open(t=[{message:"Change from date because you already submitted second half"}],"8%","40%","400px",!0,"/LeaveManagement/LeaveRequest"),1))}return!0}onSelectFile(t){if(this.iseditDoc=!0,t.target.files[0].size<=1242880){this.file=t.target.files[0];var n=this.file.name.split(".");"pdf"==n[n.length-1]?(this.isFile=!0,this.setValidateLeave()):(this.ispdf=!0,this.isFile=!1,this.setValidateLeave(),this.open(this.msgLM141,"8%","500px","250px",!1,"/LeaveManagement/LeaveRequest"))}else this.ispdf=!1,this.isFile=!1,this.setValidateLeave(),this.open(this.msgLM140,"8%","500px","250px",!1,"/LeaveManagement/LeaveRequest")}delete(){this.leaveRequestForm.controls.document.setValue("")}getEmployeeEmailData(){this.employeeEmailData=[],this.emsService.getEmployeeEmailDataByEmpid(this.employeeId).subscribe(t=>{this.employeeEmailData=JSON.parse(t.data[0].jsonvalu)[0]})}noWhitespaceValidator(){return t=>0===(t.value||"").trim().length?{whitespace:!0}:null}getCompOffValidityDuration(t){this.LM.getCompOffValidityDuration().subscribe(n=>{if(n.status){this.fromMaxDate="";var l=new Date(t);this.minDate=new Date(t),l.setDate(l.getDate()+Number(n.data[0].value)),this.fromMaxDate=l}})}setLeavePolicyDeduction(){this.LM.setLeavePolicyDeduction(this.leavedeductionpolicydata).subscribe(t=>{t.status&&null!=this.leavedeductionpolicydata2&&this.LM.setLeavePolicyDeductionSecond(this.leavedeductionpolicydata2).subscribe(n=>{})})}submitleavepolicy(){var t=this;this.dialog.open(_e.y,{position:{top:"70px"},disableClose:!0,data:{content:"Based on your company's leave policies, the following leaves will be deducted from your leave balance.",message0:this.zerodisplayname+" : "+this.zeroleavecount,message1:this.onedisplayname+" : "+this.oneleavecount,message2:null!=this.twoleavedisplayname?this.twoleavedisplayname+" : "+this.twoleavecount:null,query:"Do you wish to continue?",YES:"YES",NO:"No"}}).afterClosed().subscribe(l=>{if("YES"==l){let i="";if(this.leavesTypeData.forEach(r=>{r.id==this.leaveRequestForm.controls.leaveTypeId.value&&(i=r.display_name)}),this.isFile){let r={id:this.leaveData?this.leaveData.id:"",empid:this.userSession.id,fromDate:this.pipe.transform(this.leaveRequestForm.controls.fromDate.value,"yyyy-MM-dd"),compOffWorkedDate:this.leaveRequestForm.controls.compoffApprovedDate.value,relation:this.leaveRequestForm.controls.relation.value,toDate:this.pipe.transform(this.leaveRequestForm.controls.toDate.value,"yyyy-MM-dd"),fromDateHalf:this.leaveRequestForm.controls.fromDateHalf.value,toDateHalf:this.leaveRequestForm.controls.toDateHalf.value,leaveTypeId:this.leaveRequestForm.controls.leaveTypeId.value,leaveCount:this.originalleavecount,reason:this.leaveRequestForm.controls.reason.value,contact:this.leaveRequestForm.controls.contact.value,emergencyEmail:this.leaveRequestForm.controls.emergencyEmail.value,document:this.leaveRequestForm.controls.document.value,status:this.isedited?"Edited":"Submitted",emailData:this.employeeEmailData,leavetypename:i};this.LM.setEmployeeLeave(r).subscribe(function(){var d=(0,N.Z)(function*(p){p&&p.status?t.isnormalleave?t.file?t.LM.getFilepathsMaster(t.activeModule.moduleid).subscribe(_=>{_&&_.status&&t.LM.setFilesMaster({id:t.documentId?t.documentId:null,employeeId:t.userSession.id,candidateId:null,filecategory:3==t.leaveRequestForm.controls.leaveTypeId.value?"SL":"ML",moduleId:t.activeModule.moduleid,documentnumber:"",fileName:t.file.name,modulecode:_.data[0].module_code,requestId:p.data[0].last_insert_id,status:"Submitted"}).subscribe(y=>{if(y&&y.status){t.isnormalflag&&t.setLeavePolicyDeduction();let D=JSON.stringify(y.data[0]);t.formData.append("info",D),t.formData.append("file",t.file,t.file.name),t.LM.setProfileImage(t.formData).subscribe(function(){var E=(0,N.Z)(function*(w){t.formData.delete("file"),t.formData.delete("info"),w&&w.status&&t.documentId&&t.LMSC.removeImage(t.documentInfo).subscribe(z=>{}),t.open(p.isLeaveUpdated?t.msgLM76:t.msgLM79,"8%","500px","250px",!1,"/LeaveManagement/UserDashboard"),t.file=null});return function(w){return E.apply(this,arguments)}}())}else t.LM.deleteFilesMaster(p.data[0].id).subscribe(D=>{})})}):(t.setLeavePolicyDeduction(),t.open(p.isLeaveUpdated?t.msgLM76:t.msgLM79,"8%","500px","250px",!1,"/LeaveManagement/UserDashboard")):t.file?t.LM.getFilepathsMaster(t.activeModule.moduleid).subscribe(_=>{_&&_.status&&t.LM.setFilesMaster({id:t.documentId?t.documentId:null,employeeId:t.userSession.id,candidateId:null,filecategory:3==t.leaveRequestForm.controls.leaveTypeId.value?"SL":"ML",moduleId:t.activeModule.moduleid,documentnumber:"",fileName:t.file.name,modulecode:_.data[0].module_code,requestId:p.data[0].last_insert_id,status:"Submitted"}).subscribe(y=>{if(y&&y.status){let D=JSON.stringify(y.data[0]);t.formData.append("info",D),t.formData.append("file",t.file,t.file.name),t.LM.setProfileImage(t.formData).subscribe(E=>{t.formData.delete("file"),t.formData.delete("info"),E&&E.status&&t.documentId&&t.LMSC.removeImage(t.documentInfo).subscribe(w=>{}),t.open(p.isLeaveUpdated?t.msgLM76:t.msgLM79,"8%","500px","250px",!1,"/LeaveManagement/UserDashboard"),t.file=null})}else t.LM.deleteFilesMaster(p.data[0].id).subscribe(D=>{})})}):t.open(p.isLeaveUpdated?t.msgLM76:t.msgLM79,"8%","500px","250px",!1,"/LeaveManagement/UserDashboard"):t.open({Message:t.msgLM119},"8%","500px","250px",!1,"/LeaveManagement/UserDashboard")});return function(p){return d.apply(this,arguments)}}())}else this.isFile=!1,this.open(this.ispdf?this.msgLM141:this.msgLM140,"8%","500px","250px",!1,"/LeaveManagement/LeaveRequest")}})}}return a.\u0275fac=function(t){return new(t||a)(e.\u0275\u0275directiveInject(he.H7),e.\u0275\u0275directiveInject(R.F0),e.\u0275\u0275directiveInject(u.Ye),e.\u0275\u0275directiveInject(F.t),e.\u0275\u0275directiveInject(s.QS),e.\u0275\u0275directiveInject(O.uw),e.\u0275\u0275directiveInject(b.t2),e.\u0275\u0275directiveInject(se.D),e.\u0275\u0275directiveInject(H.b),e.\u0275\u0275directiveInject(re.v))},a.\u0275cmp=e.\u0275\u0275defineComponent({type:a,selectors:[["app-user-leave-request"]],features:[e.\u0275\u0275ProvidersFeature([{provide:S._A,useClass:X.t7,deps:[S.Ad]},{provide:S.sG,useValue:hr}])],decls:82,vars:19,consts:[["fxLayout","column",1,"first-col"],["autocomplete","off",3,"formGroup"],[1,"headerbox"],[1,"title"],["fxLayout","row","fxLayout.xs","column","fxLayoutGap","10px"],["fxFlex","60",2,"padding-left","1%"],["fxLayout","row","fxLayout.xs","column"],["fxFlex","50","fxFlex.lt-lg","100","fxFlex.xs","100","appearance","outline",1,"mx-2","my-2"],["formControlName","leaveTypeId","required","",3,"disabled"],[4,"ngFor","ngForOf"],["class","con-error",4,"ngIf"],["fxLayout","row","fxLayout.xs","column","fxLayoutGap","10px",4,"ngIf"],["fxLayout","row","fxLayout.lt-lg","column","fxLayout.xs","column",4,"ngIf"],["fxLayout","row","fxLayout.lt-lg","column","fxLayout.xs","column","fxLayoutGap","10px",4,"ngIf"],["fxFlex.xs","100","fxFlex","50","fxFlex.lt-lg","100","appearance","outline",1,"mx-2","my-2"],["formControlName","leaveCount","required","","matInput","","placeholder","Leave Count"],["fxFlex","100","appearance","outline",1,"mx-2","my-2"],["formControlName","reason","required","","matInput","","placeholder","Reason","maxlength","250"],["fxLayout","row","fxLayout.lt-lg","column","fxLayout.xs","column","fxLayoutGap","10px",2,"padding-left","5px","padding-right","5px"],["fxFlex.xs","100","fxFlex","","appearance","outline"],["formControlName","contact","maxlength","10","minlength","10","onlyNumber","","required","","matInput","","placeholder",""],["class","reg-error",4,"ngIf"],["formControlName","emergencyEmail","maxlength","50","matInput","","placeholder",""],["fxLayoutAlign","center"],[1,"btn","btn-primary","mr-2","mb-2",2,"padding","0 10px",3,"click"],[1,"btn","btn-danger","mr-2","mb-2",3,"click"],["fxFlex","40",2,"margin-top","200px"],[2,"width","100%","overflow-x","auto"],["id","table",1,"table","table-striped"],[2,"text-align","center"],[4,"ngIf"],["fxFlex.xs","100","fxFlex","100",1,"mx-2","my-2"],[3,"value"],[1,"con-error"],["fxFlex","50","fxFlex.lt-lg","100","fxFlex.lt-lg","100","fxFlex.xs","100","class","mx-2 my-2","appearance","outline",4,"ngIf"],["fxFlex","50","fxFlex.lt-lg","100","fxFlex.xs","100","class","mx-2 my-2","appearance","outline",4,"ngIf"],["fxFlex","50","fxFlex.lt-lg","100","fxFlex.lt-lg","100","fxFlex.xs","100","appearance","outline",1,"mx-2","my-2"],["formControlName","compoffApprovedDate"],["formControlName","relation"],["fxLayout","row","fxLayout.lt-lg","column","fxLayout.xs","column"],["fxFlex.xs","100","fxFlex","50","appearance","outline",1,"mx-2","my-2"],["matInput","","readonly","","placeholder","DD-MM-YYYY","formControlName","fromDate","required","",3,"min","max","matDatepicker","matDatepickerFilter","click"],["matSuffix","",1,"datepicker",3,"for"],["picker",""],["style","margin-top: 20px; margin-left: 20px","formControlName","fromDateHalf",4,"ngIf"],["formControlName","fromDateHalf",2,"margin-top","20px","margin-left","20px"],["fxLayout","row","fxLayout.lt-lg","column","fxLayout.xs","column","fxLayoutGap","10px"],["matInput","","readonly","","placeholder","DD-MM-YYYY","formControlName","toDate","required","",3,"min","max","matDatepicker","matDatepickerFilter","click"],["picker1",""],["style","margin-top: 20px; margin-left: 20px","formControlName","toDateHalf",4,"ngIf"],["formControlName","toDateHalf",2,"margin-top","20px","margin-left","20px"],[2,"padding-left","2%"],["style","margin-top: 20px","formControlName","fromDateHalf",4,"ngIf"],["formControlName","fromDateHalf",2,"margin-top","20px"],["matInput","","readonly","","placeholder","DD-MM-YYYY","formControlName","toDate","required","",3,"min","max","matDatepicker","matDatepickerFilter","disabled","click"],["style","margin-top: 20px","formControlName","toDateHalf",4,"ngIf"],["formControlName","toDateHalf",2,"margin-top","20px"],["matInput","","readonly","","placeholder","DD-MM-YYYY","formControlName","toDate","required","",3,"min","max","matDatepicker","click"],["style","margin-top: 20px; margin-left: 15px","formControlName","toDateHalf",4,"ngIf"],["formControlName","toDateHalf",2,"margin-top","20px","margin-left","15px"],[2,"padding-bottom","1.34375em","margin-left","10px"],[2,"margin-left","10px"],["title","Only pdf file upto 1MB can be uploaded",1,"iconstyle"],["class","link","style","margin-left: 10px",3,"click",4,"ngIf"],["style","margin-left: 10px","type","file","formControlName","document","required","","single","","accept","pdf",3,"change",4,"ngIf"],["title","Edit",3,"click",4,"ngIf"],["title","Delete",3,"click",4,"ngIf"],["style","margin-left: 10px","class","invalid-feedback",4,"ngIf"],[1,"link",2,"margin-left","10px",3,"click"],["type","file","formControlName","document","required","","single","","accept","pdf",2,"margin-left","10px",3,"change"],["title","Edit",3,"click"],["title","Delete",3,"click"],[1,"invalid-feedback",2,"margin-left","10px"],[1,"reg-error"],["colspan","10",2,"text-align","center"]],template:function(t,n){1&t&&(e.\u0275\u0275elementStart(0,"div",0)(1,"form",1)(2,"mat-card")(3,"mat-card-header",2)(4,"mat-card-title",3),e.\u0275\u0275text(5," Leave Request "),e.\u0275\u0275elementEnd()(),e.\u0275\u0275element(6,"mat-divider"),e.\u0275\u0275elementStart(7,"div",4)(8,"mat-card",5)(9,"div",6)(10,"mat-form-field",7)(11,"mat-label"),e.\u0275\u0275text(12,"Leave Types"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(13,"mat-select",8),e.\u0275\u0275elementContainerStart(14),e.\u0275\u0275template(15,Vi,3,2,"div",9),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(16,Ni,2,1,"mat-error",10),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(17,ji,3,2,"div",11),e.\u0275\u0275template(18,$i,11,7,"div",12),e.\u0275\u0275template(19,Xi,11,8,"div",13),e.\u0275\u0275template(20,Zi,11,7,"div",13),e.\u0275\u0275template(21,ar,11,8,"div",13),e.\u0275\u0275template(22,or,10,6,"div",13),e.\u0275\u0275elementStart(23,"div",4)(24,"mat-form-field",14)(25,"mat-label"),e.\u0275\u0275text(26,"Leave Count"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(27,"input",15),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(28,"div",4)(29,"mat-form-field",16)(30,"mat-label"),e.\u0275\u0275text(31,"Reason"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(32,"textarea",17),e.\u0275\u0275template(33,lr,2,1,"mat-error",10),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(34,pr,15,5,"div",11),e.\u0275\u0275elementStart(35,"div",18)(36,"mat-form-field",19)(37,"mat-label"),e.\u0275\u0275text(38,"Contact"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(39,"input",20),e.\u0275\u0275template(40,cr,2,1,"mat-error",10),e.\u0275\u0275template(41,ur,2,0,"mat-error",21),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(42,"mat-form-field",19)(43,"mat-label"),e.\u0275\u0275text(44,"Emergency Email"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(45,"input",22),e.\u0275\u0275template(46,fr,2,0,"mat-error",10),e.\u0275\u0275elementEnd()(),e.\u0275\u0275element(47,"div",4),e.\u0275\u0275elementStart(48,"div",23)(49,"button",24),e.\u0275\u0275listener("click",function(){return n.setApplyLeave()}),e.\u0275\u0275elementStart(50,"span"),e.\u0275\u0275text(51,"Submit"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(52,"button",25),e.\u0275\u0275listener("click",function(){return n.cancel(1)}),e.\u0275\u0275elementStart(53,"span"),e.\u0275\u0275text(54,"Cancel"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275element(55,"br"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(56,"mat-card",26)(57,"mat-card-header",2)(58,"mat-card-title",3),e.\u0275\u0275text(59," Available Leave Balance"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(60,"mat-card-content",27)(61,"table",28)(62,"thead")(63,"tr"),e.\u0275\u0275element(64,"th"),e.\u0275\u0275elementStart(65,"th",29),e.\u0275\u0275text(66,"Used"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(67,"th",29),e.\u0275\u0275text(68,"Available"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(69,"th",29),e.\u0275\u0275text(70,"Total"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(71,"tbody"),e.\u0275\u0275template(72,vr,10,4,"ng-container",9),e.\u0275\u0275template(73,_r,3,0,"tr",30),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(74,"div",4)(75,"div",31)(76,"label")(77,"b"),e.\u0275\u0275text(78,"Manager Name: "),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(79,"label")(80,"b"),e.\u0275\u0275text(81),e.\u0275\u0275elementEnd()()()()()()()()()()),2&t&&(e.\u0275\u0275advance(1),e.\u0275\u0275property("formGroup",n.leaveRequestForm),e.\u0275\u0275advance(12),e.\u0275\u0275property("disabled",n.isedit),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",n.leavesTypeData),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==n.leaveRequestForm.controls.leaveTypeId.errors?null:n.leaveRequestForm.controls.leaveTypeId.errors.required),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",9==n.leaveRequestForm.controls.leaveTypeId.value||8),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",9==n.leaveRequestForm.controls.leaveTypeId.value),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",9==n.leaveRequestForm.controls.leaveTypeId.value),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",9!=n.leaveRequestForm.controls.leaveTypeId.value),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",9!=n.leaveRequestForm.controls.leaveTypeId.value&&8!=n.leaveRequestForm.controls.leaveTypeId.value&&7!=n.leaveRequestForm.controls.leaveTypeId.value&&6!=n.leaveRequestForm.controls.leaveTypeId.value&&5!=n.leaveRequestForm.controls.leaveTypeId.value),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",8==n.leaveRequestForm.controls.leaveTypeId.value||5==n.leaveRequestForm.controls.leaveTypeId.value||6==n.leaveRequestForm.controls.leaveTypeId.value||7==n.leaveRequestForm.controls.leaveTypeId.value),e.\u0275\u0275advance(5),e.\u0275\u0275attribute("disabled",!0),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngIf",(null==n.leaveRequestForm.controls.reason.errors?null:n.leaveRequestForm.controls.reason.errors.required)||(null==n.leaveRequestForm.controls.reason.errors?null:n.leaveRequestForm.controls.reason.errors.whitespace)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.document),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngIf",null==n.leaveRequestForm.controls.contact.errors?null:n.leaveRequestForm.controls.contact.errors.required),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",(null==n.leaveRequestForm.controls.contact.errors?null:n.leaveRequestForm.controls.contact.errors.minlength)||(null==n.leaveRequestForm.controls.contact.errors?null:n.leaveRequestForm.controls.contact.errors.maxlength)),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngIf",null==n.leaveRequestForm.controls.emergencyEmail.errors?null:n.leaveRequestForm.controls.emergencyEmail.errors.email),e.\u0275\u0275advance(26),e.\u0275\u0275property("ngForOf",n.leavebalance),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.leavebalance&&0===n.leavebalance.length),e.\u0275\u0275advance(8),e.\u0275\u0275textInterpolate1("\xa0",n.userSession.roles[0].rm_name,""))},dependencies:[u.sg,u.O5,S.ey,c.a8,c.dk,c.dn,c.n5,me.oG,T.Mq,T.hl,T.nW,Y.d,W.Hw,h.TO,h.KE,h.hX,h.R9,V.Nt,j.gD,s._Y,s.Fj,s.JJ,s.JL,s.Q7,s.wO,s.nD,s.sg,s.u,v.xw,v.SQ,v.Wh,v.yH,ve.p,u.uU],styles:['.Sub[_ngcontent-%COMP%]{margin:2% 20px 20px}.matInputCheckbox[_ngcontent-%COMP%]{margin-top:20px;margin-left:20px}table[_ngcontent-%COMP%]{border:1px solid;border-color:#cfcfcf}.iconstyle[_ngcontent-%COMP%]{height:4px;width:4px}button.link[_ngcontent-%COMP%]{background:transparent;color:#00f;border:none;outline:0}button.link[_ngcontent-%COMP%]:hover{color:#80286a}  .cdk-overlay-container{z-index:1050!important}  .mat-form-field-appearance-outline .mat-form-field-wrapper{margin:0!important}.table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{color:#000;border-bottom-width:2px}.table[_ngcontent-%COMP%]{color:#000!important}mat-card[_ngcontent-%COMP%]{transition:box-shadow .28s cubic-bezier(.4,0,.2,1);display:block;position:relative;padding-left:0;padding-right:0;padding-top:16px}.tableP[_ngcontent-%COMP%]{padding-left:1%;padding-right:1%;padding-bottom:1%}.section[_ngcontent-%COMP%]{padding-top:1%;padding-left:1%;margin-bottom:2px;font-size:17px;color:#000;text-align:left;line-height:28px}.truncate-cell[_ngcontent-%COMP%]{max-width:120px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}  .mat-select-panel[aria-label="Items per page:"] mat-option:last-child:before{content:"All";position:relative;display:block}  .mat-select-panel[aria-label="Items per page:"] mat-option:last-child .mat-option-text{display:none}.headerbox[_ngcontent-%COMP%]{height:45px;background-color:#28acaf!important;align-items:center}.title[_ngcontent-%COMP%]{font-family:Roboto;font-size:20px;font-weight:500;font-stretch:normal;font-style:normal;letter-spacing:.32px;color:#fff;margin-bottom:0}  .mat-card-header-text{margin:0 6px!important} tr .mat-header-row{height:45px!important}  .mat-form-field-appearance-outline .mat-form-field-wrapper{margin:.2em 0!important}']}),a})();var xr=f(48569);const yr=["table"];function Cr(a,o){if(1&a&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"mat-option",41),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd()),2&a){const t=o.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275property("value",t.id),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate2("",t.emp_name,"\xa0-\xa0",t.empid,"")}}function Er(a,o){1&a&&(e.\u0275\u0275elementStart(0,"mat-error",42),e.\u0275\u0275text(1," Please select an option. "),e.\u0275\u0275elementEnd())}function Ir(a,o){1&a&&(e.\u0275\u0275elementStart(0,"mat-error",42),e.\u0275\u0275text(1," Please select an option. "),e.\u0275\u0275elementEnd())}function Lr(a,o){if(1&a){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",43)(1,"div")(2,"span",44),e.\u0275\u0275text(3," | "),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"a",45)(5,"img",46),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const l=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(l.exportPDF())}),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(6,"span",44),e.\u0275\u0275text(7," | "),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"a",47)(9,"img",48),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const l=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(l.exportAsXLSX())}),e.\u0275\u0275elementEnd()()()()}}function Sr(a,o){1&a&&(e.\u0275\u0275elementStart(0,"th",49),e.\u0275\u0275text(1," S.No"),e.\u0275\u0275elementEnd())}function Dr(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"td",50),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&a){const t=o.index;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",t+1," ")}}function br(a,o){1&a&&(e.\u0275\u0275elementStart(0,"th",51),e.\u0275\u0275text(1," Employee Id "),e.\u0275\u0275elementEnd())}function Mr(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"td",50)(1,"span"),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd()()),2&a){const t=o.$implicit;e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1("",t.empid," ")}}function Fr(a,o){1&a&&(e.\u0275\u0275elementStart(0,"th",52),e.\u0275\u0275text(1," Employee Name "),e.\u0275\u0275elementEnd())}function Rr(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"td",50)(1,"span"),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd()()),2&a){const t=o.$implicit;e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1("",t.empname," ")}}function wr(a,o){1&a&&(e.\u0275\u0275elementStart(0,"th",51),e.\u0275\u0275text(1,"Loss of Pay Count "),e.\u0275\u0275elementEnd())}function Tr(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"td",50)(1,"span"),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd()()),2&a){const t=o.$implicit;e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1("",t.lopcount??0," ")}}function Ar(a,o){1&a&&(e.\u0275\u0275elementStart(0,"th",49),e.\u0275\u0275text(1,"Absents "),e.\u0275\u0275elementEnd())}function Or(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"td",50)(1,"span"),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd()()),2&a){const t=o.$implicit;e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1("",t.absents??0," ")}}function Pr(a,o){1&a&&(e.\u0275\u0275elementStart(0,"th",51),e.\u0275\u0275text(1,"Leaves Approved"),e.\u0275\u0275elementEnd())}function Vr(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"td",50)(1,"span"),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd()()),2&a){const t=o.$implicit;e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1("",t.approved_leaves??0," ")}}function Nr(a,o){1&a&&e.\u0275\u0275element(0,"tr",53)}function qr(a,o){1&a&&e.\u0275\u0275element(0,"tr",54)}function kr(a,o){1&a&&(e.\u0275\u0275elementStart(0,"tr",55)(1,"td",56),e.\u0275\u0275text(2,"No data found"),e.\u0275\u0275elementEnd()())}const Hr=yn;Q.vfs=le.I.vfs;const Ur=f(77429),Br={parse:{dateInput:"LL"},display:{dateInput:"DD-MM-YYYY",monthYearLabel:"YYYY",dateA11yLabel:"LL",monthYearA11yLabel:"YYYY"}};let Yr=(()=>{class a{constructor(t,n,l,i,r){this.LM=t,this.router=n,this.formBuilder=l,this.spinner=i,this.RS=r,this.date=new s.p4(Hr()),this.displayedColumns=["sno","empid","empname","totalleavebalance","lossofpay","totalleaves"],this.dataSource=[],this.pageLoading=!0,this.arrayList=[],this.pipe=new u.uU("en-US"),this.max=new Date,this.months=[{id:0,month:"Jan"},{id:1,month:"Feb"},{id:2,month:"Mar"},{id:3,month:"Apr"},{id:4,month:"May"},{id:5,month:"Jun"},{id:6,month:"Jul"},{id:7,month:"Aug"},{id:8,month:"Sep"},{id:9,month:"Oct"},{id:10,month:"Nov"},{id:11,month:"Dec"}]}setMonthAndYear(t,n){const l=this.date.value;l.month(t.month()),l.year(t.year()),this.date.setValue(l),n.close(),this.viewdata=l._d}ngOnInit(){this.getallEmployeesList(),this.searchForm=this.formBuilder.group({fromDate:["",s.kI.required],employeeId:["All"],toDate:["",s.kI.required]}),this.searchForm.get("fromDate")?.valueChanges.subscribe(t=>{this.minDate=t}),this.userSession=JSON.parse(sessionStorage.getItem("user")||""),this.dataSource=new m.by(this.arrayList)}exportAsXLSX(){this.year=null!=this.viewdata?this.viewdata.getFullYear():(new Date).getFullYear();var t=P.P6.table_to_sheet(document.getElementById("table"));const n=P.P6.book_new();P.P6.book_append_sheet(n,t,"Payroll_report"),P.NC(n,"Payroll_report_for_financeteam_ from "+this.pipe.transform(this.searchForm.controls.fromDate.value,"longDate")+" to "+this.pipe.transform(this.searchForm.controls.toDate.value,"longDate")+".xlsx")}getallEmployeesList(){this.RS.getTotalEmployeslist().subscribe(t=>{t.status&&t.data.length>0&&(this.employeeDetails=t.data)})}Searchform(){if(this.searchForm.valid){let t={empid:"All"==this.searchForm.controls.employeeId.value?null:this.searchForm.controls.employeeId.value,fromDate:this.pipe.transform(this.searchForm.controls.fromDate.value,"yyyy-MM-dd"),toDate:this.pipe.transform(this.searchForm.controls.toDate.value,"yyyy-MM-dd")};this.spinner.show(),this.LM.getReportForPayrollProcessing(t).subscribe(n=>{this.spinner.hide(),this.arrayList=[],n.status&&n.data.length>0?(this.arrayList=n.data,this.dataSource=new m.by(this.arrayList),this.dataSource.paginator=this.paginator,this.dataSource.paginator.pageSize=5,this.dataSource.sort=this.sort,this.pageLoading=!1):(this.arrayList=[],this.dataSource=new m.by(this.arrayList),this.dataSource.paginator=this.paginator,this.dataSource.paginator.pageSize=5,this.dataSource.sort=this.sort)})}}resetform(){this.router.navigateByUrl("/",{skipLocationChange:!0}).then(()=>this.router.navigate(["/LeaveManagement/payrollreport"]))}getPageSizes(){var t=[];return this.dataSource.data.length>5&&t.push(5),this.dataSource.data.length>10&&t.push(10),this.dataSource.data.length>20&&t.push(20),t.push(this.dataSource.data.length),t}exportPDF(){this.year=null!=this.viewdata?this.viewdata.getFullYear():(new Date).getFullYear();var n=Ur(this.table.nativeElement.innerHTML);Q.createPdf({info:{title:"Payroll Report",author:"Sreeb tech",subject:"Theme",keywords:"Report"},footer:function(l,i){return{margin:10,columns:[{fontSize:9,text:[{text:"Page "+l.toString()+" of "+i}],alignment:"center"}]}},content:[{text:"Payroll Report from "+this.pipe.transform(this.searchForm.controls.fromDate.value,"longDate")+" to "+this.pipe.transform(this.searchForm.controls.toDate.value,"longDate")+"\n\n",style:"header",alignment:"center",fontSize:14},n],pageOrientation:"landscape"}).download("Payroll Report from "+this.pipe.transform(this.searchForm.controls.fromDate.value,"longDate")+" to "+this.pipe.transform(this.searchForm.controls.toDate.value,"longDate")+".pdf")}}return a.\u0275fac=function(t){return new(t||a)(e.\u0275\u0275directiveInject(F.t),e.\u0275\u0275directiveInject(R.F0),e.\u0275\u0275directiveInject(s.QS),e.\u0275\u0275directiveInject(b.t2),e.\u0275\u0275directiveInject(xr.F))},a.\u0275cmp=e.\u0275\u0275defineComponent({type:a,selectors:[["app-emp-payroll-report"]],viewQuery:function(t,n){if(1&t&&(e.\u0275\u0275viewQuery(M.NW,5),e.\u0275\u0275viewQuery(g.YE,5),e.\u0275\u0275viewQuery(yr,5)),2&t){let l;e.\u0275\u0275queryRefresh(l=e.\u0275\u0275loadQuery())&&(n.paginator=l.first),e.\u0275\u0275queryRefresh(l=e.\u0275\u0275loadQuery())&&(n.sort=l.first),e.\u0275\u0275queryRefresh(l=e.\u0275\u0275loadQuery())&&(n.table=l.first)}},features:[e.\u0275\u0275ProvidersFeature([{provide:S._A,useClass:X.t7,deps:[S.Ad]},{provide:S.sG,useValue:Br}])],decls:67,vars:16,consts:[["fxLayout","column",1,"first-col"],[1,"headerbox"],[1,"title"],["ngStyle.xs","padding-top: 5%;","fxLayoutAlign","space-between",1,"tableP",3,"formGroup"],["fxLayout","row","fxLayout.xs","column"],["fxFlex","","fxFlex.xs","100","appearance","outline",1,"mx-2","my-2"],["fxFlex.xs","100","formControlName","employeeId"],["value","All"],[4,"ngFor","ngForOf"],["matInput","","readonly","","required","","formControlName","fromDate",3,"matDatepicker","max","click"],["matSuffix","",1,"datepicker",3,"for"],["fromDate",""],["class","con-error",4,"ngIf"],["fxFlex.xs","100","appearance","outline",1,"mx-2","my-2"],["matInput","","readonly","","required","","formControlName","toDate","required","",3,"matDatepicker","min","max","click"],["picker",""],["fxLayout","row","fxLayoutAlign.lt-lg","center center","fxLayoutAlign.xs","center center"],["ngStyle.gt-md","margin-top: 5%"],["tabindex","3",1,"btn","btn-primary","mr-2","mb-2",3,"click"],[1,"line",2,"color","#1898d5","font-size","16px"],["tabindex","4",1,"btn","btn-danger","mr-2","mb-2",3,"click"],["style","margin-bottom: 1%;padding-right: 2%;","fxLayout","row xs-column","fxLayoutAlign","end  center",4,"ngIf"],[1,"tablePadding"],[1,"mat-elevation-z1","example-container"],["id","table"],["table",""],["id","table","mat-table","","matSort","",3,"dataSource"],["matColumnDef","sno"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","empid"],["mat-header-cell","","style","white-space: nowrap;",4,"matHeaderCellDef"],["matColumnDef","empname"],["mat-header-cell","","mat-sort-header","","style","white-space: nowrap;",4,"matHeaderCellDef"],["matColumnDef","lossofpay"],["matColumnDef","totalleaves"],["matColumnDef","totalleavebalance"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["size","medium","type","ball-fussion"],[3,"value"],[1,"con-error"],["fxLayout","row xs-column","fxLayoutAlign","end  center",2,"margin-bottom","1%","padding-right","2%"],[1,"exlprint"],["title","PDF"],["src","./assets/images/icons/pdf.png","width","20px","height","20px",3,"click"],["title","Excel"],["src","./assets/images/icons/excel.png",3,"click"],["mat-header-cell",""],["mat-cell",""],["mat-header-cell","",2,"white-space","nowrap"],["mat-header-cell","","mat-sort-header","",2,"white-space","nowrap"],["mat-header-row",""],["mat-row",""],[1,"mat-row"],["colspan","6",1,"mat-cell",2,"text-align","center"]],template:function(t,n){if(1&t){const l=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",0)(1,"mat-card")(2,"mat-card-header",1)(3,"mat-card-title",2),e.\u0275\u0275text(4," Monthly Payroll Report "),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(5,"form",3)(6,"div",4)(7,"div",4)(8,"mat-form-field",5)(9,"mat-label"),e.\u0275\u0275text(10,"Employee Name and ID"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(11,"mat-select",6)(12,"mat-option",7),e.\u0275\u0275text(13," All "),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(14,Cr,3,3,"ng-container",8),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(15,"mat-form-field",5)(16,"mat-label"),e.\u0275\u0275text(17,"From Date"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(18,"input",9),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(l);const r=e.\u0275\u0275reference(21);return e.\u0275\u0275resetView(r.open())}),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(19,"mat-datepicker-toggle",10)(20,"mat-datepicker",null,11),e.\u0275\u0275template(22,Er,2,0,"mat-error",12),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(23,"mat-form-field",13)(24,"mat-label"),e.\u0275\u0275text(25,"To Date "),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(26,"input",14),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(l);const r=e.\u0275\u0275reference(29);return e.\u0275\u0275resetView(r.open())}),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(27,"mat-datepicker-toggle",10)(28,"mat-datepicker",null,15),e.\u0275\u0275template(30,Ir,2,0,"mat-error",12),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(31,"div",16)(32,"span",17)(33,"button",18),e.\u0275\u0275listener("click",function(){return n.Searchform()}),e.\u0275\u0275text(34," Search "),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(35,"span",19),e.\u0275\u0275elementStart(36,"button",20),e.\u0275\u0275listener("click",function(){return n.resetform()}),e.\u0275\u0275elementStart(37,"span"),e.\u0275\u0275text(38,"Clear"),e.\u0275\u0275elementEnd()()()()()(),e.\u0275\u0275template(39,Lr,10,0,"div",21),e.\u0275\u0275elementStart(40,"div",22)(41,"div",23)(42,"div",24,25)(44,"table",26),e.\u0275\u0275elementContainerStart(45,27),e.\u0275\u0275template(46,Sr,2,0,"th",28),e.\u0275\u0275template(47,Dr,2,1,"td",29),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(48,30),e.\u0275\u0275template(49,br,2,0,"th",31),e.\u0275\u0275template(50,Mr,3,1,"td",29),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(51,32),e.\u0275\u0275template(52,Fr,2,0,"th",33),e.\u0275\u0275template(53,Rr,3,1,"td",29),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(54,34),e.\u0275\u0275template(55,wr,2,0,"th",31),e.\u0275\u0275template(56,Tr,3,1,"td",29),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(57,35),e.\u0275\u0275template(58,Ar,2,0,"th",28),e.\u0275\u0275template(59,Or,3,1,"td",29),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(60,36),e.\u0275\u0275template(61,Pr,2,0,"th",31),e.\u0275\u0275template(62,Vr,3,1,"td",29),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275template(63,Nr,1,0,"tr",37),e.\u0275\u0275template(64,qr,1,0,"tr",38),e.\u0275\u0275template(65,kr,3,0,"tr",39),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275element(66,"ngx-spinner",40),e.\u0275\u0275elementEnd()()}if(2&t){const l=e.\u0275\u0275reference(21),i=e.\u0275\u0275reference(29);e.\u0275\u0275advance(5),e.\u0275\u0275property("formGroup",n.searchForm),e.\u0275\u0275advance(9),e.\u0275\u0275property("ngForOf",n.employeeDetails),e.\u0275\u0275advance(4),e.\u0275\u0275property("matDatepicker",l)("max",n.max),e.\u0275\u0275advance(1),e.\u0275\u0275property("for",l),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",null==n.searchForm.controls.fromDate.errors?null:n.searchForm.controls.fromDate.errors.required),e.\u0275\u0275advance(4),e.\u0275\u0275property("matDatepicker",i)("min",n.minDate)("max",n.max),e.\u0275\u0275advance(1),e.\u0275\u0275property("for",i),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",null==n.searchForm.controls.toDate.errors?null:n.searchForm.controls.toDate.errors.required),e.\u0275\u0275advance(9),e.\u0275\u0275property("ngIf",n.arrayList.length>0),e.\u0275\u0275advance(5),e.\u0275\u0275property("dataSource",n.dataSource),e.\u0275\u0275advance(19),e.\u0275\u0275property("matHeaderRowDef",n.displayedColumns)("matHeaderRowDefSticky",!0),e.\u0275\u0275advance(1),e.\u0275\u0275property("matRowDefColumns",n.displayedColumns)}},dependencies:[u.sg,u.O5,S.ey,c.a8,c.dk,c.n5,T.Mq,T.hl,T.nW,h.TO,h.KE,h.hX,h.R9,V.Nt,j.gD,g.YE,g.nU,m.BZ,m.fO,m.as,m.w1,m.Dz,m.nj,m.ge,m.ev,m.XQ,m.Gk,m.Ee,s._Y,s.Fj,s.JJ,s.JL,s.Q7,s.sg,s.u,v.xw,v.Wh,v.yH,fe.Zl,b.Ro],styles:['mat-card[_ngcontent-%COMP%]{transition:box-shadow .28s cubic-bezier(.4,0,.2,1);display:block;position:relative;padding-left:0;padding-right:0}.tableP[_ngcontent-%COMP%]{padding:1%}.tablePadding[_ngcontent-%COMP%]{padding-left:2%;padding-right:2%}  .mat-select-panel[aria-label="Items per page:"] mat-option:last-child:before{content:"All";position:relative;display:block}  .mat-select-panel[aria-label="Items per page:"] mat-option:last-child .mat-option-text{display:none}.headerbox[_ngcontent-%COMP%]{height:45px;background-color:#28acaf!important;align-items:center}.title[_ngcontent-%COMP%]{font-family:Roboto;font-size:20px;font-weight:500;font-stretch:normal;font-style:normal;letter-spacing:.32px;color:#fff;margin-bottom:0}  tr.mat-header-row{height:45px!important}  .mat-form-field-appearance-outline .mat-form-field-wrapper{margin:.2em 0!important}.example-month-picker.mat-calendar-period-button[_ngcontent-%COMP%]{pointer-events:none}.example-month-picker.mat-calendar-arrow[_ngcontent-%COMP%]{display:none}.example-container[_ngcontent-%COMP%]{overflow-x:auto;display:flex;flex-direction:column;max-height:500px}@media only screen and (max-width: 768px) and (orientation: portrait){mat-header-row[_ngcontent-%COMP%], mat-row[_ngcontent-%COMP%]{width:150%}}table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:2px 10px}']}),a})();var A=f(92460);function jr(a,o){if(1&a&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"mat-option",27),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd()),2&a){const t=o.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275property("value",t.empid),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(t.empname)}}function zr(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"mat-error",28),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&a){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",t.msgLM3," ")}}function Wr(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"div")(1,"mat-option",27),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd()()),2&a){const t=o.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275propertyInterpolate("value",t.id),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(t.display_name)}}function $r(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"mat-error",28),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&a){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",t.msgLM3," ")}}function Gr(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"div")(1,"mat-option",27),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"date"),e.\u0275\u0275elementEnd()()),2&a){const t=o.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275propertyInterpolate("value",t.comp_off_date),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind2(3,2,t.comp_off_date,"dd-MM-yyyy"))}}function Qr(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"mat-error",28),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&a){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",t.msgLM3," ")}}function Xr(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"mat-form-field",31)(1,"mat-label"),e.\u0275\u0275text(2,"Worked Date"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"mat-select",32),e.\u0275\u0275elementContainerStart(4),e.\u0275\u0275template(5,Gr,4,5,"div",9),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(6,Qr,2,1,"mat-error",10),e.\u0275\u0275elementEnd()),2&a){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(5),e.\u0275\u0275property("ngForOf",t.compOffApprovedDates),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==t.leaveRequestForm.controls.compoffApprovedDate.errors?null:t.leaveRequestForm.controls.compoffApprovedDate.errors.required)}}function Kr(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"div")(1,"mat-option",27),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd()()),2&a){const t=o.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275propertyInterpolate("value",t.id),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(t.name)}}function Jr(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"mat-error",28),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&a){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",t.msgLM3," ")}}function Zr(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"mat-form-field",7)(1,"mat-label"),e.\u0275\u0275text(2,"Employee Relations"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"mat-select",33),e.\u0275\u0275elementContainerStart(4),e.\u0275\u0275template(5,Kr,3,2,"div",9),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(6,Jr,2,1,"mat-error",10),e.\u0275\u0275elementEnd()),2&a){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(5),e.\u0275\u0275property("ngForOf",t.employeeRelations),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==t.leaveRequestForm.controls.relation.errors?null:t.leaveRequestForm.controls.relation.errors.required)}}function es(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"div",4),e.\u0275\u0275template(1,Xr,7,2,"mat-form-field",29),e.\u0275\u0275template(2,Zr,7,2,"mat-form-field",30),e.\u0275\u0275elementEnd()),2&a){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",9==t.leaveRequestForm.controls.leaveTypeId.value),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",8==t.leaveRequestForm.controls.leaveTypeId.value)}}function ts(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"mat-error",28),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&a){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",t.msgLM3," ")}}function as(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"mat-checkbox",40),e.\u0275\u0275text(1,"Second Half"),e.\u0275\u0275elementEnd()),2&a){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275attribute("disabled",t.isDisableSecondHalf)}}function ns(a,o){if(1&a){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",34)(1,"mat-form-field",35)(2,"mat-label"),e.\u0275\u0275text(3,"From Date "),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"input",36),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const l=e.\u0275\u0275reference(7);return e.\u0275\u0275resetView(l.open())}),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(5,"mat-datepicker-toggle",37)(6,"mat-datepicker",null,38),e.\u0275\u0275template(8,ts,2,1,"mat-error",10),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"div"),e.\u0275\u0275template(10,as,2,1,"mat-checkbox",39),e.\u0275\u0275elementEnd()()}if(2&a){const t=e.\u0275\u0275reference(7),n=e.\u0275\u0275nextContext();e.\u0275\u0275advance(4),e.\u0275\u0275property("min",n.minDate)("max",n.fromMaxDate)("matDatepicker",t)("matDatepickerFilter",n.fromDateFilter),e.\u0275\u0275advance(1),e.\u0275\u0275property("for",t),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",null==n.leaveRequestForm.controls.fromDate.errors?null:n.leaveRequestForm.controls.fromDate.errors.required),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",n.isSecondHalf)}}function os(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"mat-error",28),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&a){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",t.msgLM3," ")}}function ls(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"mat-checkbox",45),e.\u0275\u0275text(1,"First Half"),e.\u0275\u0275elementEnd()),2&a){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275attribute("disabled",t.isDisableFirstHalf)}}function is(a,o){if(1&a){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",41)(1,"mat-form-field",35)(2,"mat-label"),e.\u0275\u0275text(3,"To Date"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"input",42),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const l=e.\u0275\u0275reference(7);return e.\u0275\u0275resetView(l.open())}),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(5,"mat-datepicker-toggle",37)(6,"mat-datepicker",null,43),e.\u0275\u0275template(8,os,2,1,"mat-error",10),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"div"),e.\u0275\u0275template(10,ls,2,1,"mat-checkbox",44),e.\u0275\u0275elementEnd()()}if(2&a){const t=e.\u0275\u0275reference(7),n=e.\u0275\u0275nextContext();e.\u0275\u0275advance(4),e.\u0275\u0275property("min",n.leaveRequestForm.controls.fromDate.value)("max",n.maxDate)("matDatepicker",t)("matDatepickerFilter",n.toDateFilter),e.\u0275\u0275attribute("disabled",!0),e.\u0275\u0275advance(1),e.\u0275\u0275property("for",t),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",null==n.leaveRequestForm.controls.toDate.errors?null:n.leaveRequestForm.controls.toDate.errors.required),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",n.isFirstHalf)}}function rs(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"mat-error",28),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&a){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",t.msgLM3," ")}}function ss(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"mat-checkbox",48),e.\u0275\u0275text(1,"Second Half"),e.\u0275\u0275elementEnd()),2&a){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275attribute("disabled",t.isDisableSecondHalf)}}function ms(a,o){if(1&a){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",41)(1,"mat-form-field",35)(2,"mat-label"),e.\u0275\u0275text(3,"From Date "),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"input",36),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const l=e.\u0275\u0275reference(7);return e.\u0275\u0275resetView(l.open())}),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(5,"mat-datepicker-toggle",37)(6,"mat-datepicker",null,38),e.\u0275\u0275template(8,rs,2,1,"mat-error",10),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"span",46),e.\u0275\u0275template(10,ss,2,1,"mat-checkbox",47),e.\u0275\u0275elementEnd()()}if(2&a){const t=e.\u0275\u0275reference(7),n=e.\u0275\u0275nextContext();e.\u0275\u0275advance(4),e.\u0275\u0275property("min",n.minDate)("max",5==n.leaveRequestForm.controls.leaveTypeId.value||6==n.leaveRequestForm.controls.leaveTypeId.value||7==n.leaveRequestForm.controls.leaveTypeId.value||8==n.leaveRequestForm.controls.leaveTypeId.value?"":n.fromMaxDate)("matDatepicker",t)("matDatepickerFilter",n.fromDateFilter),e.\u0275\u0275advance(1),e.\u0275\u0275property("for",t),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",null==n.leaveRequestForm.controls.fromDate.errors?null:n.leaveRequestForm.controls.fromDate.errors.required),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",n.isSecondHalf)}}function ds(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"mat-error",28),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&a){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",t.msgLM3," ")}}function ps(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"mat-checkbox",51),e.\u0275\u0275text(1,"First Half"),e.\u0275\u0275elementEnd()),2&a){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275attribute("disabled",t.isDisableFirstHalf)}}function cs(a,o){if(1&a){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",41)(1,"mat-form-field",35)(2,"mat-label"),e.\u0275\u0275text(3,"To Date "),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"input",49),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const l=e.\u0275\u0275reference(7);return e.\u0275\u0275resetView(l.open())}),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(5,"mat-datepicker-toggle",37)(6,"mat-datepicker",null,43),e.\u0275\u0275template(8,ds,2,1,"mat-error",10),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"span",46),e.\u0275\u0275template(10,ps,2,1,"mat-checkbox",50),e.\u0275\u0275elementEnd()()}if(2&a){const t=e.\u0275\u0275reference(7),n=e.\u0275\u0275nextContext();e.\u0275\u0275advance(4),e.\u0275\u0275property("min",n.leaveRequestForm.controls.fromDate.value)("max",5==n.leaveRequestForm.controls.leaveTypeId.value||6==n.leaveRequestForm.controls.leaveTypeId.value||7==n.leaveRequestForm.controls.leaveTypeId.value||8==n.leaveRequestForm.controls.leaveTypeId.value?"":n.maxDate)("matDatepicker",t)("matDatepickerFilter",n.toDateFilter)("disabled",n.compofftdatehide),e.\u0275\u0275advance(1),e.\u0275\u0275property("for",t),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",null==n.leaveRequestForm.controls.toDate.errors?null:n.leaveRequestForm.controls.toDate.errors.required),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",n.isFirstHalf)}}function us(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"mat-checkbox",54),e.\u0275\u0275text(1,"First Half"),e.\u0275\u0275elementEnd()),2&a){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275attribute("disabled",t.isDisableFirstHalf)}}function fs(a,o){if(1&a){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",41)(1,"mat-form-field",35)(2,"mat-label"),e.\u0275\u0275text(3,"To Date "),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"input",52),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const l=e.\u0275\u0275reference(7);return e.\u0275\u0275resetView(l.open())}),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(5,"mat-datepicker-toggle",37)(6,"mat-datepicker",null,43),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"div"),e.\u0275\u0275template(9,us,2,1,"mat-checkbox",53),e.\u0275\u0275elementEnd()()}if(2&a){const t=e.\u0275\u0275reference(7),n=e.\u0275\u0275nextContext();e.\u0275\u0275advance(4),e.\u0275\u0275property("min",n.leaveRequestForm.controls.fromDate.value)("max",5==n.leaveRequestForm.controls.leaveTypeId.value||6==n.leaveRequestForm.controls.leaveTypeId.value||7==n.leaveRequestForm.controls.leaveTypeId.value||8==n.leaveRequestForm.controls.leaveTypeId.value?"":n.maxDate)("matDatepicker",t),e.\u0275\u0275attribute("disabled",!0),e.\u0275\u0275advance(1),e.\u0275\u0275property("for",t),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngIf",n.isFirstHalf)}}function vs(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"mat-error",28),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&a){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",t.msgLM1," ")}}function _s(a,o){if(1&a){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",63),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const l=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(l.fileView())}),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()}if(2&a){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",t.pdfName," ")}}function hs(a,o){if(1&a){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"input",64),e.\u0275\u0275listener("change",function(l){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(i.onSelectFile(l))}),e.\u0275\u0275elementEnd()}}function gs(a,o){if(1&a){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"mat-icon",65),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const l=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(l.editdoc())}),e.\u0275\u0275text(1,"edit"),e.\u0275\u0275elementEnd()}}function xs(a,o){if(1&a){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"mat-icon",66),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const l=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(l.delete())}),e.\u0275\u0275text(1,"delete"),e.\u0275\u0275elementEnd()}}function ys(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"mat-error",67),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&a){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",t.msgLM142," ")}}function Cs(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"div",4)(1,"div",55)(2,"label",56),e.\u0275\u0275text(3,"Supporting Document"),e.\u0275\u0275elementStart(4,"mat-icon",57),e.\u0275\u0275text(5,"info"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275element(6,"br"),e.\u0275\u0275template(7,_s,2,1,"button",58),e.\u0275\u0275template(8,hs,1,0,"input",59),e.\u0275\u0275text(9," \xa0 "),e.\u0275\u0275template(10,gs,2,0,"mat-icon",60),e.\u0275\u0275text(11," \xa0 "),e.\u0275\u0275template(12,xs,2,0,"mat-icon",61),e.\u0275\u0275text(13," \xa0 "),e.\u0275\u0275template(14,ys,2,1,"mat-error",62),e.\u0275\u0275elementEnd()()),2&a){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(7),e.\u0275\u0275property("ngIf",t.pdfName),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!t.pdfName),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",t.pdfName),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",t.leaveRequestForm.controls.document.value&&t.iseditDoc),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",t.submitted&&(null==t.leaveRequestForm.controls.document.errors?null:t.leaveRequestForm.controls.document.errors.required))}}function Es(a,o){if(1&a&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"tr")(2,"td"),e.\u0275\u0275text(3),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"td",25),e.\u0275\u0275text(5),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"td",25),e.\u0275\u0275text(7),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"td",25),e.\u0275\u0275text(9),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementContainerEnd()),2&a){const t=o.$implicit;e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(t.display_name),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t.used),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t.leave_balance),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t.total)}}function Is(a,o){1&a&&(e.\u0275\u0275elementStart(0,"tr")(1,"td",68),e.\u0275\u0275text(2,"No Data Found"),e.\u0275\u0275elementEnd()())}const Ls={parse:{dateInput:"LL"},display:{dateInput:"DD-MM-YYYY",monthYearLabel:"YYYY",dateA11yLabel:"LL",monthYearA11yLabel:"YYYY"}};let Ss=(()=>{class a{constructor(t,n,l,i,r,d,p,_,x,y){this.sanitizer=t,this.router=n,this.location=l,this.LM=i,this.formBuilder=r,this.dialog=d,this.spinner=p,this.LMSC=_,this.emsService=x,this.attendanceService=y,this.leaveRequestForm=s.nJ,this.leavebalance=[],this.userSession=[],this.leavesTypeData=[],this.existingCount=[],this.fromdate=[],this.todate=[],this.holidays=[],this.FromDatesHalfDays=[],this.ToDatesHalfDays=[],this.iseditDoc=!0,this.pipe=new u.uU("en-US"),this.isFirstHalf=!0,this.isSecondHalf=!0,this.pdfName=null,this.isDisableFirstHalf=!1,this.isDisableSecondHalf=!1,this.document=!1,this.isValidateLeave=!1,this.compofftdatehide=!1,this.compOffApprovedDates=[],this.isCompOff=!0,this.employeeRelations=[],this.isFile=!0,this.submitted=!1,this.documentId=null,this.documentInfo=null,this.employeeEmailData=[],this.isedit=!1,this.messagesDataList=[],this.number=0,this.ispdf=!1,this.formData=new FormData,this.getleavecyclelastmonth(),this.leaveInfo=this.location.getState(),this.leaveData=this.leaveInfo.leaveData,null!=this.leaveData&&(this.isedit=!0)}ngOnInit(){this.userSession=JSON.parse(sessionStorage.getItem("user")||""),this.activeModule=JSON.parse(sessionStorage.getItem("activeModule")||""),this.rm_Name=this.userSession.firstname+" "+(null!=this.userSession.middlename?this.userSession.middlename:"")+" "+(null!=this.userSession.lastname?this.userSession.lastname:""),this.getMessagesList(),this.getEmployeeListByManagerId(),this.leaveRequestForm=this.formBuilder.group({employeeName:["",s.kI.required],leaveTypeId:["",s.kI.required],compoffApprovedDate:[""],relation:[""],fromDate:["",s.kI.required],toDate:["",s.kI.required],toDateHalf:[""],fromDateHalf:[""],leaveCount:["",s.kI.required],reason:["",[s.kI.required,this.noWhitespaceValidator()]],contact:[""],emergencyEmail:["",[s.kI.email,s.kI.pattern("^[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,4}$")]],document:[""]}),this.leaveRequestForm.get("employeeName")?.valueChanges.subscribe(l=>{l&&(this.leaveRequestForm.controls.fromDate.setValue(""),this.employeeId=l,this.getEmployeeInformation(this.employeeId),this.getDurationFoBackDatedLeave(),this.getLeaveBalance(),this.getLeavesTypeInfo(),this.getApprovedCompoffs(),this.getEmployeeRelationsForBereavementLeave(),this.getDaystobedisabledfromdate(),this.getDaystobedisabledtodate(),this.getEmployeeEmailData())}),this.leaveRequestForm.get("leaveTypeId")?.valueChanges.subscribe(l=>{this.isFile=!0,this.getEmployeeShiftDetailsByIdWithDates(),this.getDaystobedisabledfromdate(),l&&(this.document=!1,this.leaveRequestForm.controls.fromDate.setValue(""),this.leaveRequestForm.controls.toDate.setValue(""),this.leaveRequestForm.controls.fromDateHalf.setValue(""),this.leaveRequestForm.controls.toDateHalf.setValue(""),this.leaveRequestForm.controls.leaveCount.setValue(""),this.leaveRequestForm.controls.reason.setValue(""),this.leaveRequestForm.controls.reason.setValue(""),this.leaveRequestForm.controls.compoffApprovedDate.setValue(""),this.leaveRequestForm.controls.relation.setValue(""),("5"==this.leaveRequestForm.controls.leaveTypeId.value||"6"==this.leaveRequestForm.controls.leaveTypeId.value||"7"==this.leaveRequestForm.controls.leaveTypeId.value||"8"==this.leaveRequestForm.controls.leaveTypeId.value)&&this.getMaxCountPerTermValue(),"8"==this.leaveRequestForm.controls.leaveTypeId.value?(this.leaveRequestForm.controls.relation.setValidators([s.kI.required]),this.leaveRequestForm.controls.relation.updateValueAndValidity(),this.leaveRequestForm.controls.compoffApprovedDate.clearValidators(),this.leaveRequestForm.controls.compoffApprovedDate.updateValueAndValidity()):"9"==this.leaveRequestForm.controls.leaveTypeId.value?(this.leaveRequestForm.controls.compoffApprovedDate.setValidators([s.kI.required]),this.leaveRequestForm.controls.compoffApprovedDate.updateValueAndValidity(),this.leaveRequestForm.controls.relation.clearValidators(),this.leaveRequestForm.controls.relation.updateValueAndValidity()):(this.leaveRequestForm.controls.compoffApprovedDate.clearValidators(),this.leaveRequestForm.controls.compoffApprovedDate.updateValueAndValidity(),this.leaveRequestForm.controls.relation.clearValidators(),this.leaveRequestForm.controls.relation.updateValueAndValidity()))}),this.leaveRequestForm.get("fromDate")?.valueChanges.subscribe(l=>{l&&(9!=this.leaveRequestForm.controls.leaveTypeId.value?(this.compofftdatehide=!1,this.changeFromDate(l)):(this.maxDate=this.fromMaxDate,this.compofftdatehide=!0,this.changeCompOffFromDate(l)))}),this.leaveRequestForm.get("toDate")?.valueChanges.subscribe(l=>{l&&this.changeToDate(l)}),this.leaveRequestForm.get("fromDateHalf")?.valueChanges.subscribe(l=>{this.changeHalfs()}),this.leaveRequestForm.get("compoffApprovedDate")?.valueChanges.subscribe(l=>{this.getDaystobedisabledfromdate(),""!=l&&this.getCompOffValidityDuration(l)}),this.leaveRequestForm.get("toDateHalf")?.valueChanges.subscribe(l=>{this.changeHalfs()}),this.leaveRequestForm.controls.leaveCount.disable()}getEmployeeListByManagerId(){this.attendanceService.getgetemployeesByMangerId(this.userSession.id).subscribe(t=>{t&&(this.employeesData=t.data)})}getEmployeeInformation(t){this.attendanceService.getEmployeeInformationforlogindate(t).subscribe(n=>{n.status&&(this.selectedEmployeeInfo=n.data[0])})}changeHalfs(){this.leaveRequestForm.controls.leaveTypeId.value&&this.leaveRequestForm.controls.fromDate.value&&this.leaveRequestForm.controls.toDate.value&&(this.eventBasedLeave(this.leaveRequestForm.controls.fromDate.value),this.setValidateLeave())}getLeaveBalance(){this.LM.getLeaveBalance(this.employeeId).subscribe(t=>{t&&t.status&&(this.leavebalance=this.leaveTypes(t.data[0],!0))})}getEmployeeShiftDetailsByIdWithDates(){let t={employee_id:this.employeeId,fromd_date:this.pipe.transform(new Date,"yyyy-MM-dd"),to_date:this.pipe.transform(new Date,"yyyy-MM-dd")};this.attendanceService.getEmployeeShiftByDates(t).subscribe(n=>{n.status&&(n.data.length>0?n.data.length>1&&this.dialog.open(L.B,{position:{top:"70px"},disableClose:!0,data:"Unable to request. please check the configure shift."}):this.dialog.open(L.B,{position:{top:"70px"},disableClose:!0,data:"Please configure the shift before requesting. Unable to request."}))})}leaveTypes(t,n){for(var l=[],i=0;i<t.length;i++)"Marriage Leave"===t[i].leavename&&"Single"===this.selectedEmployeeInfo.maritalstatus?l.push(t[i]):"Maternity Leave"===t[i].leavename&&"Married"===this.selectedEmployeeInfo.maritalstatus?"Female"===this.selectedEmployeeInfo.gender&&l.push(t[i]):"Paternity Leave"===t[i].leavename&&"Married"===this.selectedEmployeeInfo.maritalstatus?"Male"===this.selectedEmployeeInfo.gender&&l.push(t[i]):"Paternity Leave"!==t[i].leavename&&"Marriage Leave"!==t[i].leavename&&"Maternity Leave"!==t[i].leavename&&l.push(t[i]);return l}getLeavesTypeInfo(){var t=this;return(0,N.Z)(function*(){yield t.LM.getLeavesTypeInfo().subscribe(n=>{if(n.status){t.leavesTypeData=t.leaveTypes(n.data,!1),t.leaveRequestForm.controls.leaveTypeId.setValue(t.leaveData?t.leaveData.leavetypeid.toString():"",{emitEvent:!1}),(t.leaveData&&3==t.leaveData.leavetypeid||t.leaveData&&5==t.leaveData.leavetypeid)&&(t.leaveRequestForm.controls.document.value=!0,t.getUploadDocument()),t.leaveData&&(t.isValidateLeave=!0),("5"==t.leaveRequestForm.controls.leaveTypeId.value||"6"==t.leaveRequestForm.controls.leaveTypeId.value||"7"==t.leaveRequestForm.controls.leaveTypeId.value||"8"==t.leaveRequestForm.controls.leaveTypeId.value)&&t.getMaxCountPerTermValue();for(let l=0;l<t.leavesTypeData.length;l++)t.existingCount[t.leavesTypeData[l].id]=t.leavesTypeData[l].leavetypecount}})})()}getDaystobedisabledfromdate(){9==this.leaveRequestForm.controls.leaveTypeId.value&&this.leaveRequestForm.controls.compoffApprovedDate.value?this.LM.getDaysToBeDisabledForFromDateCompOff({employeeId:this.employeeId,leaveId:this.leaveData?this.leaveData.id:null,workedDateValue:this.leaveRequestForm.controls.compoffApprovedDate.value}).then(n=>{if(n&&n.status){this.holidays=[],this.fromdate=n.data;for(var l=0;l<n.data.length;l++)n.data[l].first_half&&n.data[l].second_half?this.holidays.push(new Date(n.data[l].edate+" 00:00:00")):this.FromDatesHalfDays.push(n.data[l]);this.fromDateFilter=i=>{let r=!0;return this.holidays.forEach(d=>{this.pipe.transform(d,"yyyy/MM/dd")==this.pipe.transform(i,"yyyy/MM/dd")&&(r=!1)}),r},this.leaveRequestForm.get("fromDate").setValue(this.leaveData?new Date(this.leaveData.fromdate):"")}}):this.LM.getDaysToBeDisabledFromDate(this.employeeId,this.leaveData?this.leaveData.id:null).then(t=>{if(t&&t.status){this.holidays=[],this.fromdate=t.data;for(var n=0;n<t.data.length;n++)t.data[n].first_half&&t.data[n].second_half?this.holidays.push(new Date(t.data[n].edate+" 00:00:00")):this.FromDatesHalfDays.push(t.data[n]);this.fromDateFilter=l=>{let i=!0;return this.holidays.forEach(r=>{this.pipe.transform(r,"yyyy/MM/dd")==this.pipe.transform(l,"yyyy/MM/dd")&&(i=!1)}),i}}})}getDaystobedisabledtodate(){var t=this;return(0,N.Z)(function*(){t.todate=[],t.LM.getDaysToBeDisabledToDate(t.employeeId,t.leaveData?t.leaveData.id:null).then(l=>{if(l&&l.status){for(var i=0;i<l.data.length;i++)l.data[i].first_half&&l.data[i].second_half?t.todate.push(new Date(l.data[i].edate)):t.ToDatesHalfDays.push(l.data[i]);t.toDateFilter=r=>{let d=!0;return t.todate.forEach(p=>{t.pipe.transform(p,"yyyy/MM/dd")==t.pipe.transform(r,"yyyy/MM/dd")&&(d=!1)}),d},t.leaveRequestForm.controls.toDate.setValue(t.leaveData?new Date(t.leaveData.todate):"",{emitEvent:!1}),t.leaveRequestForm.controls.relation.setValue(t.leaveData&&t.leaveData.bereavement_id?t.leaveData.bereavement_id.toString():"",{emitEvent:!1}),t.leaveRequestForm.controls.compoffApprovedDate.setValue(t.leaveData&&t.leaveData.worked_date?t.leaveData.worked_date:"")}})})()}cancel(t){this.router.navigateByUrl("/",{skipLocationChange:!0}).then(()=>this.router.navigate(["/LeaveManagement/leaveRequestBehalf"]))}changeCompOffFromDate(t){this.leaveRequestForm.controls.toDate.setValue(t,{emitEvent:!1});for(let n=0;n<this.FromDatesHalfDays.length;n++)if(this.FromDatesHalfDays[n].edate===this.pipe.transform(t,"yyyy-MM-dd")){if(0===this.FromDatesHalfDays[n].first_half&&this.FromDatesHalfDays[n].second_half){this.leaveRequestForm.controls.toDateHalf.setValue(!0,{emitEvent:!1}),this.isDisableFirstHalf=!0,this.isDisableSecondHalf=!1,this.leaveRequestForm.controls.fromDateHalf.setValue(!1,{emitEvent:!1}),this.isSecondHalf=!1,this.isFirstHalf=!0,this.leaveRequestForm.controls.toDate.setValue(t,{emitEvent:!1}),this.leaveRequestForm.controls.leaveTypeId.value&&this.leaveRequestForm.controls.fromDate.value&&this.leaveRequestForm.controls.toDate.value&&this.setValidateLeave();break}if(this.FromDatesHalfDays[n].first_half&&0===this.FromDatesHalfDays[n].second_half){this.leaveRequestForm.controls.toDateHalf.setValue(!1,{emitEvent:!1}),this.isDisableFirstHalf=!1,this.isDisableSecondHalf=!0,this.leaveRequestForm.controls.fromDateHalf.setValue(!0,{emitEvent:!1}),this.isSecondHalf=!0,this.isFirstHalf=!1,this.leaveRequestForm.controls.leaveTypeId.value&&this.leaveRequestForm.controls.fromDate.value&&this.leaveRequestForm.controls.toDate.value&&this.setValidateLeave();break}}else this.leaveRequestForm.controls.toDateHalf.setValue(!1,{emitEvent:!1}),this.isDisableFirstHalf=!1,this.isDisableSecondHalf=!1,this.leaveRequestForm.controls.fromDateHalf.setValue(!1,{emitEvent:!1}),this.isSecondHalf=!1,this.isSecondHalf=!0,this.isFirstHalf=!0;this.leaveRequestForm.controls.leaveTypeId.value&&this.leaveRequestForm.controls.fromDate.value&&this.leaveRequestForm.controls.toDate.value&&this.setValidateLeave()}changeFromDate(t){this.leaveRequestForm.controls.toDate.setValue(""),this.leaveRequestForm.controls.leaveCount.setValue("");var n={id:this.employeeId,date:this.pipe.transform(t,"yyyy-MM-dd"),leaveid:this.leaveData?this.leaveData.id:null};this.LM.getNextLeaveDate(n).then(l=>{if(l&&l.status){for(let r=0;r<l.data.length;r++)"0"!==l.data[r].first_half&&this.todate.push(new Date(l.data[r].fromdate));var i=0!==l.data.length?new Date(l.data[0].fromdate):"";if(this.nextLeaveDate=i,"8"!==this.leaveRequestForm.controls.leaveTypeId.value&&"7"!==this.leaveRequestForm.controls.leaveTypeId.value&&"6"!==this.leaveRequestForm.controls.leaveTypeId.value&&"5"!==this.leaveRequestForm.controls.leaveTypeId.value&&(this.maxDate=i?new Date(i):this.toMaxDate),this.FromDatesHalfDays.length>0)for(let r=0;r<this.FromDatesHalfDays.length;r++){if(this.FromDatesHalfDays[r].edate===this.pipe.transform(t,"yyyy-MM-dd")){this.FromDatesHalfDays[r].first_half&&0===this.FromDatesHalfDays[r].second_half?(this.leaveRequestForm.controls.fromDateHalf.setValue(!0,{emitEvent:!1}),this.leaveRequestForm.controls.toDateHalf.setValue(!1,{emitEvent:!1}),this.leaveRequestForm.controls.toDateHalf.setValue(!0,{emitEvent:!1}),this.isDisableSecondHalf=!0,this.isDisableFirstHalf=!1,this.isFirstHalf=!1,this.eventBasedLeave(t),this.leaveRequestForm.controls.leaveTypeId.value&&this.leaveRequestForm.controls.fromDate.value&&this.leaveRequestForm.controls.toDate.value&&this.setValidateLeave()):0===this.FromDatesHalfDays[r].first_half&&this.FromDatesHalfDays[r].second_half&&(this.eventBasedLeave(t),this.leaveRequestForm.controls.toDateHalf.setValue(!0,{emitEvent:!1}),this.isDisableFirstHalf=!0,this.isDisableSecondHalf=!1,this.leaveRequestForm.controls.fromDateHalf.setValue(!1,{emitEvent:!1}),this.maxDate=t,this.leaveRequestForm.controls.toDate.setValue(t),this.isSecondHalf=!1,this.validEventLeave(),this.leaveRequestForm.controls.leaveTypeId.value&&this.leaveRequestForm.controls.fromDate.value&&this.leaveRequestForm.controls.toDate.value&&this.setValidateLeave());break}this.leaveRequestForm.controls.toDate.setValue(this.leaveData?new Date(this.leaveData.todate):"",{emitEvent:!1}),this.leaveRequestForm.controls.fromDateHalf.setValue(!1,{emitEvent:!1}),this.leaveRequestForm.controls.toDateHalf.setValue(!1,{emitEvent:!1}),this.isFirstHalf=!0,this.isSecondHalf=!0,this.isDisableSecondHalf=!1,this.isDisableFirstHalf=!1,r===this.FromDatesHalfDays.length-1&&(this.eventBasedLeave(t),this.leaveRequestForm.controls.leaveCount.setValue("",{emitEvent:!1}),this.leaveRequestForm.controls.leaveTypeId.value&&this.leaveRequestForm.controls.fromDate.value&&this.leaveRequestForm.controls.toDate.value&&this.setValidateLeave())}else this.eventBasedLeave(t),this.leaveRequestForm.controls.leaveCount.setValue("",{emitEvent:!1}),this.leaveRequestForm.controls.leaveTypeId.value&&this.leaveRequestForm.controls.fromDate.value&&this.leaveRequestForm.controls.toDate.value&&this.setValidateLeave()}else this.leaveRequestForm.controls.leaveCount.setValue("",{emitEvent:!1}),this.leaveRequestForm.controls.leaveTypeId.value&&this.leaveRequestForm.controls.fromDate.value&&this.leaveRequestForm.controls.toDate.value&&this.setValidateLeave()})}changeToDate(t){for(let n=0;n<this.ToDatesHalfDays.length;n++){if(this.ToDatesHalfDays[n].edate===this.pipe.transform(t,"yyyy-MM-dd")){this.ToDatesHalfDays[n].first_half&&0===this.ToDatesHalfDays[n].second_half?(this.leaveRequestForm.controls.toDateHalf.setValue(!1,{emitEvent:!1}),this.leaveRequestForm.controls.fromDateHalf.setValue(!0,{emitEvent:!1}),this.isFirstHalf=!1,this.isDisableSecondHalf=!0,this.isDisableFirstHalf=!1):0===this.ToDatesHalfDays[n].first_half&&this.ToDatesHalfDays[n].second_half&&(this.leaveRequestForm.controls.fromDate.value===this.leaveRequestForm.controls.toDate.value?(this.leaveRequestForm.controls.toDateHalf.setValue(!0,{emitEvent:!1}),this.leaveRequestForm.controls.fromDateHalf.setValue(!1,{emitEvent:!1}),this.leaveRequestForm.controls.toDate.setValue(t,{emitEvent:!1}),this.isSecondHalf=!1,this.isDisableSecondHalf=!1,this.isDisableFirstHalf=!0):this.leaveRequestForm.controls.fromDateHalf.value&&0===this.ToDatesHalfDays[n].first_half?(this.isSecondHalf=!0,this.isFirstHalf=!0,this.leaveRequestForm.controls.toDateHalf.setValue(!0,{emitEvent:!1}),this.leaveRequestForm.controls.fromDateHalf.setValue(!0,{emitEvent:!1}),this.isDisableSecondHalf=!0,this.isDisableFirstHalf=!0):(this.isSecondHalf=!0,this.leaveRequestForm.controls.toDateHalf.setValue(!0,{emitEvent:!1}),this.leaveRequestForm.controls.fromDateHalf.setValue(!1,{emitEvent:!1}),this.isDisableSecondHalf=!1,this.isDisableFirstHalf=!0));break}this.isSecondHalf=!0,this.isFirstHalf=!0,this.isDisableFirstHalf=!1,this.leaveRequestForm.controls.toDateHalf.setValue(!1,{emitEvent:!1}),this.leaveRequestForm.controls.fromDateHalf.setValue(!!this.leaveRequestForm.controls.fromDateHalf.value,{emitEvent:!1})}this.leaveRequestForm.controls.leaveCount.setValue(""),this.leaveRequestForm.controls.leaveTypeId.value&&this.leaveRequestForm.controls.fromDate.value&&this.leaveRequestForm.controls.toDate.value&&this.setValidateLeave()}setValidateLeave(){let t={empid:this.employeeId,fromDate:this.pipe.transform(this.leaveRequestForm.controls.fromDate.value,"yyyy-MM-dd"),toDate:this.pipe.transform(this.leaveRequestForm.controls.toDate.value,"yyyy-MM-dd"),fromDateHalf:this.leaveRequestForm.controls.fromDateHalf.value,toDateHalf:this.leaveRequestForm.controls.toDateHalf.value,leaveTypeId:this.leaveRequestForm.controls.leaveTypeId.value,document:!!this.leaveRequestForm.controls.document.value,leaveId:this.leaveData?this.leaveData.id:null};this.LM.setValidateLeave(t).subscribe(n=>{if(n&&n.status){var l=JSON.parse(n.data[0].count_json),i=[];for(let r=0;r<l.length;r++)i.push(l[r].message);this.leaveRequestForm.controls.leaveCount.setValue(JSON.parse(n.data[0].count_json)[0].leavecount),n.status&&1===l[0].message?(l[0].fileupload&&!this.leaveRequestForm.controls.document.value&&(this.document=!1,this.leaveRequestForm.controls.document.setValidators(),this.leaveRequestForm.get("document").updateValueAndValidity()),this.isValidateLeave=!0):(l[0].fileupload||(this.document=!0,this.leaveRequestForm.controls.document.setValidators([s.kI.required]),this.leaveRequestForm.get("document").updateValueAndValidity()),this.isValidateLeave=!1,this.open(l,"8%","40%","400px",!0,"/LeaveManagement/leaveRequestBehalf"))}})}open(t,n,l,i,r,d){this.dialog.open(C.S,{position:{top:"70px"},data:{Message:t,flag:r,url:d}}).afterClosed().subscribe(_=>{})}submit(){if(this.submitted=!0,"VALID"===this.leaveRequestForm.status&&this.leaveRequestForm.controls.fromDate.value<=this.leaveRequestForm.controls.toDate.value&&(this.setValidateLeave(),this.isValidateLeave&&this.validEventLeave())){let t="";if(this.leavesTypeData.forEach(n=>{n.id==this.leaveRequestForm.controls.leaveTypeId.value&&(t=n.display_name)}),this.isFile){let n={id:this.leaveData?this.leaveData.id:"",empid:this.employeeId,fromDate:this.pipe.transform(this.leaveRequestForm.controls.fromDate.value,"yyyy-MM-dd"),compOffWorkedDate:this.leaveRequestForm.controls.compoffApprovedDate.value,relation:this.leaveRequestForm.controls.relation.value,toDate:this.pipe.transform(this.leaveRequestForm.controls.toDate.value,"yyyy-MM-dd"),fromDateHalf:this.leaveRequestForm.controls.fromDateHalf.value,toDateHalf:this.leaveRequestForm.controls.toDateHalf.value,leaveTypeId:this.leaveRequestForm.controls.leaveTypeId.value,leaveCount:this.leaveRequestForm.controls.leaveCount.value,reason:this.leaveRequestForm.controls.reason.value,contact:this.leaveRequestForm.controls.contact.value,emergencyEmail:this.leaveRequestForm.controls.emergencyEmail.value,document:this.leaveRequestForm.controls.document.value,emailData:this.employeeEmailData,leavetypename:t,isBehalf:!0};this.LM.setLeaveOnBehalfOfEmployee(n).subscribe(l=>{l&&l.status?this.file?this.LM.getFilepathsMaster(this.activeModule.moduleid).subscribe(i=>{i&&i.status&&this.LM.setFilesMaster({id:this.documentId?this.documentId:null,employeeId:this.employeeId,candidateId:null,filecategory:3==this.leaveRequestForm.controls.leaveTypeId.value?"SL":"ML",moduleId:this.activeModule.moduleid,documentnumber:"",fileName:this.file.name,modulecode:i.data[0].module_code,requestId:l.data[0].last_insert_id,status:"Submitted"}).subscribe(d=>{if(d&&d.status){let p=JSON.stringify(d.data[0]);this.formData.append("info",p),this.formData.append("file",this.file,this.file.name),this.LM.setProfileImage(this.formData).subscribe(_=>{this.formData.delete("file"),this.formData.delete("info"),_&&_.status?(this.documentId&&this.LMSC.removeImage(this.documentInfo).subscribe(x=>{}),this.open(l.isLeaveUpdated?this.msgLM76:this.msgLM144,"8%","500px","250px",!1,"/LeaveManagement/UserDashboard")):this.open(l.isLeaveUpdated?this.msgLM76:this.msgLM144,"8%","500px","250px",!1,"/LeaveManagement/UserDashboard"),this.file=null})}else this.LM.deleteFilesMaster(l.data[0].id).subscribe(p=>{})})}):this.open(l.isLeaveUpdated?this.msgLM76:this.msgLM144,"8%","500px","250px",!1,"/LeaveManagement/UserDashboard"):this.open({Message:this.msgLM119},"8%","500px","250px",!1,"/LeaveManagement/UserDashboard")})}else this.isFile=!1,this.open(this.ispdf?this.msgLM141:this.msgLM140,"8%","500px","250px",!1,"/LeaveManagement/leaveRequestBehalf")}}fileView(){window.open(this.fileURL)}getUploadDocument(){this.spinner.show(),this.LM.getFilesMaster({employeeId:this.employeeId,candidateId:null,filecategory:3==this.leaveData.leavetypeid?"SL":"ML",moduleId:this.activeModule.moduleid,requestId:this.leaveData?this.leaveData.id:null,status:"Submitted"}).subscribe(n=>{n&&n.status&&n.data.length>0?(this.documentId=n.data[0].id,this.documentInfo=JSON.stringify(n.data[0]),this.pdfName=n.data[0].fname,n.data[0].employeeId=this.employeeId,this.LM.getProfileImage(n.data[0]).subscribe(i=>{if(this.spinner.hide(),i.success){this.document=!0,this.leaveRequestForm.controls.document.value=!0,this.leaveRequestForm.controls.document.clearValidators(),this.leaveRequestForm.controls.document.updateValueAndValidity(),this.iseditDoc=!1;let r=new Uint8Array(i.image.data);r.reduce((_,x)=>_+String.fromCharCode(x),"");const p=new Blob([r],{type:"application/pdf"});this.fileURL=URL.createObjectURL(p)}})):this.spinner.hide()})}getMessagesList(){this.LM.getLeaveMessagesList({code:null,pagenumber:1,pagesize:1e3}).subscribe(n=>{n.status?(this.messagesDataList=n.data,this.messagesDataList.forEach(l=>{"LM79"==l.errorcode?this.msgLM79=l.errormessage:"LM76"==l.errorcode?this.msgLM76=l.errormessage:"LM1"==l.errorcode?this.msgLM1=l.errormessage:"LM3"==l.errorcode?this.msgLM3=l.errormessage:"LM7"==l.errorcode?this.msgLM7=l.errormessage:"LM119"==l.errorcode?this.msgLM119=l.errormessage:"LM140"==l.errorcode?this.msgLM140=l.errormessage:"LM141"==l.errorcode?this.msgLM141=l.errormessage:"LM142"==l.errorcode?this.msgLM142=l.errormessage:"LM144"==l.errorcode&&(this.msgLM144=l.errormessage)})):this.messagesDataList=[]})}getDurationFoBackDatedLeave(){this.LM.getDurationFoBackDatedLeave().subscribe(t=>{if(t&&t.status)if(this.roleValue=t.data[0].value,new Date<new Date(this.selectedEmployeeInfo.dateofjoin))this.minDate=new Date(this.selectedEmployeeInfo.dateofjoin);else{let n=new Date(this.selectedEmployeeInfo.dateofjoin),l=new Date,i=Math.floor((Date.UTC(l.getFullYear(),l.getMonth(),l.getDate())-Date.UTC(n.getFullYear(),n.getMonth(),n.getDate()))/864e5);Number(i)>Number(this.roleValue)?(this.minDate=new Date,this.minDate.setDate(this.minDate.getDate()-this.roleValue)):this.minDate=n}})}getleavecyclelastmonth(){this.LM.getleavecyclelastmonth().subscribe(t=>{t&&t.status&&(this.toMaxDate=new Date(t.data[0].last_date),this.maxDate=new Date(t.data[0].last_date),this.fromMaxDate=new Date(t.data[0].last_date))})}editdoc(){this.pdfName=null}getApprovedCompoffs(){this.LM.getApprovedCompoffs({id:this.employeeId,leaveId:this.leaveData?this.leaveData.id:null}).subscribe(n=>{n&&n.status&&(this.compOffApprovedDates=n.data,this.leaveRequestForm.controls.compoffApprovedDate.setValue(this.leaveData&&this.leaveData.worked_date?this.leaveData.worked_date:""))})}getEmployeeRelationsForBereavementLeave(){this.LM.getEmployeeRelationsForBereavementLeave({id:this.employeeId,leaveId:this.leaveData?this.leaveData.id:null}).subscribe(n=>{n&&n.status&&(this.employeeRelations=n.data)})}getMaxCountPerTermValue(){this.LM.getMaxCountPerTermValue(this.leaveRequestForm.controls.leaveTypeId.value).subscribe(t=>{t&&t.status&&(this.maxCountPerTermValue=parseInt(t.data[0].max_count)-1)})}eventBasedLeave(t){if("8"===this.leaveRequestForm.controls.leaveTypeId.value||"7"===this.leaveRequestForm.controls.leaveTypeId.value||"6"===this.leaveRequestForm.controls.leaveTypeId.value||"5"===this.leaveRequestForm.controls.leaveTypeId.value){var n=new Date(t);this.leaveRequestForm.controls.fromDateHalf.value?(this.isFirstHalf=!0,this.isDisableFirstHalf=!0,this.leaveRequestForm.controls.toDateHalf.setValue(!0,{emitEvent:!1}),this.leaveRequestForm.controls.toDate.setValue(new Date(n.setDate(n.getDate()+this.maxCountPerTermValue+1)),{emitEvent:!1})):this.leaveRequestForm.controls.toDate.setValue(new Date(n.setDate(n.getDate()+this.maxCountPerTermValue)),{emitEvent:!1})}}validEventLeave(){if("8"===this.leaveRequestForm.controls.leaveTypeId.value||"7"===this.leaveRequestForm.controls.leaveTypeId.value||"6"===this.leaveRequestForm.controls.leaveTypeId.value||"5"===this.leaveRequestForm.controls.leaveTypeId.value){if(this.leaveRequestForm.controls.fromDate.value<this.nextLeaveDate&&this.nextLeaveDate<this.leaveRequestForm.controls.toDate.value){var t=[{message:"Please cancel the leave on "+this.pipe.transform(new Date(this.nextLeaveDate),"dd-MM-yyyy")+" day"},{message:"Please change from date"}];return this.open(t,"8%","40%","400px",!0,"/LeaveManagement/leaveRequestBehalf"),!1}return this.maxCountPerTermValue+1!=parseInt(this.leaveRequestForm.controls.leaveCount.value)?(this.open(t=[{message:"Total Leave count should be "+(this.maxCountPerTermValue+1)+" days"},{message:"Please change from date"}],"8%","40%","400px",!0,"/LeaveManagement/leaveRequestBehalf"),!1):!(!this.leaveRequestForm.controls.fromDateHalf.value&&this.leaveRequestForm.controls.toDateHalf.value&&(this.open(t=[{message:"Change from date because you already submitted second half"}],"8%","40%","400px",!0,"/LeaveManagement/leaveRequestBehalf"),1))}return!0}onSelectFile(t){if(this.iseditDoc=!0,t.target.files[0].size<=1242880){this.file=t.target.files[0];var n=this.file.name.split(".");"pdf"==n[n.length-1]?(this.isFile=!0,this.setValidateLeave()):(this.ispdf=!0,this.isFile=!1,this.setValidateLeave(),this.open(this.msgLM141,"8%","500px","250px",!1,"/LeaveManagement/leaveRequestBehalf"))}else this.ispdf=!1,this.isFile=!1,this.setValidateLeave(),this.open(this.msgLM140,"8%","500px","250px",!1,"/LeaveManagement/leaveRequestBehalf")}delete(){this.leaveRequestForm.controls.document.setValue("")}getEmployeeEmailData(){this.employeeEmailData=[],this.emsService.getEmployeeEmailDataByEmpid(this.employeeId).subscribe(t=>{this.employeeEmailData=JSON.parse(t.data[0].jsonvalu)[0]})}noWhitespaceValidator(){return t=>0===(t.value||"").trim().length?{whitespace:!0}:null}getCompOffValidityDuration(t){this.LM.getCompOffValidityDuration().subscribe(n=>{if(n.status){this.fromMaxDate="";var l=new Date(t);this.minDate=new Date(t),l.setDate(l.getDate()+Number(n.data[0].value)),this.fromMaxDate=l}})}}return a.\u0275fac=function(t){return new(t||a)(e.\u0275\u0275directiveInject(he.H7),e.\u0275\u0275directiveInject(R.F0),e.\u0275\u0275directiveInject(u.Ye),e.\u0275\u0275directiveInject(F.t),e.\u0275\u0275directiveInject(s.QS),e.\u0275\u0275directiveInject(O.uw),e.\u0275\u0275directiveInject(b.t2),e.\u0275\u0275directiveInject(se.D),e.\u0275\u0275directiveInject(H.b),e.\u0275\u0275directiveInject(re.v))},a.\u0275cmp=e.\u0275\u0275defineComponent({type:a,selectors:[["app-leave-request-behalf-employee"]],features:[e.\u0275\u0275ProvidersFeature([{provide:S._A,useClass:X.t7,deps:[S.Ad]},{provide:S.sG,useValue:Ls}])],decls:69,vars:17,consts:[["fxLayout","column",1,"first-col"],["autocomplete","off",3,"formGroup"],[1,"headerbox"],[1,"title"],["fxLayout","row","fxLayout.xs","column","fxLayoutGap","10px"],["fxFlex","60",2,"padding-left","1%"],["fxLayout","row","fxLayout.xs","column"],["fxFlex","50","fxFlex.lt-lg","100","fxFlex.xs","100","appearance","outline",1,"mx-2","my-2"],["formControlName","employeeName","required",""],[4,"ngFor","ngForOf"],["class","con-error",4,"ngIf"],["formControlName","leaveTypeId","required","",3,"disabled"],["fxLayout","row","fxLayout.xs","column","fxLayoutGap","10px",4,"ngIf"],["fxLayout","row","fxLayout.lt-lg","column","fxLayout.xs","column",4,"ngIf"],["fxLayout","row","fxLayout.lt-lg","column","fxLayout.xs","column","fxLayoutGap","10px",4,"ngIf"],["fxFlex.xs","100","fxFlex","50","fxFlex.lt-lg","100","appearance","outline",1,"mx-2","my-2"],["formControlName","leaveCount","required","","matInput","","placeholder","Leave Count"],["fxFlex","100","appearance","outline",1,"mx-2","my-2"],["formControlName","reason","required","","matInput","","placeholder","Reason","maxlength","250"],["fxLayoutAlign","center"],[1,"btn","btn-primary","mr-2","mb-2",2,"padding","0 10px",3,"click"],[1,"btn","btn-danger","mr-2","mb-2",3,"click"],["fxFlex","40",2,"margin-top","200px"],[2,"width","100%","overflow-x","auto"],["id","table",1,"table","table-striped"],[2,"text-align","center"],[4,"ngIf"],[3,"value"],[1,"con-error"],["fxFlex","50","fxFlex.lt-lg","100","fxFlex.lt-lg","100","fxFlex.xs","100","class","mx-2 my-2","appearance","outline",4,"ngIf"],["fxFlex","50","fxFlex.lt-lg","100","fxFlex.xs","100","class","mx-2 my-2","appearance","outline",4,"ngIf"],["fxFlex","50","fxFlex.lt-lg","100","fxFlex.lt-lg","100","fxFlex.xs","100","appearance","outline",1,"mx-2","my-2"],["formControlName","compoffApprovedDate"],["formControlName","relation"],["fxLayout","row","fxLayout.lt-lg","column","fxLayout.xs","column"],["fxFlex.xs","100","fxFlex","50","appearance","outline",1,"mx-2","my-2"],["matInput","","readonly","","placeholder","DD-MM-YYYY","formControlName","fromDate","required","",3,"min","max","matDatepicker","matDatepickerFilter","click"],["matSuffix","",1,"datepicker",3,"for"],["picker",""],["style","margin-top: 20px; margin-left: 20px","formControlName","fromDateHalf",4,"ngIf"],["formControlName","fromDateHalf",2,"margin-top","20px","margin-left","20px"],["fxLayout","row","fxLayout.lt-lg","column","fxLayout.xs","column","fxLayoutGap","10px"],["matInput","","readonly","","placeholder","DD-MM-YYYY","formControlName","toDate","required","",3,"min","max","matDatepicker","matDatepickerFilter","click"],["picker1",""],["style","margin-top: 20px; margin-left: 20px","formControlName","toDateHalf",4,"ngIf"],["formControlName","toDateHalf",2,"margin-top","20px","margin-left","20px"],[2,"padding-left","2%"],["style","margin-top: 20px","formControlName","fromDateHalf",4,"ngIf"],["formControlName","fromDateHalf",2,"margin-top","20px"],["matInput","","readonly","","placeholder","DD-MM-YYYY","formControlName","toDate","required","",3,"min","max","matDatepicker","matDatepickerFilter","disabled","click"],["style","margin-top: 20px","formControlName","toDateHalf",4,"ngIf"],["formControlName","toDateHalf",2,"margin-top","20px"],["matInput","","readonly","","placeholder","DD-MM-YYYY","formControlName","toDate","required","",3,"min","max","matDatepicker","click"],["style","margin-top: 20px; margin-left: 15px","formControlName","toDateHalf",4,"ngIf"],["formControlName","toDateHalf",2,"margin-top","20px","margin-left","15px"],[2,"padding-bottom","1.34375em","margin-left","10px"],[2,"margin-left","10px"],["title","Only pdf file upto 1MB can be uploaded",1,"iconstyle"],["class","link","style","margin-left: 10px",3,"click",4,"ngIf"],["style","margin-left: 10px","type","file","formControlName","document","required","","single","","accept","pdf",3,"change",4,"ngIf"],["title","Edit",3,"click",4,"ngIf"],["title","Delete",3,"click",4,"ngIf"],["style","margin-left: 10px","class","invalid-feedback",4,"ngIf"],[1,"link",2,"margin-left","10px",3,"click"],["type","file","formControlName","document","required","","single","","accept","pdf",2,"margin-left","10px",3,"change"],["title","Edit",3,"click"],["title","Delete",3,"click"],[1,"invalid-feedback",2,"margin-left","10px"],["colspan","10",2,"text-align","center"]],template:function(t,n){1&t&&(e.\u0275\u0275elementStart(0,"div",0)(1,"form",1)(2,"mat-card")(3,"mat-card-header",2)(4,"mat-card-title",3),e.\u0275\u0275text(5,"Request on Behalf of Employee "),e.\u0275\u0275elementEnd()(),e.\u0275\u0275element(6,"mat-divider"),e.\u0275\u0275elementStart(7,"div",4)(8,"mat-card",5)(9,"div",6)(10,"mat-form-field",7)(11,"mat-label"),e.\u0275\u0275text(12,"Employee Name"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(13,"mat-select",8),e.\u0275\u0275template(14,jr,3,2,"ng-container",9),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(15,zr,2,1,"mat-error",10),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(16,"div",6)(17,"mat-form-field",7)(18,"mat-label"),e.\u0275\u0275text(19,"Leave Types"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(20,"mat-select",11),e.\u0275\u0275elementContainerStart(21),e.\u0275\u0275template(22,Wr,3,2,"div",9),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(23,$r,2,1,"mat-error",10),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(24,es,3,2,"div",12),e.\u0275\u0275template(25,ns,11,7,"div",13),e.\u0275\u0275template(26,is,11,8,"div",14),e.\u0275\u0275template(27,ms,11,7,"div",14),e.\u0275\u0275template(28,cs,11,8,"div",14),e.\u0275\u0275template(29,fs,10,6,"div",14),e.\u0275\u0275elementStart(30,"div",4)(31,"mat-form-field",15)(32,"mat-label"),e.\u0275\u0275text(33,"Leave Count"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(34,"input",16),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(35,"div",4)(36,"mat-form-field",17)(37,"mat-label"),e.\u0275\u0275text(38,"Reason"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(39,"textarea",18),e.\u0275\u0275template(40,vs,2,1,"mat-error",10),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(41,Cs,15,5,"div",12),e.\u0275\u0275element(42,"div",4),e.\u0275\u0275elementStart(43,"div",19)(44,"button",20),e.\u0275\u0275listener("click",function(){return n.submit()}),e.\u0275\u0275elementStart(45,"span"),e.\u0275\u0275text(46,"Submit"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(47,"button",21),e.\u0275\u0275listener("click",function(){return n.cancel(1)}),e.\u0275\u0275elementStart(48,"span"),e.\u0275\u0275text(49,"Cancel"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275element(50,"br"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(51,"mat-card",22)(52,"mat-card-header",2)(53,"mat-card-title",3),e.\u0275\u0275text(54," Available Leave Balance"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(55,"mat-card-content",23)(56,"table",24)(57,"thead")(58,"tr"),e.\u0275\u0275element(59,"th"),e.\u0275\u0275elementStart(60,"th",25),e.\u0275\u0275text(61,"Used"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(62,"th",25),e.\u0275\u0275text(63,"Available"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(64,"th",25),e.\u0275\u0275text(65,"Total"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(66,"tbody"),e.\u0275\u0275template(67,Es,10,4,"ng-container",9),e.\u0275\u0275template(68,Is,3,0,"tr",26),e.\u0275\u0275elementEnd()()()()()()()()),2&t&&(e.\u0275\u0275advance(1),e.\u0275\u0275property("formGroup",n.leaveRequestForm),e.\u0275\u0275advance(13),e.\u0275\u0275property("ngForOf",n.employeesData),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==n.leaveRequestForm.controls.employeeName.errors?null:n.leaveRequestForm.controls.employeeName.errors.required),e.\u0275\u0275advance(5),e.\u0275\u0275property("disabled",n.isedit),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",n.leavesTypeData),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==n.leaveRequestForm.controls.leaveTypeId.errors?null:n.leaveRequestForm.controls.leaveTypeId.errors.required),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",9==n.leaveRequestForm.controls.leaveTypeId.value||8),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",9==n.leaveRequestForm.controls.leaveTypeId.value),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",9==n.leaveRequestForm.controls.leaveTypeId.value),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",9!=n.leaveRequestForm.controls.leaveTypeId.value),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",9!=n.leaveRequestForm.controls.leaveTypeId.value&&8!=n.leaveRequestForm.controls.leaveTypeId.value&&7!=n.leaveRequestForm.controls.leaveTypeId.value&&6!=n.leaveRequestForm.controls.leaveTypeId.value&&5!=n.leaveRequestForm.controls.leaveTypeId.value),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",8==n.leaveRequestForm.controls.leaveTypeId.value||5==n.leaveRequestForm.controls.leaveTypeId.value||6==n.leaveRequestForm.controls.leaveTypeId.value||7==n.leaveRequestForm.controls.leaveTypeId.value),e.\u0275\u0275advance(5),e.\u0275\u0275attribute("disabled",!0),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngIf",(null==n.leaveRequestForm.controls.reason.errors?null:n.leaveRequestForm.controls.reason.errors.required)||(null==n.leaveRequestForm.controls.reason.errors?null:n.leaveRequestForm.controls.reason.errors.whitespace)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.document),e.\u0275\u0275advance(26),e.\u0275\u0275property("ngForOf",n.leavebalance),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.leavebalance&&0===n.leavebalance.length))},dependencies:[u.sg,u.O5,S.ey,c.a8,c.dk,c.dn,c.n5,me.oG,T.Mq,T.hl,T.nW,Y.d,W.Hw,h.TO,h.KE,h.hX,h.R9,V.Nt,j.gD,s._Y,s.Fj,s.JJ,s.JL,s.Q7,s.nD,s.sg,s.u,v.xw,v.SQ,v.Wh,v.yH,u.uU],styles:['.Sub[_ngcontent-%COMP%]{margin:2% 20px 20px}.matInputCheckbox[_ngcontent-%COMP%]{margin-top:20px;margin-left:20px}table[_ngcontent-%COMP%]{border:1px solid;border-color:#cfcfcf}.iconstyle[_ngcontent-%COMP%]{height:4px;width:4px}button.link[_ngcontent-%COMP%]{background:transparent;color:#00f;border:none;outline:0}button.link[_ngcontent-%COMP%]:hover{color:#80286a}  .cdk-overlay-container{z-index:1050!important}  .mat-form-field-appearance-outline .mat-form-field-wrapper{margin:0!important}.table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{color:#000;border-bottom-width:2px}.table[_ngcontent-%COMP%]{color:#000!important}mat-card[_ngcontent-%COMP%]{transition:box-shadow .28s cubic-bezier(.4,0,.2,1);display:block;position:relative;padding-left:0;padding-right:0;padding-top:16px}.tableP[_ngcontent-%COMP%]{padding-left:1%;padding-right:1%;padding-bottom:1%}.section[_ngcontent-%COMP%]{padding-top:1%;padding-left:1%;margin-bottom:2px;font-size:17px;color:#000;text-align:left;line-height:28px}.truncate-cell[_ngcontent-%COMP%]{max-width:120px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}  .mat-select-panel[aria-label="Items per page:"] mat-option:last-child:before{content:"All"}  .mat-select-panel[aria-label="Items per page:"] mat-option:last-child .mat-option-text{display:none}.headerbox[_ngcontent-%COMP%]{height:45px;background-color:#28acaf!important;align-items:center}.title[_ngcontent-%COMP%]{font-family:Roboto;font-size:20px;font-weight:500;font-stretch:normal;font-style:normal;letter-spacing:.32px;color:#fff;margin-bottom:0}  .mat-card-header-text{margin:0 6px!important} tr .mat-header-row{height:45px!important}  .mat-form-field-appearance-outline .mat-form-field-wrapper{margin:.2em 0!important}']}),a})();function Ds(a,o){1&a&&(e.\u0275\u0275elementStart(0,"th",28),e.\u0275\u0275text(1," Applied On"),e.\u0275\u0275elementEnd())}function bs(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"td",29),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"date"),e.\u0275\u0275elementEnd()),2&a){const t=o.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1("",e.\u0275\u0275pipeBind2(2,1,t.applied_date,"dd-MM-yyyy")," ")}}function Ms(a,o){1&a&&(e.\u0275\u0275elementStart(0,"th",28),e.\u0275\u0275text(1," Emp Id "),e.\u0275\u0275elementEnd())}function Fs(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"td",30),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&a){const t=o.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",t.employee_id,"")}}function Rs(a,o){1&a&&(e.\u0275\u0275elementStart(0,"th",31),e.\u0275\u0275text(1," Emp Name "),e.\u0275\u0275elementEnd())}function ws(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"td",29),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&a){const t=o.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",t.employeename,"")}}function Ts(a,o){1&a&&(e.\u0275\u0275elementStart(0,"th",28),e.\u0275\u0275text(1," Worked Date "),e.\u0275\u0275elementEnd())}function As(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"td",32),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"date"),e.\u0275\u0275elementEnd()),2&a){const t=o.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind2(2,1,t.comp_off_worked_date,"dd-MM-yyyy"),"")}}function Os(a,o){1&a&&(e.\u0275\u0275elementStart(0,"th",31),e.\u0275\u0275text(1," Hours "),e.\u0275\u0275elementEnd())}function Ps(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"td",32),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&a){const t=o.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate2(" ",t.worked_hours," : ",0==t.worked_minutes?"00":t.worked_minutes," ")}}function Vs(a,o){1&a&&(e.\u0275\u0275elementStart(0,"th",28),e.\u0275\u0275text(1," Pending Since "),e.\u0275\u0275elementEnd())}function Ns(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"td",33),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&a){const t=o.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",t.pendingSince," ")}}function qs(a,o){1&a&&(e.\u0275\u0275elementStart(0,"th",31),e.\u0275\u0275text(1," Reason"),e.\u0275\u0275elementEnd())}function ks(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"td",32)(1,"span",34)(2,"i",35),e.\u0275\u0275text(3,"info_outline"),e.\u0275\u0275elementEnd()()()),2&a){const t=o.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275propertyInterpolate("title",t.reason)}}function Hs(a,o){1&a&&e.\u0275\u0275element(0,"th",31)}const de=function(a){return[a]};function Us(a,o){if(1&a){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"td",36)(1,"button",37),e.\u0275\u0275listener("keyup.enter",function(){const i=e.\u0275\u0275restoreView(t).$implicit,r=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(r.submit(i,"Approved",null))}),e.\u0275\u0275elementStart(2,"i",38),e.\u0275\u0275listener("click",function(){const i=e.\u0275\u0275restoreView(t).$implicit,r=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(r.submit(i,"Approved",null))}),e.\u0275\u0275text(3,"check_box"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(4,"button",39),e.\u0275\u0275listener("keyup.enter",function(){const i=e.\u0275\u0275restoreView(t).$implicit,r=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(r.compoffReject(i,"Reject",null))}),e.\u0275\u0275elementStart(5,"i",40),e.\u0275\u0275listener("click",function(){const i=e.\u0275\u0275restoreView(t).$implicit,r=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(r.compoffReject(i,"Reject",null))}),e.\u0275\u0275text(6,"cancel_presentation"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(7,"button",41),e.\u0275\u0275listener("keyup.enter",function(){const i=e.\u0275\u0275restoreView(t).$implicit,r=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(r.compoffReview(i))}),e.\u0275\u0275elementStart(8,"i",42),e.\u0275\u0275listener("click",function(){const i=e.\u0275\u0275restoreView(t).$implicit,r=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(r.compoffReview(i))}),e.\u0275\u0275text(9,"preview"),e.\u0275\u0275elementEnd()()()}if(2&a){const t=o.index;e.\u0275\u0275advance(1),e.\u0275\u0275property("tabindex",e.\u0275\u0275pureFunction1(3,de,t+1)),e.\u0275\u0275advance(3),e.\u0275\u0275property("tabindex",e.\u0275\u0275pureFunction1(5,de,t+1)),e.\u0275\u0275advance(3),e.\u0275\u0275property("tabindex",e.\u0275\u0275pureFunction1(7,de,t+1))}}function Bs(a,o){1&a&&e.\u0275\u0275element(0,"tr",43)}function Ys(a,o){1&a&&e.\u0275\u0275element(0,"tr",44)}function js(a,o){1&a&&(e.\u0275\u0275elementStart(0,"tr",45)(1,"td",46),e.\u0275\u0275text(2,"No data found"),e.\u0275\u0275elementEnd()())}const zs=function(){return[5,10,20]};function Ws(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"div",7)(1,"table",8),e.\u0275\u0275elementContainerStart(2,9),e.\u0275\u0275template(3,Ds,2,0,"th",10),e.\u0275\u0275template(4,bs,3,4,"td",11),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(5,12),e.\u0275\u0275template(6,Ms,2,0,"th",10),e.\u0275\u0275template(7,Fs,2,1,"td",13),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(8,14),e.\u0275\u0275template(9,Rs,2,0,"th",15),e.\u0275\u0275template(10,ws,2,1,"td",11),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(11,16),e.\u0275\u0275template(12,Ts,2,0,"th",10),e.\u0275\u0275template(13,As,3,4,"td",17),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(14,18),e.\u0275\u0275template(15,Os,2,0,"th",15),e.\u0275\u0275template(16,Ps,2,2,"td",17),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(17,19),e.\u0275\u0275template(18,Vs,2,0,"th",10),e.\u0275\u0275template(19,Ns,2,1,"td",20),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(20,21),e.\u0275\u0275template(21,qs,2,0,"th",15),e.\u0275\u0275template(22,ks,4,1,"td",17),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(23,22),e.\u0275\u0275template(24,Hs,1,0,"th",15),e.\u0275\u0275template(25,Us,10,9,"td",23),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275template(26,Bs,1,0,"tr",24),e.\u0275\u0275template(27,Ys,1,0,"tr",25),e.\u0275\u0275template(28,js,3,0,"tr",26),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(29,"mat-paginator",27),e.\u0275\u0275elementEnd()),2&a){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("dataSource",t.dataSource),e.\u0275\u0275advance(25),e.\u0275\u0275property("matHeaderRowDef",t.displayedColumns),e.\u0275\u0275advance(1),e.\u0275\u0275property("matRowDefColumns",t.displayedColumns),e.\u0275\u0275advance(2),e.\u0275\u0275property("pageSizeOptions",t.pageLoading?e.\u0275\u0275pureFunction0(4,zs):t.getPageSizes())}}function $s(a,o){if(1&a){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",47)(1,"div",48)(2,"mat-form-field",49)(3,"mat-label"),e.\u0275\u0275text(4,"Applied On"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(5,"input",50),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"mat-form-field",49)(7,"mat-label"),e.\u0275\u0275text(8,"Emp Id"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(9,"input",51),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(10,"mat-form-field",49)(11,"mat-label"),e.\u0275\u0275text(12,"Emp Name"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(13,"input",52),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(14,"mat-form-field",49)(15,"mat-label"),e.\u0275\u0275text(16,"Worked Date"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(17,"input",53),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(18,"mat-form-field",49)(19,"mat-label"),e.\u0275\u0275text(20,"No.of Hours"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(21,"input",54),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(22,"mat-form-field",49)(23,"mat-label"),e.\u0275\u0275text(24,"Pending Since"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(25,"input",55),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(26,"mat-form-field",49)(27,"mat-label"),e.\u0275\u0275text(28,"Comp-off Reason"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(29,"textarea",56),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(30,"div",57)(31,"button",58),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const l=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(l.approval())}),e.\u0275\u0275elementStart(32,"span"),e.\u0275\u0275text(33,"Approve"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(34,"button",59),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const l=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(l.reject())}),e.\u0275\u0275elementStart(35,"span"),e.\u0275\u0275text(36,"Reject"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(37,"button",60),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const l=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(l.cancel())}),e.\u0275\u0275elementStart(38,"span"),e.\u0275\u0275text(39,"Cancel"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275element(40,"br"),e.\u0275\u0275elementEnd()()}}let Gs=(()=>{class a{constructor(t,n,l,i,r,d){this.formBuilder=t,this.LM=n,this.dialog=l,this.router=i,this.spinner=r,this.EMS=d,this.compoffApprovalForm=s.nJ,this.displayedColumns=["appliedOn","empId","empName","fromDate","noOfHours","pendingSince","reason","action"],this.dataSource=[],this.arrayList=[],this.pageLoading=!0,this.isShow=!1,this.employeeEmailData=[]}ngOnInit(){this.compoffApprovalForm=this.formBuilder.group({appliedOn:[""],empId:[""],empName:[""],workedDate:[""],noOfHours:[""],pendingSince:[""],compOffReason:[""],approverReason:[""]}),this.userSession=JSON.parse(sessionStorage.getItem("user")||""),this.getCompoffForApprovals(),this.getErrorMessages("LM115"),this.getErrorMessages("LM116"),this.getErrorMessages("LM119")}getCompoffForApprovals(){this.spinner.show(),this.arrayList=[],this.LM.getCompoffForApprovals(this.userSession.id).subscribe(t=>{this.spinner.hide(),t.status?(this.arrayList=t.data,this.dataSource=new m.by(this.arrayList),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort,this.pageLoading=!1):(this.arrayList=[],this.dataSource=new m.by(this.arrayList),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort)})}getPageSizes(){var t=[];return this.dataSource.data.length>5&&t.push(5),this.dataSource.data.length>10&&t.push(10),this.dataSource.data.length>20&&t.push(20),t.push(this.dataSource.data.length),t}submit(t,n,l){this.employeeId=t.empid,this.getEmployeeEmailData(t,n,l)}compoffApprove(t,n,l){0==this.employeeEmailData.length?this.getEmployeeEmailData(t,n,l):(this.spinner.show(),t.rmid=this.userSession.id,t.status=n,t.remarks=t.remarks?t.remarks:null,t.emaildata=this.employeeEmailData,this.LM.setCompoffForApproveOrReject(t).subscribe(i=>{this.spinner.hide(),i&&i.status?"Approved"==i.compoffStatus?(this.dialog.open(C.S,{position:{top:"70px"},disableClose:!0,data:{Message:this.LM115,url:"/LeaveManagement/ManagerDashboard"}}),this.getCompoffForApprovals()):(this.dialog.open(C.S,{position:{top:"70px"},disableClose:!0,data:{Message:this.LM116,url:"/LeaveManagement/ManagerDashboard"}}),this.getCompoffForApprovals()):this.dialog.open(C.S,{position:{top:"70px"},disableClose:!0,data:{Message:"Please try again later",url:"/LeaveManagement/ManagerDashboard"}})}))}compoffReject(t,n,l){this.titleName="Reject",this.openDialog(t)}compoffReview(t){this.isShow=!0,this.compoffApprovalForm.controls.appliedOn.setValue(t.applied_date),this.compoffApprovalForm.controls.empId.setValue(t.employee_id),this.compoffApprovalForm.controls.empName.setValue(t.employeename),this.compoffApprovalForm.controls.workedDate.setValue(t.comp_off_worked_date),this.compoffApprovalForm.controls.noOfHours.setValue(t.worked_hours),this.compoffApprovalForm.controls.pendingSince.setValue(t.pendingSince),this.compoffApprovalForm.controls.compOffReason.setValue(t.reason),t.leavestatus=t.status}openDialog(t){this.dialog.open(k.w,{width:"600px",position:{top:"100px"},data:{name:this.titleName,reason:this.reason}}).afterClosed().subscribe(l=>{null!=l&&!0!==l&&(t.remarks=l.reason,this.employeeId=t.empid,this.getEmployeeEmailData(t,"Rejected",null))})}approval(){}reject(){}cancel(){this.isShow=!1,this.router.navigateByUrl("/",{skipLocationChange:!0}).then(()=>this.router.navigate(["/LeaveManagement/compoff-approval"]))}getErrorMessages(t){this.LM.getErrorMessages(t,1,1).subscribe(n=>{n.status&&"LM115"==t?this.LM115=n.data[0].errormessage:n.status&&"LM116"==t?this.LM116=n.data[0].errormessage:n.status&&"LM119"==t&&(this.LM119=n.data[0].errormessage)})}getEmployeeEmailData(t,n,l){this.employeeEmailData=[],this.employeeId=t.empid,this.EMS.getEmployeeEmailDataByEmpid(this.employeeId).subscribe(i=>{this.employeeEmailData=JSON.parse(i.data[0].jsonvalu)[0],this.compoffApprove(t,n,l)})}}return a.\u0275fac=function(t){return new(t||a)(e.\u0275\u0275directiveInject(s.QS),e.\u0275\u0275directiveInject(F.t),e.\u0275\u0275directiveInject(O.uw),e.\u0275\u0275directiveInject(R.F0),e.\u0275\u0275directiveInject(b.t2),e.\u0275\u0275directiveInject(H.b))},a.\u0275cmp=e.\u0275\u0275defineComponent({type:a,selectors:[["app-second-level-compoff-approval"]],viewQuery:function(t,n){if(1&t&&(e.\u0275\u0275viewQuery(M.NW,5),e.\u0275\u0275viewQuery(g.YE,5)),2&t){let l;e.\u0275\u0275queryRefresh(l=e.\u0275\u0275loadQuery())&&(n.paginator=l.first),e.\u0275\u0275queryRefresh(l=e.\u0275\u0275loadQuery())&&(n.sort=l.first)}},decls:10,vars:3,consts:[["fxLayout","column",1,"first-col"],[1,"headerbox"],[1,"title"],["fxLayout","column",1,"table-pad"],["class","example-container mat-elevation-z1",4,"ngIf"],["autocomplete","off",3,"formGroup"],["fxLayout","column","style","padding-left: 8px;padding-right: 8px;",4,"ngIf"],[1,"example-container","mat-elevation-z1"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","appliedOn"],["mat-header-cell","","class","no-break",4,"matHeaderCellDef"],["mat-cell","","style","width: 15%;",4,"matCellDef"],["matColumnDef","empId"],["mat-cell","","style","width: 10%;",4,"matCellDef"],["matColumnDef","empName",1,"no-break"],["mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","fromDate"],["mat-cell","",4,"matCellDef"],["matColumnDef","noOfHours"],["matColumnDef","pendingSince"],["mat-cell","","style","text-align: center;",4,"matCellDef"],["matColumnDef","reason"],["matColumnDef","action"],["mat-cell","","class","no-break",4,"matCellDef"],["class","headerbox title","mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],[3,"pageSizeOptions"],["mat-header-cell","",1,"no-break"],["mat-cell","",2,"width","15%"],["mat-cell","",2,"width","10%"],["mat-header-cell",""],["mat-cell",""],["mat-cell","",2,"text-align","center"],[3,"title"],["aria-hidden","true",1,"material-icons"],["mat-cell","",1,"no-break"],["mat-icon-button","","title","Approve",3,"tabindex","keyup.enter"],["title","Approve",1,"material-icons","mr-1",3,"click"],["mat-icon-button","","title","Reject",3,"tabindex","keyup.enter"],["title","Reject",1,"material-icons","mr-1",3,"click"],["mat-icon-button","","title","Review and approve",3,"tabindex","keyup.enter"],["title","Review and approve",1,"material-icons",3,"click"],["mat-header-row","",1,"headerbox","title"],["mat-row",""],[1,"mat-row"],["colspan","9",1,"mat-cell",2,"text-align","center"],["fxLayout","column",2,"padding-left","8px","padding-right","8px"],["fxLayout","row wrap","fxLayout.lt-lg","row wrap","fxLayout.xs","column","fxLayoutAlign.xs","center center"],["fxFlex.xs","100","fxFlex","31","fxFlex.lt-lg","45","appearance","outline",1,"mx-2","my-2"],["formControlName","appliedOn","matInput","","placeholder","Applied Date","readonly",""],["formControlName","empId","readonly","","matInput","","placeholder",""],["formControlName","empName","readonly","","matInput","","placeholder",""],["formControlName","workedDate","readonly","","matInput","","placeholder",""],["formControlName","noOfHours","readonly","","matInput","","placeholder",""],["formControlName","pendingSince","readonly","","matInput","","placeholder",""],["formControlName","compOffReason","readonly","","matInput","","maxlength","250"],["fxLayoutAlign","center center"],["type","submit",1,"btn","btn-primary","custom1","mr-2","mb-2",3,"click"],[1,"btn","btn-danger","mr-2","mb-2",3,"click"],["type","submit",1,"btn","btn-danger","mr-2","mb-2",3,"click"]],template:function(t,n){1&t&&(e.\u0275\u0275elementStart(0,"div",0)(1,"mat-card")(2,"mat-card-header",1)(3,"mat-card-title",2),e.\u0275\u0275text(4," Pending Comp Off "),e.\u0275\u0275elementEnd()(),e.\u0275\u0275element(5,"br"),e.\u0275\u0275elementStart(6,"div",3),e.\u0275\u0275template(7,Ws,30,5,"div",4),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"form",5),e.\u0275\u0275template(9,$s,41,0,"div",6),e.\u0275\u0275elementEnd()()()),2&t&&(e.\u0275\u0275advance(7),e.\u0275\u0275property("ngIf",!n.isShow),e.\u0275\u0275advance(1),e.\u0275\u0275property("formGroup",n.compoffApprovalForm),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.isShow))},dependencies:[u.O5,B.lW,c.a8,c.dk,c.n5,h.KE,h.hX,V.Nt,M.NW,g.YE,m.BZ,m.fO,m.as,m.w1,m.Dz,m.nj,m.ge,m.ev,m.XQ,m.Gk,m.Ee,s._Y,s.Fj,s.JJ,s.JL,s.nD,s.sg,s.u,v.xw,v.Wh,v.yH,u.uU],styles:['button.link[_ngcontent-%COMP%]{background:transparent;color:#00f;border:none;outline:0}button.link[_ngcontent-%COMP%]:hover{color:#80286a}mat-card[_ngcontent-%COMP%]{transition:box-shadow .28s cubic-bezier(.4,0,.2,1);display:block;position:relative;padding-left:0;padding-right:0}  .mat-select-panel[aria-label="Items per page:"] mat-option:last-child:before{content:"All";position:relative;display:block}  .mat-select-panel[aria-label="Items per page:"] mat-option:last-child .mat-option-text{display:none}.headerbox[_ngcontent-%COMP%]{height:45px;background-color:#28acaf!important;align-items:center}.title[_ngcontent-%COMP%]{font-family:Roboto;font-size:20px;font-weight:500;font-stretch:normal;font-style:normal;letter-spacing:.32px;color:#fff;margin-bottom:0}  tr.mat-header-row{height:45px!important}  .mat-form-field-appearance-outline .mat-form-field-wrapper{margin:.2em 0!important}.example-container[_ngcontent-%COMP%]{overflow-x:auto}.dev-Pad[_ngcontent-%COMP%]{padding:1%}.table-pad[_ngcontent-%COMP%]{padding-left:15px;padding-right:15px}@media only screen and (max-width: 800px) and (orientation: portrait){mat-header-row[_ngcontent-%COMP%], mat-row[_ngcontent-%COMP%]{width:150%}}table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:2px 10px}']}),a})();var Qs=f(72379),Xs=f(90455);function Ks(a,o){1&a&&(e.\u0275\u0275elementStart(0,"th",20),e.\u0275\u0275text(1," S.No "),e.\u0275\u0275elementEnd())}function Js(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"td",21),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&a){const t=o.index;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",t+1," ")}}function Zs(a,o){1&a&&(e.\u0275\u0275elementStart(0,"th",20),e.\u0275\u0275text(1," Configuration Rules "),e.\u0275\u0275elementEnd())}function em(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"td",21),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&a){const t=o.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(t.ruledescription)}}function tm(a,o){1&a&&(e.\u0275\u0275elementStart(0,"th",22),e.\u0275\u0275text(1,"Value"),e.\u0275\u0275elementEnd())}function am(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"div")(1,"mat-option",30),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd()()),2&a){const t=o.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275property("value",t.Value),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(t.name)}}function nm(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"mat-form-field",27)(1,"mat-select",28),e.\u0275\u0275elementContainerStart(2),e.\u0275\u0275template(3,am,3,2,"div",29),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementEnd()()),2&a){const t=e.\u0275\u0275nextContext(4);e.\u0275\u0275advance(3),e.\u0275\u0275property("ngForOf",t.arrayValue)}}function om(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"span",31),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&a){const t=e.\u0275\u0275nextContext(2).$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate("1"==t.value?"Yes":"No")}}function lm(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"div"),e.\u0275\u0275template(1,nm,4,1,"mat-form-field",25),e.\u0275\u0275template(2,om,2,1,"span",26),e.\u0275\u0275elementEnd()),2&a){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.isEditDefaultRules),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!t.isEditDefaultRules)}}function im(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"div")(1,"mat-option",30),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd()()),2&a){const t=o.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275property("value",t.Value),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(t.name)}}function rm(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"mat-form-field",27)(1,"mat-select",32),e.\u0275\u0275elementContainerStart(2),e.\u0275\u0275template(3,im,3,2,"div",29),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementEnd()()),2&a){const t=e.\u0275\u0275nextContext(4);e.\u0275\u0275advance(3),e.\u0275\u0275property("ngForOf",t.arrayValue)}}function sm(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"span",31),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&a){const t=e.\u0275\u0275nextContext(2).$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate("1"==t.value?"Yes":"No")}}function mm(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"div"),e.\u0275\u0275template(1,rm,4,1,"mat-form-field",25),e.\u0275\u0275template(2,sm,2,1,"span",26),e.\u0275\u0275elementEnd()),2&a){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.isEditDefaultRules),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!t.isEditDefaultRules)}}function dm(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"mat-error",35),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&a){const t=e.\u0275\u0275nextContext(5);e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",t.msgLM1," ")}}function pm(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"mat-form-field",27),e.\u0275\u0275element(1,"input",33),e.\u0275\u0275template(2,dm,2,1,"mat-error",34),e.\u0275\u0275elementEnd()),2&a){const t=e.\u0275\u0275nextContext(4);e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",null==t.leavepoliciesForm.controls.pastdays?null:t.leavepoliciesForm.controls.pastdays.required)}}function cm(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"span",31),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&a){const t=e.\u0275\u0275nextContext(2).$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(t.value)}}function um(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"div"),e.\u0275\u0275template(1,pm,3,1,"mat-form-field",25),e.\u0275\u0275template(2,cm,2,1,"span",26),e.\u0275\u0275elementEnd()),2&a){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.isEditDefaultRules),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!t.isEditDefaultRules)}}function fm(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"div")(1,"mat-option",30),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd()()),2&a){const t=o.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275propertyInterpolate("value",t.id),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(t.leave_cycle_year_name)}}function vm(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"mat-form-field",27)(1,"mat-select",36),e.\u0275\u0275elementContainerStart(2),e.\u0275\u0275template(3,fm,3,2,"div",29),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementEnd()()),2&a){const t=e.\u0275\u0275nextContext(4);e.\u0275\u0275advance(3),e.\u0275\u0275property("ngForOf",t.arrayValueOne)}}function _m(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"span",31),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&a){const t=e.\u0275\u0275nextContext(2).$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate("1"==t.value?"Jan-Dec":"Apr-Mar")}}function hm(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"div"),e.\u0275\u0275template(1,vm,4,1,"mat-form-field",25),e.\u0275\u0275template(2,_m,2,1,"span",26),e.\u0275\u0275elementEnd()),2&a){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.isEditDefaultRules),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!t.isEditDefaultRules)}}function gm(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"div")(1,"mat-option",30),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd()()),2&a){const t=o.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275property("value",t.id),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(t.leavename)}}function xm(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"mat-form-field",27)(1,"mat-select",37),e.\u0275\u0275elementContainerStart(2),e.\u0275\u0275template(3,gm,3,2,"div",29),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementEnd()()),2&a){const t=e.\u0275\u0275nextContext(4);e.\u0275\u0275advance(3),e.\u0275\u0275property("ngForOf",t.activeLeaveTypesForCarryForword)}}function ym(a,o){1&a&&(e.\u0275\u0275elementStart(0,"span",31),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&a&&(e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate("Select"))}function Cm(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"div"),e.\u0275\u0275template(1,xm,4,1,"mat-form-field",25),e.\u0275\u0275template(2,ym,2,1,"span",26),e.\u0275\u0275elementEnd()),2&a){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.isEditDefaultRules),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!t.isEditDefaultRules)}}function Em(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"div")(1,"mat-option",30),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd()()),2&a){const t=o.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275property("value",t.value),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(t.name)}}function Im(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"mat-form-field",27)(1,"mat-select",38),e.\u0275\u0275elementContainerStart(2),e.\u0275\u0275template(3,Em,3,2,"div",29),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementEnd()()),2&a){const t=e.\u0275\u0275nextContext(4);e.\u0275\u0275advance(3),e.\u0275\u0275property("ngForOf",t.valuesForCarryForwordleaves)}}function Lm(a,o){1&a&&(e.\u0275\u0275elementStart(0,"span",31),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&a&&(e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate("Select"))}function Sm(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"div"),e.\u0275\u0275template(1,Im,4,1,"mat-form-field",25),e.\u0275\u0275template(2,Lm,2,1,"span",26),e.\u0275\u0275elementEnd()),2&a){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.isEditDefaultRules),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!t.isEditDefaultRules)}}function Dm(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"td",23),e.\u0275\u0275template(1,lm,3,2,"div",24),e.\u0275\u0275template(2,mm,3,2,"div",24),e.\u0275\u0275template(3,um,3,2,"div",24),e.\u0275\u0275template(4,hm,3,2,"div",24),e.\u0275\u0275template(5,Cm,3,2,"div",24),e.\u0275\u0275template(6,Sm,3,2,"div",24),e.\u0275\u0275elementEnd()),2&a){const t=o.index;e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",0==t),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",1==t),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",2==t),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",3==t),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",5==t),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",6==t)}}function bm(a,o){1&a&&(e.\u0275\u0275elementStart(0,"th",20),e.\u0275\u0275text(1," Additional Information "),e.\u0275\u0275elementEnd())}function Mm(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"td",39),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&a){const t=o.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",t.rule_additional_info,"")}}function Fm(a,o){1&a&&e.\u0275\u0275element(0,"tr",40)}function Rm(a,o){1&a&&e.\u0275\u0275element(0,"tr",41)}function wm(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"div",1)(1,"div",5)(2,"form",6)(3,"h2"),e.\u0275\u0275text(4,"Common Rules for all Leave Types"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"div",7)(6,"table",8),e.\u0275\u0275elementContainerStart(7,9),e.\u0275\u0275template(8,Ks,2,0,"th",10),e.\u0275\u0275template(9,Js,2,1,"td",11),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(10,12),e.\u0275\u0275template(11,Zs,2,0,"th",10),e.\u0275\u0275template(12,em,2,1,"td",11),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(13,13),e.\u0275\u0275template(14,tm,2,0,"th",14),e.\u0275\u0275template(15,Dm,7,6,"td",15),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(16,16),e.\u0275\u0275template(17,bm,2,0,"th",10),e.\u0275\u0275template(18,Mm,2,1,"td",17),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275template(19,Fm,1,0,"tr",18),e.\u0275\u0275template(20,Rm,1,0,"tr",19),e.\u0275\u0275elementEnd()(),e.\u0275\u0275element(21,"br"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275element(22,"br"),e.\u0275\u0275elementEnd()),2&a){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(2),e.\u0275\u0275property("formGroup",t.leavepoliciesForm),e.\u0275\u0275advance(4),e.\u0275\u0275property("dataSource",t.dataSource),e.\u0275\u0275advance(13),e.\u0275\u0275property("matHeaderRowDef",t.displayedColumns),e.\u0275\u0275advance(1),e.\u0275\u0275property("matRowDefColumns",t.displayedColumns)}}function Tm(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"div")(1,"mat-option",30),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd()()),2&a){const t=o.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275property("value",t.id),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(t.leavename)}}function Am(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"div")(1,"mat-option",30),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd()()),2&a){const t=o.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275propertyInterpolate("value",t.id),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(t.leavename)}}function Om(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"div",47)(1,"mat-form-field",48)(2,"mat-label"),e.\u0275\u0275text(3,"Which leave type should be taken as advance leave"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"mat-select",49),e.\u0275\u0275elementContainerStart(5),e.\u0275\u0275template(6,Am,3,2,"div",29),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementEnd()()()),2&a){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(6),e.\u0275\u0275property("ngForOf",t.advanceLeavetypes)}}function Pm(a,o){1&a&&(e.\u0275\u0275elementStart(0,"th",20),e.\u0275\u0275text(1," S.No "),e.\u0275\u0275elementEnd())}function Vm(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"td",21),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&a){const t=o.index;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",t+1," ")}}function Nm(a,o){1&a&&(e.\u0275\u0275elementStart(0,"th",20),e.\u0275\u0275text(1," Configuration Rules "),e.\u0275\u0275elementEnd())}function qm(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"td",21),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&a){const t=o.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1("",t.ruledescription," ")}}function km(a,o){1&a&&(e.\u0275\u0275elementStart(0,"th",20),e.\u0275\u0275text(1,"Value"),e.\u0275\u0275elementEnd())}function Hm(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"mat-error",35),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&a){const t=e.\u0275\u0275nextContext(5);e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",t.msgLM1," ")}}function Um(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"div")(1,"mat-form-field",27),e.\u0275\u0275element(2,"input",54),e.\u0275\u0275template(3,Hm,2,1,"mat-error",34),e.\u0275\u0275elementEnd()()),2&a){const t=e.\u0275\u0275nextContext(4);e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",null==t.addleaveForm.controls.LEAVES_MAX_COUNT_PER_YEAR.errors?null:t.addleaveForm.controls.LEAVES_MAX_COUNT_PER_YEAR.errors.required)}}function Bm(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"div")(1,"mat-option",30),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd()()),2&a){const t=o.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275property("value",t.Value),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(t.name)}}function Ym(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"mat-error",35),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&a){const t=e.\u0275\u0275nextContext(5);e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",t.msgLM3," ")}}function jm(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"div")(1,"mat-form-field",27)(2,"mat-select",55),e.\u0275\u0275elementContainerStart(3),e.\u0275\u0275template(4,Bm,3,2,"div",29),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(5,Ym,2,1,"mat-error",34),e.\u0275\u0275elementEnd()()),2&a){const t=e.\u0275\u0275nextContext(4);e.\u0275\u0275advance(4),e.\u0275\u0275property("ngForOf",t.arrayValuess),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==t.addleaveForm.controls.LEAVES_CREDIT_FREQUENCY.errors?null:t.addleaveForm.controls.LEAVES_CREDIT_FREQUENCY.errors.required)}}function zm(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"div")(1,"mat-option",30),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd()()),2&a){const t=o.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275property("value",t.Value),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(t.name)}}function Wm(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"mat-error",35),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&a){const t=e.\u0275\u0275nextContext(5);e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",t.msgLM3," ")}}function $m(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"div")(1,"mat-form-field",27)(2,"mat-select",56),e.\u0275\u0275elementContainerStart(3),e.\u0275\u0275template(4,zm,3,2,"div",29),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(5,Wm,2,1,"mat-error",34),e.\u0275\u0275elementEnd()()),2&a){const t=e.\u0275\u0275nextContext(4);e.\u0275\u0275advance(4),e.\u0275\u0275property("ngForOf",t.arrayValues),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==t.addleaveForm.controls.LEAVES_WEEKENDS_INCLUDED.errors?null:t.addleaveForm.controls.LEAVES_WEEKENDS_INCLUDED.errors.required)}}function Gm(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"div")(1,"mat-option",30),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd()()),2&a){const t=o.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275property("value",t.Value),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(t.name)}}function Qm(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"mat-error",35),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&a){const t=e.\u0275\u0275nextContext(5);e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",t.msgLM3," ")}}function Xm(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"div")(1,"mat-form-field",27)(2,"mat-select",57),e.\u0275\u0275elementContainerStart(3),e.\u0275\u0275template(4,Gm,3,2,"div",29),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(5,Qm,2,1,"mat-error",34),e.\u0275\u0275elementEnd()()),2&a){const t=e.\u0275\u0275nextContext(4);e.\u0275\u0275advance(4),e.\u0275\u0275property("ngForOf",t.arrayValues),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==t.addleaveForm.controls.LEAVES_COMPANY_HOLIDAYS_INCLUDED.errors?null:t.addleaveForm.controls.LEAVES_COMPANY_HOLIDAYS_INCLUDED.errors.required)}}function Km(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"mat-error",35),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&a){const t=e.\u0275\u0275nextContext(5);e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(t.msgLM1)}}function Jm(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"div")(1,"mat-form-field",27),e.\u0275\u0275element(2,"input",58),e.\u0275\u0275template(3,Km,2,1,"mat-error",34),e.\u0275\u0275elementEnd()()),2&a){const t=e.\u0275\u0275nextContext(4);e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",null==t.addleaveForm.controls.LEAVES_MAX_CAP_FOR_ONE_INSTANCE.errors?null:t.addleaveForm.controls.LEAVES_MAX_CAP_FOR_ONE_INSTANCE.errors.required)}}function Zm(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"mat-error",35),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&a){const t=e.\u0275\u0275nextContext(5);e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(t.msgLM1)}}function ed(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"div")(1,"mat-form-field",27),e.\u0275\u0275element(2,"input",59),e.\u0275\u0275template(3,Zm,2,1,"mat-error",34),e.\u0275\u0275elementEnd()()),2&a){const t=e.\u0275\u0275nextContext(4);e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",null==t.addleaveForm.controls.LEAVES_MIN_SERVICE_ELIGIBILITY.errors?null:t.addleaveForm.controls.LEAVES_MIN_SERVICE_ELIGIBILITY.errors.required)}}function td(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"mat-error",35),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&a){const t=e.\u0275\u0275nextContext(5);e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(t.msgLM1)}}function ad(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"div")(1,"mat-form-field",27),e.\u0275\u0275element(2,"input",60),e.\u0275\u0275template(3,td,2,1,"mat-error",34),e.\u0275\u0275elementEnd()()),2&a){const t=e.\u0275\u0275nextContext(4);e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",null==t.addleaveForm.controls.LEAVES_MIN_DAYS_PRIOR_APPLICATION.errors?null:t.addleaveForm.controls.LEAVES_MIN_DAYS_PRIOR_APPLICATION.errors.required)}}function nd(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"mat-error",35),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&a){const t=e.\u0275\u0275nextContext(5);e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(t.msgLM1)}}function od(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"div")(1,"mat-form-field",27),e.\u0275\u0275element(2,"input",61),e.\u0275\u0275template(3,nd,2,1,"mat-error",34),e.\u0275\u0275elementEnd()()),2&a){const t=e.\u0275\u0275nextContext(4);e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",null==t.addleaveForm.controls.LEAVES_COUNT_TO_BE_CARRIED_FORWARD.errors?null:t.addleaveForm.controls.LEAVES_COUNT_TO_BE_CARRIED_FORWARD.errors.required)}}function ld(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"mat-error",35),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&a){const t=e.\u0275\u0275nextContext(5);e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(t.msgLM1)}}function id(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"div")(1,"mat-form-field",27),e.\u0275\u0275element(2,"input",62),e.\u0275\u0275template(3,ld,2,1,"mat-error",34),e.\u0275\u0275elementEnd()()),2&a){const t=e.\u0275\u0275nextContext(4);e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",null==t.addleaveForm.controls.LEAVES_MAX_AVAIL_COUNT.errors?null:t.addleaveForm.controls.LEAVES_MAX_AVAIL_COUNT.errors.required)}}function rd(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"mat-error",35),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&a){const t=e.\u0275\u0275nextContext(5);e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(t.msgLM1)}}function sd(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"div")(1,"mat-form-field",27),e.\u0275\u0275element(2,"input",63),e.\u0275\u0275template(3,rd,2,1,"mat-error",34),e.\u0275\u0275elementEnd()()),2&a){const t=e.\u0275\u0275nextContext(4);e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",null==t.addleaveForm.controls.LEAVES_MIN_DAYS_FOR_DOCUMENT_UPLOAD.errors?null:t.addleaveForm.controls.LEAVES_MIN_DAYS_FOR_DOCUMENT_UPLOAD.errors.required)}}function md(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"mat-error",35),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&a){const t=e.\u0275\u0275nextContext(5);e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(t.msgLM1)}}function dd(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"div")(1,"mat-form-field",27),e.\u0275\u0275element(2,"input",64),e.\u0275\u0275template(3,md,2,1,"mat-error",34),e.\u0275\u0275elementEnd()()),2&a){const t=e.\u0275\u0275nextContext(4);e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",null==t.addleaveForm.controls.LEAVES_GAP_BETWEEN_TERMS.errors?null:t.addleaveForm.controls.LEAVES_GAP_BETWEEN_TERMS.errors.required)}}function pd(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"mat-error",35),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&a){const t=e.\u0275\u0275nextContext(5);e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(t.msgLM1)}}function cd(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"div")(1,"mat-form-field",27),e.\u0275\u0275element(2,"input",65),e.\u0275\u0275template(3,pd,2,1,"mat-error",34),e.\u0275\u0275elementEnd()()),2&a){const t=e.\u0275\u0275nextContext(4);e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",null==t.addleaveForm.controls.MAX_AVAIL_COUNT.errors?null:t.addleaveForm.controls.MAX_AVAIL_COUNT.errors.required)}}function ud(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"mat-error",35),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&a){const t=e.\u0275\u0275nextContext(6);e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(t.msgLM1)}}function fd(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"mat-form-field",27),e.\u0275\u0275element(1,"input",66),e.\u0275\u0275template(2,ud,2,1,"mat-error",34),e.\u0275\u0275elementEnd()),2&a){const t=e.\u0275\u0275nextContext(5);e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",null==t.addleaveForm.controls.LEAVES_MAX_COUNT_PER_TERM.errors?null:t.addleaveForm.controls.LEAVES_MAX_COUNT_PER_TERM.errors.required)}}function vd(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"mat-error",35),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&a){const t=e.\u0275\u0275nextContext(6);e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(t.msgLM1)}}function _d(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"mat-form-field",27),e.\u0275\u0275element(1,"input",67),e.\u0275\u0275template(2,vd,2,1,"mat-error",34),e.\u0275\u0275elementEnd()),2&a){const t=e.\u0275\u0275nextContext(5);e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",null==t.addleaveForm.controls.LEAVES_MAX_COUNT_PER_TERM.errors?null:t.addleaveForm.controls.LEAVES_MAX_COUNT_PER_TERM.errors.required)}}function hd(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"div"),e.\u0275\u0275template(1,fd,3,1,"mat-form-field",25),e.\u0275\u0275template(2,_d,3,1,"mat-form-field",25),e.\u0275\u0275elementEnd()),2&a){const t=e.\u0275\u0275nextContext(4);e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.isterm),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!t.isterm)}}function gd(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"div")(1,"mat-option",30),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd()()),2&a){const t=o.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275property("value",t.Value),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(t.name)}}function xd(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"mat-error",35),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&a){const t=e.\u0275\u0275nextContext(5);e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(t.msgLM3)}}function yd(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"div")(1,"mat-form-field",27)(2,"mat-select",68),e.\u0275\u0275elementContainerStart(3),e.\u0275\u0275template(4,gd,3,2,"div",29),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(5,xd,2,1,"mat-error",34),e.\u0275\u0275elementEnd()()),2&a){const t=e.\u0275\u0275nextContext(4);e.\u0275\u0275advance(4),e.\u0275\u0275property("ngForOf",t.arrayValues),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==t.addleaveForm.controls.LEAVES_ELIGIBLE_ON_WEEKOFFS.errors?null:t.addleaveForm.controls.LEAVES_ELIGIBLE_ON_WEEKOFFS.errors.required)}}function Cd(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"div")(1,"mat-option",30),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd()()),2&a){const t=o.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275property("value",t.Value),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(t.name)}}function Ed(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"mat-error",35),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&a){const t=e.\u0275\u0275nextContext(5);e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(t.msgLM3)}}function Id(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"div")(1,"mat-form-field",27)(2,"mat-select",69),e.\u0275\u0275elementContainerStart(3),e.\u0275\u0275template(4,Cd,3,2,"div",29),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(5,Ed,2,1,"mat-error",34),e.\u0275\u0275elementEnd()()),2&a){const t=e.\u0275\u0275nextContext(4);e.\u0275\u0275advance(4),e.\u0275\u0275property("ngForOf",t.arrayValues),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==t.addleaveForm.controls.LEAVES_ELIGIBLE_ON_COMPANY_HOLIDAYS.errors?null:t.addleaveForm.controls.LEAVES_ELIGIBLE_ON_COMPANY_HOLIDAYS.errors.required)}}function Ld(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"div")(1,"mat-option",30),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd()()),2&a){const t=o.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275property("value",t.Value),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(t.name)}}function Sd(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"mat-error",35),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&a){const t=e.\u0275\u0275nextContext(5);e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(t.msgLM3)}}function Dd(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"div")(1,"mat-form-field",27)(2,"mat-select",70),e.\u0275\u0275elementContainerStart(3),e.\u0275\u0275template(4,Ld,3,2,"div",29),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(5,Sd,2,1,"mat-error",34),e.\u0275\u0275elementEnd()()),2&a){const t=e.\u0275\u0275nextContext(4);e.\u0275\u0275advance(4),e.\u0275\u0275property("ngForOf",t.arrayValues),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==t.addleaveForm.controls.LEAVES_LAPSED_CONVERSION_TO_PERKS_APPLICABLE.errors?null:t.addleaveForm.controls.LEAVES_LAPSED_CONVERSION_TO_PERKS_APPLICABLE.errors.required)}}function bd(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"mat-error",35),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&a){const t=e.\u0275\u0275nextContext(5);e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(t.msgLM3)}}function Md(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"div")(1,"mat-form-field",27),e.\u0275\u0275element(2,"input",71),e.\u0275\u0275template(3,bd,2,1,"mat-error",34),e.\u0275\u0275elementEnd()()),2&a){const t=e.\u0275\u0275nextContext(4);e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",null==t.addleaveForm.controls.COMPOFF_MIN_WORKING_HOURS_FOR_ELIGIBILITY.errors?null:t.addleaveForm.controls.COMPOFF_MIN_WORKING_HOURS_FOR_ELIGIBILITY.errors.required)}}function Fd(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"mat-error",35),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&a){const t=e.\u0275\u0275nextContext(5);e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(t.msgLM1)}}function Rd(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"div")(1,"mat-form-field",27),e.\u0275\u0275element(2,"input",72),e.\u0275\u0275template(3,Fd,2,1,"mat-error",34),e.\u0275\u0275elementEnd()()),2&a){const t=e.\u0275\u0275nextContext(4);e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",null==t.addleaveForm.controls.COMPOFF_MAX_BACKDATED_DAYS_PERMITTED_FOR_SUBMISSION.errors?null:t.addleaveForm.controls.COMPOFF_MAX_BACKDATED_DAYS_PERMITTED_FOR_SUBMISSION.errors.required)}}function wd(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"mat-error",35),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&a){const t=e.\u0275\u0275nextContext(5);e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(t.msgLM1)}}function Td(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"div")(1,"mat-form-field",27),e.\u0275\u0275element(2,"input",73),e.\u0275\u0275template(3,wd,2,1,"mat-error",34),e.\u0275\u0275elementEnd()()),2&a){const t=e.\u0275\u0275nextContext(4);e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",null==t.addleaveForm.controls.COMPOFF_THRESHOLD_DAYS_TO_LAPSE_OR_CONVERT_LEAVES_TO_PERKS.errors?null:t.addleaveForm.controls.COMPOFF_THRESHOLD_DAYS_TO_LAPSE_OR_CONVERT_LEAVES_TO_PERKS.errors.required)}}function Ad(a,o){1&a&&(e.\u0275\u0275elementStart(0,"div",76),e.\u0275\u0275text(1,"This color already existed"),e.\u0275\u0275elementEnd())}function Od(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"div"),e.\u0275\u0275element(1,"input",74),e.\u0275\u0275template(2,Ad,2,0,"div",75),e.\u0275\u0275elementEnd()),2&a){const t=e.\u0275\u0275nextContext(4);e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",t.isLeaveColorAlreadyExists&&!t.editingleavetype)}}function Pd(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"mat-error",35),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&a){const t=e.\u0275\u0275nextContext(5);e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(t.msgLM1)}}function Vd(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"div")(1,"mat-form-field",27),e.\u0275\u0275element(2,"input",77),e.\u0275\u0275template(3,Pd,2,1,"mat-error",34),e.\u0275\u0275elementEnd()()),2&a){const t=e.\u0275\u0275nextContext(4);e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",null==t.addleaveForm.controls.LEAVES_ENCASHMENT_MIN_COUNT_ELIGIBILITY.errors?null:t.addleaveForm.controls.LEAVES_ENCASHMENT_MIN_COUNT_ELIGIBILITY.errors.required)}}function Nd(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"mat-error",35),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&a){const t=e.\u0275\u0275nextContext(5);e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(t.msgLM1)}}function qd(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"div")(1,"mat-form-field",27),e.\u0275\u0275element(2,"input",78),e.\u0275\u0275template(3,Nd,2,1,"mat-error",34),e.\u0275\u0275elementEnd()()),2&a){const t=e.\u0275\u0275nextContext(4);e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",null==t.addleaveForm.controls.SICK_LEAVES_MIN_DAYS_PRIOR_APPLICATION_FOR_KNOWN_AILMENTS.errors?null:t.addleaveForm.controls.SICK_LEAVES_MIN_DAYS_PRIOR_APPLICATION_FOR_KNOWN_AILMENTS.errors.required)}}function kd(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"mat-error",35),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&a){const t=e.\u0275\u0275nextContext(5);e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(t.msgLM1)}}function Hd(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"div")(1,"mat-form-field",27),e.\u0275\u0275element(2,"input",79),e.\u0275\u0275template(3,kd,2,1,"mat-error",34),e.\u0275\u0275elementEnd()()),2&a){const t=e.\u0275\u0275nextContext(4);e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",null==t.addleaveForm.controls.LEAVES_LAPSE_PERIOD.errors?null:t.addleaveForm.controls.LEAVES_LAPSE_PERIOD.errors.required)}}function Ud(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"mat-error",35),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&a){const t=e.\u0275\u0275nextContext(5);e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(t.msgLM1)}}function Bd(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"div")(1,"mat-form-field",27),e.\u0275\u0275element(2,"input",80),e.\u0275\u0275template(3,Ud,2,1,"mat-error",34),e.\u0275\u0275elementEnd()()),2&a){const t=e.\u0275\u0275nextContext(4);e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",null==t.addleaveForm.controls.LEAVES_ELIGIBILITY_MINIMUM_HOURS.errors?null:t.addleaveForm.controls.LEAVES_ELIGIBILITY_MINIMUM_HOURS.errors.required)}}function Yd(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"td",21),e.\u0275\u0275template(1,Um,4,1,"div",24),e.\u0275\u0275template(2,jm,6,2,"div",24),e.\u0275\u0275template(3,$m,6,2,"div",24),e.\u0275\u0275template(4,Xm,6,2,"div",24),e.\u0275\u0275template(5,Jm,4,1,"div",24),e.\u0275\u0275template(6,ed,4,1,"div",24),e.\u0275\u0275template(7,ad,4,1,"div",24),e.\u0275\u0275template(8,od,4,1,"div",24),e.\u0275\u0275template(9,id,4,1,"div",24),e.\u0275\u0275template(10,sd,4,1,"div",24),e.\u0275\u0275template(11,dd,4,1,"div",24),e.\u0275\u0275template(12,cd,4,1,"div",24),e.\u0275\u0275template(13,hd,3,2,"div",24),e.\u0275\u0275template(14,yd,6,2,"div",24),e.\u0275\u0275template(15,Id,6,2,"div",24),e.\u0275\u0275template(16,Dd,6,2,"div",24),e.\u0275\u0275template(17,Md,4,1,"div",24),e.\u0275\u0275template(18,Rd,4,1,"div",24),e.\u0275\u0275template(19,Td,4,1,"div",24),e.\u0275\u0275template(20,Od,3,1,"div",24),e.\u0275\u0275template(21,Vd,4,1,"div",24),e.\u0275\u0275template(22,qd,4,1,"div",24),e.\u0275\u0275template(23,Hd,4,1,"div",24),e.\u0275\u0275template(24,Bd,4,1,"div",24),e.\u0275\u0275elementEnd()),2&a){const t=o.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","LEAVES_MAX_COUNT_PER_YEAR"==t.rulename),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","LEAVES_CREDIT_FREQUENCY"==t.rulename),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","LEAVES_WEEKENDS_INCLUDED"==t.rulename),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","LEAVES_COMPANY_HOLIDAYS_INCLUDED"==t.rulename),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","LEAVES_MAX_CAP_FOR_ONE_INSTANCE"==t.rulename),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","LEAVES_MIN_SERVICE_ELIGIBILITY"==t.rulename),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","LEAVES_MIN_DAYS_PRIOR_APPLICATION"==t.rulename),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","LEAVES_COUNT_TO_BE_CARRIED_FORWARD"==t.rulename),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","LEAVES_MAX_AVAIL_COUNT"==t.rulename),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","LEAVES_MIN_DAYS_FOR_DOCUMENT_UPLOAD"==t.rulename),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","LEAVES_GAP_BETWEEN_TERMS"==t.rulename),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","MAX_AVAIL_COUNT"==t.rulename),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","LEAVES_MAX_COUNT_PER_TERM"==t.rulename),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","LEAVES_ELIGIBLE_ON_WEEKOFFS"==t.rulename),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","LEAVES_ELIGIBLE_ON_COMPANY_HOLIDAYS"==t.rulename),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","LEAVES_LAPSED_CONVERSION_TO_PERKS_APPLICABLE"==t.rulename),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","COMPOFF_MIN_WORKING_HOURS_FOR_ELIGIBILITY"==t.rulename),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","COMPOFF_MAX_BACKDATED_DAYS_PERMITTED_FOR_SUBMISSION"==t.rulename),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","COMPOFF_THRESHOLD_DAYS_TO_LAPSE_OR_CONVERT_LEAVES_TO_PERKS"==t.rulename),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","leavecolor"==t.rulename),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","LEAVES_ENCASHMENT_MIN_COUNT_ELIGIBILITY"==t.rulename),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","SICK_LEAVES_MIN_DAYS_PRIOR_APPLICATION_FOR_KNOWN_AILMENTS"==t.rulename),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","LEAVES_LAPSE_PERIOD"==t.rulename),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","LEAVES_ELIGIBILITY_MINIMUM_HOURS"==t.rulename)}}function jd(a,o){1&a&&(e.\u0275\u0275elementStart(0,"th",81),e.\u0275\u0275text(1," Additional Information "),e.\u0275\u0275elementEnd())}function zd(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"td",82),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&a){const t=o.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1("",t.rule_additional_info," ")}}function Wd(a,o){1&a&&e.\u0275\u0275element(0,"th",20)}function $d(a,o){if(1&a){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"td",21)(1,"mat-slide-toggle",83),e.\u0275\u0275listener("change",function(l){const r=e.\u0275\u0275restoreView(t).$implicit,d=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(d.toglechange(l,r))}),e.\u0275\u0275elementEnd()()}if(2&a){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(1),e.\u0275\u0275property("checked",t.ischecked)}}function Gd(a,o){1&a&&e.\u0275\u0275element(0,"tr",40)}function Qd(a,o){1&a&&e.\u0275\u0275element(0,"tr",41)}function Xd(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"div"),e.\u0275\u0275element(1,"mat-divider")(2,"br"),e.\u0275\u0275elementStart(3,"div",50)(4,"table",8),e.\u0275\u0275elementContainerStart(5,9),e.\u0275\u0275template(6,Pm,2,0,"th",10),e.\u0275\u0275template(7,Vm,2,1,"td",11),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(8,12),e.\u0275\u0275template(9,Nm,2,0,"th",10),e.\u0275\u0275template(10,qm,2,1,"td",11),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(11,13),e.\u0275\u0275template(12,km,2,0,"th",10),e.\u0275\u0275template(13,Yd,25,24,"td",11),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(14,16),e.\u0275\u0275template(15,jd,2,0,"th",51),e.\u0275\u0275template(16,zd,2,1,"td",52),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(17,53),e.\u0275\u0275template(18,Wd,1,0,"th",10),e.\u0275\u0275template(19,$d,2,1,"td",11),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275template(20,Gd,1,0,"tr",18),e.\u0275\u0275template(21,Qd,1,0,"tr",19),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(22,"br"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(23,"br"),e.\u0275\u0275elementEnd()),2&a){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(4),e.\u0275\u0275property("dataSource",t.dataSource3),e.\u0275\u0275advance(16),e.\u0275\u0275property("matHeaderRowDef",t.displayedColumns3),e.\u0275\u0275advance(1),e.\u0275\u0275property("matRowDefColumns",t.displayedColumns3)}}function Kd(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"div",1)(1,"form",42)(2,"h2"),e.\u0275\u0275text(3,"Select Leave Type to view it's policies"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"div",43)(5,"mat-form-field",44)(6,"mat-label"),e.\u0275\u0275text(7,"Leave Type"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"mat-select",45),e.\u0275\u0275elementContainerStart(9),e.\u0275\u0275template(10,Tm,3,2,"div",29),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275template(11,Om,7,1,"div",46),e.\u0275\u0275template(12,Xd,24,3,"div",24),e.\u0275\u0275elementEnd()()),2&a){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("formGroup",t.addleaveForm),e.\u0275\u0275advance(9),e.\u0275\u0275property("ngForOf",t.leaveTypes),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.isadvanced),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.actionflag)}}const Zd=[{path:"",component:ue.C,children:[{path:"PendingApprovals",component:J,canActivate:[A.j]},{path:"ReviewAndApprovals",component:xa},{path:"ManagerDashboard",component:Ea,canActivate:[A.j]},{path:"PendingCompoff",component:ee,canActivate:[A.j]},{path:"LeaveHistory",component:Qa,canActivate:[A.j]},{path:"CompOffHistory",component:gn,canActivate:[A.j]},{path:"DetailedReport",component:ao,canActivate:[A.j]},{path:"SummaryReport",component:vo,canActivate:[A.j]},{path:"UserLeaveHistory",component:ll,canActivate:[A.j]},{path:"UserLeaveBalance",component:sl,canActivate:[A.j]},{path:"UserCompOff",component:Nl,canActivate:[A.j]},{path:"ManagerDashboardCalender",component:oe},{path:"EditProfile",component:ti},{path:"LeavesForCancellation",component:ae,canActivate:[A.j]},{path:"UserDashboard",component:Pi,canActivate:[A.j]},{path:"ManagerDashboardCalender",component:oe,canActivate:[A.j]},{path:"LeaveRequest",component:gr,canActivate:[A.j]},{path:"payrollreport",component:Yr,canActivate:[A.j]},{path:"leaveRequestBehalf",component:Ss},{path:"compoff-approval",component:Gs},{path:"leave-policies-view",component:(()=>{class a{constructor(t,n,l,i,r,d){this.location=t,this.LM=n,this.router=l,this.ts=i,this.dialog=r,this.formBuilder=d,this.leavepoliciesForm=s.nJ,this.addleaveForm=s.nJ,this.ruleInfo=[],this.ruleInfos=[],this.ruleMaasterData=[],this.defaultRuleInfo=[],this.existingColors=[],this.leavesTypeData=[],this.leaveTypes=[],this.rgbcolor=[],this.advanceLeavetypes=[],this.istoggle=!1,this.isterm=!0,this.isnewleave=!0,this.isadvanced=!1,this.isaddnew=!0,this.addBtn1=!0,this.addBtn2=!0,this.isaddnewleave=!1,this.isCreditfrequence=!0,this.datas=[],this.dataSource=[],this.dataSource2=[],this.dataSource3=[],this.isEditDefaultRules=!1,this.actionflag=!1,this.ischecked=!1,this.tabledata=!1,this.editingleavetype=!1,this.arrayValue=[{Value:"1",name:"Yes"},{Value:"0",name:"No"}],this.arrayValues=[{Value:"1",name:"Yes"},{Value:"0",name:"No"}],this.arrayValuess=[{Value:"1",name:"Monthly"},{Value:"3",name:"Quarterly"},{Value:"6",name:"Half-Yearly"},{Value:"12",name:"Yearly"}],this.isdisabled=!0,this.arrayValuesDefalult=[{value:"1",name:"Yes"},{value:"0",name:"No"}],this.arrayValuesWeek=[{Value:"1",name:"Yes"},{Value:"0",name:"No"}],this.displayedColumns=["sno","configurationrules","data"],this.displayedColumns4=["sno","configurationrules","data","actions"],this.displayedColumns3=[],this.displayedColumns2=["leavetypename","displayname","daysperyear","color","status","action"],this.advanceflag=!0,this.isLeaveColorAlreadyExists=!1,this.isadvanceLeveflag=!1,this.DEDUCTION=!1,this.INCLUDED=!1,this.MAIL=!1,this.BACKDATED=!1,this.leaveMaxCapForOneInstance=!1,this.leaveCreditFrequence=!1,this.leaveWeekendsIncluded=!1,this.leaveMaxCountPerYear=!1,this.leaveMinServiceEligibility=!1,this.leaveMinDaysPriorApplication=!1,this.leaveCompanyHolidaysIncluded=!1,this.leaveCountToBeCarried=!1,this.leaveEncashmentMinCounteligibility=!1,this.leaveMaxAvailCount=!1,this.sickLeavesMinDays=!1,this.leavesMinDaysForDocumentUpload=!1,this.leavesGapBeetweenTerms=!1,this.leavesEligibleOnWeekends=!1,this.leavesEligibleOnCompanyHolidays=!1,this.leavesLapsePeriod=!1,this.leavesLapsedConversionToPerksApplicable=!1,this.leavesEligibletyMinimumHours=!1,this.maxAvailCount=!1,this.leavesMaxCountPerter=!1,this.isactivate=!0,this.isdeactivate=!1,this.disble=!1,this.addadvanced=!1,this.compoffMinWorkingHoursForEligibility=!1,this.compoffMaxBackDatedDayspermittedForSubmission=!1,this.compoffThresholdDaysToLapesOrConvertLeavesToPerks=!1,this.ispredefined=!1,this.valuesForCarryForwordleaves=[],this.datas=this.location.getState(),this.getLeavesDetails(),this.getLeaveCycleYearOptions()}ngOnInit(){this.getLeaveRules(),this.getLeavesTypeInfo(),this.getAdvancedLeavetypes(),this.leavepoliciesForm=this.formBuilder.group({leavecycleyear:[""],email:[""],pastdays:["",s.kI.required],carrayForwordLeaveTypeId:[""],maxLeavesCarrayForwordValue:[""],fridayMondayleave:[""],cmpHolidayLeave:[""]}),this.getCarryforwardedLeaveMaxCount(2),this.addleaveForm=this.formBuilder.group({displayname:["",s.kI.required],leaveid:["",s.kI.required],advancedleaveid:["",s.kI.required],leavecolor:["",s.kI.required],pastdays:["",s.kI.required],LEAVES_MAX_COUNT_PER_YEAR:["",s.kI.required],data:["",s.kI.required],maxcapyear:["",s.kI.required],LEAVES_CREDIT_FREQUENCY:["",s.kI.required],LEAVES_WEEKENDS_INCLUDED:["",s.kI.required],LEAVES_COMPANY_HOLIDAYS_INCLUDED:["",s.kI.required],LEAVES_MAX_CAP_FOR_ONE_INSTANCE:["",s.kI.required],LEAVES_MIN_SERVICE_ELIGIBILITY:["",s.kI.required],LEAVES_MIN_DAYS_PRIOR_APPLICATION:["",s.kI.required],LEAVES_COUNT_TO_BE_CARRIED_FORWARD:["",s.kI.required],LEAVES_MAX_AVAIL_COUNT:["",s.kI.required],LEAVES_MIN_DAYS_FOR_DOCUMENT_UPLOAD:["",s.kI.required],LEAVES_GAP_BETWEEN_TERMS:["",s.kI.required],MAX_AVAIL_COUNT:["",s.kI.required],LEAVES_MAX_COUNT_PER_TERM:["",s.kI.required],LEAVES_ELIGIBLE_ON_WEEKOFFS:["",s.kI.required],LEAVES_ELIGIBILITY_MINIMUM_HOURS:["",s.kI.required],LEAVES_ENCASHMENT_MIN_COUNT_ELIGIBILITY:["",s.kI.required],SICK_LEAVES_MIN_DAYS_PRIOR_APPLICATION_FOR_KNOWN_AILMENTS:["",s.kI.required],LEAVES_ELIGIBLE_ON_COMPANY_HOLIDAYS:["",s.kI.required],LEAVES_LAPSE_PERIOD:["",s.kI.required],LEAVES_LAPSED_CONVERSION_TO_PERKS_APPLICABLE:["",s.kI.required],COMPOFF_MIN_WORKING_HOURS_FOR_ELIGIBILITY:["",s.kI.required],COMPOFF_MAX_BACKDATED_DAYS_PERMITTED_FOR_SUBMISSION:["",s.kI.required],COMPOFF_THRESHOLD_DAYS_TO_LAPSE_OR_CONVERT_LEAVES_TO_PERKS:["",s.kI.required],LEAVETYPE_THAT_CAN_BE_AVAILED_IN_ADVANCE:["",s.kI.required]}),this.addleaveForm.get("leavecolor")?.valueChanges.subscribe(t=>{this.setleavecolor="rgb("+this.hexToRgb(t)+")",this.checkLeaveTypes(this.addleaveForm.controls.leaveid.value,this.setleavecolor)}),this.addleaveForm.get("LEAVES_MAX_COUNT_PER_YEAR")?.valueChanges.subscribe(t=>{this.istoggle=!1}),this.addleaveForm.get("LEAVES_CREDIT_FREQUENCY")?.valueChanges.subscribe(t=>{"12"==t?this.LM.getLeavePolicies(1,!1,1,100).subscribe(n=>{let l=JSON.parse(n.data[0].json);n&&(this.isCreditfrequence=l[0].value!=this.addleaveForm.controls.leaveid.value)}):this.isCreditfrequence=!0,this.istoggle=!1}),this.addleaveForm.get("LEAVES_WEEKENDS_INCLUDED")?.valueChanges.subscribe(t=>{this.istoggle=!1}),this.addleaveForm.get("LEAVES_COMPANY_HOLIDAYS_INCLUDED")?.valueChanges.subscribe(t=>{this.istoggle=!1}),this.addleaveForm.get("LEAVES_MAX_CAP_FOR_ONE_INSTANCE")?.valueChanges.subscribe(t=>{this.istoggle=!1}),this.addleaveForm.get("LEAVES_MIN_SERVICE_ELIGIBILITY")?.valueChanges.subscribe(t=>{this.istoggle=!1}),this.addleaveForm.get("LEAVES_MIN_DAYS_PRIOR_APPLICATION")?.valueChanges.subscribe(t=>{this.istoggle=!1}),this.addleaveForm.get("LEAVES_COUNT_TO_BE_CARRIED_FORWARD")?.valueChanges.subscribe(t=>{this.istoggle=!1}),this.addleaveForm.get("LEAVES_MAX_AVAIL_COUNT")?.valueChanges.subscribe(t=>{this.istoggle=!1}),this.addleaveForm.get("LEAVES_MIN_DAYS_FOR_DOCUMENT_UPLOAD")?.valueChanges.subscribe(t=>{this.istoggle=!1}),this.addleaveForm.get("LEAVES_GAP_BETWEEN_TERMS")?.valueChanges.subscribe(t=>{this.istoggle=!1}),this.addleaveForm.get("MAX_AVAIL_COUNT")?.valueChanges.subscribe(t=>{this.istoggle=!1}),this.addleaveForm.get("LEAVES_MAX_COUNT_PER_TERM")?.valueChanges.subscribe(t=>{this.istoggle=!1}),this.addleaveForm.get("LEAVES_ELIGIBLE_ON_WEEKOFFS")?.valueChanges.subscribe(t=>{this.istoggle=!1}),this.addleaveForm.get("LEAVES_ELIGIBILITY_MINIMUM_HOURS")?.valueChanges.subscribe(t=>{this.istoggle=!1}),this.addleaveForm.get("LEAVES_ENCASHMENT_MIN_COUNT_ELIGIBILITY")?.valueChanges.subscribe(t=>{this.istoggle=!1}),this.addleaveForm.get("SICK_LEAVES_MIN_DAYS_PRIOR_APPLICATION_FOR_KNOWN_AILMENTS")?.valueChanges.subscribe(t=>{this.istoggle=!1}),this.addleaveForm.get("LEAVES_ELIGIBLE_ON_COMPANY_HOLIDAYS")?.valueChanges.subscribe(t=>{this.istoggle=!1}),this.addleaveForm.get("LEAVES_LAPSE_PERIOD")?.valueChanges.subscribe(t=>{this.istoggle=!1}),this.addleaveForm.get("LEAVES_LAPSED_CONVERSION_TO_PERKS_APPLICABLE")?.valueChanges.subscribe(t=>{this.istoggle=!1}),this.addleaveForm.get("COMPOFF_MIN_WORKING_HOURS_FOR_ELIGIBILITY")?.valueChanges.subscribe(t=>{this.istoggle=!1}),this.addleaveForm.get("COMPOFF_MAX_BACKDATED_DAYS_PERMITTED_FOR_SUBMISSION")?.valueChanges.subscribe(t=>{this.istoggle=!1}),this.addleaveForm.get("COMPOFF_THRESHOLD_DAYS_TO_LAPSE_OR_CONVERT_LEAVES_TO_PERKS")?.valueChanges.subscribe(t=>{this.istoggle=!1}),this.addleaveForm.get("LEAVETYPE_THAT_CAN_BE_AVAILED_IN_ADVANCE")?.valueChanges.subscribe(t=>{this.istoggle=!1}),this.addleaveForm.get("advancedleaveid")?.valueChanges.subscribe(t=>{this.addadvanced=!0}),this.addleaveForm.get("leaveid")?.valueChanges.subscribe(t=>{if(10==t)this.dialog.open(L.B,{position:{top:"70px"},disableClose:!0,data:"Loss of Pay leave is always available and is not configured by any rule."}),this.addleaveForm.controls.leaveid.reset(),this.actionflag=!1;else{this.addleaveForm.controls.leavecolor.disable(),this.addleaveForm.controls.pastdays.disable(),this.addleaveForm.controls.LEAVES_MAX_COUNT_PER_YEAR.disable(),this.addleaveForm.controls.data.disable(),this.addleaveForm.controls.maxcapyear.disable(),this.addleaveForm.controls.LEAVES_CREDIT_FREQUENCY.disable(),this.addleaveForm.controls.LEAVES_WEEKENDS_INCLUDED.disable(),this.addleaveForm.controls.LEAVES_COMPANY_HOLIDAYS_INCLUDED.disable(),this.addleaveForm.controls.LEAVES_MAX_CAP_FOR_ONE_INSTANCE.disable(),this.addleaveForm.controls.LEAVES_MIN_SERVICE_ELIGIBILITY.disable(),this.addleaveForm.controls.LEAVES_MIN_DAYS_PRIOR_APPLICATION.disable(),this.addleaveForm.controls.LEAVES_COUNT_TO_BE_CARRIED_FORWARD.disable(),this.addleaveForm.controls.LEAVES_MAX_AVAIL_COUNT.disable(),this.addleaveForm.controls.LEAVES_MIN_DAYS_FOR_DOCUMENT_UPLOAD.disable(),this.addleaveForm.controls.LEAVES_GAP_BETWEEN_TERMS.disable(),this.addleaveForm.controls.MAX_AVAIL_COUNT.disable(),this.addleaveForm.controls.LEAVES_MAX_COUNT_PER_TERM.disable(),this.addleaveForm.controls.LEAVES_ELIGIBLE_ON_WEEKOFFS.disable(),this.addleaveForm.controls.LEAVES_ELIGIBILITY_MINIMUM_HOURS.disable(),this.addleaveForm.controls.LEAVES_ENCASHMENT_MIN_COUNT_ELIGIBILITY.disable(),this.addleaveForm.controls.SICK_LEAVES_MIN_DAYS_PRIOR_APPLICATION_FOR_KNOWN_AILMENTS.disable(),this.addleaveForm.controls.LEAVES_ELIGIBLE_ON_COMPANY_HOLIDAYS.disable(),this.addleaveForm.controls.LEAVES_LAPSE_PERIOD.disable(),this.addleaveForm.controls.LEAVES_LAPSED_CONVERSION_TO_PERKS_APPLICABLE.disable(),this.addleaveForm.controls.COMPOFF_MIN_WORKING_HOURS_FOR_ELIGIBILITY.disable(),this.addleaveForm.controls.COMPOFF_MAX_BACKDATED_DAYS_PERMITTED_FOR_SUBMISSION.disable(),this.addleaveForm.controls.COMPOFF_THRESHOLD_DAYS_TO_LAPSE_OR_CONVERT_LEAVES_TO_PERKS.disable(),this.actionflag=!0;for(let n=0;n<this.leaveTypes.length;n++)if(this.leaveTypes[n].id==t){this.addleaveForm.controls.displayname.setValue(this.leaveTypes[n].display_name);break}1==t?(this.isadvanced=!0,this.tabledata=!1):(this.isadvanced=!1,this.displayedColumns3=t>10?this.displayedColumns4:this.displayedColumns4.filter(n=>"actions"!==n)),1!=t&&this.changeLeaveType(t,null)}}),this.leavepoliciesForm.get("carrayForwordLeaveTypeId")?.valueChanges.subscribe(t=>{this.getCarryforwardedLeaveMaxCount(t)})}setadvanceleavepolicies(){}getLeaveRules(){this.LM.getLeavePolicies(null,!0,1,10).subscribe(t=>{let n=JSON.parse(t.data[0].json);for(let l=0;l<n.length;l++)3!=l&&4!=l&&this.defaultRuleInfo.push(n[l]),4==l&&this.defaultRuleInfo.push({ruledescription:"Leave cycle year",rulename:"LEAVE_CYCLE_YEAR"});for(let l of this.defaultRuleInfo)l.isselected="Inactive"!==l.status,l.isValidate=!1;this.dataSource=new m.by(this.defaultRuleInfo)})}getLeavesDetails(){this.LM.getLeaveDetails("lm_leavesmaster","Active",1,100).subscribe(t=>{t.status&&(this.leaveTypes=t.data)})}getLeaveTypesToAdd(){this.LM.getLeaveTypesToAdd().subscribe(t=>{this.leaveTypes=[],t.status&&(this.leaveTypes=t.data)})}validateCustomLeave(t){var n=!0,l=!0,i=!0,r=!0,d=!0,p=!0,_=!0,x=!0,y=!0,D=!0,E=!0,w=!0,z=!0,q=!0,U=!0,$=!0,G=!0,pe=!0,ge=!0,xe=!0,ye=!0,Ce=!0,Ee=!0;for(let I of t)(null===I.value&&this.istoggle||""===I.value&&this.istoggle)&&("LEAVES_MAX_CAP_FOR_ONE_INSTANCE"==I.rulename?(n=!1,this.leaveMaxCapForOneInstance=!0):"LEAVES_CREDIT_FREQUENCY"==I.rulename?(l=!1,this.leaveCreditFrequence=!0):"LEAVES_WEEKENDS_INCLUDED"==I.rulename?(i=!1,this.leaveWeekendsIncluded=!0):"LEAVES_MAX_COUNT_PER_YEAR"==I.rulename?(r=!1,this.leaveMaxCountPerYear=!0):"LEAVES_MIN_SERVICE_ELIGIBILITY"==I.rulename?(d=!1,this.leaveMinServiceEligibility=!0):"LEAVES_MIN_DAYS_PRIOR_APPLICATION"==I.rulename?(p=!1,this.leaveMinDaysPriorApplication=!0):"LEAVES_COMPANY_HOLIDAYS_INCLUDED"==I.rulename?(_=!1,this.leaveCompanyHolidaysIncluded=!0):"LEAVES_COUNT_TO_BE_CARRIED_FORWARD"==I.rulename?(x=!1,this.leaveCountToBeCarried=!0):"LEAVES_ENCASHMENT_MIN_COUNT_ELIGIBILITY"==I.rulename?(y=!1,this.leaveEncashmentMinCounteligibility=!0):"LEAVES_MAX_AVAIL_COUNT"==I.rulename?(D=!1,this.leaveMaxAvailCount=!0):"SICK_LEAVES_MIN_DAYS_PRIOR_APPLICATION_FOR_KNOWN_AILMENTS"==I.rulename?(E=!1,this.sickLeavesMinDays=!0):"LEAVES_MIN_DAYS_FOR_DOCUMENT_UPLOAD"==I.rulename?(w=!1,this.leavesMinDaysForDocumentUpload=!0):"LEAVES_GAP_BETWEEN_TERMS"==I.rulename?(z=!1,this.leavesGapBeetweenTerms=!0):"LEAVES_ELIGIBLE_ON_WEEKENDS"==I.rulename?(q=!1,this.leavesEligibleOnWeekends=!0):"LEAVES_ELIGIBLE_ON_COMPANY_HOLIDAYS"==I.rulename?(U=!1,this.leavesEligibleOnCompanyHolidays=!0):"LEAVES_LAPSE_PERIOD"==I.rulename?($=!1,this.leavesLapsePeriod=!0):"LEAVES_LAPSED_CONVERSION_TO_PERKS_APPLICABLE"==I.rulename?(G=!1,this.leavesLapsedConversionToPerksApplicable=!0):"LEAVES_ELIGIBILITY_MINIMUM_HOURS"==I.rulename?(pe=!1,this.leavesEligibletyMinimumHours=!0):"MAX_AVAIL_COUNT"==I.rulename?(ge=!1,this.maxAvailCount=!0):"LEAVES_MAX_COUNT_PER_TERM"==I.rulename?(xe=!1,this.leavesMaxCountPerter=!0):"COMPOFF_MIN_WORKING_HOURS_FOR_ELIGIBILITY"==I.rulename?(ye=!1,this.compoffMinWorkingHoursForEligibility=!0):"COMPOFF_MAX_BACKDATED_DAYS_PERMITTED_FOR_SUBMISSION"==I.rulename?(Ce=!1,this.compoffMaxBackDatedDayspermittedForSubmission=!0):"COMPOFF_THRESHOLD_DAYS_TO_LAPSE_OR_CONVERT_LEAVES_TO_PERKS"==I.rulename&&(Ee=!1,this.compoffThresholdDaysToLapesOrConvertLeavesToPerks=!0));var vp=this.checkLeaveTypes(this.leaveId,t[0].leavecolor);return n&&l&&i&&r&&d&&p&&_&&x&&y&&D&&E&&w&&z&&q&&U&&$&&G&&pe&&ge&&xe&&ye&&Ce&&Ee&&vp}checkLeaveTypes(t,n){var l=!0;for(let i of this.leavesTypeData){if(i.id!==t&&i.leavecolor===n)return this.isLeaveColorAlreadyExists=i.id!=t||i.leavecolor!==n,!0;this.isLeaveColorAlreadyExists=!1}return l}getAdvancedLeavetypes(){this.LM.getleavetypesforadvancedleave().subscribe(t=>{t.status&&(this.advanceLeavetypes=t.data)})}editLeaveTypeName(t){this.addBtn2=!1,this.isnewleave=!0,this.editingleavetype=!0,1==t.id?(this.LM.getLeavePolicies(t.id,!1,1,100).subscribe(n=>{let l=JSON.parse(n.data[0].json);this.addleaveForm.controls.leaveid.setValue(t.id),this.addleaveForm.controls.advancedleaveid.setValue(l[0].value),this.editLeaveInfo=t,this.isaddnew=!1,this.isaddnewleave=!0,this.isdeactivate=!0,this.isactivate=!1}),this.displayedColumns3=t.id>11?this.displayedColumns4:this.displayedColumns4.filter(n=>"actions"!==n)):(this.displayedColumns3=t.id>11?this.displayedColumns4:this.displayedColumns4.filter(n=>"actions"!==n),this.leaveTypes=[])}getLeaveFormatedValue(t){return this.leaveTypes.find(function(n){if(n.id==t)return n})}setleavepolicies(){if(this.addleaveForm.controls.displayname.valid){this.leaveConfig=this.getLeaveFormatedValue(this.addleaveForm.controls.leaveid.value);for(let i=0;i<this.ruleInfos.length;i++)this.ruleInfos[i].leavecolor=this.setleavecolor,null==this.ruleInfos[i].effectivefromdate?this.ruleInfos[i].isFromDate=0:null!=this.ruleInfos[i].effectivefromdate&&(this.ruleInfos[i].isFromDate=1),null==this.ruleInfos[i].effectivetodate?this.ruleInfos[i].isToDate=0:null!=this.ruleInfos[i].effectivetodate&&(this.ruleInfos[i].isToDate=1),delete this.ruleInfos[i].effectivefromdate,delete this.ruleInfos[i].effectivetodate,"MAX_AVAIL_COUNT"===this.ruleInfos[i].rulename&&null!=this.addleaveForm.controls.MAX_AVAIL_COUNT.value?(this.ruleInfos[i].value=this.addleaveForm.controls.MAX_AVAIL_COUNT.value,this.ruleInfos[i].leavecolor=this.setleavecolor,this.ruleInfos[i].status="Active"):"LEAVES_GAP_BETWEEN_TERMS"===this.ruleInfos[i].rulename&&null!=this.addleaveForm.controls.LEAVES_GAP_BETWEEN_TERMS.value?(this.ruleInfos[i].leavecolor=this.setleavecolor,this.ruleInfos[i].value=this.addleaveForm.controls.LEAVES_GAP_BETWEEN_TERMS.value,this.ruleInfos[i].status="Active"):"LEAVES_MAX_COUNT_PER_TERM"===this.ruleInfos[i].rulename&&null!=this.addleaveForm.controls.LEAVES_MAX_COUNT_PER_TERM.value?(this.ruleInfos[i].leavecolor=this.setleavecolor,this.ruleInfos[i].value=this.addleaveForm.controls.LEAVES_MAX_COUNT_PER_TERM.value,this.ruleInfos[i].status="Active"):"LEAVES_CREDIT_FREQUENCY"===this.ruleInfos[i].rulename&&null!=this.addleaveForm.controls.LEAVES_CREDIT_FREQUENCY.value?(this.ruleInfos[i].leavecolor=this.setleavecolor,this.ruleInfos[i].value=this.addleaveForm.controls.LEAVES_CREDIT_FREQUENCY.value,this.ruleInfos[i].status="Active"):"LEAVES_WEEKENDS_INCLUDED"===this.ruleInfos[i].rulename&&null!=this.addleaveForm.controls.LEAVES_WEEKENDS_INCLUDED.value?(this.ruleInfos[i].leavecolor=this.setleavecolor,this.ruleInfos[i].value=this.addleaveForm.controls.LEAVES_WEEKENDS_INCLUDED.value,this.ruleInfos[i].status="Active"):"LEAVES_COMPANY_HOLIDAYS_INCLUDED"===this.ruleInfos[i].rulename&&null!=this.addleaveForm.controls.LEAVES_COMPANY_HOLIDAYS_INCLUDED.value?(this.ruleInfos[i].leavecolor=this.setleavecolor,this.ruleInfos[i].value=this.addleaveForm.controls.LEAVES_COMPANY_HOLIDAYS_INCLUDED.value,this.ruleInfos[i].status="Active"):"LEAVES_MAX_CAP_FOR_ONE_INSTANCE"===this.ruleInfos[i].rulename&&null!=this.addleaveForm.controls.LEAVES_MAX_CAP_FOR_ONE_INSTANCE.value?(this.ruleInfos[i].leavecolor=this.setleavecolor,this.ruleInfos[i].value=this.addleaveForm.controls.LEAVES_MAX_CAP_FOR_ONE_INSTANCE.value,this.ruleInfos[i].status="Active"):"LEAVES_MIN_SERVICE_ELIGIBILITY"===this.ruleInfos[i].rulename&&null!=this.addleaveForm.controls.LEAVES_MIN_SERVICE_ELIGIBILITY.value?(this.ruleInfos[i].leavecolor=this.setleavecolor,this.ruleInfos[i].value=this.addleaveForm.controls.LEAVES_MIN_SERVICE_ELIGIBILITY.value,this.ruleInfos[i].status="Active"):"LEAVES_MIN_DAYS_PRIOR_APPLICATION"===this.ruleInfos[i].rulename&&null!=this.addleaveForm.controls.LEAVES_MIN_DAYS_PRIOR_APPLICATION.value?(this.ruleInfos[i].leavecolor=this.setleavecolor,this.ruleInfos[i].value=this.addleaveForm.controls.LEAVES_MIN_DAYS_PRIOR_APPLICATION.value,this.ruleInfos[i].status="Active"):"LEAVES_COUNT_TO_BE_CARRIED_FORWARD"===this.ruleInfos[i].rulename&&null!=this.addleaveForm.controls.LEAVES_COUNT_TO_BE_CARRIED_FORWARD.value?(this.ruleInfos[i].leavecolor=this.setleavecolor,this.ruleInfos[i].value=this.addleaveForm.controls.LEAVES_COUNT_TO_BE_CARRIED_FORWARD.value,this.ruleInfos[i].status="Active"):"LEAVES_MAX_AVAIL_COUNT"===this.ruleInfos[i].rulename&&null!=this.addleaveForm.controls.LEAVES_MAX_AVAIL_COUNT.value?(this.ruleInfos[i].leavecolor=this.setleavecolor,this.ruleInfos[i].value=this.addleaveForm.controls.LEAVES_MAX_AVAIL_COUNT.value,this.ruleInfos[i].status="Active"):"LEAVES_MIN_DAYS_FOR_DOCUMENT_UPLOAD"===this.ruleInfos[i].rulename&&null!=this.addleaveForm.controls.LEAVES_MIN_DAYS_FOR_DOCUMENT_UPLOAD.value?(this.ruleInfos[i].leavecolor=this.setleavecolor,this.ruleInfos[i].value=this.addleaveForm.controls.LEAVES_MIN_DAYS_FOR_DOCUMENT_UPLOAD.value,this.ruleInfos[i].status="Active"):"LEAVES_ELIGIBLE_ON_WEEKOFFS"===this.ruleInfos[i].rulename&&null!=this.addleaveForm.controls.LEAVES_ELIGIBLE_ON_WEEKOFFS.value?(this.ruleInfos[i].leavecolor=this.setleavecolor,this.ruleInfos[i].value=this.addleaveForm.controls.LEAVES_ELIGIBLE_ON_WEEKOFFS.value,this.ruleInfos[i].status="Active"):"LEAVES_ELIGIBLE_ON_COMPANY_HOLIDAYS"===this.ruleInfos[i].rulename&&null!=this.addleaveForm.controls.LEAVES_ELIGIBLE_ON_COMPANY_HOLIDAYS.value?(this.ruleInfos[i].leavecolor=this.setleavecolor,this.ruleInfos[i].value=this.addleaveForm.controls.LEAVES_ELIGIBLE_ON_COMPANY_HOLIDAYS.value,this.ruleInfos[i].status="Active"):"LEAVES_LAPSED_CONVERSION_TO_PERKS_APPLICABLE"===this.ruleInfos[i].rulename&&null!=this.addleaveForm.controls.LEAVES_LAPSED_CONVERSION_TO_PERKS_APPLICABLE.value?(this.ruleInfos[i].leavecolor=this.setleavecolor,this.ruleInfos[i].value=this.addleaveForm.controls.LEAVES_LAPSED_CONVERSION_TO_PERKS_APPLICABLE.value,this.ruleInfos[i].status="Active"):"COMPOFF_MIN_WORKING_HOURS_FOR_ELIGIBILITY"===this.ruleInfos[i].rulename&&null!=this.addleaveForm.controls.COMPOFF_MIN_WORKING_HOURS_FOR_ELIGIBILITY.value?(this.ruleInfos[i].leavecolor=this.setleavecolor,this.ruleInfos[i].value=this.addleaveForm.controls.COMPOFF_MIN_WORKING_HOURS_FOR_ELIGIBILITY.value,this.ruleInfos[i].status="Active"):"COMPOFF_MAX_BACKDATED_DAYS_PERMITTED_FOR_SUBMISSION"===this.ruleInfos[i].rulename&&null!=this.addleaveForm.controls.COMPOFF_MAX_BACKDATED_DAYS_PERMITTED_FOR_SUBMISSION.value?(this.ruleInfos[i].leavecolor=this.setleavecolor,this.ruleInfos[i].value=this.addleaveForm.controls.COMPOFF_MAX_BACKDATED_DAYS_PERMITTED_FOR_SUBMISSION.value,this.ruleInfos[i].status="Active"):"COMPOFF_THRESHOLD_DAYS_TO_LAPSE_OR_CONVERT_LEAVES_TO_PERKS"===this.ruleInfos[i].rulename&&null!=this.addleaveForm.controls.COMPOFF_THRESHOLD_DAYS_TO_LAPSE_OR_CONVERT_LEAVES_TO_PERKS.value?(this.ruleInfos[i].leavecolor=this.setleavecolor,this.ruleInfos[i].value=this.addleaveForm.controls.COMPOFF_THRESHOLD_DAYS_TO_LAPSE_OR_CONVERT_LEAVES_TO_PERKS.value,this.ruleInfos[i].status="Active"):"LEAVES_MAX_COUNT_PER_YEAR"===this.ruleInfos[i].rulename&&null!=this.addleaveForm.controls.LEAVES_MAX_COUNT_PER_YEAR.value&&(this.ruleInfos[i].leavecolor=this.setleavecolor,this.ruleInfos[i].value=this.addleaveForm.controls.LEAVES_MAX_COUNT_PER_YEAR.value,this.ruleInfos[i].status="Active")}}submitLeavepolices(t,n){!this.isLeaveColorAlreadyExists||this.editingleavetype?this.validateCustomLeave(t.ruleData)&&(this.LM.updateLeaveDisplayName(n).subscribe(l=>{}),this.LM.setLeaveConfigure(t).subscribe(l=>{l.status?this.editingleavetype?(this.dialog.open(L.B,{position:{top:"70px"},disableClose:!0,data:this.msgLM111}),this.router.navigateByUrl("/",{skipLocationChange:!0}).then(()=>this.router.navigate(["/Admin/Leavepolicies"]))):(this.dialog.open(L.B,{position:{top:"70px"},disableClose:!0,data:this.msgLM133}),this.router.navigateByUrl("/",{skipLocationChange:!0}).then(()=>this.router.navigate(["/Admin/Leavepolicies"]))):this.dialog.open(L.B,{position:{top:"70px"},disableClose:!0,data:this.msgLM134})})):this.dialog.open(L.B,{position:{top:"70px"},disableClose:!0,data:"This color already existed"})}getLeavesTypeInfo(){this.LM.getLeavesTypeInfo().subscribe(t=>{this.leavesTypeData=t.data;for(let n=0;n<this.leavesTypeData.length;n++)this.existingColors.push(this.leavesTypeData[n].leavecolor);this.dataSource2=new m.by(this.leavesTypeData)})}cancelledleave(){this.router.navigateByUrl("/",{skipLocationChange:!0}).then(()=>this.router.navigate(["/Admin/Leavepolicies"]))}toglechange(t,n){t.checked?(this.addleaveForm.get(n.rulename).enable(),this.istoggle=!0):(this.addleaveForm.get(n.rulename).disable(),this.istoggle=!1)}changeLeaveType(t,n){this.leaveId=t,this.LM.getLeavePolicies(this.leaveId,!1,1,100).subscribe(l=>{var i=JSON.parse(l.data[0].json);this.ruleInfos=JSON.parse(l.data[0].json),this.rgbsplit(i[0].leavecolor),1==this.leaveId&&"edit"===n&&(this.leaveConfigure.advancedLeaveId=i[0].value);for(let r of i)r.isselected="Inactive"!==r.status,r.isValidate=!1;this.ruleInfo=i,this.ruleInfo.push({ruledescription:"This leave type's color",rulename:"leavecolor"});for(let r=0;r<this.ruleInfos.length;r++)"MAX_AVAIL_COUNT"===this.ruleInfos[r].rulename?this.addleaveForm.controls.MAX_AVAIL_COUNT.setValue(this.ruleInfos[r].value):"LEAVES_GAP_BETWEEN_TERMS"===this.ruleInfos[r].rulename?this.addleaveForm.controls.LEAVES_GAP_BETWEEN_TERMS.setValue(this.ruleInfos[r].value):"LEAVES_MAX_COUNT_PER_TERM"===this.ruleInfos[r].rulename?this.addleaveForm.controls.LEAVES_MAX_COUNT_PER_TERM.setValue(this.ruleInfos[r].value):"LEAVES_CREDIT_FREQUENCY"===this.ruleInfos[r].rulename?this.addleaveForm.controls.LEAVES_CREDIT_FREQUENCY.setValue(this.ruleInfos[r].value):"LEAVES_WEEKENDS_INCLUDED"===this.ruleInfos[r].rulename?this.addleaveForm.controls.LEAVES_WEEKENDS_INCLUDED.setValue(this.ruleInfos[r].value):"LEAVES_COMPANY_HOLIDAYS_INCLUDED"===this.ruleInfos[r].rulename?this.addleaveForm.controls.LEAVES_COMPANY_HOLIDAYS_INCLUDED.setValue(this.ruleInfos[r].value):"LEAVES_MAX_CAP_FOR_ONE_INSTANCE"===this.ruleInfos[r].rulename?this.addleaveForm.controls.LEAVES_MAX_CAP_FOR_ONE_INSTANCE.setValue(this.ruleInfos[r].value):"LEAVES_MIN_SERVICE_ELIGIBILITY"===this.ruleInfos[r].rulename?this.addleaveForm.controls.LEAVES_MIN_SERVICE_ELIGIBILITY.setValue(this.ruleInfos[r].value):"LEAVES_MIN_DAYS_PRIOR_APPLICATION"===this.ruleInfos[r].rulename?this.addleaveForm.controls.LEAVES_MIN_DAYS_PRIOR_APPLICATION.setValue(this.ruleInfos[r].value):"LEAVES_COUNT_TO_BE_CARRIED_FORWARD"===this.ruleInfos[r].rulename?this.addleaveForm.controls.LEAVES_COUNT_TO_BE_CARRIED_FORWARD.setValue(this.ruleInfos[r].value):"LEAVES_MAX_AVAIL_COUNT"===this.ruleInfos[r].rulename?this.addleaveForm.controls.LEAVES_MAX_AVAIL_COUNT.setValue(this.ruleInfos[r].value):"LEAVES_MIN_DAYS_FOR_DOCUMENT_UPLOAD"===this.ruleInfos[r].rulename?this.addleaveForm.controls.LEAVES_MIN_DAYS_FOR_DOCUMENT_UPLOAD.setValue(this.ruleInfos[r].value):"LEAVES_ELIGIBLE_ON_WEEKOFFS"===this.ruleInfos[r].rulename?this.addleaveForm.controls.LEAVES_ELIGIBLE_ON_WEEKOFFS.setValue(this.ruleInfos[r].value):"LEAVES_ELIGIBLE_ON_COMPANY_HOLIDAYS"===this.ruleInfos[r].rulename?this.addleaveForm.controls.LEAVES_ELIGIBLE_ON_COMPANY_HOLIDAYS.setValue(this.ruleInfos[r].value):"LEAVES_LAPSED_CONVERSION_TO_PERKS_APPLICABLE"===this.ruleInfos[r].rulename?this.addleaveForm.controls.LEAVES_LAPSED_CONVERSION_TO_PERKS_APPLICABLE.setValue(this.ruleInfos[r].value):"COMPOFF_MIN_WORKING_HOURS_FOR_ELIGIBILITY"===this.ruleInfos[r].rulename?this.addleaveForm.controls.COMPOFF_MIN_WORKING_HOURS_FOR_ELIGIBILITY.setValue(this.ruleInfos[r].value):"COMPOFF_MAX_BACKDATED_DAYS_PERMITTED_FOR_SUBMISSION"===this.ruleInfos[r].rulename?this.addleaveForm.controls.COMPOFF_MAX_BACKDATED_DAYS_PERMITTED_FOR_SUBMISSION.setValue(this.ruleInfos[r].value):"COMPOFF_THRESHOLD_DAYS_TO_LAPSE_OR_CONVERT_LEAVES_TO_PERKS"===this.ruleInfos[r].rulename?this.addleaveForm.controls.COMPOFF_THRESHOLD_DAYS_TO_LAPSE_OR_CONVERT_LEAVES_TO_PERKS.setValue(this.ruleInfos[r].value):"LEAVES_MAX_COUNT_PER_YEAR"===this.ruleInfos[r].rulename&&this.addleaveForm.controls.LEAVES_MAX_COUNT_PER_YEAR.setValue(this.ruleInfos[r].value);this.addleaveForm.controls.leavecolor.setValue(this.rgbcolor),this.dataSource3=new m.by(this.ruleInfo);for(let r of this.leaveTypes)r.ispredefined&&"Inactive"===r.status&&r.id==this.leaveId&&""!=this.ruleInfo[0].effectivefromdate&&(this.ispredefined=r.ispredefined,this.editLeaveInfo=r)})}rgbsplit(t){let n=t.substring(4,t.length-1).replace(/ /g,"").split(",");this.rgbcolor=this.rgbToHex(parseInt(n[0]),parseInt(n[1]),parseInt(n[2])),this.addleaveForm.controls.leavecolor.setValue(this.rgbcolor)}rgbToHex(t,n,l){return"#"+((1<<24)+(t<<16)+(n<<8)+l).toString(16).slice(1)}hexToRgb(t){var n=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return n?parseInt(n[1],16)+","+parseInt(n[2],16)+","+parseInt(n[3],16):null}saveDefaultrules(){if(this.validation()&&""!=this.leavepoliciesForm.controls.pastdays.value){for(let n=0;n<this.defaultRuleInfo.length;n++)"LEAVES_DURATION_FOR_BACKDATED_LEAVES"==this.defaultRuleInfo[n].rulename?this.defaultRuleInfo[n].value=this.leavepoliciesForm.controls.pastdays.value:"LEAVES_IS_MAIL_FACILITY_REQUIRED"==this.defaultRuleInfo[n].rulename?this.defaultRuleInfo[n].value=this.leavepoliciesForm.controls.email.value:"LEAVE_CYCLE_YEAR"==this.defaultRuleInfo[n].rulename?this.defaultRuleInfo[n].value=this.leavepoliciesForm.controls.leavecycleyear.value:"LEAVETYPE_FOR_WHICH_BALANCE_IS_TO_BE_CARRIED_FORWARD"==this.defaultRuleInfo[n].rulename?this.defaultRuleInfo[n].value=this.leavepoliciesForm.controls.activeLeaveTypesForCarryForword.value:"QUANTITY_OF_LEAVES_TO_BE_CARRIED_FORWARD"==this.defaultRuleInfo[n].rulename?this.defaultRuleInfo[n].value=this.leavepoliciesForm.controls.maxLeavesCarrayForwordValue.value:"LEAVES_WEEKENDS_INCLUDED"==this.defaultRuleInfo[n].rulename?this.defaultRuleInfo[n].value=this.leavepoliciesForm.controls.fridayMondayleave.value:"LEAVES_COMPANY_HOLIDAYS_INCLUDED"==this.defaultRuleInfo[n].rulename&&(this.defaultRuleInfo[n].value=this.leavepoliciesForm.controls.cmpHolidayLeave.value);this.LM.setLeaveConfigure({ruleData:this.defaultRuleInfo}).subscribe(n=>{this.getLeaveRules(),n.status?(this.dialog.open(L.B,{position:{top:"70px"},disableClose:!0,data:n.message}),this.isEditDefaultRules=!1,this.addBtn1=!0,this.ngOnInit()):this.dialog.open(L.B,{position:{top:"70px"},disableClose:!0,data:"Unable to update leave policies. Please try again."})})}else""!=this.leavepoliciesForm.controls.pastdays.value&&null!=this.leavepoliciesForm.controls.pastdays.value||this.dialog.open(L.B,{position:{top:"70px"},disableClose:!0,data:"Please enter valid data"})}validation(){var t=!0;for(let n=0;n<this.defaultRuleInfo.length;n++)if(null===this.defaultRuleInfo[n].value||""===this.defaultRuleInfo[n].value||""!=this.leavepoliciesForm.controls.pastdays.value)return t=""!=this.leavepoliciesForm.controls.pastdays.value,"LEAVES_DEFAULT_TYPE_FOR_DEDUCTION"==this.defaultRuleInfo[n].rulename&&(this.DEDUCTION=!0),"LEAVES_WEEKENDS_INCLUDED"==this.defaultRuleInfo[n].rulename&&(this.INCLUDED=!0),"LEAVES_IS_MAIL_FACILITY_REQUIRED"==this.defaultRuleInfo[n].rulename&&(this.MAIL=!0),"LEAVES_DURATION_FOR_BACKDATED_LEAVES"==this.defaultRuleInfo[n].rulename&&(this.BACKDATED=!0),t;return t}cancelDefaultRules(){this.addBtn1=!0,this.addBtn2=!0,this.isEditDefaultRules=!this.isEditDefaultRules}editDefaultRules(){this.addBtn1=!1,this.isEditDefaultRules=!0;for(let t=0;t<this.defaultRuleInfo.length;t++)"LEAVES_WEEKENDS_INCLUDED"==this.defaultRuleInfo[t].rulename?this.leavepoliciesForm.controls.fridayMondayleave.setValue(this.defaultRuleInfo[t].value):"LEAVES_IS_MAIL_FACILITY_REQUIRED"==this.defaultRuleInfo[t].rulename?this.leavepoliciesForm.controls.email.setValue(this.defaultRuleInfo[t].value):"LEAVES_DURATION_FOR_BACKDATED_LEAVES"==this.defaultRuleInfo[t].rulename?this.leavepoliciesForm.controls.pastdays.setValue(this.defaultRuleInfo[t].value):"LEAVE_CYCLE_YEAR"==this.defaultRuleInfo[t].rulename?this.leavepoliciesForm.controls.leavecycleyear.setValue(this.defaultRuleInfo[t].value):"LEAVES_COMPANY_HOLIDAYS_INCLUDED"==this.defaultRuleInfo[t].rulename&&this.leavepoliciesForm.controls.cmpHolidayLeave.setValue(this.defaultRuleInfo[t].value)}getCarryforwardedLeaveMaxCount(t){this.valuesForCarryForwordleaves=[],this.valuesForCarryForwordleaves.push({value:"",name:"Select"}),this.LM.getCarryforwardedLeaveMaxCount(t).subscribe(n=>{if(n.status)for(let l=1;l<=parseInt(n.data[0].max_count);l++)this.valuesForCarryForwordleaves.push({value:l,name:l})})}backArrow(){this.router.navigateByUrl("/",{skipLocationChange:!0}).then(()=>this.router.navigate(["/LeaveManagement/UserDashboard"]))}getLeaveCycleYearOptions(){this.LM.getLeaveCycleYearOptions().subscribe(t=>{t.status&&(this.arrayValueOne=t.data)})}}return a.\u0275fac=function(t){return new(t||a)(e.\u0275\u0275directiveInject(u.Ye),e.\u0275\u0275directiveInject(Qs.t),e.\u0275\u0275directiveInject(R.F0),e.\u0275\u0275directiveInject(ie.r),e.\u0275\u0275directiveInject(O.uw),e.\u0275\u0275directiveInject(s.QS))},a.\u0275cmp=e.\u0275\u0275defineComponent({type:a,selectors:[["app-leave-policies-view"]],decls:7,vars:2,consts:[["fxLayout","column",1,"first-col"],["fxLayout","column"],[1,"headerbox"],[1,"title"],["fxLayout","column",4,"ngIf"],[1,"tableP"],["autocomplete","off",3,"formGroup"],[1,"mat-elevation-z1","example-container"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","sno"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","configurationrules"],["matColumnDef","data"],["mat-header-cell","","style","padding-left: auto",4,"matHeaderCellDef"],["mat-cell","","style","padding-top: 1%;",4,"matCellDef"],["matColumnDef","addditionalinformation"],["mat-cell","","style","padding-left: 1%;",4,"matCellDef"],["class","headerbox title","mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["mat-header-cell","",2,"padding-left","auto"],["mat-cell","",2,"padding-top","1%"],[4,"ngIf"],["appearance","outline","style","width:120px",4,"ngIf"],["class","form-control","style","background: #e8e8e8 !important;border-color: #e8e8e8 !important;opacity: 0.6 !important;width: 60%",4,"ngIf"],["appearance","outline",2,"width","120px"],["formControlName","fridayMondayleave",2,"width","50%"],[4,"ngFor","ngForOf"],[3,"value"],[1,"form-control",2,"background","#e8e8e8 !important","border-color","#e8e8e8 !important","opacity","0.6 !important","width","60%"],["formControlName","cmpHolidayLeave",2,"width","50%"],["formControlName","pastdays","onlyNumber","","matInput","","maxlength","2"],["class","con-error",4,"ngIf"],[1,"con-error"],["formControlName","leavecycleyear",2,"width","50%"],["formControlName","carrayForwordLeaveTypeId",2,"width","50%"],["formControlName","maxLeavesCarrayForwordValue",2,"width","50%"],["mat-cell","",2,"padding-left","1%"],["mat-header-row","",1,"headerbox","title"],["mat-row",""],["fxLayout","column",1,"tableP",3,"formGroup"],["fxLayout","row wrap","fxLayout.xs","column","fxLayoutAlign.xs","center",2,"padding-top","1%","padding-left","1%"],["fxFlex.xs","100","appearance","outline",1,"mx-2","my-2"],["formControlName","leaveid"],["fxLayout","row ","fxLayout.xs","column","fxLayoutAlign.xs","center",4,"ngIf"],["fxLayout","row ","fxLayout.xs","column","fxLayoutAlign.xs","center"],["fxFlex.xs","100","fxFlex","100","appearance","outline",1,"mx-2","my-2"],["formControlName","advancedleaveid"],[1,"mat-elevation-z1"],["mat-header-cell","","style","text-align: center;",4,"matHeaderCellDef"],["mat-cell","","style","padding-left:25px;",4,"matCellDef"],["matColumnDef","actions"],["type","text","onlyNumber","","formControlName","LEAVES_MAX_COUNT_PER_YEAR","matInput","","placeholder","","maxlength","2"],["required","","formControlName","LEAVES_CREDIT_FREQUENCY",2,"width","50%"],["required","","formControlName","LEAVES_WEEKENDS_INCLUDED",2,"width","50%"],["required","","formControlName","LEAVES_COMPANY_HOLIDAYS_INCLUDED",2,"width","50%"],["required","","type","text","onlyNumber","","formControlName","LEAVES_MAX_CAP_FOR_ONE_INSTANCE","matInput","","placeholder","","maxlength","2"],["required","","type","text","onlyNumber","","formControlName","LEAVES_MIN_SERVICE_ELIGIBILITY","matInput","","placeholder","","required","","maxlength","2"],["required","","type","text","onlyNumber","","formControlName","LEAVES_MIN_DAYS_PRIOR_APPLICATION","matInput","","placeholder","","maxlength","2"],["required","","type","text","onlyNumber","","formControlName","LEAVES_COUNT_TO_BE_CARRIED_FORWARD","matInput","","placeholder","","maxlength","2"],["required","","type","text","onlyNumber","","formControlName","LEAVES_MAX_AVAIL_COUNT","matInput","","placeholder","","maxlength","2"],["required","","type","text","onlyNumber","","formControlName","LEAVES_MIN_DAYS_FOR_DOCUMENT_UPLOAD","matInput","","placeholder","","maxlength","2"],["required","","type","text","onlyNumber","","formControlName","LEAVES_GAP_BETWEEN_TERMS","matInput","","placeholder","","maxlength","2"],["required","","type","text","onlyNumber","","formControlName","MAX_AVAIL_COUNT","matInput","","placeholder","","maxlength","2"],["required","","type","text","onlyNumber","","formControlName","LEAVES_MAX_COUNT_PER_TERM","matInput","","placeholder","","maxlength","3"],["required","","type","text","onlyNumber","","formControlName","LEAVES_MAX_COUNT_PER_TERM","matInput","","placeholder","","maxlength","2"],["required","","formControlName","LEAVES_ELIGIBLE_ON_WEEKOFFS",2,"width","50%"],["required","","formControlName","LEAVES_ELIGIBLE_ON_COMPANY_HOLIDAYS",2,"width","50%"],["required","","formControlName","LEAVES_LAPSED_CONVERSION_TO_PERKS_APPLICABLE",2,"width","50%"],["required","","type","text","onlyNumber","","formControlName","COMPOFF_MIN_WORKING_HOURS_FOR_ELIGIBILITY","matInput","","placeholder","","maxlength","2",2,"width","60%"],["required","","type","text","onlyNumber","","formControlName","COMPOFF_MAX_BACKDATED_DAYS_PERMITTED_FOR_SUBMISSION","matInput","","maxlength","3"],["required","","type","text","onlyNumber","","formControlName","COMPOFF_THRESHOLD_DAYS_TO_LAPSE_OR_CONVERT_LEAVES_TO_PERKS","matInput","","placeholder","",2,"width","60%"],["required","","matInput","","formControlName","leavecolor","value","leavecolor","type","color",2,"width","50%"],["class","con-error","style","color: red;",4,"ngIf"],[1,"con-error",2,"color","red"],["required","","onlyNumber","","matInput","","formControlName","LEAVES_ENCASHMENT_MIN_COUNT_ELIGIBILITY","type","text","maxlength","2",2,"width","50%"],["required","","onlyNumber","","matInput","","formControlName","SICK_LEAVES_MIN_DAYS_PRIOR_APPLICATION_FOR_KNOWN_AILMENTS","type","text","maxlength","2",2,"width","50%"],["required","","onlyNumber","","matInput","","formControlName","LEAVES_LAPSE_PERIOD","type","text","maxlength","2",2,"width","50%"],["required","","matInput","","onlyNumber","","formControlName","LEAVES_ELIGIBILITY_MINIMUM_HOURS","type","text","maxlength","2"],["mat-header-cell","",2,"text-align","center"],["mat-cell","",2,"padding-left","25px"],[3,"checked","change"]],template:function(t,n){1&t&&(e.\u0275\u0275elementStart(0,"div",0)(1,"mat-card",1)(2,"mat-card-header",2)(3,"mat-card-title",3),e.\u0275\u0275text(4,"Leave Policies"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(5,wm,23,4,"div",4),e.\u0275\u0275template(6,Kd,13,4,"div",4),e.\u0275\u0275elementEnd()()),2&t&&(e.\u0275\u0275advance(5),e.\u0275\u0275property("ngIf",!0),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!0))},dependencies:[u.sg,u.O5,S.ey,c.a8,c.dk,c.n5,Y.d,h.TO,h.KE,h.hX,V.Nt,j.gD,Xs.Rr,g.YE,m.BZ,m.fO,m.as,m.w1,m.Dz,m.nj,m.ge,m.ev,m.XQ,m.Gk,s._Y,s.Fj,s.JJ,s.JL,s.Q7,s.nD,s.sg,s.u,v.xw,v.Wh,v.yH],styles:[".headerbox[_ngcontent-%COMP%]{height:45px;background-color:#28acaf!important;align-items:center}.tableP[_ngcontent-%COMP%]{padding-left:1%;padding-right:1%;padding-bottom:1%}"]}),a})()}]}];let ep=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=e.\u0275\u0275defineNgModule({type:a}),a.\u0275inj=e.\u0275\u0275defineInjector({imports:[R.Bz.forChild(Zd),R.Bz]}),a})();var tp=f(90530),ap=f(69814);class cp{constructor(){this.change=new e.EventEmitter,this.instances={},this.DEFAULT_ID="DEFAULT_PAGINATION_ID"}defaultId(){return this.DEFAULT_ID}register(o){return null==o.id&&(o.id=this.DEFAULT_ID),this.instances[o.id]?this.updateInstance(o):(this.instances[o.id]=o,!0)}updateInstance(o){let t=!1;for(let n in this.instances[o.id])o[n]!==this.instances[o.id][n]&&(this.instances[o.id][n]=o[n],t=!0);return t}getCurrentPage(o){return this.instances[o]?this.instances[o].currentPage:1}setCurrentPage(o,t){if(this.instances[o]){let n=this.instances[o];t<=Math.ceil(n.totalItems/n.itemsPerPage)&&1<=t&&(this.instances[o].currentPage=t,this.change.emit(o))}}setTotalItems(o,t){this.instances[o]&&0<=t&&(this.instances[o].totalItems=t,this.change.emit(o))}setItemsPerPage(o,t){this.instances[o]&&(this.instances[o].itemsPerPage=t,this.change.emit(o))}getInstance(o=this.DEFAULT_ID){return this.instances[o]?this.clone(this.instances[o]):{}}clone(o){var t={};for(var n in o)o.hasOwnProperty(n)&&(t[n]=o[n]);return t}}let up=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=e.\u0275\u0275defineNgModule({type:a}),a.\u0275inj=e.\u0275\u0275defineInjector({providers:[cp],imports:[[u.ez]]}),a})(),fp=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=e.\u0275\u0275defineNgModule({type:a}),a.\u0275inj=e.\u0275\u0275defineInjector({imports:[u.ez,ep,tp.q,s.u5,s.UX,ap.o9,up,b.ef,ne.z1U,me.p9]}),a})()}}]);