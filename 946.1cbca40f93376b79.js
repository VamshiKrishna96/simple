(self.webpackChunkboon_hrms=self.webpackChunkboon_hrms||[]).push([[946],{90946:(jt,Kt,k)=>{"use strict";k.r(Kt),k.d(Kt,{CrmModule:()=>aa});var N=k(36895),f=k(83689),Ia=k(8626),ae=k(15861),e=k(94650),C=k(24006),ye=k(591),_i=k(56498),st=k(8929),lt=k(23426),_t=k(87545),yt=k(72986),Ie=k(24850),oe=k(7625);const _n=["*"];class se{constructor(d){this._ngZone=d,this._pending=[],this._listeners=[],this._targetStream=new ye.X(void 0)}_clearListeners(){for(const d of this._listeners)d.remove();this._listeners=[]}getLazyEmitter(d){return this._targetStream.pipe((0,_t.w)(n=>{const a=new _i.y(l=>{if(!n)return void this._pending.push({observable:a,observer:l});const u=n.addListener(d,h=>{this._ngZone.run(()=>l.next(h))});return this._listeners.push(u),()=>u.remove()});return a}))}setTarget(d){const n=this._targetStream.value;d!==n&&(n&&(this._clearListeners(),this._pending=[]),this._targetStream.next(d),this._pending.forEach(a=>a.observable.subscribe(a.observer)),this._pending=[])}destroy(){this._clearListeners(),this._pending=[],this._targetStream.complete()}}const Ve={center:{lat:37.421995,lng:-122.084092},zoom:17,mapTypeId:"roadmap"};let ie=(()=>{class o{constructor(n,a,l){if(this._elementRef=n,this._ngZone=a,this._eventManager=new se(this._ngZone),this.height="500px",this.width="500px",this._options=Ve,this.mapInitialized=new e.EventEmitter,this.authFailure=new e.EventEmitter,this.boundsChanged=this._eventManager.getLazyEmitter("bounds_changed"),this.centerChanged=this._eventManager.getLazyEmitter("center_changed"),this.mapClick=this._eventManager.getLazyEmitter("click"),this.mapDblclick=this._eventManager.getLazyEmitter("dblclick"),this.mapDrag=this._eventManager.getLazyEmitter("drag"),this.mapDragend=this._eventManager.getLazyEmitter("dragend"),this.mapDragstart=this._eventManager.getLazyEmitter("dragstart"),this.headingChanged=this._eventManager.getLazyEmitter("heading_changed"),this.idle=this._eventManager.getLazyEmitter("idle"),this.maptypeidChanged=this._eventManager.getLazyEmitter("maptypeid_changed"),this.mapMousemove=this._eventManager.getLazyEmitter("mousemove"),this.mapMouseout=this._eventManager.getLazyEmitter("mouseout"),this.mapMouseover=this._eventManager.getLazyEmitter("mouseover"),this.projectionChanged=this._eventManager.getLazyEmitter("projection_changed"),this.mapRightclick=this._eventManager.getLazyEmitter("rightclick"),this.tilesloaded=this._eventManager.getLazyEmitter("tilesloaded"),this.tiltChanged=this._eventManager.getLazyEmitter("tilt_changed"),this.zoomChanged=this._eventManager.getLazyEmitter("zoom_changed"),this._isBrowser=(0,N.NF)(l),this._isBrowser){const u=window;this._existingAuthFailureCallback=u.gm_authFailure,u.gm_authFailure=()=>{this._existingAuthFailureCallback&&this._existingAuthFailureCallback(),this.authFailure.emit()}}}set center(n){this._center=n}set zoom(n){this._zoom=n}set options(n){this._options=n||Ve}ngOnChanges(n){(n.height||n.width)&&this._setSize();const a=this.googleMap;a&&(n.options&&a.setOptions(this._combineOptions()),n.center&&this._center&&a.setCenter(this._center),n.zoom&&null!=this._zoom&&a.setZoom(this._zoom),n.mapTypeId&&this.mapTypeId&&a.setMapTypeId(this.mapTypeId))}ngOnInit(){this._isBrowser&&(this._mapEl=this._elementRef.nativeElement.querySelector(".map-container"),this._setSize(),this._ngZone.runOutsideAngular(()=>{this.googleMap=new google.maps.Map(this._mapEl,this._combineOptions())}),this._eventManager.setTarget(this.googleMap),this.mapInitialized.emit(this.googleMap))}ngOnDestroy(){this._eventManager.destroy(),this._isBrowser&&(window.gm_authFailure=this._existingAuthFailureCallback)}fitBounds(n,a){this._assertInitialized(),this.googleMap.fitBounds(n,a)}panBy(n,a){this._assertInitialized(),this.googleMap.panBy(n,a)}panTo(n){this._assertInitialized(),this.googleMap.panTo(n)}panToBounds(n,a){this._assertInitialized(),this.googleMap.panToBounds(n,a)}getBounds(){return this._assertInitialized(),this.googleMap.getBounds()||null}getCenter(){return this._assertInitialized(),this.googleMap.getCenter()}getClickableIcons(){return this._assertInitialized(),this.googleMap.getClickableIcons()}getHeading(){return this._assertInitialized(),this.googleMap.getHeading()}getMapTypeId(){return this._assertInitialized(),this.googleMap.getMapTypeId()}getProjection(){return this._assertInitialized(),this.googleMap.getProjection()||null}getStreetView(){return this._assertInitialized(),this.googleMap.getStreetView()}getTilt(){return this._assertInitialized(),this.googleMap.getTilt()}getZoom(){return this._assertInitialized(),this.googleMap.getZoom()}get controls(){return this._assertInitialized(),this.googleMap.controls}get data(){return this._assertInitialized(),this.googleMap.data}get mapTypes(){return this._assertInitialized(),this.googleMap.mapTypes}get overlayMapTypes(){return this._assertInitialized(),this.googleMap.overlayMapTypes}_setSize(){if(this._mapEl){const n=this._mapEl.style;n.height=null===this.height?"":At(this.height)||"500px",n.width=null===this.width?"":At(this.width)||"500px"}}_combineOptions(){const n=this._options||{};return{...n,center:this._center||n.center||Ve.center,zoom:this._zoom??n.zoom??Ve.zoom,mapTypeId:this.mapTypeId||n.mapTypeId||Ve.mapTypeId}}_assertInitialized(){}}return o.\u0275fac=function(n){return new(n||o)(e.\u0275\u0275directiveInject(e.ElementRef),e.\u0275\u0275directiveInject(e.NgZone),e.\u0275\u0275directiveInject(e.PLATFORM_ID))},o.\u0275cmp=e.\u0275\u0275defineComponent({type:o,selectors:[["google-map"]],inputs:{height:"height",width:"width",mapTypeId:"mapTypeId",center:"center",zoom:"zoom",options:"options"},outputs:{mapInitialized:"mapInitialized",authFailure:"authFailure",boundsChanged:"boundsChanged",centerChanged:"centerChanged",mapClick:"mapClick",mapDblclick:"mapDblclick",mapDrag:"mapDrag",mapDragend:"mapDragend",mapDragstart:"mapDragstart",headingChanged:"headingChanged",idle:"idle",maptypeidChanged:"maptypeidChanged",mapMousemove:"mapMousemove",mapMouseout:"mapMouseout",mapMouseover:"mapMouseover",projectionChanged:"projectionChanged",mapRightclick:"mapRightclick",tilesloaded:"tilesloaded",tiltChanged:"tiltChanged",zoomChanged:"zoomChanged"},exportAs:["googleMap"],features:[e.\u0275\u0275NgOnChangesFeature],ngContentSelectors:_n,decls:2,vars:0,consts:[[1,"map-container"]],template:function(n,a){1&n&&(e.\u0275\u0275projectionDef(),e.\u0275\u0275element(0,"div",0),e.\u0275\u0275projection(1))},encapsulation:2,changeDetection:0}),o})();const Ke=/([A-Za-z%]+)$/;function At(o){return null==o?"":Ke.test(o)?o:`${o}px`}let ji=(()=>{class o{constructor(n,a){this._googleMap=n,this._ngZone=a,this._eventManager=new se(this._ngZone),this.directionsChanged=this._eventManager.getLazyEmitter("directions_changed")}set directions(n){this._directions=n}set options(n){this._options=n}ngOnInit(){this._googleMap._isBrowser&&(this._ngZone.runOutsideAngular(()=>{this.directionsRenderer=new google.maps.DirectionsRenderer(this._combineOptions())}),this._assertInitialized(),this.directionsRenderer.setMap(this._googleMap.googleMap),this._eventManager.setTarget(this.directionsRenderer))}ngOnChanges(n){this.directionsRenderer&&(n.options&&this.directionsRenderer.setOptions(this._combineOptions()),n.directions&&void 0!==this._directions&&this.directionsRenderer.setDirections(this._directions))}ngOnDestroy(){this._eventManager.destroy(),this.directionsRenderer&&this.directionsRenderer.setMap(null)}getDirections(){return this._assertInitialized(),this.directionsRenderer.getDirections()}getPanel(){return this._assertInitialized(),this.directionsRenderer.getPanel()}getRouteIndex(){return this._assertInitialized(),this.directionsRenderer.getRouteIndex()}_combineOptions(){const n=this._options||{};return{...n,directions:this._directions||n.directions,map:this._googleMap.googleMap}}_assertInitialized(){}}return o.\u0275fac=function(n){return new(n||o)(e.\u0275\u0275directiveInject(ie),e.\u0275\u0275directiveInject(e.NgZone))},o.\u0275dir=e.\u0275\u0275defineDirective({type:o,selectors:[["map-directions-renderer"]],inputs:{directions:"directions",options:"options"},outputs:{directionsChanged:"directionsChanged"},exportAs:["mapDirectionsRenderer"],features:[e.\u0275\u0275NgOnChangesFeature]}),o})(),Tt=(()=>{class o{constructor(n,a,l){this._googleMap=n,this._elementRef=a,this._ngZone=l,this._eventManager=new se(this._ngZone),this._options=new ye.X({}),this._position=new ye.X(void 0),this._destroy=new st.xQ,this.closeclick=this._eventManager.getLazyEmitter("closeclick"),this.contentChanged=this._eventManager.getLazyEmitter("content_changed"),this.domready=this._eventManager.getLazyEmitter("domready"),this.positionChanged=this._eventManager.getLazyEmitter("position_changed"),this.zindexChanged=this._eventManager.getLazyEmitter("zindex_changed")}set options(n){this._options.next(n||{})}set position(n){this._position.next(n)}ngOnInit(){this._googleMap._isBrowser&&(this._combineOptions().pipe((0,yt.q)(1)).subscribe(a=>{this._ngZone.runOutsideAngular(()=>{this.infoWindow=new google.maps.InfoWindow(a)}),this._eventManager.setTarget(this.infoWindow)}),this._watchForOptionsChanges(),this._watchForPositionChanges())}ngOnDestroy(){this._eventManager.destroy(),this._destroy.next(),this._destroy.complete(),this.infoWindow&&this.close()}close(){this._assertInitialized(),this.infoWindow.close()}getContent(){return this._assertInitialized(),this.infoWindow.getContent()||null}getPosition(){return this._assertInitialized(),this.infoWindow.getPosition()||null}getZIndex(){return this._assertInitialized(),this.infoWindow.getZIndex()}open(n,a){this._assertInitialized();const l=n?n.getAnchor():void 0;(this.infoWindow.get("anchor")!==l||!l)&&(this._elementRef.nativeElement.style.display="",this.infoWindow.open({map:this._googleMap.googleMap,anchor:l,shouldFocus:a}))}_combineOptions(){return(0,lt.aj)([this._options,this._position]).pipe((0,Ie.U)(([n,a])=>({...n,position:a||n.position,content:this._elementRef.nativeElement})))}_watchForOptionsChanges(){this._options.pipe((0,oe.R)(this._destroy)).subscribe(n=>{this._assertInitialized(),this.infoWindow.setOptions(n)})}_watchForPositionChanges(){this._position.pipe((0,oe.R)(this._destroy)).subscribe(n=>{n&&(this._assertInitialized(),this.infoWindow.setPosition(n))})}_assertInitialized(){}}return o.\u0275fac=function(n){return new(n||o)(e.\u0275\u0275directiveInject(ie),e.\u0275\u0275directiveInject(e.ElementRef),e.\u0275\u0275directiveInject(e.NgZone))},o.\u0275dir=e.\u0275\u0275defineDirective({type:o,selectors:[["map-info-window"]],hostAttrs:[2,"display","none"],inputs:{options:"options",position:"position"},outputs:{closeclick:"closeclick",contentChanged:"contentChanged",domready:"domready",positionChanged:"positionChanged",zindexChanged:"zindexChanged"},exportAs:["mapInfoWindow"]}),o})();const Ki={position:{lat:37.421995,lng:-122.084092}};let zn=(()=>{class o{constructor(n,a){this._googleMap=n,this._ngZone=a,this._eventManager=new se(this._ngZone),this.animationChanged=this._eventManager.getLazyEmitter("animation_changed"),this.mapClick=this._eventManager.getLazyEmitter("click"),this.clickableChanged=this._eventManager.getLazyEmitter("clickable_changed"),this.cursorChanged=this._eventManager.getLazyEmitter("cursor_changed"),this.mapDblclick=this._eventManager.getLazyEmitter("dblclick"),this.mapDrag=this._eventManager.getLazyEmitter("drag"),this.mapDragend=this._eventManager.getLazyEmitter("dragend"),this.draggableChanged=this._eventManager.getLazyEmitter("draggable_changed"),this.mapDragstart=this._eventManager.getLazyEmitter("dragstart"),this.flatChanged=this._eventManager.getLazyEmitter("flat_changed"),this.iconChanged=this._eventManager.getLazyEmitter("icon_changed"),this.mapMousedown=this._eventManager.getLazyEmitter("mousedown"),this.mapMouseout=this._eventManager.getLazyEmitter("mouseout"),this.mapMouseover=this._eventManager.getLazyEmitter("mouseover"),this.mapMouseup=this._eventManager.getLazyEmitter("mouseup"),this.positionChanged=this._eventManager.getLazyEmitter("position_changed"),this.mapRightclick=this._eventManager.getLazyEmitter("rightclick"),this.shapeChanged=this._eventManager.getLazyEmitter("shape_changed"),this.titleChanged=this._eventManager.getLazyEmitter("title_changed"),this.visibleChanged=this._eventManager.getLazyEmitter("visible_changed"),this.zindexChanged=this._eventManager.getLazyEmitter("zindex_changed")}set title(n){this._title=n}set position(n){this._position=n}set label(n){this._label=n}set clickable(n){this._clickable=n}set options(n){this._options=n}set icon(n){this._icon=n}set visible(n){this._visible=n}ngOnInit(){this._googleMap._isBrowser&&(this._ngZone.runOutsideAngular(()=>{this.marker=new google.maps.Marker(this._combineOptions())}),this._assertInitialized(),this.marker.setMap(this._googleMap.googleMap),this._eventManager.setTarget(this.marker))}ngOnChanges(n){const{marker:a,_title:l,_position:u,_label:h,_clickable:b,_icon:M,_visible:O}=this;a&&(n.options&&a.setOptions(this._combineOptions()),n.title&&void 0!==l&&a.setTitle(l),n.position&&u&&a.setPosition(u),n.label&&void 0!==h&&a.setLabel(h),n.clickable&&void 0!==b&&a.setClickable(b),n.icon&&M&&a.setIcon(M),n.visible&&void 0!==O&&a.setVisible(O))}ngOnDestroy(){this._eventManager.destroy(),this.marker&&this.marker.setMap(null)}getAnimation(){return this._assertInitialized(),this.marker.getAnimation()||null}getClickable(){return this._assertInitialized(),this.marker.getClickable()}getCursor(){return this._assertInitialized(),this.marker.getCursor()||null}getDraggable(){return this._assertInitialized(),!!this.marker.getDraggable()}getIcon(){return this._assertInitialized(),this.marker.getIcon()||null}getLabel(){return this._assertInitialized(),this.marker.getLabel()||null}getOpacity(){return this._assertInitialized(),this.marker.getOpacity()||null}getPosition(){return this._assertInitialized(),this.marker.getPosition()||null}getShape(){return this._assertInitialized(),this.marker.getShape()||null}getTitle(){return this._assertInitialized(),this.marker.getTitle()||null}getVisible(){return this._assertInitialized(),this.marker.getVisible()}getZIndex(){return this._assertInitialized(),this.marker.getZIndex()||null}getAnchor(){return this._assertInitialized(),this.marker}_combineOptions(){const n=this._options||Ki;return{...n,title:this._title||n.title,position:this._position||n.position,label:this._label||n.label,clickable:this._clickable??n.clickable,map:this._googleMap.googleMap,icon:this._icon||n.icon,visible:this._visible??n.visible}}_assertInitialized(){}}return o.\u0275fac=function(n){return new(n||o)(e.\u0275\u0275directiveInject(ie),e.\u0275\u0275directiveInject(e.NgZone))},o.\u0275dir=e.\u0275\u0275defineDirective({type:o,selectors:[["map-marker"]],inputs:{title:"title",position:"position",label:"label",clickable:"clickable",options:"options",icon:"icon",visible:"visible"},outputs:{animationChanged:"animationChanged",mapClick:"mapClick",clickableChanged:"clickableChanged",cursorChanged:"cursorChanged",mapDblclick:"mapDblclick",mapDrag:"mapDrag",mapDragend:"mapDragend",draggableChanged:"draggableChanged",mapDragstart:"mapDragstart",flatChanged:"flatChanged",iconChanged:"iconChanged",mapMousedown:"mapMousedown",mapMouseout:"mapMouseout",mapMouseover:"mapMouseover",mapMouseup:"mapMouseup",positionChanged:"positionChanged",mapRightclick:"mapRightclick",shapeChanged:"shapeChanged",titleChanged:"titleChanged",visibleChanged:"visibleChanged",zindexChanged:"zindexChanged"},exportAs:["mapMarker"],features:[e.\u0275\u0275NgOnChangesFeature]}),o})(),Nn=(()=>{class o{}return o.\u0275fac=function(n){return new(n||o)},o.\u0275mod=e.\u0275\u0275defineNgModule({type:o}),o.\u0275inj=e.\u0275\u0275defineInjector({}),o})();var de=k(65938),Ta=k(7206),ct=k.n(Ta),Rt=k(80529),Cn=k(92340);let we=(()=>{class o{constructor(n){this.http=n,this.mainUrl=Cn.N.apiUrl,this.userSession=JSON.parse(sessionStorage.getItem("user")??""),this.companyName=sessionStorage.getItem("companyName")?sessionStorage.getItem("companyName"):null,this.httpOptions={headers:new Rt.WM({"content-Type":"application/json",Authorization:JSON.parse(JSON.stringify(sessionStorage.getItem("token")||""))})}}getMastertable(n,a,l,u,h){return this.companyName=sessionStorage.getItem("companyName")?sessionStorage.getItem("companyName"):null,this.http.get(this.mainUrl+"api/getMastertable/"+n+"/"+a+"/"+l+"/"+u+"/"+this.companyName,this.httpOptions)}getCrmActivityStatusValues(){return this.companyName=sessionStorage.getItem("companyName")?sessionStorage.getItem("companyName"):null,this.http.get(this.mainUrl+"api/getCrmActivityStatusValues/"+this.companyName,this.httpOptions)}getCrmActivityStatusValuesMaster(n,a){return this.companyName=sessionStorage.getItem("companyName")?sessionStorage.getItem("companyName"):null,this.http.get(this.mainUrl+"api/getCrmActivityStatusValuesMaster/"+n+"/"+a+"/"+this.companyName,this.httpOptions)}getCrmClientStatusValuesMaster(n,a){return this.companyName=sessionStorage.getItem("companyName")?sessionStorage.getItem("companyName"):null,this.http.get(this.mainUrl+"api/getCrmClientStatusValuesMaster/"+n+"/"+a+"/"+this.companyName,this.httpOptions)}setCrmActivityStatusValues(n){return n.companyName=sessionStorage.getItem("companyName")?sessionStorage.getItem("companyName"):null,this.http.post(this.mainUrl+"api/setCrmActivityStatusValues",n,this.httpOptions)}deleteCrmActivityStatusValue(n){return this.http.delete(this.mainUrl+"api/deleteCrmActivityStatusValue/"+n.demoStatusId+"/"+n.empid+"/"+this.companyName,this.httpOptions)}getCrmClientStatusValues(){return this.companyName=sessionStorage.getItem("companyName")?sessionStorage.getItem("companyName"):null,this.http.get(this.mainUrl+"api/getCrmClientStatusValues/"+this.companyName,this.httpOptions)}setCrmClientStatusValues(n){return n.companyName=sessionStorage.getItem("companyName")?sessionStorage.getItem("companyName"):null,this.http.post(this.mainUrl+"api/setCrmClientStatusValues",n,this.httpOptions)}setCrmClientReportColumnConfiguration(n){return n.companyName=sessionStorage.getItem("companyName")?sessionStorage.getItem("companyName"):null,this.http.post(this.mainUrl+"api/setCrmClientReportColumnConfiguration",n,this.httpOptions)}deleteCrmClientStatusValues(n){return this.http.delete(this.mainUrl+"api/deleteCrmClientStatusValues/"+n.statusId+"/"+n.empid+"/"+this.companyName,this.httpOptions)}getCountry(n,a,l){return this.companyName=sessionStorage.getItem("companyName")?sessionStorage.getItem("companyName"):null,this.http.get(this.mainUrl+"api/getMastertable/countrymaster/"+n+"/"+a+"/"+l+"/"+this.companyName,this.httpOptions)}setCrmClientInformation(n){return n.companyName=sessionStorage.getItem("companyName")?sessionStorage.getItem("companyName"):null,this.http.post(this.mainUrl+"api/setCrmClientInformation",n,this.httpOptions)}setCrmActivityDataWithTracking(n){return n.companyName=sessionStorage.getItem("companyName")?sessionStorage.getItem("companyName"):null,this.http.post(this.mainUrl+"api/setCrmActivityDataWithTracking",n,this.httpOptions)}setCrmEmployeeAttendanceRegularization(n){return n.companyName=this.companyName,this.http.post(this.mainUrl+"api/setCrmEmployeeAttendanceRegularization",JSON.stringify(n),this.httpOptions)}getCrmAttendanceTrackingDetails(n){return n.companyName=this.companyName,this.http.get(this.mainUrl+"api/getCrmAttendanceTrackingDetails/"+JSON.stringify(n),this.httpOptions)}getCrmClientFilteredList(n){return n.companyName=this.companyName,this.http.get(this.mainUrl+"api/getCrmClientFilteredList/"+JSON.stringify(n),this.httpOptions)}getClientFilteredListLatest(n){return n.companyName=this.companyName,this.http.get(this.mainUrl+"api/getClientFilteredListLatest/"+JSON.stringify(n),this.httpOptions)}getCrmClientDataBySelection(n){return n.companyName=this.companyName,this.http.get(this.mainUrl+"api/getCrmClientDataBySelection/"+JSON.stringify(n),this.httpOptions)}getCrmAllEmployeesCurrentLocations(n){return n.companyName=this.companyName,this.http.get(this.mainUrl+"api/getCrmAllEmployeesCurrentLocations/"+JSON.stringify(n),this.httpOptions)}getCrmSelectedEmployeeTrackLocations(n){return n.companyName=this.companyName,this.http.get(this.mainUrl+"api/getCrmSelectedEmployeeTrackLocations/"+JSON.stringify(n),this.httpOptions)}setCrmEmployeeAttendance(n){return n.companyName=this.companyName,this.http.post(this.mainUrl+"api/setCrmEmployeeAttendance",JSON.stringify(n),this.httpOptions)}fetchMapLocationDetails(n){let a=null;try{a=this.http.get(`https://geocode.maps.co/reverse?lat=${n.lat}&lon=${n.lng}&api_key=658a778d9ddf1122840694manecee77`)}catch{a=this.http.get(`https://maps.googleapis.com/maps/api/geocode/json?latlng=${n.lat},${n.lng}&key=AIzaSyAww6TxPSzQbg74ljJahxvuLHmRfICHbf4`)}return a}getCrmActivityTypeValues(){return this.companyName=sessionStorage.getItem("companyName")?sessionStorage.getItem("companyName"):null,this.http.get(this.mainUrl+"api/getCrmActivityTypeValues/"+this.companyName,this.httpOptions)}getCrmClientListTypes(n,a){return this.companyName=sessionStorage.getItem("companyName")?sessionStorage.getItem("companyName"):null,this.http.get(this.mainUrl+"api/getCrmClientListTypes/"+n+"/"+a+"/"+this.companyName,this.httpOptions)}setDemoStatus(n){return n.companyName=this.companyName,this.http.post(this.mainUrl+"api/setCrmActivityStatusValues",JSON.stringify(n),this.httpOptions)}getCrmFollowUps(n){return n.companyName=this.companyName,this.http.get(this.mainUrl+"api/getCrmFollowUps/"+JSON.stringify(n),this.httpOptions)}getCrmEmployeesForManagers(n){return n.companyName=this.companyName,this.http.get(this.mainUrl+"api/getCrmEmployeesForManagers/"+JSON.stringify(n),this.httpOptions)}getCrmActivitiesWithTrackingDetails(n){return n.companyName=this.companyName,this.http.get(this.mainUrl+"api/getCrmActivitiesWithTrackingDetails/"+JSON.stringify(n),this.httpOptions)}getCrmClientReportColumnConfigures(n){return n.companyName=this.companyName,this.http.get(this.mainUrl+"api/getCrmClientReportColumnConfigures/"+JSON.stringify(n),this.httpOptions)}getCrmClientSelectedColumnsReport(n){return n.companyName=this.companyName,this.http.post(this.mainUrl+"api/getCrmClientSelectedColumnsReport",n,this.httpOptions)}setCrmFilesMaster(n){return n.companyName=this.companyName,this.http.post(this.mainUrl+"api/setCrmFilesMaster/",n,this.httpOptions)}getFilepathsMaster(n){return this.http.get(this.mainUrl+"api/getFilepathsMaster/"+n+"/"+this.companyName,this.httpOptions)}setCapturedImageForTracking(n){return this.http.post(this.mainUrl+"api/setCapturedImageForTracking/",n)}getCrmFilesMaster(n){return n.companyName=this.companyName,this.http.post(this.mainUrl+"api/getCrmFilesMaster/",n,this.httpOptions)}fetchGoogleMapsApiKey(n){return this.companyName=sessionStorage.getItem("companyName")?sessionStorage.getItem("companyName"):null,this.http.get(this.mainUrl+"api/fetchGoogleMapsApiKey/"+n+"/"+this.companyName,this.httpOptions)}}return o.\u0275fac=function(n){return new(n||o)(e.\u0275\u0275inject(Rt.eN))},o.\u0275prov=e.\u0275\u0275defineInjectable({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var q=k(59549),me=k(44144),G=k(1576);const Oa=["videoElement"];function xn(o,d){if(1&o&&(e.\u0275\u0275elementStart(0,"mat-error",14),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&o){const n=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",n.requiredField," ")}}function qe(o,d){1&o&&(e.\u0275\u0275elementStart(0,"mat-error",14),e.\u0275\u0275text(1," Please enter minimum 10 chars. "),e.\u0275\u0275elementEnd())}function bn(o,d){if(1&o&&(e.\u0275\u0275elementStart(0,"mat-form-field",11)(1,"textarea",12),e.\u0275\u0275text(2,"              "),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(3,xn,2,1,"mat-error",13),e.\u0275\u0275template(4,qe,2,0,"mat-error",13),e.\u0275\u0275elementEnd()),2&o){const n=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",null==n.noteForm.controls.notes.errors?null:n.noteForm.controls.notes.errors.required),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==n.noteForm.controls.notes.errors?null:n.noteForm.controls.notes.errors.minlength)}}function Vn(o,d){if(1&o){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",15),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(n);const l=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(l.capturePhoto())}),e.\u0275\u0275elementStart(1,"mat-label"),e.\u0275\u0275text(2,"Capture Photo"),e.\u0275\u0275elementEnd()()}}function Ra(o,d){if(1&o){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div"),e.\u0275\u0275element(1,"video",3,4),e.\u0275\u0275elementStart(3,"form",5)(4,"div",6)(5,"span"),e.\u0275\u0275template(6,bn,5,2,"mat-form-field",7),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(7,"div",8)(8,"button",9),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(n);const l=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(l.close())}),e.\u0275\u0275elementStart(9,"mat-label"),e.\u0275\u0275text(10,"Close"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(11,Vn,3,0,"button",10),e.\u0275\u0275elementEnd()()()}if(2&o){const n=e.\u0275\u0275nextContext();e.\u0275\u0275advance(3),e.\u0275\u0275property("formGroup",n.noteForm),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",n.notesRequired),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngIf",n.isVedioOpen)}}function wn(o,d){if(1&o){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div")(1,"mat-label"),e.\u0275\u0275text(2,"Camera not available"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"div",16)(4,"button",9),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(n);const l=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(l.close())}),e.\u0275\u0275elementStart(5,"mat-label"),e.\u0275\u0275text(6,"Close"),e.\u0275\u0275elementEnd()()()()}}let Xt=(()=>{class o{constructor(n,a,l,u){this.dialogRef=n,this.crm=a,this.formBuilder=l,this.data=u,this.imageParams=[],this.activities=[],this.requiredField="Please enter Notes.",this.notesRequired=!1,this.isCameraAvailable=!0,this.isVedioOpen=!1}handleEscape(n){this.dialogRef.close()}ngOnInit(){this.assignvalues(),this.noteForm=this.formBuilder.group({notes:["",C.kI.required]}),this.initCamera()}assignvalues(){this.notesRequired=!!this.data&&(this.data.notesRequired??!1)}initCamera(){navigator.mediaDevices.getUserMedia({video:!0}).then(n=>{this.isVedioOpen=!0,this.videoElement.nativeElement.srcObject=n}).catch(n=>{this.isCameraAvailable=!1,console.error("Error accessing webcam:",n)})}close(){this.closeCamera(),this.dialogRef.close({imageData:null,notes:this.notesRequired?this.noteForm.controls.notes.value:null})}capturePhoto(){const n=this.videoElement.nativeElement,a=document.createElement("canvas"),l=a.getContext("2d");a.width=n.videoWidth,a.height=n.videoHeight,l&&l.drawImage(n,0,0,a.width,a.height),this.imageData=a.toDataURL("image/png"),this.imageData&&(!this.notesRequired||this.noteForm.controls.notes.value.toString().length>=10)&&(this.dialogRef.close({imageData:this.imageData,notes:this.notesRequired?this.noteForm.controls.notes.value:""}),n.srcObject.getTracks().forEach(b=>b.stop()),n.srcObject=null)}closeCamera(){this.isCameraAvailable&&this.videoElement&&this.videoElement.nativeElement&&(this.videoElement.nativeElement.srcObject.getTracks().forEach(l=>l.stop()),this.videoElement.nativeElement.srcObject=null)}dataURLtoBlob(n){const a=n.split(","),l=a[0].match(/:(.*?);/);if(l){const u=l[1],h=atob(a[1]);let b=h.length;const M=new Uint8Array(b);for(;b--;)M[b]=h.charCodeAt(b);return new Blob([M],{type:u})}return new Blob}calculateMD5(n){const a=n.split(",")[1],l=ct().enc.Base64.parse(a);return ct().MD5(l).toString(ct().enc.Hex)}backArrow(){this.closeCamera(),this.imageData=null,this.dialogRef.close()}}return o.\u0275fac=function(n){return new(n||o)(e.\u0275\u0275directiveInject(de.so),e.\u0275\u0275directiveInject(we),e.\u0275\u0275directiveInject(C.QS),e.\u0275\u0275directiveInject(de.WI))},o.\u0275cmp=e.\u0275\u0275defineComponent({type:o,selectors:[["app-webcam-modal"]],viewQuery:function(n,a){if(1&n&&e.\u0275\u0275viewQuery(Oa,5),2&n){let l;e.\u0275\u0275queryRefresh(l=e.\u0275\u0275loadQuery())&&(a.videoElement=l.first)}},hostBindings:function(n,a){1&n&&e.\u0275\u0275listener("keydown.escape",function(u){return a.handleEscape(u)},!1,e.\u0275\u0275resolveDocument)},decls:7,vars:2,consts:[["fxLayout","row",1,"clock-attendance",2,"margin-bottom","5px","color","white","align-items","center"],["fxFlex","95","fxLayoutAlign","center",2,"font-weight","bold"],[4,"ngIf"],["autoplay",""],["videoElement",""],["autocomplete","off",3,"formGroup"],["fxLayout","row"],["fxFlex","","appearance","outline",4,"ngIf"],["fxLayout","row","appearance","outline",2,"margin-top","10%","min-width","fit-content","justify-content","center","align-items","center"],["type","submit","placeholder","Close",1,"btn","btn-outline-primary","custom","mr-2","mb-2",2,"min-width","fit-content",3,"click"],["type","submit","class","btn btn-outline-primary custom mr-2 mb-2","placeholder","Capture Photo","style"," min-width: fit-content;",3,"click",4,"ngIf"],["fxFlex","","appearance","outline"],["minlength","10","rows","4","cols","40","formControlName","notes","matInput","","placeholder","Notes..","maxlength","250","required","notesRequired"],["class","con-error",4,"ngIf"],[1,"con-error"],["type","submit","placeholder","Capture Photo",1,"btn","btn-outline-primary","custom","mr-2","mb-2",2,"min-width","fit-content",3,"click"],["fxLayout","row","appearance","outline",2,"margin-top","10%","min-width","fit-content","align-self","center"]],template:function(n,a){1&n&&(e.\u0275\u0275elementStart(0,"div",0)(1,"div",1)(2,"mat-label"),e.\u0275\u0275text(3," Snap a Photo "),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(4,"div"),e.\u0275\u0275template(5,Ra,12,3,"div",2),e.\u0275\u0275template(6,wn,7,0,"div",2),e.\u0275\u0275elementEnd()),2&n&&(e.\u0275\u0275advance(5),e.\u0275\u0275property("ngIf",a.isCameraAvailable),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!a.isCameraAvailable))},dependencies:[N.O5,q.TO,q.KE,q.hX,me.Nt,C._Y,C.Fj,C.JJ,C.JL,C.Q7,C.wO,C.nD,C.sg,C.u,G.xw,G.Wh,G.yH],styles:["div[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}video[_ngcontent-%COMP%]{max-width:100%;max-height:100%;object-fit:cover}.clock-attendance[_ngcontent-%COMP%]{padding-right:1px;padding-left:1px;background-color:#28acaf}.map-container[_ngcontent-%COMP%]{max-width:100%;max-height:200px;overflow:hidden;padding:0;margin:0}.headerbox1[_ngcontent-%COMP%]{padding:1px;background-color:#28acaf}"]}),o})();var le=k(1015),et=k(86405),zt=k(21784),en=k(58998),ve=k(3238),tt=k(97392),Pt=k(84385),Ct=k(55829);const Ci=["videoElement"],xi=["canvasElement"];function bi(o,d){1&o&&(e.\u0275\u0275elementStart(0,"mat-error",41),e.\u0275\u0275text(1," Please enter organization. "),e.\u0275\u0275elementEnd())}function za(o,d){if(1&o){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"i",42),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(n);const l=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(l.openWebcamModal())}),e.\u0275\u0275text(1," camera_alt "),e.\u0275\u0275elementEnd()}}function Pa(o,d){1&o&&(e.\u0275\u0275elementStart(0,"mat-label",43),e.\u0275\u0275text(1,"Image Uploaded"),e.\u0275\u0275elementEnd())}function Na(o,d){1&o&&(e.\u0275\u0275elementStart(0,"mat-error",41),e.\u0275\u0275text(1," Please enter person name. "),e.\u0275\u0275elementEnd())}function Xi(o,d){1&o&&(e.\u0275\u0275elementStart(0,"mat-error",41),e.\u0275\u0275text(1," Please enter contact number. "),e.\u0275\u0275elementEnd())}function er(o,d){1&o&&(e.\u0275\u0275elementStart(0,"mat-error",41),e.\u0275\u0275text(1," Enter valid contact number. "),e.\u0275\u0275elementEnd())}function Ua(o,d){1&o&&(e.\u0275\u0275elementStart(0,"mat-error",44),e.\u0275\u0275text(1," Please enter valid email address. "),e.\u0275\u0275elementEnd())}function Va(o,d){1&o&&(e.\u0275\u0275elementStart(0,"mat-error",44),e.\u0275\u0275text(1," Please enter email address. "),e.\u0275\u0275elementEnd())}function Ba(o,d){if(1&o&&(e.\u0275\u0275elementStart(0,"div")(1,"mat-option",45),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd()()),2&o){const n=d.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275property("value",n.id),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(n.country)}}function Wa(o,d){1&o&&(e.\u0275\u0275elementStart(0,"mat-error",41),e.\u0275\u0275text(1," Please select country . "),e.\u0275\u0275elementEnd())}function tr(o,d){1&o&&(e.\u0275\u0275elementStart(0,"mat-error",41),e.\u0275\u0275text(1," Please enter address. "),e.\u0275\u0275elementEnd())}function Za(o,d){if(1&o&&(e.\u0275\u0275elementStart(0,"div")(1,"mat-option",45),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd()()),2&o){const n=d.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275property("value",n.id),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(n.state)}}function qa(o,d){1&o&&(e.\u0275\u0275elementStart(0,"mat-error",41),e.\u0275\u0275text(1," Please select state. "),e.\u0275\u0275elementEnd())}function Ga(o,d){if(1&o&&(e.\u0275\u0275elementStart(0,"div")(1,"mat-option",45),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd()()),2&o){const n=d.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275property("value",n.id),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(n.location)}}function wi(o,d){1&o&&(e.\u0275\u0275elementStart(0,"mat-error",41),e.\u0275\u0275text(1," Please select city. "),e.\u0275\u0275elementEnd())}function $a(o,d){1&o&&(e.\u0275\u0275elementStart(0,"mat-error",41),e.\u0275\u0275text(1," Please enter pincode. "),e.\u0275\u0275elementEnd())}function Si(o,d){1&o&&(e.\u0275\u0275elementStart(0,"mat-error",41),e.\u0275\u0275text(1," This field length should be 6 digits. "),e.\u0275\u0275elementEnd())}function Ha(o,d){1&o&&(e.\u0275\u0275elementStart(0,"mat-error",41),e.\u0275\u0275text(1," Please enter description. "),e.\u0275\u0275elementEnd())}function Qa(o,d){1&o&&(e.\u0275\u0275elementStart(0,"mat-error",41),e.\u0275\u0275text(1," Please enter latitude. "),e.\u0275\u0275elementEnd())}function Ya(o,d){1&o&&(e.\u0275\u0275elementStart(0,"mat-error",44),e.\u0275\u0275text(1," Please enter longitude. "),e.\u0275\u0275elementEnd())}const Ja=function(o){return{color:o}};let Ii=(()=>{class o{constructor(n,a,l,u,h,b,M,O,A){this.locale=n,this.dialogRef=a,this.crm=l,this.spinner=u,this.FormBuilder=h,this.company=b,this.dialog=M,this.LMS=O,this.data=A,this.stateDetails=[],this.cityDetails=[],this.imageDataUrl={imageData:null,notes:null},this.predictions=[],this.downloadCapture=!0,this.stopCamera=!0,this.pageTitle="Add Client",this.location_icon_val="location_on",this.center={lat:0,lng:0},this.markerPositions=[],this.mapOptions={width:"100%",height:"30%",center:this.center,zoom:4},this.zoom=4}ngOnInit(){this.getCountry(),this.getClientLocationFromMap(),this.pipe=new N.uU(this.locale),this.currentDate=new Date,this.formattedDate=this.pipe.transform(this.currentDate,"yyyy-MM-dd"),this.formattedTime=this.currentDate.toLocaleTimeString(void 0,{hour12:!1,hour:"2-digit",minute:"2-digit",second:"2-digit"}),this.timeStampVal=this.currentDate.getTime(),this.userSession=JSON.parse(sessionStorage.getItem("user")??""),this.companyForm=this.FormBuilder.group({companyname:["",C.kI.required],contact_person_name:["",C.kI.required],contact:["",[C.kI.required]],email:["",[C.kI.required,C.kI.email,C.kI.pattern("^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,4}$")]],address1:["",C.kI.required],address2:[""],city:["",C.kI.required],state:["",C.kI.required],pincode:["",C.kI.required],country:["",C.kI.required],notes:["",C.kI.required],latitude:[""],longitude:[""]}),this.companyForm.get("country")?.valueChanges.subscribe(n=>{this.stateDetails=[],this.company.getStatesc(n).subscribe(a=>{this.stateDetails=a.data})}),this.companyForm.get("state")?.valueChanges.subscribe(n=>{this.companyForm.controls.city.setValue(""),this.cityDetails=[],this.company.getCities(n).subscribe(a=>{this.cityDetails=a.data})}),navigator.geolocation.getCurrentPosition(n=>{this.center={lat:n.coords.latitude,lng:n.coords.longitude},this.companyForm.controls.latitude.setValue(n.coords.latitude),this.companyForm.controls.longitude.setValue(n.coords.longitude),this.markerPositions.push({lat:n.coords.latitude,lng:n.coords.longitude,description:"current place"})},n=>console.log(n))}alphabetKeyPress(n){let l=String.fromCharCode(n.charCode);8!=n.keyCode&&!/[a-zA-Z ]/.test(l)&&n.preventDefault()}numberOnly(n){const a=n.which?n.which:n.keyCode;return 46==a||!(a>31&&(a<48||a>57))}openInfo(n,a){this.infoContent=a,this.infoWindow&&this.infoWindow.open(n)}_keyPress(n){let l=String.fromCharCode(n.charCode);/[0-9]/.test(l)||n.preventDefault()}noWhitespaceValidator(){return n=>0===(n.value||"").trim().length?{whitespace:!0}:null}addMarker(n){null!=n.latLng&&this.markerPositions.push(n.latLng.toJSON())}openInfoWindow(n){null!=this.infoWindow&&this.infoWindow.open(n)}openWebcamModal(){var n=this;return(0,ae.Z)(function*(){n.imageDataUrl={imageData:null,notes:null},yield n.dialog.open(Xt,{width:"350px",disableClose:!1}).afterClosed().subscribe(l=>{n.imageDataUrl=l})})()}getClientLocationFromMap(){navigator.geolocation.getCurrentPosition(n=>{this.selected_location={lat:n.coords.latitude,lng:n.coords.longitude},this.companyForm.controls.latitude.setValue(n.coords.latitude),this.companyForm.controls.longitude.setValue(n.coords.longitude),this.markerPositions.push({lat:n.coords.latitude,lng:n.coords.longitude,description:"current place"})},n=>console.log(n)),this.selected_location&&this.selected_location.lat&&this.selected_location.lng||(this.selected_location=this.center)}companyFormReset(){this.companyForm.reset(),this.companyForm.get("companyname").reset(),this.companyForm.get("companyname").setErrors(null),this.companyForm.get("contact_person_name").reset(),this.companyForm.get("contact_person_name").setErrors(null),this.companyForm.get("contact").reset(),this.companyForm.get("contact").setErrors(null),this.companyForm.get("email").reset(),this.companyForm.get("email").setErrors(null),this.companyForm.get("address1").reset(),this.companyForm.get("address1").setErrors(null),this.companyForm.get("address2").reset(),this.companyForm.get("address2").setErrors(null),this.companyForm.get("country").reset(),this.companyForm.get("country").setErrors(null),this.companyForm.get("state").reset(),this.companyForm.get("state").setErrors(null),this.companyForm.get("city").reset(),this.companyForm.get("city").setErrors(null),this.companyForm.get("pincode").reset(),this.companyForm.get("pincode").setErrors(null),this.companyForm.get("latitude").reset(),this.companyForm.get("latitude").setErrors(null),this.companyForm.get("longitude").reset(),this.companyForm.get("longitude").setErrors(null),this.companyForm.get("notes").reset(),this.companyForm.get("notes").setErrors(null)}saveNewClient(){if(!this.companyForm.valid)return;let n={client_id:0,companyname:this.companyForm.controls.companyname.value,contact_person_name:this.companyForm.controls.contact_person_name.value,contact:this.companyForm.controls.contact.value,email:this.companyForm.controls.email.value.toLowerCase(),address1:this.companyForm.controls.address1.value,address2:this.companyForm.controls.address2.value?this.companyForm.controls.address2.value:"",country:this.companyForm.controls.country.value,state:this.companyForm.controls.state.value,city:this.companyForm.controls.city.value,pincode:this.companyForm.controls.pincode.value,createdby:this.userSession.id,latitude:this.companyForm.controls.latitude.value,longitude:this.companyForm.controls.longitude.value,notes:this.companyForm.controls.notes.value,created_date:this.pipe.transform(new Date,"yyyy-MM-dd hh:mm:ss"),is_captured:this.imageDataUrl&&this.imageDataUrl.imageData?1:0},a="Data not saved.";this.crm.setCrmClientInformation(n).subscribe(l=>{if(l&&l.status){this.companyFormReset();let h=l.data[0].client_id;a="Data saved successfully",this.imageDataUrl.imageData?this.crm.getFilepathsMaster(12).subscribe(b=>{if(b&&b.status){let M={id:null,employeeId:this.userSession.id,filecategory:"CRM_CLIENT",moduleId:12,documentnumber:"",fileName:n.companyname.toString().replace(" ","")+this.formattedDate+"-"+this.timeStampVal+".png",modulecode:b.data[0].module_code,requestId:h??0,status:"Submitted"};this.crm.setCrmFilesMaster(M).subscribe(O=>{if(O&&O.status){const A=new FormData,H=this.imageDataUrl.imageData?this.dataURLtoBlob(this.imageDataUrl.imageData):null;H?(A.append("info",JSON.stringify(O.data[0])),A.append("file",H,O.data[0].filename),this.crm.setCapturedImageForTracking(A).subscribe(ee=>{this.spinner.hide(),ee&&ee.status?(this.backArrow(),this.imageDataUrl={imageData:null,notes:null},a+="- uploaded."):a+="- not uploaded."})):a+="- image capture failed."}else a+="- image capture failed."})}else a+="- image capture failed."}):this.backArrow()}else this.dialog.open(le.B,{position:{top:"70px"},disableClose:!0,data:a});this.dialog.open(le.B,{position:{top:"70px"},disableClose:!0,data:a})})}getCountry(){this.crm.getCountry(null,1,10).subscribe(n=>{this.CountryDetails=n.data})}dataURLtoBlob(n){const a=n.split(","),l=a[0].match(/:(.*?);/);if(l){const u=l[1],h=atob(a[1]);let b=h.length;const M=new Uint8Array(b);for(;b--;)M[b]=h.charCodeAt(b);return new Blob([M],{type:u})}return new Blob}backArrow(){this.imageDataUrl={imageData:null,notes:null},this.dialogRef.close()}clearNewClient(){this.imageDataUrl={imageData:null,notes:null},this.companyForm.reset(),this.getClientLocationFromMap()}onAutocompleteSelected(n){console.log(n)}onInputChange(){this.address?(new google.maps.places.AutocompleteService).getPlacePredictions({input:this.address},(a,l)=>{this.zone.run(()=>{this.predictions=l===google.maps.places.PlacesServiceStatus.OK&&a||[]})}):this.predictions=[]}getLocationIconColor(){return Number(this.companyForm.controls.latitude.value)&&Number(this.companyForm.controls.longitude.value)?(this.location_icon_val="location_on","green"):(this.location_icon_val="location_off","red")}showSpinner(){this.spinner.show(),setTimeout(()=>{this.spinner.hide()},5e3)}}return o.\u0275fac=function(n){return new(n||o)(e.\u0275\u0275directiveInject(e.LOCALE_ID),e.\u0275\u0275directiveInject(de.so),e.\u0275\u0275directiveInject(we),e.\u0275\u0275directiveInject(et.t2),e.\u0275\u0275directiveInject(C.QS),e.\u0275\u0275directiveInject(zt.D),e.\u0275\u0275directiveInject(de.uw),e.\u0275\u0275directiveInject(en.t),e.\u0275\u0275directiveInject(de.WI))},o.\u0275cmp=e.\u0275\u0275defineComponent({type:o,selectors:[["app-crm-add-client"]],viewQuery:function(n,a){if(1&n&&(e.\u0275\u0275viewQuery(Ci,5),e.\u0275\u0275viewQuery(xi,5),e.\u0275\u0275viewQuery(Tt,5)),2&n){let l;e.\u0275\u0275queryRefresh(l=e.\u0275\u0275loadQuery())&&(a.videoElement=l.first),e.\u0275\u0275queryRefresh(l=e.\u0275\u0275loadQuery())&&(a.canvasElement=l.first),e.\u0275\u0275queryRefresh(l=e.\u0275\u0275loadQuery())&&(a.infoWindow=l.first)}},decls:104,vars:28,consts:[["fxLayout","column","fxFlex","","fxLayoutAlign","start stretch",2,"padding","0%","margin","auto"],["fxLayout","row",1,"clock-attendance",2,"margin-bottom","5px","color","white","align-items","center"],["fxFlex","5","fxLayoutAlign","start"],["type","button",1,"btn",2,"background-color","unset","color","white","text-align-last","start",3,"click"],["title","Back",2,"font-weight","bold"],["fxFlex","95","fxLayoutAlign","center",2,"font-weight","bold"],["autocomplete","off",3,"formGroup"],["fxLayout","row","fxFlex",""],["fxLayout","column","fxFlex",""],["fxLayout","row"],["fxFlex","95%",2,"padding-right","1%"],["formControlName","companyname","matInput","","placeholder","","required","",3,"keypress"],["class","con-error",4,"ngIf"],["type","button",1,"btn",2,"background-color","unset"],["class","material-icons",3,"click",4,"ngIf"],["style","font-variant: all-petite-caps; min-inline-size: fit-content;",4,"ngIf"],["fxFlex","20%",2,"padding-right","1%"],["formControlName","contact_person_name","matInput","","placeholder","","required","",3,"keypress"],["formControlName","contact","matInput","","placeholder","","required","","minlength","10","maxlength","10",3,"keypress"],["fxFlex","35%",2,"padding-right","1%"],["type","email","formControlName","email","matInput","","placeholder","","required",""],["class","reg-error",4,"ngIf"],["fxFlex","25%",2,"padding-right","1%"],["formControlName","country","required",""],[4,"ngFor","ngForOf"],["fxFlex","75%",2,"padding-right","1%"],["formControlName","address1","matInput","","placeholder","","required",""],["required","","formControlName","state"],["fxFlex","50%",2,"padding-right","1%"],["formControlName","address2","matInput","","placeholder",""],["required","","formControlName","city"],["type","text","onlyNumber","","formControlName","pincode","matInput","","placeholder","","minlength","6","maxlength","6","required","",3,"keypress"],["fxFlex","60%",2,"padding-right","1%"],["formControlName","notes","matInput","","placeholder","","required","",3,"keypress"],["fxFlex","17%",2,"padding-right","1%"],["formControlName","latitude","matInput","","placeholder","",3,"keypress"],["formControlName","longitude","matInput","","placeholder","",3,"keypress"],[1,"material-icons",3,"ngStyle"],["fxLayout","row","flexLayoutAlign","center",2,"align-self","center"],["type","submit",1,"btn","btn-primary","mr-2","mb-2",3,"tabIndex","click"],["type","reset",1,"btn","btn-danger","mr-2","mb-2",3,"tabIndex","click"],[1,"con-error"],[1,"material-icons",3,"click"],[2,"font-variant","all-petite-caps","min-inline-size","fit-content"],[1,"reg-error"],[3,"value"]],template:function(n,a){1&n&&(e.\u0275\u0275elementStart(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),e.\u0275\u0275listener("click",function(){return a.backArrow()}),e.\u0275\u0275elementStart(4,"mat-icon",4),e.\u0275\u0275text(5,"arrow_back"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(6,"div",5)(7,"mat-label"),e.\u0275\u0275text(8),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(9,"form",6)(10,"div")(11,"div",7)(12,"div",8)(13,"div",9)(14,"mat-form-field",10)(15,"mat-label"),e.\u0275\u0275text(16,"Organization"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(17,"input",11),e.\u0275\u0275listener("keypress",function(u){return a.alphabetKeyPress(u)}),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(18,bi,2,0,"mat-error",12),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(19,"button",13),e.\u0275\u0275template(20,za,2,0,"i",14),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(21,Pa,2,0,"mat-label",15),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(22,"div",9)(23,"mat-form-field",16)(24,"mat-label"),e.\u0275\u0275text(25,"Contact Person"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(26,"input",17),e.\u0275\u0275listener("keypress",function(u){return a.alphabetKeyPress(u)}),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(27,Na,2,0,"mat-error",12),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(28,"mat-form-field",16)(29,"mat-label"),e.\u0275\u0275text(30,"Contact Number"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(31,"input",18),e.\u0275\u0275listener("keypress",function(u){return a.numberOnly(u)}),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(32,Xi,2,0,"mat-error",12),e.\u0275\u0275template(33,er,2,0,"mat-error",12),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(34,"mat-form-field",19)(35,"mat-label"),e.\u0275\u0275text(36,"Email"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(37,"input",20),e.\u0275\u0275template(38,Ua,2,0,"mat-error",21),e.\u0275\u0275template(39,Va,2,0,"mat-error",21),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(40,"mat-form-field",22)(41,"mat-label"),e.\u0275\u0275text(42,"Country "),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(43,"mat-select",23),e.\u0275\u0275elementContainerStart(44),e.\u0275\u0275template(45,Ba,3,2,"div",24),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(46,Wa,2,0,"mat-error",12),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(47,"div",9)(48,"mat-form-field",25)(49,"mat-label"),e.\u0275\u0275text(50,"Address1"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(51,"input",26),e.\u0275\u0275template(52,tr,2,0,"mat-error",12),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(53,"mat-form-field",22)(54,"mat-label"),e.\u0275\u0275text(55,"State"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(56,"mat-select",27),e.\u0275\u0275elementContainerStart(57),e.\u0275\u0275template(58,Za,3,2,"div",24),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(59,qa,2,0,"mat-error",12),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(60,"div",9)(61,"mat-form-field",28)(62,"mat-label"),e.\u0275\u0275text(63,"Address2"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(64,"input",29),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(65,"mat-form-field",22)(66,"mat-label"),e.\u0275\u0275text(67,"City"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(68,"mat-select",30),e.\u0275\u0275elementContainerStart(69),e.\u0275\u0275template(70,Ga,3,2,"div",24),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(71,wi,2,0,"mat-error",12),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(72,"mat-form-field",22)(73,"mat-label"),e.\u0275\u0275text(74,"Pincode"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(75,"input",31),e.\u0275\u0275listener("keypress",function(u){return a.numberOnly(u)}),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(76,$a,2,0,"mat-error",12),e.\u0275\u0275template(77,Si,2,0,"mat-error",12),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(78,"div",9)(79,"mat-form-field",32)(80,"mat-label"),e.\u0275\u0275text(81,"Description"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(82,"input",33),e.\u0275\u0275listener("keypress",function(u){return a.alphabetKeyPress(u)}),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(83,Ha,2,0,"mat-error",12),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(84,"mat-form-field",34)(85,"mat-label"),e.\u0275\u0275text(86,"Latitude"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(87,"input",35),e.\u0275\u0275listener("keypress",function(u){return a.numberOnly(u)}),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(88,Qa,2,0,"mat-error",12),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(89,"mat-form-field",34)(90,"mat-label"),e.\u0275\u0275text(91,"Longitude"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(92,"input",36),e.\u0275\u0275listener("keypress",function(u){return a.numberOnly(u)}),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(93,Ya,2,0,"mat-error",21),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(94,"button",13)(95,"i",37),e.\u0275\u0275text(96),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(97,"div",38)(98,"button",39),e.\u0275\u0275listener("click",function(){return a.saveNewClient()}),e.\u0275\u0275elementStart(99,"span"),e.\u0275\u0275text(100,"Submit"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(101,"button",40),e.\u0275\u0275listener("click",function(){return a.clearNewClient()}),e.\u0275\u0275elementStart(102,"span"),e.\u0275\u0275text(103,"Clear"),e.\u0275\u0275elementEnd()()()()()()()()),2&n&&(e.\u0275\u0275advance(8),e.\u0275\u0275textInterpolate1(" ",a.pageTitle,""),e.\u0275\u0275advance(1),e.\u0275\u0275property("formGroup",a.companyForm),e.\u0275\u0275advance(9),e.\u0275\u0275property("ngIf",null==a.companyForm.controls.companyname.errors?null:a.companyForm.controls.companyname.errors.required),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",!(a.imageDataUrl&&a.imageDataUrl.imageData)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",a.imageDataUrl&&a.imageDataUrl.imageData),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngIf",null==a.companyForm.controls.contact_person_name.errors?null:a.companyForm.controls.contact_person_name.errors.required),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngIf",null==a.companyForm.controls.contact.errors?null:a.companyForm.controls.contact.errors.required),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==a.companyForm.controls.contact.errors?null:a.companyForm.controls.contact.errors.minlength),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngIf",null==a.companyForm.controls.email.errors?null:a.companyForm.controls.email.errors.pattern),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==a.companyForm.controls.email.errors?null:a.companyForm.controls.email.errors.required),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngForOf",a.CountryDetails),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==a.companyForm.controls.country.errors?null:a.companyForm.controls.country.errors.required),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngIf",null==a.companyForm.controls.address1.errors?null:a.companyForm.controls.address1.errors.required),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngForOf",a.stateDetails),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==a.companyForm.controls.state.errors?null:a.companyForm.controls.state.errors.required),e.\u0275\u0275advance(11),e.\u0275\u0275property("ngForOf",a.cityDetails),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==a.companyForm.controls.city.errors?null:a.companyForm.controls.city.errors.required),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngIf",null==a.companyForm.controls.pincode.errors?null:a.companyForm.controls.pincode.errors.required),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",(null==a.companyForm.controls.pincode.errors?null:a.companyForm.controls.pincode.errors.maxlength)||(null==a.companyForm.controls.pincode.errors?null:a.companyForm.controls.pincode.errors.minlength)),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngIf",null==a.companyForm.controls.notes.errors?null:a.companyForm.controls.notes.errors.required),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngIf",null==a.companyForm.controls.latitude.errors?null:a.companyForm.controls.latitude.errors.required),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngIf",null==a.companyForm.controls.longitude.errors?null:a.companyForm.controls.longitude.errors.pattern),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngStyle",e.\u0275\u0275pureFunction1(26,Ja,a.getLocationIconColor())),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",a.location_icon_val," "),e.\u0275\u0275advance(2),e.\u0275\u0275property("tabIndex",7),e.\u0275\u0275advance(3),e.\u0275\u0275property("tabIndex",7))},dependencies:[N.sg,N.O5,N.PC,ve.ey,tt.Hw,q.TO,q.KE,q.hX,me.Nt,Pt.gD,C._Y,C.Fj,C.JJ,C.JL,C.Q7,C.wO,C.nD,C.sg,C.u,G.xw,G.Wh,G.yH,Ct.Zl],styles:[".clock-attendance[_ngcontent-%COMP%]{padding-right:1px;padding-left:1px;background-color:#28acaf}.map-container[_ngcontent-%COMP%]{max-width:100%;max-height:200px;overflow:hidden;padding:0;margin:0}.headerbox1[_ngcontent-%COMP%]{padding:1px;background-color:#28acaf}"]}),o})();var Bn=k(54456),ja=k(61715),Ei=k(8277),Sn=k(75027);let nr=(()=>{class o{constructor(){this.userSession=JSON.parse(sessionStorage.getItem("user")??""),this.mapInitialized=!1}initMap(){return this.mapInitialized?Promise.resolve():new Promise((n,a)=>{window.initMap=()=>{this.mapInitialized=!0,n()};const l=document.createElement("script");l.src=`https://maps.googleapis.com/maps/api/js?key=${this.userSession.google_map_apikey}&libraries=places&callback=initMap`,l.async=!0,l.defer=!0,l.onload=()=>{this.mapInitialized||a("Failed to initialize the map")},l.onerror=u=>a(u),document.head.appendChild(l)})}}return o.\u0275fac=function(n){return new(n||o)},o.\u0275prov=e.\u0275\u0275defineInjectable({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var Ka=k(62289),ir=k(14362),rr=k(86779),ar=k(11481),Nt=k(4859),ue=k(73546),Wn=k(10266);const Zn=["videoElement"],Xa=["canvasElement"],eo=["calendar"];function to(o,d){if(1&o){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",29),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(n);const l=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(l.setPunchIn())}),e.\u0275\u0275text(1,"Punch In"),e.\u0275\u0275elementEnd()}}function or(o,d){if(1&o&&(e.\u0275\u0275elementStart(0,"p",30),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&o){const n=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" Punch In ",n.punchIn,"")}}function sr(o,d){if(1&o){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",29),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(n);const l=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(l.setPunchOut())}),e.\u0275\u0275text(1,"Punch Out"),e.\u0275\u0275elementEnd()}}function lr(o,d){if(1&o&&(e.\u0275\u0275elementStart(0,"p",30),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&o){const n=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1("Punch Out ",n.punchOut,"")}}function no(o,d){1&o&&(e.\u0275\u0275elementStart(0,"p",30),e.\u0275\u0275text(1," Image Uploaded."),e.\u0275\u0275elementEnd())}function io(o,d){1&o&&(e.\u0275\u0275elementStart(0,"p",30),e.\u0275\u0275text(1," Location tracked."),e.\u0275\u0275elementEnd())}function ro(o,d){if(1&o&&(e.\u0275\u0275elementStart(0,"div",31),e.\u0275\u0275template(1,no,2,0,"p",11),e.\u0275\u0275template(2,io,2,0,"p",11),e.\u0275\u0275elementEnd()),2&o){const n=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.imageDataUrl&&n.imageDataUrl.imageData),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.locationTracked)}}function ao(o,d){if(1&o&&(e.\u0275\u0275elementStart(0,"div")(1,"span",45),e.\u0275\u0275text(2,"Notes:"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"span",43),e.\u0275\u0275text(4),e.\u0275\u0275elementEnd()()),2&o){const n=e.\u0275\u0275nextContext(2).$implicit;e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate1(" ",n.notes,"")}}function cr(o,d){if(1&o&&(e.\u0275\u0275elementStart(0,"div",42)(1,"div")(2,"span"),e.\u0275\u0275text(3,"Created On: "),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"span",43),e.\u0275\u0275text(5),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(6,ao,5,1,"div",44),e.\u0275\u0275elementEnd()),2&o){const n=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate1(" ",n.created_on,""),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.notes)}}const dr=function(o){return{"background-color":o}};function mr(o,d){if(1&o){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div")(1,"div",32)(2,"div",33),e.\u0275\u0275listener("click",function(){const u=e.\u0275\u0275restoreView(n).$implicit,h=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(h.checkClientDetails(u))}),e.\u0275\u0275elementStart(3,"div",34)(4,"span",35),e.\u0275\u0275text(5),e.\u0275\u0275pipe(6,"titlecase"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(7,"br"),e.\u0275\u0275elementStart(8,"span",36),e.\u0275\u0275text(9),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(10,"span",37),e.\u0275\u0275text(11),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(12,"div",34)(13,"span",38),e.\u0275\u0275listener("click",function(l){const h=e.\u0275\u0275restoreView(n).$implicit,b=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(b.selectClient(l,h))}),e.\u0275\u0275elementStart(14,"button",39)(15,"mat-icon",40),e.\u0275\u0275text(16,"keyboard_arrow_right"),e.\u0275\u0275elementEnd()()()()(),e.\u0275\u0275template(17,cr,7,2,"div",41),e.\u0275\u0275elementEnd()()}if(2&o){const n=d.$implicit,a=e.\u0275\u0275nextContext();e.\u0275\u0275advance(2),e.\u0275\u0275property("ngStyle",e.\u0275\u0275pureFunction1(9,dr,a.getbackgroundColor(n))),e.\u0275\u0275advance(1),e.\u0275\u0275property("fxFlex","90%"),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(6,7,n.client_name)),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate1(" ",n.activity_status," "),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",a.getFormattedDateTime(n.next_follow_up_on)," "),e.\u0275\u0275advance(1),e.\u0275\u0275property("fxFlex","10%"),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngIf",n.display)}}function Mi(o,d){1&o&&(e.\u0275\u0275elementStart(0,"mat-error",67),e.\u0275\u0275text(1," Please Enter Organization "),e.\u0275\u0275elementEnd())}function oo(o,d){1&o&&(e.\u0275\u0275elementStart(0,"mat-error",67),e.\u0275\u0275text(1," Please Enter Person Name "),e.\u0275\u0275elementEnd())}function ur(o,d){1&o&&(e.\u0275\u0275elementStart(0,"mat-error",67),e.\u0275\u0275text(1," Please Enter email address "),e.\u0275\u0275elementEnd())}function qn(o,d){1&o&&(e.\u0275\u0275elementStart(0,"mat-error",67),e.\u0275\u0275text(1," Please Enter contact number "),e.\u0275\u0275elementEnd())}function pr(o,d){1&o&&(e.\u0275\u0275elementStart(0,"mat-error",67),e.\u0275\u0275text(1," Please Enter contact number "),e.\u0275\u0275elementEnd())}function so(o,d){if(1&o&&(e.\u0275\u0275elementStart(0,"div")(1,"mat-option",68),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd()()),2&o){const n=d.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275property("value",n.id),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(n.country)}}function hr(o,d){1&o&&(e.\u0275\u0275elementStart(0,"mat-error",67),e.\u0275\u0275text(1," select country name "),e.\u0275\u0275elementEnd())}function fr(o,d){if(1&o&&(e.\u0275\u0275elementStart(0,"div")(1,"mat-option",68),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd()()),2&o){const n=d.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275property("value",n.id),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(n.state)}}function Di(o,d){1&o&&(e.\u0275\u0275elementStart(0,"mat-error",67),e.\u0275\u0275text(1," select state "),e.\u0275\u0275elementEnd())}function lo(o,d){if(1&o&&(e.\u0275\u0275elementStart(0,"div")(1,"mat-option",68),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd()()),2&o){const n=d.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275property("value",n.id),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(n.location)}}function gr(o,d){1&o&&(e.\u0275\u0275elementStart(0,"mat-error",67),e.\u0275\u0275text(1," select location "),e.\u0275\u0275elementEnd())}function ki(o,d){1&o&&(e.\u0275\u0275elementStart(0,"mat-error",67),e.\u0275\u0275text(1," enter pincode "),e.\u0275\u0275elementEnd())}function Fi(o,d){1&o&&(e.\u0275\u0275elementStart(0,"mat-error",67),e.\u0275\u0275text(1," This field length should be 6 digits "),e.\u0275\u0275elementEnd())}function tn(o,d){if(1&o){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",46)(1,"div",4)(2,"div",5)(3,"div",6)(4,"p")(5,"b"),e.\u0275\u0275text(6),e.\u0275\u0275elementEnd()()()()(),e.\u0275\u0275elementStart(7,"form",47)(8,"div",48)(9,"mat-form-field",49)(10,"mat-label"),e.\u0275\u0275text(11,"Organization"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(12,"input",50),e.\u0275\u0275listener("keypress",function(l){e.\u0275\u0275restoreView(n);const u=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(u.alphabetKeyPress(l))}),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(13,Mi,2,0,"mat-error",51),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(14,"div",52)(15,"mat-form-field",49)(16,"mat-label"),e.\u0275\u0275text(17,"Contact Person"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(18,"input",53),e.\u0275\u0275listener("keypress",function(l){e.\u0275\u0275restoreView(n);const u=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(u.alphabetKeyPress(l))}),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(19,oo,2,0,"mat-error",51),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(20,"div",52)(21,"mat-form-field",49)(22,"mat-label"),e.\u0275\u0275text(23,"Email"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(24,"input",54),e.\u0275\u0275template(25,ur,2,0,"mat-error",51),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(26,"div",52)(27,"mat-form-field",49)(28,"mat-label"),e.\u0275\u0275text(29,"Contact Number"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(30,"input",55),e.\u0275\u0275listener("keypress",function(l){e.\u0275\u0275restoreView(n);const u=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(u.numberOnly(l))}),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(31,qn,2,0,"mat-error",51),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(32,"div",52)(33,"mat-form-field",49)(34,"mat-label"),e.\u0275\u0275text(35,"address1"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(36,"input",56),e.\u0275\u0275template(37,pr,2,0,"mat-error",51),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(38,"div",52)(39,"mat-form-field",49)(40,"mat-label"),e.\u0275\u0275text(41,"address2"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(42,"input",57),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(43,"div",52)(44,"mat-form-field",49)(45,"mat-label"),e.\u0275\u0275text(46,"Country "),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(47,"mat-select",58),e.\u0275\u0275elementContainerStart(48),e.\u0275\u0275template(49,so,3,2,"div",18),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(50,hr,2,0,"mat-error",51),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(51,"div",52)(52,"mat-form-field",49)(53,"mat-label"),e.\u0275\u0275text(54,"State"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(55,"mat-select",59),e.\u0275\u0275elementContainerStart(56),e.\u0275\u0275template(57,fr,3,2,"div",18),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(58,Di,2,0,"mat-error",51),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(59,"div",52)(60,"mat-form-field",49)(61,"mat-label"),e.\u0275\u0275text(62,"City"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(63,"mat-select",60),e.\u0275\u0275elementContainerStart(64),e.\u0275\u0275template(65,lo,3,2,"div",18),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(66,gr,2,0,"mat-error",51),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(67,"div",52)(68,"mat-form-field",49)(69,"mat-label"),e.\u0275\u0275text(70,"Pincode"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(71,"input",61),e.\u0275\u0275template(72,ki,2,0,"mat-error",51),e.\u0275\u0275template(73,Fi,2,0,"mat-error",51),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(74,"div",62)(75,"button",63),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(n);const l=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(l.openWebcamModal())}),e.\u0275\u0275elementStart(76,"mat-label"),e.\u0275\u0275text(77,"Capture Photo"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(78,"div",64)(79,"button",65),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(n);const l=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(l.saveNewClient())}),e.\u0275\u0275elementStart(80,"span"),e.\u0275\u0275text(81,"Submit"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(82,"button",66),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(n);const l=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(l.Cancel())}),e.\u0275\u0275elementStart(83,"span"),e.\u0275\u0275text(84,"Cancel"),e.\u0275\u0275elementEnd()()()()()}if(2&o){const n=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275styleProp("margin-top",n.mobileQuery.matches?0:10,"px"),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate(n.todayDate),e.\u0275\u0275advance(1),e.\u0275\u0275property("formGroup",n.companyForm),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngIf",null==n.companyForm.controls.companyname.errors?null:n.companyForm.controls.companyname.errors.required),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngIf",null==n.companyForm.controls.contact_person_name.errors?null:n.companyForm.controls.contact_person_name.errors.required),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngIf",null==n.companyForm.controls.email.errors?null:n.companyForm.controls.email.errors.required),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngIf",null==n.companyForm.controls.contact.errors?null:n.companyForm.controls.contact.errors.required),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngIf",null==n.companyForm.controls.address1.errors?null:n.companyForm.controls.address1.errors.required),e.\u0275\u0275advance(10),e.\u0275\u0275property("tabIndex",2),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",n.CountryDetails),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==n.companyForm.controls.country.errors?null:n.companyForm.controls.country.errors.required),e.\u0275\u0275advance(7),e.\u0275\u0275property("ngForOf",n.stateDetails),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==n.companyForm.controls.state.errors?null:n.companyForm.controls.state.errors.required),e.\u0275\u0275advance(7),e.\u0275\u0275property("ngForOf",n.cityDetails),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==n.companyForm.controls.city.errors?null:n.companyForm.controls.city.errors.required),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngIf",null==n.companyForm.controls.pincode.errors?null:n.companyForm.controls.pincode.errors.required),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",(null==n.companyForm.controls.pincode.errors?null:n.companyForm.controls.pincode.errors.maxlength)||(null==n.companyForm.controls.pincode.errors?null:n.companyForm.controls.pincode.errors.minlength)),e.\u0275\u0275advance(6),e.\u0275\u0275property("tabIndex",7),e.\u0275\u0275advance(3),e.\u0275\u0275property("tabIndex",8)}}function _r(o,d){if(1&o){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"map-marker",72,73),e.\u0275\u0275listener("mapClick",function(){const u=e.\u0275\u0275restoreView(n).$implicit,h=e.\u0275\u0275reference(1),b=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(b.openInfo(h,u.description))}),e.\u0275\u0275elementStart(2,"map-info-window"),e.\u0275\u0275text(3),e.\u0275\u0275elementEnd()()}if(2&o){const n=d.$implicit,a=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("position",n),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(a.infoContent)}}function yr(o,d){if(1&o&&(e.\u0275\u0275elementStart(0,"div",69)(1,"google-map",70),e.\u0275\u0275template(2,_r,4,2,"map-marker",71),e.\u0275\u0275elementEnd()()),2&o){const n=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("center",n.center)("height",500)("width",560)("options",n.mapOptions),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngForOf",n.markerPositions)}}function co(o,d){1&o&&e.\u0275\u0275element(0,"video",74,75)}const vr={parse:{dateInput:"LL"},display:{dateInput:"DD-MM-YYYY",monthYearLabel:"YYYY",dateA11yLabel:"LL",monthYearA11yLabel:"YYYY"}};let Cr=(()=>{class o{constructor(n,a,l,u,h,b,M,O,A,H,ee,nt,Dt,ht,un,Zt,qt,it){this.locale=n,this.mapService=a,this.FormBuilder=h,this.router=b,this.element=M,this.crm=O,this.dialog=A,this.renderer=H,this.spinner=ee,this.company=nt,this.attendanceService=Dt,this.emsService=ht,this.LMS=un,this.sanitizer=Zt,this.cdRef=qt,this.httpClient=it,this.isUpdateMap=!0,this.cols=[],this.encriptPipe=new Sn.p,this.imageDataUrl={imageData:null,notes:null},this.displayVideo=!0,this.downloadCapture=!0,this.stopCamera=!0,this.CountryDetails=[],this.stateDetails=[],this.cityDetails=[],this.leaveApplied=!1,this.markerPositions=[],this.employeemarkers=[],this.locationTracked=!1,this.center={lat:17.457183152970547,lng:78.37056237270387},this.selected_location={lat:0,lng:0},this.mapOptions={zoom:12},this.locationButton=document.createElement("button"),this.TODAY_STR=(new Date).toISOString().replace(/T.*$/,""),this.calendarOptions={headerToolbar:{left:"prev",center:"title",right:"next"},customButtons:{},initialView:"dayGridMonth",weekends:!0,editable:!1,selectable:!0,selectMirror:!0,dayMaxEvents:!0,height:"auto"},this.isview=!0,this.userSession=JSON.parse(sessionStorage.getItem("user")??""),this.notificationsData=[],this.tobevisited=[],this.companyinfo=[],this.isNewclient=!1,this.companyDBName=Cn.N.dbName,this.markerPosition={},this.clientStatusVal={},this.demoStatusVal={},this.logoId=null,this.imageInfo=null,this.formData=new FormData,this.followups=[],this.punchIn=null,this.punchOut=null,this.initialEvents=[],this.currentDate=new Date,this.minDate=new Date("2020/01/01"),this.maxDate=new Date,this.workTypeData=[],this.workType=[],this.isRemoveImage=!0,this.fetchedAddress="",this.mapInitialized=!1,this.mapInitialized||this.mapService.initMap().then(()=>{this.mapInitialized=!0}).catch(kt=>{console.error("Error initializing map:",kt)}),this.mapUpdate=(0,ja.F)(2e4).subscribe(kt=>{this.isUpdateMap&&console.log("map update")}),this.mobileQuery=u.matchMedia("(max-width: 600px)"),this._mobileQueryListener=()=>l.detectChanges(),this.mobileQuery.addListener(this._mobileQueryListener)}ngOnInit(){this.pipe=new N.uU(this.locale),this.userSession=JSON.parse(sessionStorage.getItem("user")??""),this.getWorkypeList(),this.getEmployeeShiftDetails(),this.trackdata=null,this.getTrakckingDetails(),this.getCountry(),this.todayDate=this.pipe.transform(Date.now(),"dd-MM-yyyy"),this.getemployeeattendancedashboard(),console.log(this.userSession),this.getclientStatusVal(),this.getDemoStatusVal(),this.loginToken=JSON.parse(JSON.stringify(sessionStorage.getItem("token")||"")),this.formattedDate=this.pipe.transform(this.currentDate,"yyyy-MM-dd"),this.formattedTime=this.currentDate.toLocaleTimeString(this.locale,{hour12:!1,hour:"2-digit",minute:"2-digit",second:"2-digit"}),this.timeStampVal=this.currentDate.getTime(),this.crm.getCrmFollowUps({empid:this.userSession.id,selected_date:this.formattedDate+" "+this.formattedTime}).subscribe(n=>{this.followups=n.data,console.log("followups",this.followups)}),this.companyForm=this.FormBuilder.group({todayDate:["",C.kI.required],companyname:["",C.kI.required],contact_person_name:["",C.kI.required],contact:["",[C.kI.required]],email:["",[C.kI.required,C.kI.email,C.kI.pattern("^[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,4}$")]],address1:["",C.kI.required],address2:[""],city:["",C.kI.required],state:["",C.kI.required],pincode:["",C.kI.required],country:["",C.kI.required]}),this.companyForm.get("country")?.valueChanges.subscribe(n=>{this.stateDetails=[],this.company.getStatesc(n).subscribe(a=>{this.stateDetails=a.data,null!=this.companyinfo&&this.companyForm.controls.state.setValue(this.companyinfo.stateid)})}),this.companyForm.get("state")?.valueChanges.subscribe(n=>{this.companyForm.controls.city.setValue(""),this.cityDetails=[],this.company.getCities(n).subscribe(a=>{this.cityDetails=a.data,null!=this.companyinfo&&n==this.companyinfo.stateid&&this.companyForm.controls.city.setValue(this.companyinfo.locationid)})})}ngOnDestroy(){this.isUpdateMap=!1}getTrakckingDetails(){var n=this;return(0,ae.Z)(function*(){n.spinner.show(),n.markerPositions=[],navigator.geolocation.getCurrentPosition(u=>{n.center={lat:u.coords.latitude,lng:u.coords.longitude}},u=>console.log(u));let l={rmid:n.userSession.roles[0].rmid??"",empid:n.userSession.id,tracking_type:"ALL",date_selected:n.pipe.transform(n.currentDate,"yyyy-MM-dd")};n.crm.getCrmAttendanceTrackingDetails(l).subscribe(function(){var u=(0,ae.Z)(function*(h){n.spinner.hide(),h.status&&0!=h.data.length&&(n.trackdata=h.data,n.trackdata.forEach(function(){var b=(0,ae.Z)(function*(M){n.markerPositions.push({lat:Number(M.lat),lng:Number(M.lng),description:M.description+"\n"+(M.location?M.location:"")})});return function(M){return b.apply(this,arguments)}}()))});return function(h){return u.apply(this,arguments)}}())})()}openWebcamModal(){var n=this;return(0,ae.Z)(function*(){n.imageDataUrl={imageData:null,notes:null},yield n.dialog.open(Xt,{width:"350px",data:{notesRequired:!0},disableClose:!0}).afterClosed().subscribe(l=>{console.log("Captured photo data:",l),n.imageDataUrl=l})})()}takePicture(){navigator.mediaDevices.getUserMedia({video:!0}).then(n=>{this.videoElement.nativeElement.srcObject=n,setTimeout(()=>{const a=this.videoElement.nativeElement,l=this.canvasElement.nativeElement,u=l.getContext("2d");if(l.width=a.videoWidth,l.height=a.videoHeight,u.drawImage(a,0,0,l.width,l.height),this.imageDataUrl=l.toDataURL("image/png"),console.log("Captured photo:",this.imageDataUrl),this.downloadCapture){const h=document.createElement("a");h.href=this.imageDataUrl,h.download="captured_photo-user@"+this.userSession.id+"-"+this.currentDate+".png",document.body.appendChild(h),h.click(),document.body.removeChild(h)}this.stopCamera&&(a.srcObject.getTracks().forEach(M=>M.stop()),a.srcObject=null)},1250)}).catch(n=>{console.error("Error accessing webcam:",n)})}openInfo(n,a){this.infoContent=a,this.infoWindow&&this.infoWindow.open(n)}selectAddClient(){var n=this;return(0,ae.Z)(function*(){n.imageDataUrl={imageData:null,notes:null},yield n.dialog.open(Ii,{width:"1050px",height:"425px"}).afterClosed().subscribe(l=>{console.log("Captured photo data:",l),n.imageDataUrl=l})})()}Cancel(){this.imageDataUrl={imageData:null,notes:null},this.isNewclient=!1}submit(){this.saveNewClient()}saveNewClient(){this.getClientLocationFromMap();let n={client_id:0,companyname:this.companyForm.controls.companyname.value,contact_person_name:this.companyForm.controls.contact_person_name.value,contact:this.companyForm.controls.contact.value,email:this.companyForm.controls.email.value,address1:this.companyForm.controls.address1.value,address2:this.companyForm.controls.address2.value?this.companyForm.controls.address2.value:"",country:this.companyForm.controls.country.value,state:this.companyForm.controls.state.value,city:this.companyForm.controls.city.value,pincode:this.companyForm.controls.pincode.value,createdby:this.userSession.id,latitude:this.selected_location.lat,longitude:this.selected_location.lng,notes:this.imageDataUrl.notes??"",created_date:this.formattedDate+" "+this.formattedTime},a="Data not saved successfully";this.crm.setCrmClientInformation(n).subscribe(l=>{if(l&&l.status){let h=l.data[0].client_id;a="Data saved successfully",this.imageDataUrl.imageData&&this.crm.getFilepathsMaster(12).subscribe(b=>{if(b&&b.status){let M={id:null,employeeId:this.userSession.id,filecategory:"CRM_CLIENT",moduleId:12,documentnumber:"",fileName:n.companyname.toString().replace(" ","")+this.formattedDate+"-"+this.timeStampVal+".png",modulecode:b.data[0].module_code,requestId:h??0,status:"Submitted"};this.crm.setCrmFilesMaster(M).subscribe(O=>{if(O&&O.status){const A=new FormData,H=this.dataURLtoBlob(this.imageDataUrl.imageData);A.append("info",JSON.stringify(O.data[0])),A.append("file",H,O.data[0].filename),this.crm.setCapturedImageForTracking(A).subscribe(ee=>{this.spinner.hide(),a+=ee&&ee.status?"- uploaded.":"- not uploaded."})}else a+="- file settings not performed."})}else a+="- file path not found."})}this.dialog.open(le.B,{position:{top:"70px"},disableClose:!0,data:a})})}getCountry(){this.crm.getCountry(null,1,10).subscribe(n=>{this.CountryDetails=n.data})}getDemoStatusVal(){this.crm.getCrmActivityStatusValues().subscribe(n=>{console.log(n),n.status?this.demoStatusVal=n.data:this.clientStatusVal=[]})}getclientStatusVal(){this.crm.getCrmClientStatusValues().subscribe(n=>{console.log(n),n.status?(this.clientStatusVal=n.data,console.log("clientStatusVal",this.clientStatusVal)):this.clientStatusVal=[]})}addClient(){this.isNewclient=!0}alphabetKeyPress(n){let l=String.fromCharCode(n.charCode);8!=n.keyCode&&!/[a-zA-Z ]/.test(l)&&n.preventDefault()}numberOnly(n){const a=n.which?n.which:n.keyCode;return!(a>31&&(a<48||a>57))}_keyPress(n){let l=String.fromCharCode(n.charCode);/[0-9]/.test(l)||n.preventDefault()}noWhitespaceValidator(){return n=>0===(n.value||"").trim().length?{whitespace:!0}:null}getWorkypeList(){this.workTypeData=[],this.attendanceService.getWorkypeList("attendancetypesmaster","active",1,100,this.companyDBName).subscribe(n=>{n.status&&0!=n.data.length&&(this.workTypeData=n.data,this.workTypeData.forEach(a=>{"on-duty"===a.type.toLowerCase().toString()&&(this.workType=a)}))})}getEmployeeShiftDetails(){this.attendanceService.getShiftDetailsByEmpId(this.userSession.id).subscribe(n=>{n.status&&(this.shiftData=n.data[0],console.log(this.shiftData))})}onMapClick(n){}removeData(){}getemployeeattendancedashboard(){this.spinner.show();let n={manager_id:null,employee_id:this.userSession.id,date:this.pipe.transform(new Date,"yyyy-MM-dd")};this.attendanceService.getemployeeattendancedashboard(n).subscribe(a=>{a.status&&(this.attendanceData=a.data,this.initialEvents=[],this.attendanceData.forEach(l=>{let b;this.pipe.transform(Date.now(),"yyyy-MM-dd")==this.pipe.transform(l.attendancedate,"yyyy-MM-dd")&&("L"==l.present_or_absent&&(this.leaveApplied=!0),this.punchIn=this.pipe.transform(l.firstlogintime,"shortTime"),this.punchOut=this.pipe.transform(l.lastlogouttime,"shortTime")),"P"==l.present_or_absent?b="#32cd32":"W"==l.present_or_absent?b="#2e0cf3":"A"==l.present_or_absent?b="#FF3131":"H"==l.present_or_absent?b="#800000":"L"==l.present_or_absent&&(b="#FF8C00"),this.initialEvents.push({title:l.present_or_absent,start:l.attendancedate,color:b,icon:"P"==l.present_or_absent?"fa-check-circle":"fa-times-circle"})}),this.calendarOptions.events=this.initialEvents,this.spinner.hide())})}getClientLocationFromMap(){navigator.geolocation.getCurrentPosition(n=>{this.selected_location={lat:n.coords.latitude,lng:n.coords.longitude}},n=>console.log(n))}setPunchIn(){this.getClientLocationFromMap();let n={rmid:this.userSession.roles[0].rmid??"",empid:this.userSession.id??"",attendancetype:this.workType.type,attendancedate:this.pipe.transform(new Date,"yyyy-MM-dd"),punchtime:this.pipe.transform(new Date,"yyyy-MM-dd hh:mm:ss"),punchcategory:"in",shift:this.shiftData.shiftname,lat:this.center.lat,lng:this.center.lng,notes:"",battery_percent:""};this.selected_location.lat&&this.selected_location.lng&&(this.locationTracked=!0),this.dialog.open(Xt,{width:"350px",disableClose:!0,data:{notesRequired:!0}}).afterClosed().subscribe(l=>{if(l&&l.imageData&&l.notes&&l.notes.toString().length){this.imageDataUrl=l,n.notes=this.imageDataUrl.notes;const u=this.dataURLtoBlob(this.imageDataUrl.imageData);let h;this.crm.setCrmEmployeeAttendance(n).subscribe(b=>{b&&b.status&&b.data?(this.refreshPage(),this.attendanceid=b.data[0].attendance_id??0,this.attd_detail_id=b.data[0].attd_detail_id??0,h="Punched in successfully.",this.crm.getFilepathsMaster(12).subscribe(M=>{M&&M.status?this.crm.setCrmFilesMaster({id:null,employeeId:this.userSession.id,filecategory:"CRM_ATTENDANCE",moduleId:12,documentnumber:"",fileName:"punchIn-"+this.formattedDate+"-"+this.timeStampVal+".png",modulecode:M.data[0].module_code,requestId:this.attd_detail_id??0,status:"Submitted"}).subscribe(A=>{if(A&&A.status){const H=new FormData;H.append("info",JSON.stringify(A.data[0])),H.append("file",u,A.data[0].filename),this.crm.setCapturedImageForTracking(H).subscribe(ee=>{h+=ee&&ee.status?"- uploaded.":"- not uploaded."})}else h+="- file settings not performed."}):h+="- file path not found."})):h="Punched in successfully.",this.fetchedAddress="",this.dialog.open(le.B,{position:{top:"70px"},disableClose:!0,data:h})})}})}refreshPage(){this.getemployeeattendancedashboard(),this.getTrakckingDetails()}setPunchOut(){this.getClientLocationFromMap();let n={rmid:this.userSession.roles[0].rmid??"",empid:this.userSession.id??"",attendancetype:this.workType.type,attendancedate:this.pipe.transform(new Date,"yyyy-MM-dd"),punchtime:this.pipe.transform(new Date,"yyyy-MM-dd hh:mm:ss"),punchcategory:"out",shift:this.shiftData.shiftname,lat:this.center.lat,lng:this.center.lng,notes:"",battery_percent:""};this.selected_location.lat&&this.selected_location.lng&&(this.locationTracked=!0),this.dialog.open(Xt,{width:"350px",disableClose:!0,data:{notesRequired:!0}}).afterClosed().subscribe(l=>{if(l&&l.imageData&&l.notes&&l.notes.toString().length){this.imageDataUrl=l,n.notes=this.imageDataUrl.notes;const u=this.dataURLtoBlob(this.imageDataUrl.imageData);let h;this.crm.setCrmEmployeeAttendance(n).subscribe(b=>{b&&b.status&&b.data?(this.refreshPage(),this.attendanceid=b.data[0].attendance_id??0,this.attd_detail_id=b.data[0].attd_detail_id??0,h="Punched Out successfully.",this.crm.getFilepathsMaster(12).subscribe(M=>{if(M&&M.status){let O={id:null,employeeId:this.userSession.id,filecategory:"CRM_ATTENDANCE",moduleId:12,documentnumber:"",fileName:"punchOut-"+this.formattedDate+"-"+this.formattedTime.replace(":","-").replace(":","-")+".png",modulecode:M.data[0].module_code,requestId:this.attd_detail_id??0,status:"Submitted"};this.crm.setCrmFilesMaster(O).subscribe(A=>{if(A&&A.status){const H=new FormData;H.append("info",JSON.stringify(A.data[0])),H.append("file",u,A.data[0].filename),this.crm.setCapturedImageForTracking(H).subscribe(ee=>{this.spinner.hide(),h+=ee&&ee.status?"- uploaded.":"- not uploaded."})}else h+="- file settings not performed."})}else h+="- file path not found."}),this.getemployeeattendancedashboard()):h="Punched out successfully.",this.fetchedAddress="",this.dialog.open(le.B,{position:{top:"70px"},disableClose:!0,data:h})})}}),this.refreshPage()}getEmployeeEmailData(){this.employeeEmailData=[],this.emsService.getEmployeeEmailDataByEmpid(this.userSession.id).subscribe(n=>{this.employeeEmailData=JSON.parse(n.data[0].jsonvalu)[0]})}calculateMD5(n){const a=n.split(",")[1],l=ct().enc.Base64.parse(a);return ct().MD5(l).toString(ct().enc.Hex)}dataURLtoBlob(n){const a=n.split(","),l=a[0].match(/:(.*?);/);if(l){const u=l[1],h=atob(a[1]);let b=h.length;const M=new Uint8Array(b);for(;b--;)M[b]=h.charCodeAt(b);return new Blob([M],{type:u})}return new Blob}selectClient(n,a){let l=this.encriptPipe.transform(a.client_id.toString());this.router.navigate(["/Crm/CrmClientEditAndUpdate",{clientId:l}])}checkClientDetails(n){n.display=!n||!n.display}getbackgroundColor(n){const a=new Date;return n.next_follow_up_on?new Date(n.next_follow_up_on)>a?"aliceblue":"mistyrose":new Date(n.created_on)>a?"aliceblue":"mistyrose"}getFormattedDateTime(n=null){return n=n?new Date(n):new Date,this.pipe.transform(n,"yyyy-MM-dd")+" "+n.toLocaleTimeString(this.locale,{hour12:!0,hour:"2-digit",minute:"2-digit"})}showSpinner(){this.spinner.show(),setTimeout(()=>{this.spinner.hide()},5e3)}}return o.\u0275fac=function(n){return new(n||o)(e.\u0275\u0275directiveInject(e.LOCALE_ID),e.\u0275\u0275directiveInject(nr),e.\u0275\u0275directiveInject(e.ChangeDetectorRef),e.\u0275\u0275directiveInject(Ka.vx),e.\u0275\u0275directiveInject(C.QS),e.\u0275\u0275directiveInject(f.F0),e.\u0275\u0275directiveInject(e.ElementRef),e.\u0275\u0275directiveInject(we),e.\u0275\u0275directiveInject(de.uw),e.\u0275\u0275directiveInject(e.Renderer2),e.\u0275\u0275directiveInject(et.t2),e.\u0275\u0275directiveInject(zt.D),e.\u0275\u0275directiveInject(ir.v),e.\u0275\u0275directiveInject(rr.b),e.\u0275\u0275directiveInject(en.t),e.\u0275\u0275directiveInject(ar.H7),e.\u0275\u0275directiveInject(e.ChangeDetectorRef),e.\u0275\u0275directiveInject(Rt.eN))},o.\u0275cmp=e.\u0275\u0275defineComponent({type:o,selectors:[["app-crm-user-dashboard"]],viewQuery:function(n,a){if(1&n&&(e.\u0275\u0275viewQuery(Tt,5),e.\u0275\u0275viewQuery(ie,5),e.\u0275\u0275viewQuery(Zn,5),e.\u0275\u0275viewQuery(Xa,5),e.\u0275\u0275viewQuery(Bn.N7,5),e.\u0275\u0275viewQuery(eo,5)),2&n){let l;e.\u0275\u0275queryRefresh(l=e.\u0275\u0275loadQuery())&&(a.infoWindow=l.first),e.\u0275\u0275queryRefresh(l=e.\u0275\u0275loadQuery())&&(a.googleMap=l.first),e.\u0275\u0275queryRefresh(l=e.\u0275\u0275loadQuery())&&(a.videoElement=l.first),e.\u0275\u0275queryRefresh(l=e.\u0275\u0275loadQuery())&&(a.canvasElement=l.first),e.\u0275\u0275queryRefresh(l=e.\u0275\u0275loadQuery())&&(a.viewport=l.first),e.\u0275\u0275queryRefresh(l=e.\u0275\u0275loadQuery())&&(a.calendarComponent=l.first)}},features:[e.\u0275\u0275ProvidersFeature([{provide:ve._A,useClass:Ei.t7,deps:[ve.Ad]},{provide:ve.sG,useValue:vr}])],decls:53,vars:14,consts:[["fxLayout","column","fxFlex","100",1,"first-col"],["fxLayout","row","fxFlex.xs","100","fxFlex","100","fxLayoutAlign.xs","center",1,"mx-2","my-2"],["fxFlex.xs","100","fxFlex","45","fxLayoutAlign.xs","center",1,"mx-2","my-2"],["fxLayout","column"],["fxLayout","row","fxLayout.lt-lg","column","fxLayout.xs","column","fxLayoutAlign.xs","center",1,"clock-attendance"],["fxFlex","100","fxLayout","row","fxLayoutAlign","space-between",2,"padding-top","10px","color","white","height","45px"],["fxLayout","row","fxFlex","50"],["fxLayout","row","fxFlex","50","fxLayoutAlign","end center"],["fxLayout","row","fxLayout.lt-lg","column","fxLayout.xs","column","fxLayoutAlign.xs","center","fxLayoutAlign","space-between",1,"time-attendance"],["fxLayout","row","fxLayoutAlign","space-evenly left"],["class","btn btn-primary custom mr-2 mb-2",3,"click",4,"ngIf"],["style","align-self: end;",4,"ngIf"],["fxLayout","row","fxLayoutAlign","space-evenly right"],["fxLayout","row","fxLayout.lt-lg","column","fxLayout.xs","column","fxLayoutAlign.xs","center","fxLayoutAlign","space-between","class","time-attendance","style","border-top: groove;",4,"ngIf"],["fxLayout","column",2,"height","300px"],["fxLayout","row","fxLayout.lt-lg","column","fxLayout.xs","column","fxLayoutAlign.xs","center","fxLayoutAlign","space-between",1,"pending-attendance"],["fxLayout","row",2,"padding-top","10px","color","white","height","45px"],["itemSize","5",1,"example-viewport",2,"background-color","white"],[4,"ngFor","ngForOf"],["class","sub-section-2","fxLayout.lt-lg","column","fxLayout.xs","column","fxLayoutAlign.xs","center","fxLayout","column","fxFlex","45",4,"ngIf"],["fxFlex","55","fxFill",""],["fxLayout","row",1,"clock-attendance"],["fxLayout","row","fxLayoutAlign","space-between center",1,"headerbox",2,"padding-right","60px","text-align","right"],["mat-icon-button","","matTooltip","Add Client","text","Add Client",3,"click"],[2,"font-size","25px"],["style","height:500px ; width: 560px; position: relative; overflow: hidden;",4,"ngIf"],["autoplay","",4,"ngIf"],[2,"display","none"],["canvasElement",""],[1,"btn","btn-primary","custom","mr-2","mb-2",3,"click"],[2,"align-self","end"],["fxLayout","row","fxLayout.lt-lg","column","fxLayout.xs","column","fxLayoutAlign.xs","center","fxLayoutAlign","space-between",1,"time-attendance",2,"border-top","groove"],[1,"card",2,"background-color","ghostwhite"],["fxLayoutAlign","space-evenly center","fxLayout","row",2,"color","black","padding","2%","font-size","initial","font-weight","300",3,"ngStyle","click"],[3,"fxFlex"],[2,"font-weight","bolder","font-size","larger"],[2,"font-weight","300","font-size","small","vertical-align","sub","margin-right","10%"],[1,"",2,"font-weight","300","font-size","small","vertical-align","sub"],["fxLayoutAlign","end",3,"click"],["mat-icon-button","","matTooltip","",2,"color","cadetblue"],[1,"icon"],["fxLayoutAlign","space-evenly left","fxLayout","column","style","color:black;padding: 2%;font-size: 12px;font-weight: normal;",4,"ngIf"],["fxLayoutAlign","space-evenly left","fxLayout","column",2,"color","black","padding","2%","font-size","12px","font-weight","normal"],[1,"",2,"font-weight","300"],[4,"ngIf"],[1,""],["fxLayout.lt-lg","column","fxLayout.xs","column","fxLayoutAlign.xs","center","fxLayout","column","fxFlex","45",1,"sub-section-2"],["autocomplete","off",3,"formGroup"],["fxLayout","row"],["fxFlex","","appearance","outline"],["formControlName","companyname","matInput","","placeholder","","required","",3,"keypress"],["class","con-error",4,"ngIf"],["fxLayout","row","fxLayout.lt-lg","column","fxLayout.xs","column","fxLayoutAlign.xs","center"],["formControlName","contact_person_name","matInput","","placeholder","","required","",3,"keypress"],["formControlName","email","matInput","","placeholder","","required",""],["formControlName","contact","matInput","","placeholder","","required","",3,"keypress"],["formControlName","address1","matInput","","placeholder","","required",""],["formControlName","address2","matInput","","placeholder",""],["formControlName","country","required","",3,"tabIndex"],["required","","formControlName","state"],["required","","formControlName","city"],["type","text","onlyNumber","","formControlName","pincode","matInput","","placeholder","","minlength","6","maxlength","6","required",""],["fxLayout","row","fxLayout.lt-lg","column","fxLayout.xs","column","fxLayoutAlign.xs","center","appearance","outline"],[1,"btn","btn-outline-primary","custom","mr-2","mb-2",2,"min-width","-webkit-fill-available",3,"click"],["fxLayoutAlign","center"],["type","button",1,"btn","btn-primary","mr-2","mb-2",3,"tabIndex","click"],["type","submit",1,"btn","btn-danger","mr-2","mb-2",3,"tabIndex","click"],[1,"con-error"],[3,"value"],[2,"height","500px","width","560px","position","relative","overflow","hidden"],[3,"center","height","width","options"],[3,"position","mapClick",4,"ngFor","ngForOf"],[3,"position","mapClick"],["marker","mapMarker"],["autoplay",""],["videoElement",""]],template:function(n,a){1&n&&(e.\u0275\u0275elementStart(0,"div",0)(1,"mat-card")(2,"div",1)(3,"div",2)(4,"div",3)(5,"div",4)(6,"div",5)(7,"div",6)(8,"p")(9,"mat-icon"),e.\u0275\u0275text(10,"alarm"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(11,"p")(12,"b"),e.\u0275\u0275text(13," Punch In/Out"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(14,"div",7)(15,"p")(16,"b"),e.\u0275\u0275text(17),e.\u0275\u0275elementEnd()()()()(),e.\u0275\u0275elementStart(18,"div",8)(19,"div",9),e.\u0275\u0275template(20,to,2,0,"button",10),e.\u0275\u0275template(21,or,2,1,"p",11),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(22,"div",12),e.\u0275\u0275template(23,sr,2,0,"button",10),e.\u0275\u0275template(24,lr,2,1,"p",11),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(25,ro,3,2,"div",13),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(26,"div",14)(27,"div",15)(28,"div",16)(29,"p")(30,"mat-icon"),e.\u0275\u0275text(31,"notifications"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(32,"p")(33,"b"),e.\u0275\u0275text(34,"Today Follow-ups "),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(35,"cdk-virtual-scroll-viewport",17),e.\u0275\u0275template(36,mr,18,11,"div",18),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275template(37,tn,85,20,"div",19),e.\u0275\u0275elementStart(38,"div",20)(39,"div",21)(40,"div",5),e.\u0275\u0275element(41,"div",7),e.\u0275\u0275elementStart(42,"div")(43,"mat-card-header",22)(44,"button",23),e.\u0275\u0275listener("click",function(){return a.selectAddClient()}),e.\u0275\u0275text(45,"Add Client "),e.\u0275\u0275elementStart(46,"mat-icon",24),e.\u0275\u0275text(47,"add_circle"),e.\u0275\u0275elementEnd()()()()()(),e.\u0275\u0275template(48,yr,3,5,"div",25),e.\u0275\u0275elementStart(49,"div"),e.\u0275\u0275template(50,co,2,0,"video",26),e.\u0275\u0275element(51,"canvas",27,28),e.\u0275\u0275elementEnd()()()()()),2&n&&(e.\u0275\u0275advance(5),e.\u0275\u0275styleProp("margin-top",a.mobileQuery.matches?0:10,"px"),e.\u0275\u0275advance(12),e.\u0275\u0275textInterpolate(a.todayDate),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",!a.punchIn&&!a.leaveApplied),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",a.punchIn),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",!a.punchOut&&a.punchIn),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",a.punchOut),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",a.imageDataUrl&&a.imageDataUrl.imageData||a.locationTracked),e.\u0275\u0275advance(11),e.\u0275\u0275property("ngForOf",a.followups),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!1),e.\u0275\u0275advance(2),e.\u0275\u0275styleProp("margin-top",a.mobileQuery.matches?0:10,"px"),e.\u0275\u0275advance(9),e.\u0275\u0275property("ngIf",a.mapInitialized),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",a.displayVideo))},dependencies:[N.sg,N.O5,N.PC,ve.ey,Nt.lW,ue.a8,ue.dk,tt.Hw,q.TO,q.KE,q.hX,me.Nt,Pt.gD,Wn.gM,Bn.xd,Bn.N7,C._Y,C.Fj,C.JJ,C.JL,C.Q7,C.wO,C.nD,C.sg,C.u,G.xw,G.Wh,G.s9,G.yH,Ct.Zl,ie,Tt,zn,N.rS],styles:['.demo-app-main[_ngcontent-%COMP%]{padding:1em}.pending-attendance[_ngcontent-%COMP%]{background-color:#28acaf}.clock-attendance[_ngcontent-%COMP%]{padding-right:5px;padding-left:5px;background-color:#28acaf}.time-attendance[_ngcontent-%COMP%]{padding:5px;background-color:azure}.green-icon[_ngcontent-%COMP%]{color:green}.red-icon[_ngcontent-%COMP%]{color:red}.blue-icon[_ngcontent-%COMP%]{color:#00f}.yellow-icon[_ngcontent-%COMP%]{color:maroon}.orange-icon[_ngcontent-%COMP%]{color:#ff8c00}mat-icon[_ngcontent-%COMP%]{font-size:20px}.example-viewport[_ngcontent-%COMP%]{height:100%;width:100%}  .fc .fc-button-primary{background-color:#28acaf!important}mat-card[_ngcontent-%COMP%]{transition:box-shadow .28s cubic-bezier(.4,0,.2,1);display:block;position:relative;padding-left:0;padding-right:0}.tableP[_ngcontent-%COMP%]{padding-left:2%;padding-right:2%;padding-bottom:1%}.section[_ngcontent-%COMP%]{padding-top:1%;padding-left:1%;margin-bottom:2px;font-size:17px;color:#000;text-align:left;line-height:28px}  .mat-select-panel[aria-label="Items per page:"] mat-option:last-child:before{content:"All"}  .mat-select-panel[aria-label="Items per page:"] mat-option:last-child .mat-option-text{display:none}.headerbox[_ngcontent-%COMP%]{height:30px;background-color:#28acaf!important;align-items:center}.title[_ngcontent-%COMP%]{font-family:Roboto;font-size:20px;font-weight:500;font-stretch:normal;font-style:normal;letter-spacing:.32px;color:#fff;margin-bottom:0} tr .mat-header-row{height:45px!important}  .mat-form-field-appearance-outline .mat-form-field-wrapper{margin:.2em 0!important}.example-container[_ngcontent-%COMP%]{overflow-x:auto;display:flex;flex-direction:row}.main-Pad[_ngcontent-%COMP%]{padding-top:1%;padding-left:8px;padding-right:8px}.btn[_ngcontent-%COMP%]{width:100px!important}body[_ngcontent-%COMP%]{background-color:#f0f0f0}#app[_ngcontent-%COMP%]{text-align:center;color:#2c3e50;margin-top:60px}#video[_ngcontent-%COMP%]{background-color:#000}#canvas[_ngcontent-%COMP%]{display:none}li[_ngcontent-%COMP%]{display:inline;padding:5px}video[_ngcontent-%COMP%]{width:100%;max-width:640px}.card[_ngcontent-%COMP%]{border-radius:10px;box-shadow:0 4px 8px #0000001a;overflow:hidden}']}),o})();var Li=k(17489);function xr(o,d){if(1&o&&(e.\u0275\u0275elementStart(0,"div")(1,"span"),e.\u0275\u0275text(2,"Follow Up: "),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"span",30),e.\u0275\u0275text(4),e.\u0275\u0275elementEnd()()),2&o){const n=e.\u0275\u0275nextContext(2).$implicit,a=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate1(" ",a.getFormattedDateTime(n.nextFollowUpDate),"")}}function mo(o,d){if(1&o&&(e.\u0275\u0275elementStart(0,"div")(1,"span"),e.\u0275\u0275text(2,"Created: "),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"span",30),e.\u0275\u0275text(4),e.\u0275\u0275elementEnd()()),2&o){const n=e.\u0275\u0275nextContext(2).$implicit,a=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate1(" ",a.getFormattedDateTime(n.created_on),"")}}function uo(o,d){if(1&o&&(e.\u0275\u0275elementStart(0,"div")(1,"span",23),e.\u0275\u0275text(2,"Notes:"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"span",30),e.\u0275\u0275text(4),e.\u0275\u0275elementEnd()()),2&o){const n=e.\u0275\u0275nextContext(2).$implicit;e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate1(" ",n.description,"")}}function po(o,d){if(1&o&&(e.\u0275\u0275elementStart(0,"div")(1,"span",23),e.\u0275\u0275text(2,"Created By:"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"span",30),e.\u0275\u0275text(4),e.\u0275\u0275elementEnd()()),2&o){const n=e.\u0275\u0275nextContext(2).$implicit;e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate1(" ",n.emp_name,"")}}function br(o,d){if(1&o&&(e.\u0275\u0275elementStart(0,"div",28),e.\u0275\u0275template(1,xr,5,1,"div",29),e.\u0275\u0275template(2,mo,5,1,"div",29),e.\u0275\u0275template(3,uo,5,1,"div",29),e.\u0275\u0275template(4,po,5,1,"div",29),e.\u0275\u0275elementEnd()),2&o){const n=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.nextFollowUpDate),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!n.nextFollowUpDate&&n.created_on),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.description&&n.description.toString().length),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.emp_name)}}const ho=function(o){return{"background-color":o}};function fo(o,d){if(1&o){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",19)(1,"div",20)(2,"div",21),e.\u0275\u0275listener("click",function(){const u=e.\u0275\u0275restoreView(n).$implicit,h=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(h.checkClientDetails(u))}),e.\u0275\u0275elementStart(3,"div",22)(4,"span",23),e.\u0275\u0275text(5),e.\u0275\u0275pipe(6,"titlecase"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(7,"div",22)(8,"span",24),e.\u0275\u0275listener("click",function(l){const h=e.\u0275\u0275restoreView(n).$implicit,b=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(b.selectClient(l,h))}),e.\u0275\u0275elementStart(9,"button",25)(10,"mat-icon",26),e.\u0275\u0275text(11,"keyboard_arrow_right"),e.\u0275\u0275elementEnd()()()()(),e.\u0275\u0275template(12,br,5,4,"div",27),e.\u0275\u0275elementEnd()()}if(2&o){const n=d.$implicit,a=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(2),e.\u0275\u0275property("ngStyle",e.\u0275\u0275pureFunction1(7,ho,a.getbackgroundColor(n))),e.\u0275\u0275advance(1),e.\u0275\u0275property("fxFlex","90%"),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(6,5,n.organization_name)),e.\u0275\u0275advance(2),e.\u0275\u0275property("fxFlex","10%"),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngIf",n.display)}}function go(o,d){if(1&o&&(e.\u0275\u0275elementStart(0,"div",14)(1,"div",15)(2,"div",16)(3,"span"),e.\u0275\u0275text(4),e.\u0275\u0275pipe(5,"titlecase"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(6,"div",17)(7,"span"),e.\u0275\u0275text(8),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(9,"div"),e.\u0275\u0275template(10,fo,13,9,"div",18),e.\u0275\u0275elementEnd()()()),2&o){const n=d.$implicit;e.\u0275\u0275property("fxFlex","30%"),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(5,4,n.type_name)),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate1("",n.count," Deals "),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",n.data)}}const _o=function(){return[2]};let Gn=(()=>{class o{constructor(n,a,l,u,h,b){this.crm=n,this.datePipe=a,this.route=l,this.locale=u,this.dialog=h,this.router=b,this.clientFilteredList=[],this.isNewclient=!1,this.currentDate=new N.uU(""),this.rows=[],this.cols=[],this.encriptPipe=new Sn.p,this.totalClients=0,this.clientList=[],this.listTypeAddClient=[]}ngOnInit(){this.totalClients=0,this.route.url.subscribe(n=>{this.userRole=n[0]?.path}),this.userSession=JSON.parse(sessionStorage.getItem("user")??""),this.formattedDate=this.datePipe.transform(new Date,"yyyy-MM-dd"),this.formattedTime=(new Date).toLocaleTimeString(void 0,{hour12:!1,hour:"2-digit",minute:"2-digit",second:"2-digit"}),this.getClientListTypes()}selectAddClient(){var n=this;return(0,ae.Z)(function*(){yield n.dialog.open(Ii,{width:"1050px",height:"425px"}).afterClosed().subscribe(l=>{n.listTypeAddClient&&n.listTypeAddClient.id&&n.getClientFilteredListLatest({manager_id:"Mgr"===n.userRole?n.userSession.id:null,empid:"Emp"===n.userRole?n.userSession.id:null,typeid:n.listTypeAddClient.id,selected_date:null,type_name:n.listTypeAddClient.type_name})})})()}applyFilter(n){const a=n.target.value;this.clientFilteredList=Li.cloneDeep(this.clientList),this.clientFilteredList.filter(l=>{var u=l.data.filter(h=>h.organization_name.toString().toLowerCase().includes(a.trim().toLowerCase()));l.data=u})}getClientFilteredList(n){this.crm.getCrmClientFilteredList(n).subscribe(a=>{a.status&&this.clientFilteredList.push({data:a.data,type_id:n.typeid,type_name:n.type_name,count:a.data.length})})}getClientFilteredListLatest(n){this.crm.getClientFilteredListLatest(n).subscribe(a=>{if(a.status){let l=!0;this.clientFilteredList.length&&(this.totalClients=0,this.clientFilteredList.forEach(u=>{u.type_id===n.typeid?(u.data=a.data,u.count=a.data.length,this.totalClients=this.totalClients+(u&&u.data&&u.data.length?u.data.length:0),l=!1):this.totalClients=this.totalClients+(u&&u.data&&u.data.length?u.data.length:0)})),l&&(this.clientFilteredList.push({data:a.data,type_id:n.typeid,type_name:n.type_name,count:a.data.length}),this.totalClients=this.totalClients+(a&&a.data&&a.data.length?a.data.length:0)),this.sortById()}else this.clientFilteredList.length||this.dialog.open(le.B,{position:{top:"70px"},disableClose:!0,data:a.message?a.message:"No Records Found"})})}sortById(){this.clientFilteredList.sort((n,a)=>n.type_id-a.type_id),this.clientList=Li.cloneDeep(this.clientFilteredList)}getClientListTypes(){this.cols=[],this.crm.getCrmClientListTypes(this.userSession.id,this.userRole).subscribe(n=>{n.status?(this.cols=n.data,this.clientFilteredList=[],this.columnwidth=100/Number(this.cols.length),this.cols.forEach(a=>{0===a.status_val&&(this.listTypeAddClient=a),this.getClientFilteredListLatest({manager_id:"Mgr"===this.userRole?this.userSession.id:null,empid:"Emp"===this.userRole?this.userSession.id:null,typeid:a.id,selected_date:null,type_name:a.type_name})})):this.cols=[]})}checkClientDetails(n){n.display=!n||!n.display}selectClient(n,a){let l=this.encriptPipe.transform(a.client_id.toString());this.router.navigate(["/Crm/CrmClientEditAndUpdate",{clientId:l}])}getbackgroundColor(n){const a=new Date;return n.nextFollowUpDate?new Date(n.nextFollowUpDate)>a?"aliceblue":"mistyrose":n.created_on&&this.datePipe.transform(new Date(n.created_on),"yyyy-MM-dd")==this.formattedDate?"aliceblue":"mistyrose"}getFormattedDateTime(n=null){return n=n?new Date(n):new Date,this.datePipe.transform(n,"yyyy-MM-dd")+" "+n.toLocaleTimeString(this.locale,{hour12:!0,hour:"2-digit",minute:"2-digit"})}}return o.\u0275fac=function(n){return new(n||o)(e.\u0275\u0275directiveInject(we),e.\u0275\u0275directiveInject(N.uU),e.\u0275\u0275directiveInject(f.gz),e.\u0275\u0275directiveInject(e.LOCALE_ID),e.\u0275\u0275directiveInject(de.uw),e.\u0275\u0275directiveInject(f.F0))},o.\u0275cmp=e.\u0275\u0275defineComponent({type:o,selectors:[["app-crm-client-list"]],decls:20,vars:4,consts:[["fxLayout","column",1,"first-col"],[1,"main-header_colored"],["fxLayout","row","fxLayoutAlign","space-between center",1,"headerbox",2,"padding-right","60px","text-align","right"],[2,"margin-right","2%"],["mat-icon-button","","matTooltip","Add Client","text","Add Client",3,"click"],[2,"font-size","25px"],["fxLayout","row","fxLayoutAlign.xs","center","fxLayoutAlign","end",1,""],["fxFlex","50","fxFlex.xs","100","fxLayoutAlign","end",2,"height","70px"],[2,"align-self","center"],["fxFlex.xs","100","fxFlex","50","fxFlex.lt-lg","100","appearance","outline",1,"mx-2","my-2",2,"padding-top","2%"],["matSuffix","",2,"color","#28acaf"],["matInput","","placeholder","","maxlength","100",3,"tabIndex","keyup","keyup.enter"],["fxLayout","row",2,"padding-top","12%","display","block"],["class","card","class","padding-right:1%",3,"fxFlex",4,"ngFor","ngForOf"],[1,"padding-right:1%",3,"fxFlex"],["fxLayout","column",1,"card"],[2,"text-align","center","font-size","14px","font-weight","500","width","100%","place-content","space-evenly","background-color","honeydew","color","black","margin-right","6%","height","25px"],[2,"text-align","center","font-size","12px","font-weight","400","width","100%","place-content","space-evenly","background-color","honeydew","color","black","margin-right","6%","height","25px"],["style","display: block;",4,"ngFor","ngForOf"],[2,"display","block"],[1,"card",2,"background-color","ghostwhite"],["fxLayoutAlign","space-evenly center","fxLayout","row",2,"color","black","padding","2%","font-size","initial","font-weight","300",3,"ngStyle","click"],[3,"fxFlex"],[1,""],["fxLayoutAlign","end",3,"click"],["mat-icon-button","","matTooltip","",2,"color","cadetblue"],[1,"icon"],["fxLayoutAlign","space-evenly left","fxLayout","column","style","color:black;padding: 2%;font-size: 12px;font-weight: normal;",4,"ngIf"],["fxLayoutAlign","space-evenly left","fxLayout","column",2,"color","black","padding","2%","font-size","12px","font-weight","normal"],[4,"ngIf"],[1,"",2,"font-weight","300"]],template:function(n,a){1&n&&(e.\u0275\u0275elementStart(0,"div",0)(1,"div",1)(2,"mat-card-header",2)(3,"div",3)(4,"button",4),e.\u0275\u0275listener("click",function(){return a.selectAddClient()}),e.\u0275\u0275text(5,"Add Client "),e.\u0275\u0275elementStart(6,"mat-icon",5),e.\u0275\u0275text(7,"add_circle"),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(8,"div",6)(9,"span",7)(10,"mat-label",8),e.\u0275\u0275text(11),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(12,"mat-form-field",9)(13,"mat-icon",10),e.\u0275\u0275text(14,"search"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(15,"mat-label"),e.\u0275\u0275text(16,"Search"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(17,"input",11),e.\u0275\u0275listener("keyup",function(u){return a.applyFilter(u)})("keyup.enter",function(u){return a.applyFilter(u)}),e.\u0275\u0275elementEnd()()()()(),e.\u0275\u0275elementStart(18,"div",12),e.\u0275\u0275template(19,go,11,6,"div",13),e.\u0275\u0275elementEnd()()),2&n&&(e.\u0275\u0275advance(11),e.\u0275\u0275textInterpolate1(" ",a.totalClients," Deals"),e.\u0275\u0275advance(6),e.\u0275\u0275property("tabIndex",e.\u0275\u0275pureFunction0(3,_o)),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",a.clientFilteredList))},dependencies:[N.sg,N.O5,N.PC,Nt.lW,ue.dk,tt.Hw,q.KE,q.hX,q.R9,me.Nt,Wn.gM,G.xw,G.Wh,G.yH,Ct.Zl,N.rS],styles:[".main-header_colored[_ngcontent-%COMP%]{height:-moz-fit-content;height:fit-content;width:100%;position:fixed;z-index:1001;width:-webkit-fill-available;background:white;margin:inherit}.main-header_small[_ngcontent-%COMP%]{background:cadetblue;position:fixed;z-index:1001;width:30%}.card[_ngcontent-%COMP%]{border-radius:10px;box-shadow:0 4px 8px #0000001a;overflow:hidden}.mat-dialog-container[_ngcontent-%COMP%]{display:block;padding:5px;border-radius:4px;box-sizing:border-box;overflow:auto;outline:0;width:100%;height:100%;min-height:inherit;max-height:inherit}"]}),o})();var dt=k(99602),wr=k(44850),yo=k(67970);const vo=["videoElement"],Co=["canvasElement"];function ne(o,d){1&o&&(e.\u0275\u0275elementStart(0,"div",1)(1,"mat-card",2)(2,"mat-label"),e.\u0275\u0275text(3,"Client details not found."),e.\u0275\u0275elementEnd()()())}function te(o,d){1&o&&(e.\u0275\u0275elementStart(0,"mat-error",28),e.\u0275\u0275text(1," Enter Organization Name "),e.\u0275\u0275elementEnd())}function xo(o,d){1&o&&(e.\u0275\u0275elementStart(0,"mat-error",28),e.\u0275\u0275text(1," Enter Contact Person name "),e.\u0275\u0275elementEnd())}function bo(o,d){1&o&&(e.\u0275\u0275elementStart(0,"mat-error",28),e.\u0275\u0275text(1," Enter valid email address "),e.\u0275\u0275elementEnd())}function wo(o,d){1&o&&(e.\u0275\u0275elementStart(0,"mat-error",28),e.\u0275\u0275text(1," Enter contact number "),e.\u0275\u0275elementEnd())}function So(o,d){1&o&&(e.\u0275\u0275elementStart(0,"mat-error",28),e.\u0275\u0275text(1," Enter valid contact number "),e.\u0275\u0275elementEnd())}function Io(o,d){if(1&o){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",29)(1,"button",30),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(n);const l=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(l.enableEditClient())}),e.\u0275\u0275elementStart(2,"span"),e.\u0275\u0275text(3,"Edit"),e.\u0275\u0275elementEnd()()()}2&o&&(e.\u0275\u0275advance(1),e.\u0275\u0275property("tabIndex",7))}function Eo(o,d){1&o&&(e.\u0275\u0275elementStart(0,"mat-error",28),e.\u0275\u0275text(1," Enter address1 "),e.\u0275\u0275elementEnd())}function Sr(o,d){if(1&o&&(e.\u0275\u0275elementStart(0,"div",13)(1,"mat-form-field",31)(2,"mat-label"),e.\u0275\u0275text(3,"Address1"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(4,"input",32),e.\u0275\u0275template(5,Eo,2,0,"mat-error",12),e.\u0275\u0275elementEnd()()),2&o){const n=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(5),e.\u0275\u0275property("ngIf",null==n.editClientForm.controls.address1.errors?null:n.editClientForm.controls.address1.errors.required)}}function Mo(o,d){1&o&&(e.\u0275\u0275elementStart(0,"mat-error",28),e.\u0275\u0275text(1," Enter address2 "),e.\u0275\u0275elementEnd())}function Ce(o,d){if(1&o&&(e.\u0275\u0275elementStart(0,"div")(1,"mat-option",36),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd()()),2&o){const n=d.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275property("value",n.id),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(n.country)}}function Ir(o,d){1&o&&(e.\u0275\u0275elementStart(0,"mat-error",28),e.\u0275\u0275text(1," select country name "),e.\u0275\u0275elementEnd())}function In(o,d){if(1&o&&(e.\u0275\u0275elementStart(0,"div",13)(1,"mat-form-field",33)(2,"mat-label"),e.\u0275\u0275text(3,"Address2"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(4,"input",34),e.\u0275\u0275template(5,Mo,2,0,"mat-error",12),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"mat-form-field",33)(7,"mat-label"),e.\u0275\u0275text(8,"Country "),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"mat-select",35),e.\u0275\u0275elementContainerStart(10),e.\u0275\u0275template(11,Ce,3,2,"div",26),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(12,Ir,2,0,"mat-error",12),e.\u0275\u0275elementEnd()()),2&o){const n=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(5),e.\u0275\u0275property("ngIf",null==n.editClientForm.controls.address2.errors?null:n.editClientForm.controls.address2.errors.required),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngForOf",n.CountryDetails),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==n.editClientForm.controls.country.errors?null:n.editClientForm.controls.country.errors.required)}}function Er(o,d){if(1&o&&(e.\u0275\u0275elementStart(0,"div")(1,"mat-option",36),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd()()),2&o){const n=d.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275property("value",n.id),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(n.state)}}function Ai(o,d){1&o&&(e.\u0275\u0275elementStart(0,"mat-error",28),e.\u0275\u0275text(1," select state "),e.\u0275\u0275elementEnd())}function Le(o,d){if(1&o&&(e.\u0275\u0275elementStart(0,"div")(1,"mat-option",36),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd()()),2&o){const n=d.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275property("value",n.id),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(n.location)}}function Mr(o,d){1&o&&(e.\u0275\u0275elementStart(0,"mat-error",28),e.\u0275\u0275text(1," select location "),e.\u0275\u0275elementEnd())}function Dr(o,d){if(1&o&&(e.\u0275\u0275elementStart(0,"div",13)(1,"mat-form-field",14)(2,"mat-label"),e.\u0275\u0275text(3,"State"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"mat-select",37),e.\u0275\u0275elementContainerStart(5),e.\u0275\u0275template(6,Er,3,2,"div",26),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(7,Ai,2,0,"mat-error",12),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"mat-form-field",38)(9,"mat-label"),e.\u0275\u0275text(10,"City"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(11,"mat-select",39),e.\u0275\u0275elementContainerStart(12),e.\u0275\u0275template(13,Le,3,2,"div",26),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(14,Mr,2,0,"mat-error",12),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(15,"mat-form-field",18)(16,"mat-label"),e.\u0275\u0275text(17,"Pincode"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(18,"input",40),e.\u0275\u0275elementEnd()()),2&o){const n=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(6),e.\u0275\u0275property("ngForOf",n.stateDetails),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==n.editClientForm.controls.state.errors?null:n.editClientForm.controls.state.errors.required),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngForOf",n.cityDetails),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==n.editClientForm.controls.city.errors?null:n.editClientForm.controls.city.errors.required)}}function kr(o,d){1&o&&(e.\u0275\u0275elementStart(0,"mat-error",28),e.\u0275\u0275text(1," Please enter description. "),e.\u0275\u0275elementEnd())}function Fr(o,d){if(1&o&&(e.\u0275\u0275elementStart(0,"div",41)(1,"mat-form-field",42)(2,"mat-label"),e.\u0275\u0275text(3,"Description"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(4,"textarea",43),e.\u0275\u0275template(5,kr,2,0,"mat-error",12),e.\u0275\u0275elementEnd()()),2&o){const n=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(5),e.\u0275\u0275property("ngIf",null==n.editClientForm.controls.notes.errors?null:n.editClientForm.controls.notes.errors.required)}}function Lr(o,d){if(1&o){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",29)(1,"button",44),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(n);const l=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(l.editClient())}),e.\u0275\u0275elementStart(2,"span"),e.\u0275\u0275text(3,"Submit"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(4,"button",45),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(n);const l=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(l.closeEditClient())}),e.\u0275\u0275elementStart(5,"span"),e.\u0275\u0275text(6,"Cancel"),e.\u0275\u0275elementEnd()()()}if(2&o){const n=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(1),e.\u0275\u0275property("tabIndex",7)("disabled",!n.isEditClientEnabled),e.\u0275\u0275advance(3),e.\u0275\u0275property("tabIndex",8)("disabled",!n.isEditClientEnabled)}}function Ar(o,d){if(1&o){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"i",57),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(n);const l=e.\u0275\u0275nextContext(4);return e.\u0275\u0275resetView(l.openMapDialog())}),e.\u0275\u0275text(1," location_on "),e.\u0275\u0275elementEnd()}}function Ee(o,d){if(1&o&&(e.\u0275\u0275elementStart(0,"mat-label")(1,"div",52)(2,"span",53),e.\u0275\u0275text(3,"Location:"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(4,"div",54)(5,"span"),e.\u0275\u0275text(6),e.\u0275\u0275elementEnd()()()),2&o){const n=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275advance(6),e.\u0275\u0275textInterpolate(n.location)}}function Do(o,d){1&o&&e.\u0275\u0275element(0,"mat-divider")}function Ae(o,d){if(1&o&&(e.\u0275\u0275elementStart(0,"mat-label")(1,"div",52)(2,"span",53),e.\u0275\u0275text(3,"Notes:"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(4,"div",54)(5,"span"),e.\u0275\u0275text(6),e.\u0275\u0275elementEnd()()()),2&o){const n=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275advance(6),e.\u0275\u0275textInterpolate(n.notes)}}function ko(o,d){1&o&&e.\u0275\u0275element(0,"mat-divider")}function Tr(o,d){if(1&o&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&o){const n=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1("Created By ",n.empname,"")}}const xt=function(o){return{"background-color":o}};function $n(o,d){if(1&o&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"mat-card",46)(2,"div",47)(3,"mat-label"),e.\u0275\u0275text(4),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"mat-label"),e.\u0275\u0275text(6),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(7,"mat-label"),e.\u0275\u0275text(8),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(9,Ar,2,0,"i",48),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(10,"mat-divider"),e.\u0275\u0275elementStart(11,"div",49)(12,"div",50),e.\u0275\u0275template(13,Ee,7,1,"mat-label",51),e.\u0275\u0275template(14,Do,1,0,"mat-divider",51),e.\u0275\u0275template(15,Ae,7,1,"mat-label",51),e.\u0275\u0275template(16,ko,1,0,"mat-divider",51),e.\u0275\u0275elementStart(17,"mat-label")(18,"div",52)(19,"span",53),e.\u0275\u0275text(20,"Follow-up:"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(21,"div",54)(22,"span"),e.\u0275\u0275text(23),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(24,"div",55),e.\u0275\u0275element(25,"img",56),e.\u0275\u0275template(26,Tr,2,1,"span",51),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementContainerEnd()),2&o){const n=d.$implicit,a=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(1),e.\u0275\u0275property("ngStyle",e.\u0275\u0275pureFunction1(13,xt,n.created_by==a.userSession.id?"ghostwhite":"beige")),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate2("",a.getFormattedDateTime(n.created_on)," (",n.activity_type,")"),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(n.activity_status),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(n.client_status),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.lat&&n.lat.toString().length&&n.lng&&n.lng.toString().length),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngIf",n.location&&n.location.toString().length),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.location&&n.location.toString().length),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.notes&&n.notes.toString().length),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.notes&&n.notes.toString().length),e.\u0275\u0275advance(7),e.\u0275\u0275textInterpolate(a.getFormattedDateTime(n.next_follow_up_on)),e.\u0275\u0275advance(2),e.\u0275\u0275property("src",a.getImageDisplay(n.id),e.\u0275\u0275sanitizeUrl),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.empname)}}function Ti(o,d){if(1&o&&(e.\u0275\u0275elementStart(0,"div")(1,"mat-option",36),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd()()),2&o){const n=d.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275property("value",n.id),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(n.display_name)}}function re(o,d){1&o&&(e.\u0275\u0275elementStart(0,"mat-error",28),e.\u0275\u0275text(1," Please select activity type. "),e.\u0275\u0275elementEnd())}function bt(o,d){if(1&o){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"i",57),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(n);const l=e.\u0275\u0275nextContext(4);return e.\u0275\u0275resetView(l.openWebcamModalVisit())}),e.\u0275\u0275text(1," camera_alt "),e.\u0275\u0275elementEnd()}}function Oi(o,d){1&o&&(e.\u0275\u0275elementStart(0,"mat-label",72),e.\u0275\u0275text(1,"Image Uploaded"),e.\u0275\u0275elementEnd())}function Fo(o,d){1&o&&(e.\u0275\u0275elementStart(0,"mat-error",28),e.\u0275\u0275text(1," Please enter follow-up date. "),e.\u0275\u0275elementEnd())}function Ri(o,d){1&o&&(e.\u0275\u0275elementStart(0,"mat-error",28),e.\u0275\u0275text(1," Please select followup time. "),e.\u0275\u0275elementEnd())}function Lo(o,d){if(1&o&&(e.\u0275\u0275elementStart(0,"div")(1,"mat-option",36),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd()()),2&o){const n=d.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275property("value",n.id),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(n.display_name)}}function Ao(o,d){1&o&&(e.\u0275\u0275elementStart(0,"mat-error",28),e.\u0275\u0275text(1," Please select activity status. "),e.\u0275\u0275elementEnd())}function To(o,d){if(1&o&&(e.\u0275\u0275elementStart(0,"div")(1,"mat-option",36),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd()()),2&o){const n=d.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275property("value",n.id),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(n.display_name)}}function Or(o,d){1&o&&(e.\u0275\u0275elementStart(0,"mat-error",28),e.\u0275\u0275text(1," Please select status. "),e.\u0275\u0275elementEnd())}function Hn(o,d){1&o&&(e.\u0275\u0275elementStart(0,"mat-error",28),e.\u0275\u0275text(1," Please enter description. "),e.\u0275\u0275elementEnd())}function nn(o,d){if(1&o){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",58)(1,"form",7)(2,"div",59)(3,"mat-form-field",60)(4,"mat-label"),e.\u0275\u0275text(5,"Activity Type "),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"mat-select",61),e.\u0275\u0275elementContainerStart(7),e.\u0275\u0275template(8,Ti,3,2,"div",26),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(9,re,2,0,"mat-error",12),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(10,"button",62),e.\u0275\u0275template(11,bt,2,0,"i",48),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(12,Oi,2,0,"mat-label",63),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(13,"div",13)(14,"mat-form-field",64)(15,"mat-label"),e.\u0275\u0275text(16,"Follow-up Date"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(17,"input",65),e.\u0275\u0275listener("keypress",function(){return!1}),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(18,"mat-datepicker-toggle",66)(19,"mat-datepicker",null,67),e.\u0275\u0275template(21,Fo,2,0,"mat-error",12),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(22,"div",13)(23,"mat-form-field",64)(24,"mat-label"),e.\u0275\u0275text(25,"Follow-up Time "),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(26,"input",68),e.\u0275\u0275template(27,Ri,2,0,"mat-error",12),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(28,"div",13)(29,"mat-form-field",42)(30,"mat-label"),e.\u0275\u0275text(31,"Demo Status "),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(32,"mat-select",69),e.\u0275\u0275elementContainerStart(33),e.\u0275\u0275template(34,Lo,3,2,"div",26),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(35,Ao,2,0,"mat-error",12),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(36,"div",13)(37,"mat-form-field",42)(38,"mat-label"),e.\u0275\u0275text(39,"Status "),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(40,"mat-select",70),e.\u0275\u0275elementContainerStart(41),e.\u0275\u0275template(42,To,3,2,"div",26),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(43,Or,2,0,"mat-error",12),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(44,"div",13)(45,"mat-form-field",42)(46,"mat-label"),e.\u0275\u0275text(47,"Description"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(48,"textarea",71),e.\u0275\u0275template(49,Hn,2,0,"mat-error",12),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(50,"div",29)(51,"button",44),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(n);const l=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(l.addCrmActivity())}),e.\u0275\u0275elementStart(52,"span"),e.\u0275\u0275text(53,"Submit"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(54,"button",45),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(n);const l=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(l.closeCrmActivity())}),e.\u0275\u0275elementStart(55,"span"),e.\u0275\u0275text(56,"Cancel"),e.\u0275\u0275elementEnd()()()()()}if(2&o){const n=e.\u0275\u0275reference(20),a=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(1),e.\u0275\u0275property("formGroup",a.addActivity),e.\u0275\u0275advance(7),e.\u0275\u0275property("ngForOf",a.activityTypeList),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==a.addActivity.controls.activityTypeId.errors?null:a.addActivity.controls.activityTypeId.errors.required),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",!(a.activityImageDataUrl&&a.activityImageDataUrl.imageData)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",a.activityImageDataUrl&&a.activityImageDataUrl.imageData),e.\u0275\u0275advance(5),e.\u0275\u0275property("matDatepicker",n)("min",a.minDate),e.\u0275\u0275advance(1),e.\u0275\u0275property("for",n),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",null==a.addActivity.controls.nextFollowUpDate.errors?null:a.addActivity.controls.nextFollowUpDate.errors.required),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngIf",null==a.addActivity.controls.nextFollowUpTime.errors?null:a.addActivity.controls.nextFollowUpTime.errors.required),e.\u0275\u0275advance(7),e.\u0275\u0275property("ngForOf",a.activityStatusList),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==a.addActivity.controls.activityStatusId.errors?null:a.addActivity.controls.activityStatusId.errors.required),e.\u0275\u0275advance(7),e.\u0275\u0275property("ngForOf",a.clientStatusList),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==a.addActivity.controls.clientStatusId.errors?null:a.addActivity.controls.clientStatusId.errors.required),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngIf",null==a.addActivity.controls.activityNotes.errors?null:a.addActivity.controls.activityNotes.errors.required),e.\u0275\u0275advance(2),e.\u0275\u0275property("tabIndex",7)("disabled",a.isEditClientEnabled),e.\u0275\u0275advance(3),e.\u0275\u0275property("tabIndex",8)("disabled",a.isEditClientEnabled)}}function Oo(o,d){if(1&o){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",4)(1,"div",5)(2,"div",6)(3,"form",7)(4,"div",8)(5,"mat-form-field",9)(6,"mat-label"),e.\u0275\u0275text(7,"Organization Name"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"input",10),e.\u0275\u0275listener("keypress",function(l){e.\u0275\u0275restoreView(n);const u=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(u.alphabetKeyPress(l))}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"mat-hint",11),e.\u0275\u0275text(10),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(11,te,2,0,"mat-error",12),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(12,"div",13)(13,"mat-form-field",14)(14,"mat-label"),e.\u0275\u0275text(15,"Contact Person"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(16,"input",15),e.\u0275\u0275template(17,xo,2,0,"mat-error",12),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(18,"mat-form-field",16)(19,"mat-label"),e.\u0275\u0275text(20,"Email Id"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(21,"input",17),e.\u0275\u0275template(22,bo,2,0,"mat-error",12),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(23,"mat-form-field",18)(24,"mat-label"),e.\u0275\u0275text(25,"Mobile Number"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(26,"input",19),e.\u0275\u0275template(27,wo,2,0,"mat-error",12),e.\u0275\u0275template(28,So,2,0,"mat-error",12),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(29,Io,4,1,"div",20),e.\u0275\u0275template(30,Sr,6,1,"div",21),e.\u0275\u0275template(31,In,13,3,"div",21),e.\u0275\u0275template(32,Dr,19,4,"div",21),e.\u0275\u0275template(33,Fr,6,1,"div",22),e.\u0275\u0275template(34,Lr,7,4,"div",20),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(35,"div",23)(36,"div",24)(37,"mat-card-title",25),e.\u0275\u0275text(38," Activities "),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(39,$n,27,15,"ng-container",26),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275template(40,nn,57,19,"div",27),e.\u0275\u0275elementEnd()}if(2&o){const n=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(3),e.\u0275\u0275property("formGroup",n.editClientForm),e.\u0275\u0275advance(5),e.\u0275\u0275property("disabled",!n.isEditClientEnabled),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate2(" Created on : ",n.localdata&&n.localdata.created_on?n.getFormattedDateTime(n.localdata.created_on):""," by ",n.localdata&&n.localdata.emp_created?n.localdata.emp_created:""," "),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==n.editClientForm.controls.companyname.errors?null:n.editClientForm.controls.companyname.errors.required),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngIf",null==n.editClientForm.controls.contactpersonname.errors?null:n.editClientForm.controls.contactpersonname.errors.required),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngIf",null==n.editClientForm.controls.email.errors?null:n.editClientForm.controls.email.errors.pattern),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngIf",null==n.editClientForm.controls.contact.errors?null:n.editClientForm.controls.contact.errors.required),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==n.editClientForm.controls.contact.errors?null:n.editClientForm.controls.contact.errors.minlength),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!n.isEditClientEnabled),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.isEditClientEnabled),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.isEditClientEnabled),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.isEditClientEnabled),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.isEditClientEnabled),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.isEditClientEnabled),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngForOf",n.activitiesData),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.localdata)}}function Rr(o,d){if(1&o&&(e.\u0275\u0275elementStart(0,"div",1)(1,"mat-card"),e.\u0275\u0275template(2,Oo,41,17,"div",3),e.\u0275\u0275elementEnd()()),2&o){const n=e.\u0275\u0275nextContext();e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",n.localdata)}}const zr={parse:{dateInput:"LL"},display:{dateInput:"DD-MM-YYYY",monthYearLabel:"YYYY",dateA11yLabel:"LL",monthYearA11yLabel:"YYYY"}};let zi=(()=>{class o{constructor(n,a,l,u,h,b,M,O,A,H){this.locale=n,this.LMS=a,this.router=l,this.activeRoute=u,this.company=h,this.pipe=b,this.FormBuilder=M,this.spinner=O,this.dialog=A,this.crm=H,this.stopCamera=!0,this.isUpdate=!1,this.imageurls=[],this.stateDetails=[],this.cityDetails=[],this.CountryDetails=[],this.isEditClientEnabled=!1,this.addActivity=C.nJ,this.decryptPipe=new Sn.n,this.activityTypeList=[],this.activityStatusList=[],this.clientStatusList=[],this.selected_location={lat:0,lng:0},this.imageDataUrl={imageData:null,notes:null},this.activityImageDataUrl={imageData:null,notes:null},this.selectedActivityType="",this.activitiesData=[],this.editClientForm=this.FormBuilder.group({client_id:[{value:""},C.kI.required],companyname:[{value:"",disabled:!this.isEditClientEnabled},C.kI.required],contactpersonname:[{value:"",disabled:!this.isEditClientEnabled},C.kI.required],contact:[{value:"",disabled:!this.isEditClientEnabled},C.kI.required],email:[{value:"",disabled:!this.isEditClientEnabled},[C.kI.required,C.kI.email,C.kI.pattern("^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,4}$")]],address1:[{value:"",disabled:!this.isEditClientEnabled},C.kI.required],address2:[{value:"",disabled:!this.isEditClientEnabled}],city:[{value:"",disabled:!this.isEditClientEnabled},C.kI.required],state:[{value:"",disabled:!this.isEditClientEnabled},C.kI.required],pincode:[{value:"",disabled:!this.isEditClientEnabled},C.kI.required],country:[{value:"",disabled:!this.isEditClientEnabled},C.kI.required],notes:[{value:"",disabled:!this.isEditClientEnabled},C.kI.required],latitude:[{value:"",disabled:!this.isEditClientEnabled}],longitude:[{value:"",disabled:!this.isEditClientEnabled}]})}ngOnInit(){this.clientId=this.activeRoute.snapshot.params&&this.activeRoute.snapshot.params.clientId?this.decryptPipe.transform(this.activeRoute.snapshot.params.clientId):0,this.userSession=JSON.parse(sessionStorage.getItem("user")??""),this.minDate=new Date,this.getActivityTypeList(),this.getActivityStatusList(),this.getClientStatusList(),this.getActivitiesWithTrackingDetails(),this.formattedDate=this.pipe.transform(this.minDate,"yyyy-MM-dd"),this.formattedTime=this.minDate.toLocaleTimeString(void 0,{hour12:!1,hour:"2-digit",minute:"2-digit",second:"2-digit"}),this.timeStampVal=this.minDate.getTime(),this.pipe=new N.uU(this.locale),this.userSession=JSON.parse(sessionStorage.getItem("user")??""),this.currentTime=this.formatTime(new Date),this.addActivity=this.FormBuilder.group({activityTypeId:[{value:"",disabled:this.isEditClientEnabled},C.kI.required],activityStatusId:[{value:"",disabled:this.isEditClientEnabled},C.kI.required],activityNotes:[{value:"",disabled:this.isEditClientEnabled},C.kI.required],nextFollowUpDate:[{value:this.formattedDate,disabled:this.isEditClientEnabled},C.kI.required],nextFollowUpTime:[{value:"",disabled:this.isEditClientEnabled},C.kI.required],clientStatusId:[{value:"",disabled:this.isEditClientEnabled},C.kI.required],lat:[{value:"",disabled:this.isEditClientEnabled},C.kI.required],lng:[{value:"",disabled:this.isEditClientEnabled},C.kI.required]}),this.clientId&&this.userSession.id&&this.getClientData(),this.editClientForm.get("country")?.valueChanges.subscribe(n=>{this.stateDetails=[],this.company.getStatesc(n).subscribe(a=>{this.stateDetails=a.data})}),this.editClientForm.get("state")?.valueChanges.subscribe(n=>{this.cityDetails=[],this.company.getCities(n).subscribe(a=>{this.cityDetails=a.data})}),this.addActivity.get("activityTypeId").valueChanges.subscribe(n=>{this.activityTypeList.forEach(a=>{n===a.id&&(this.selectedActivityType=a.code)}),this.getClientLocationFromMap()})}enableEditClient(){this.isEditClientEnabled=!0,this.isEditClientEnabled&&(this.editClientForm.get("companyname")?.enable(),this.editClientForm.get("contactpersonname")?.enable(),this.editClientForm.get("contact")?.enable(),this.editClientForm.get("email")?.enable(),this.editClientForm.get("address1")?.enable(),this.editClientForm.get("address2")?.enable(),this.editClientForm.get("city")?.enable(),this.editClientForm.get("state")?.enable(),this.editClientForm.get("country")?.enable(),this.editClientForm.get("notes")?.enable(),this.editClientForm.get("pincode")?.enable(),this.editClientForm.get("latitude")?.enable(),this.editClientForm.get("longitude")?.enable())}getActivitiesWithTrackingDetails(){this.activitiesData=[],this.crm.getCrmActivitiesWithTrackingDetails({manager_id:this.userSession.id,empid:this.userSession.id,client_id:this.clientId}).subscribe(n=>{this.activitiesData=n.data,this.activitiesData.forEach(a=>{this.getImageData(a.id,a.created_by)})})}getClientData(){var n=this;this.crm.getCrmClientDataBySelection({clientId:this.clientId,empId:this.userSession.id}).subscribe(function(){var a=(0,ae.Z)(function*(l){l&&l.data&&l.data[0]&&(n.localdata=l.data[0],n.getCountry(n.localdata.country),n.editClientForm.patchValue({client_id:n.localdata.client_id,companyname:n.localdata.client_name,contactpersonname:n.localdata.contact_person_name,contact:n.localdata.contact,email:n.localdata.email.toLowerCase(),address1:n.localdata.address1,address2:n.localdata.address2,city:n.localdata.city,state:n.localdata.state,pincode:n.localdata.pincode,country:n.localdata.country,notes:n.localdata.notes,latitude:n.localdata.lat,longitude:n.localdata.lng}))});return function(l){return a.apply(this,arguments)}}())}getActivityTypeList(){this.crm.getCrmActivityTypeValues().subscribe(n=>{this.activityTypeList=n.status?n.data:[]})}getActivityStatusList(){this.crm.getCrmActivityStatusValues().subscribe(n=>{this.activityStatusList=n.status?n.data:[]})}getClientStatusList(){this.crm.getCrmClientStatusValues().subscribe(n=>{this.clientStatusList=n.status?n.data:[]})}addActivityFormBuild(){this.addActivity.reset(),this.addActivity.get("activityTypeId").reset(),this.addActivity.get("activityTypeId").setErrors(null),this.addActivity.get("activityStatusId").reset(),this.addActivity.get("activityStatusId").setErrors(null),this.addActivity.get("activityNotes").reset(),this.addActivity.get("activityNotes").setErrors(null),this.addActivity.get("nextFollowUpDate").reset(),this.addActivity.get("nextFollowUpDate").setErrors(null),this.addActivity.get("nextFollowUpTime").reset(),this.addActivity.get("nextFollowUpTime").setErrors(null),this.addActivity.get("clientStatusId").reset(),this.addActivity.get("clientStatusId").setErrors(null),this.addActivity.get("lat").reset(),this.addActivity.get("lat").setErrors(null),this.addActivity.get("lng").reset(),this.addActivity.get("lng").setErrors(null)}validateAcitivty(){return"VISIT"===this.selectedActivityType&&!(this.activityImageDataUrl&&this.activityImageDataUrl.imageData)}addCrmActivity(){if(this.addActivity.controls.lat.setValue(this.selected_location.lat),this.addActivity.controls.lng.setValue(this.selected_location.lng),this.validateAcitivty())this.dialog.open(le.B,{position:{top:"70px"},disableClose:!0,data:"Please capture photo."});else if(this.addActivity.valid){let n=this.pipe.transform(this.addActivity.controls.nextFollowUpDate.value,"yyyy-MM-dd")+" "+this.formatTime(this.addActivity.controls.nextFollowUpTime.value),a={clientId:this.clientId,productId:0,activityTypeId:this.addActivity.controls.activityTypeId.value,activityStatusId:this.addActivity.controls.activityStatusId.value,activityNotes:this.addActivity.controls.activityNotes.value,nextFollowUpDate:n,clientStatusId:this.addActivity.controls.clientStatusId.value,createdBy:this.userSession.id,lat:this.addActivity.controls.lat.value,lng:this.addActivity.controls.lng.value,createdOn:this.pipe.transform(this.minDate,"yyyy-MM-dd hh:mm:ss")},l="Data not saved successfully";this.crm.setCrmActivityDataWithTracking(a).subscribe(u=>{if(u&&u.status){this.addActivityFormBuild();let h=u.data[0].activity_id;l="Data saved successfully",this.activityImageDataUrl.imageData?this.crm.getFilepathsMaster(12).subscribe(b=>{b&&b.status?this.crm.setCrmFilesMaster({id:null,employeeId:this.userSession.id,filecategory:"CRM_VISITS",moduleId:12,documentnumber:"",fileName:"VISIT"+this.formattedDate+"-"+this.timeStampVal+".png",modulecode:b.data[0].module_code,requestId:h??0,status:"Submitted"}).subscribe(O=>{if(O&&O.status){const A=new FormData,H=this.activityImageDataUrl.imageData?this.dataURLtoBlob(this.activityImageDataUrl.imageData):null;H?(A.append("info",JSON.stringify(O.data[0])),A.append("file",H,O.data[0].filename),this.crm.setCapturedImageForTracking(A).subscribe(ee=>{this.spinner.hide(),ee&&ee.status?(this.getActivitiesWithTrackingDetails(),l+="- uploaded.",this.activityImageDataUrl={imageData:null,notes:null}):(l+="- not uploaded.",this.addActivity.reset())})):(l+="- image capture failed.",this.addActivityFormBuild(),this.getActivitiesWithTrackingDetails())}else l+="- image capture failed.",this.getActivitiesWithTrackingDetails(),this.addActivityFormBuild()}):l+="- image capture failed.",this.addActivityFormBuild(),this.getActivitiesWithTrackingDetails()}):(this.addActivityFormBuild(),this.getActivitiesWithTrackingDetails())}this.dialog.open(le.B,{position:{top:"70px"},disableClose:!0,data:l})})}}closeCrmActivity(){this.activityImageDataUrl={imageData:null,notes:null},this.addActivity.reset()}getCountry(n=null){this.crm.getCountry(null,1,10).subscribe(a=>{this.CountryDetails=a.data,n&&this.editClientForm.patchValue({country:n})})}getStatesc(n,a=null){this.company.getStatesc(n).subscribe(l=>{this.stateDetails=l.data,a&&this.editClientForm.patchValue({state:a})})}getCities(n,a=null){this.company.getCities(n).subscribe(l=>{this.cityDetails=l.data,a&&this.editClientForm.patchValue({state:a})})}numberOnly(n){const a=n.which?n.which:n.keyCode;return!(a>31&&(a<48||a>57))}alphabetKeyPress(n){let l=String.fromCharCode(n.charCode);8!=n.keyCode&&!/[a-zA-Z ]/.test(l)&&n.preventDefault()}getClientLocationFromMap(){navigator.geolocation.getCurrentPosition(n=>{this.selected_location={lat:n.coords.latitude,lng:n.coords.longitude}},n=>console.log(n))}closeEditClient(){this.isEditClientEnabled=!1,this.isEditClientEnabled||(this.editClientForm.get("companyname")?.disable(),this.editClientForm.get("contactpersonname")?.disable(),this.editClientForm.get("contact")?.disable(),this.editClientForm.get("email")?.disable(),this.editClientForm.get("address1")?.disable(),this.editClientForm.get("address2")?.disable(),this.editClientForm.get("city")?.disable(),this.editClientForm.get("state")?.disable(),this.editClientForm.get("country")?.disable(),this.editClientForm.get("notes")?.disable(),this.editClientForm.get("pincode")?.disable(),this.editClientForm.get("latitude")?.disable(),this.editClientForm.get("longitude")?.disable()),this.getClientData()}editClient(){if(!this.editClientForm.valid)return;let n={client_id:this.clientId,companyname:this.editClientForm.controls.companyname.value,contact_person_name:this.editClientForm.controls.contactpersonname.value,contact:this.editClientForm.controls.contact.value,email:this.editClientForm.controls.email.value.toLowerCase(),address1:this.editClientForm.controls.address1.value,address2:this.editClientForm.controls.address2.value?this.editClientForm.controls.address2.value:"",country:this.editClientForm.controls.country.value,state:this.editClientForm.controls.state.value,city:this.editClientForm.controls.city.value,pincode:this.editClientForm.controls.pincode.value,createdby:this.userSession.id,latitude:this.editClientForm.controls.latitude.value,longitude:this.editClientForm.controls.longitude.value,notes:this.editClientForm.controls.notes.value,created_date:this.pipe.transform(this.minDate,"yyyy-MM-dd hh:mm:ss"),is_captured:this.imageDataUrl&&this.imageDataUrl.imageData?1:0},a="Data not saved successfully";this.crm.setCrmClientInformation(n).subscribe(l=>{if(l&&l.status){let u=l.data[0].client_id;a=l.data[0].resultMsg,this.imageDataUrl.imageData?this.crm.getFilepathsMaster(12).subscribe(h=>{if(h&&h.status){let b={id:null,employeeId:this.userSession.id,filecategory:"CRM_CLIENT",moduleId:12,documentnumber:"",fileName:n.companyname.toString().replace(" ","")+this.formattedDate+"-"+this.timeStampVal+".png",modulecode:h.data[0].module_code,requestId:u??0,status:"Submitted"};this.crm.setCrmFilesMaster(b).subscribe(M=>{if(M&&M.status){const O=new FormData,A=this.imageDataUrl.imageData?this.dataURLtoBlob(this.imageDataUrl.imageData):null;A?(O.append("info",JSON.stringify(M.data[0])),O.append("file",A,M.data[0].filename),this.crm.setCapturedImageForTracking(O).subscribe(H=>{this.spinner.hide(),H&&H.status?(this.editClientFormReset(),a+="- uploaded.",this.imageDataUrl={imageData:null,notes:null}):(a+="- not uploaded.",this.editClientFormReset())})):(a+="- image capture failed.",this.editClientFormReset())}else a+="- image capture failed.",this.editClientFormReset()})}else a+="- image capture failed.",this.editClientFormReset()}):this.editClientFormReset()}this.dialog.open(le.B,{position:{top:"70px"},disableClose:!0,data:a})})}editClientFormReset(){this.editClientForm.reset(),this.editClientForm.get("companyname").reset(),this.editClientForm.get("companyname").setErrors(null),this.editClientForm.get("contactpersonname").reset(),this.editClientForm.get("contactpersonname").setErrors(null),this.editClientForm.get("contact").reset(),this.editClientForm.get("contact").setErrors(null),this.editClientForm.get("email").reset(),this.editClientForm.get("email").setErrors(null),this.editClientForm.get("address1").reset(),this.editClientForm.get("address1").setErrors(null),this.editClientForm.get("address2").reset(),this.editClientForm.get("address2").setErrors(null),this.editClientForm.get("country").reset(),this.editClientForm.get("country").setErrors(null),this.editClientForm.get("state").reset(),this.editClientForm.get("state").setErrors(null),this.editClientForm.get("city").reset(),this.editClientForm.get("city").setErrors(null),this.editClientForm.get("pincode").reset(),this.editClientForm.get("pincode").setErrors(null),this.editClientForm.get("latitude").reset(),this.editClientForm.get("latitude").setErrors(null),this.editClientForm.get("longitude").reset(),this.editClientForm.get("longitude").setErrors(null),this.editClientForm.get("notes").reset(),this.editClientForm.get("notes").setErrors(null),this.closeEditClient()}openWebcamModalVisit(){var n=this;return(0,ae.Z)(function*(){n.imageDataUrl.imageData=null,n.imageDataUrl.notes=null,yield n.dialog.open(Xt,{width:"350px",disableClose:!1}).afterClosed().subscribe(l=>{n.activityImageDataUrl=l})})()}openWebcamModalClient(){var n=this;return(0,ae.Z)(function*(){n.imageDataUrl={imageData:null,notes:null},yield n.dialog.open(Xt,{width:"350px",disableClose:!1}).afterClosed().subscribe(l=>{n.imageDataUrl=l})})()}showSpinner(){this.spinner.show(),setTimeout(()=>{this.spinner.hide()},5e3)}dataURLtoBlob(n){const a=n.split(","),l=a[0].match(/:(.*?);/);if(l){const u=l[1],h=atob(a[1]);let b=h.length;const M=new Uint8Array(b);for(;b--;)M[b]=h.charCodeAt(b);return new Blob([M],{type:u})}return new Blob}formatTime(n){const a=this.padZero(n.getHours()),l=this.padZero(n.getMinutes());return this.padZero(n.getSeconds()),`${a}:${l}`}padZero(n){return n<10?`0${n}`:`${n}`}openMapDialog(){}getImageDisplay(n){var a="";return this.imageurls.forEach(l=>{l.requestId===n&&(a=`${l.img}`)}),a}getFormattedDateTime(n=null){return n=n?new Date(n):new Date,this.pipe.transform(n,"yyyy-MM-dd")+" "+n.toLocaleTimeString(this.locale,{hour12:!0,hour:"2-digit",minute:"2-digit"})}getImageData(n,a){this.crm.getCrmFilesMaster({employeeId:a,candidateId:null,moduleId:12,filecategory:"CRM_VISITS",requestId:n,status:"Submitted"}).subscribe(u=>{u&&u.status&&u.data[0]&&(this.imageInfo=JSON.stringify(u.data[0]),u.data[0].employeeId=0,this.LMS.getProfileImage(u.data[0]).subscribe(b=>{if(b.success){const O=new Uint8Array(b.image.data).reduce((H,ee)=>H+String.fromCharCode(ee),"");let A=btoa(O);this.imageurls.push({requestId:n,img:"data:image/png;base64,"+A})}}))})}}return o.\u0275fac=function(n){return new(n||o)(e.\u0275\u0275directiveInject(e.LOCALE_ID),e.\u0275\u0275directiveInject(en.t),e.\u0275\u0275directiveInject(f.F0),e.\u0275\u0275directiveInject(f.gz),e.\u0275\u0275directiveInject(zt.D),e.\u0275\u0275directiveInject(N.uU),e.\u0275\u0275directiveInject(C.QS),e.\u0275\u0275directiveInject(et.t2),e.\u0275\u0275directiveInject(de.uw),e.\u0275\u0275directiveInject(we))},o.\u0275cmp=e.\u0275\u0275defineComponent({type:o,selectors:[["app-crm-client-edit-and-update"]],viewQuery:function(n,a){if(1&n&&(e.\u0275\u0275viewQuery(Tt,5),e.\u0275\u0275viewQuery(ie,5),e.\u0275\u0275viewQuery(vo,5),e.\u0275\u0275viewQuery(Co,5)),2&n){let l;e.\u0275\u0275queryRefresh(l=e.\u0275\u0275loadQuery())&&(a.infoWindow=l.first),e.\u0275\u0275queryRefresh(l=e.\u0275\u0275loadQuery())&&(a.googleMap=l.first),e.\u0275\u0275queryRefresh(l=e.\u0275\u0275loadQuery())&&(a.videoElement=l.first),e.\u0275\u0275queryRefresh(l=e.\u0275\u0275loadQuery())&&(a.canvasElement=l.first)}},features:[e.\u0275\u0275ProvidersFeature([{provide:ve._A,useClass:Ei.t7,deps:[ve.Ad]},{provide:ve.sG,useValue:zr}])],decls:2,vars:2,consts:[["fxLayout","column","class","first-col","fxFlex","100","style","padding-top: 2%;font: small-caption;",4,"ngIf"],["fxLayout","column","fxFlex","100",1,"first-col",2,"padding-top","2%","font","small-caption"],[2,"align-items","center"],["fxLayout","row","fxFlex.xs","100","fxFlex","100","class","mx-2 my-2","fxLayoutAlign.xs","center",4,"ngIf"],["fxLayout","row","fxFlex.xs","100","fxFlex","100","fxLayoutAlign.xs","center",1,"mx-2","my-2"],["fxLayout","column","fxFlex.xs","100","fxFlex","65","fxLayoutAlign","space-between",2,"padding-right","2%"],["fxLayout","column","fxFlex","100","fxLayoutAlign.xs","center"],["autocomplete","off",2,"padding-top","1%",3,"formGroup"],["fxLayout","row","fxLayout.lt-lg","row wrap","fxLayout.xs","column","fxLayoutAlign.xs","center",2,"align-items","baseline"],["fxFlex","100","fxFlex.lt-lg","100","appearance","outline",1,"mx-2","my-2"],["matInput","","formControlName","companyname","placeholder","",1,"title",3,"disabled","keypress"],["align","end"],["class","con-error",4,"ngIf"],["fxLayout","row","fxLayout.lt-lg","column","fxLayout.xs","column","fxLayoutAlign.xs","center"],["fxFlex.xs","100","fxFlex","36","appearance","outline",1,"mx-2","my-2"],["matInput","","maxlength","50","placeholder","","formControlName","contactpersonname","required",""],["fxFlex.xs","100","fxFlex","36","appearance","outline"],["matInput","","formControlName","email","maxlength","100","placeholder","","required",""],["fxFlex.xs","100","fxFlex","23","appearance","outline",1,"mx-2","my-2"],["matInput","","formControlName","contact","minlength","10","onlyNumber","","required","","placeholder",""],["style","align-self: center;    text-align: center;",4,"ngIf"],["fxLayout","row","fxLayout.lt-lg","column","fxLayout.xs","column","fxLayoutAlign.xs","center",4,"ngIf"],["fxLayout","row","fxLayout.lt-lg","row wrap","fxLayout.xs","column","fxLayoutAlign.xs","center",4,"ngIf"],["fxLayout","row","fxFlex","100","fxLayoutAlign.xs","center",2,"padding-top","2%"],["fxLayout","row wrap",1,"tableP"],[1,"title"],[4,"ngFor","ngForOf"],["fxFlex.xs","100","fxFlex","35","fxLayoutAlign.xs","center","style","padding-right: 1%;",4,"ngIf"],[1,"con-error"],[2,"align-self","center","text-align","center"],["type","button",1,"btn","btn-primary","mr-2","mb-2",3,"tabIndex","click"],["fxFlex.xs","100","fxFlex","100","appearance","outline",1,"mx-2","my-2"],["matInput","","formControlName","address1","placeholder",""],["fxFlex.xs","100","fxFlex","50","appearance","outline",1,"mx-2","my-2"],["matInput","","formControlName","address2","placeholder",""],["formControlName","country","required",""],[3,"value"],["required","","formControlName","state"],["fxFlex.xs","100","fxFlex","36","appearance","outline",1,""],["required","","formControlName","city"],["matInput","","formControlName","pincode","maxlength","50","placeholder",""],["fxLayout","row","fxLayout.lt-lg","row wrap","fxLayout.xs","column","fxLayoutAlign.xs","center"],["fxFlex","100","fxFlex.xs","100","fxFlex.lt-lg","100","appearance","outline",1,"mx-2","my-2"],["matInput","","formControlName","notes","required","","matInput","","placeholder","","maxlength","500"],["type","submit",1,"btn","btn-primary","mr-2","mb-2",3,"tabIndex","disabled","click"],["type","reset",1,"btn","btn-danger","mr-2","mb-2",3,"tabIndex","disabled","click"],[1,"outline",2,"width","100%","margin","10px","padding","1%","height","auto",3,"ngStyle"],["fxLayout","row","fxLayoutAlign","space-between",2,"padding","5px","font-weight","600"],["class","material-icons",3,"click",4,"ngIf"],["fxLayout","row"],["fxLayout","column","fxFlex","65",2,"padding","5px"],[4,"ngIf"],["fxLayout","row","fxFlex","25"],[2,"font-weight","500"],["fxLayout","row","fxFlex","75",2,"padding-left","10px"],["fxLayout","column","fxFlex","35",2,"padding","5px","align-items","flex-end","align-self","self-end"],[1,"img-fluid","custom-image",2,"width","50%",3,"src"],[1,"material-icons",3,"click"],["fxFlex.xs","100","fxFlex","35","fxLayoutAlign.xs","center",2,"padding-right","1%"],["fxLayout","row","fxLayout.lt-lg","column","fxLayout.xs","column","fxLayoutAlign.xs","center",2,"align-items","baseline"],["fxFlex","90","fxFlex.xs","100","fxFlex.lt-lg","100","appearance","outline",1,"mx-2","my-2"],["formControlName","activityTypeId","required",""],["type","button",1,"btn",2,"background-color","unset"],["style","font-variant: all-petite-caps;align-self: start;",4,"ngIf"],["fxFlex","100","appearance","outline",1,"mx-2","my-2"],["matInput","","placeholder","","formControlName","nextFollowUpDate","required","",3,"matDatepicker","min","keypress"],["matSuffix","",1,"datepicker",3,"for"],["nextFollowUpDate",""],["matInput","","matTimepicker","","placeholder","","formControlName","nextFollowUpTime"],["formControlName","activityStatusId","required",""],["formControlName","clientStatusId","required",""],["matInput","","formControlName","activityNotes","required","","matInput","","placeholder","","maxlength","500",2,"height","75px"],[2,"font-variant","all-petite-caps","align-self","start"]],template:function(n,a){1&n&&(e.\u0275\u0275template(0,ne,4,0,"div",0),e.\u0275\u0275template(1,Rr,3,1,"div",0)),2&n&&(e.\u0275\u0275property("ngIf",!a.localdata),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",a.localdata))},dependencies:[N.sg,N.O5,N.PC,ve.ey,ue.a8,ue.n5,dt.Mq,dt.hl,dt.nW,wr.d,q.TO,q.KE,q.bx,q.hX,q.R9,me.Nt,Pt.gD,yo.J,C._Y,C.Fj,C.JJ,C.JL,C.Q7,C.wO,C.nD,C.sg,C.u,G.xw,G.Wh,G.yH,Ct.Zl],styles:[".circular-edit-button[_ngcontent-%COMP%]{border-radius:30%}.tableP[_ngcontent-%COMP%]{padding:1%}"]}),o})();var T=k(53626),wt=k(98739),mt=k(96308),Qn=k(82209),rn=k(71948);function Ro(o,d){1&o&&(e.\u0275\u0275elementStart(0,"mat-error",17),e.\u0275\u0275text(1," Please enter demo status. "),e.\u0275\u0275elementEnd())}function Pr(o,d){if(1&o){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",9)(1,"div",10)(2,"mat-form-field",11)(3,"mat-label"),e.\u0275\u0275text(4,"Masters For Demo Status "),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(5,"input",12),e.\u0275\u0275template(6,Ro,2,0,"mat-error",13),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(7,"div",14)(8,"button",15),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(n);const l=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(l.AddData())}),e.\u0275\u0275elementStart(9,"span"),e.\u0275\u0275text(10,"Submit"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(11,"button",16),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(n);const l=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(l.cancel())}),e.\u0275\u0275elementStart(12,"span"),e.\u0275\u0275text(13,"Cancel"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275element(14,"br"),e.\u0275\u0275elementEnd()()}if(2&o){const n=e.\u0275\u0275nextContext();e.\u0275\u0275advance(6),e.\u0275\u0275property("ngIf",(null==n.demostatusForm.controls.statusdata.errors?null:n.demostatusForm.controls.statusdata.errors.required)||(null==n.demostatusForm.controls.statusdata.errors?null:n.demostatusForm.controls.statusdata.errors.whitespace))}}function Me(o,d){1&o&&(e.\u0275\u0275elementStart(0,"th",40),e.\u0275\u0275text(1,"S.No"),e.\u0275\u0275elementEnd())}function Pi(o,d){if(1&o&&(e.\u0275\u0275elementStart(0,"td",41),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&o){const n=d.index,a=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",n+1+a.paginator.pageIndex*a.paginator.pageSize," ")}}function En(o,d){1&o&&(e.\u0275\u0275elementStart(0,"th",42),e.\u0275\u0275text(1," Name of the Section "),e.\u0275\u0275elementEnd())}function Nr(o,d){if(1&o&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&o){const n=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1("",n.display_name,"\xa0")}}function Ur(o,d){1&o&&(e.\u0275\u0275elementStart(0,"mat-form-field",45),e.\u0275\u0275element(1,"input",46),e.\u0275\u0275elementEnd())}function zo(o,d){if(1&o&&(e.\u0275\u0275elementStart(0,"td",41),e.\u0275\u0275template(1,Nr,2,1,"span",43),e.\u0275\u0275template(2,Ur,2,0,"mat-form-field",44),e.\u0275\u0275elementEnd()),2&o){const n=d.$implicit,a=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",a.enable!=n.id),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",a.enable===n.id)}}function Po(o,d){1&o&&(e.\u0275\u0275elementStart(0,"th",47),e.\u0275\u0275text(1," Status "),e.\u0275\u0275elementEnd())}function No(o,d){if(1&o){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"mat-radio-button",50),e.\u0275\u0275listener("change",function(){const u=e.\u0275\u0275restoreView(n).$implicit,h=e.\u0275\u0275nextContext().$implicit,b=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(b.status(u.id,h.id,h.display_name))}),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()}if(2&o){const n=d.$implicit,a=e.\u0275\u0275nextContext().$implicit,l=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("disabled",l.disableStatus(a))("checked",n.id==a.is_active)("value",n.id),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(n.name)}}function Uo(o,d){if(1&o&&(e.\u0275\u0275elementStart(0,"td",48)(1,"mat-radio-group"),e.\u0275\u0275template(2,No,2,4,"mat-radio-button",49),e.\u0275\u0275elementEnd()()),2&o){const n=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",n.arrayValue)}}function Vo(o,d){1&o&&e.\u0275\u0275element(0,"th",40)}function an(o,d){if(1&o){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",52),e.\u0275\u0275listener("keyup.enter",function(l){e.\u0275\u0275restoreView(n);const u=e.\u0275\u0275nextContext().$implicit,h=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(h.edit(l,u))}),e.\u0275\u0275elementStart(1,"mat-icon",53),e.\u0275\u0275listener("click",function(l){e.\u0275\u0275restoreView(n);const u=e.\u0275\u0275nextContext().$implicit,h=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(h.edit(l,u))}),e.\u0275\u0275text(2,"edit"),e.\u0275\u0275elementEnd()()}}function Bo(o,d){if(1&o){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",52),e.\u0275\u0275listener("keyup.enter",function(l){e.\u0275\u0275restoreView(n);const u=e.\u0275\u0275nextContext().$implicit,h=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(h.delete(l,u.id))}),e.\u0275\u0275elementStart(1,"mat-icon",54),e.\u0275\u0275listener("click",function(l){e.\u0275\u0275restoreView(n);const u=e.\u0275\u0275nextContext().$implicit,h=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(h.delete(l,u.id))}),e.\u0275\u0275text(2,"delete"),e.\u0275\u0275elementEnd()()}}function Wo(o,d){if(1&o){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",52),e.\u0275\u0275listener("keyup.enter",function(l){e.\u0275\u0275restoreView(n);const u=e.\u0275\u0275nextContext().$implicit,h=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(h.save(l,u,h.demostatusForm.controls.statusdata.value))}),e.\u0275\u0275elementStart(1,"mat-icon",55),e.\u0275\u0275listener("click",function(l){e.\u0275\u0275restoreView(n);const u=e.\u0275\u0275nextContext().$implicit,h=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(h.save(l,u,h.demostatusForm.controls.statusdata.value))}),e.\u0275\u0275text(2,"save"),e.\u0275\u0275elementEnd()()}}function Ni(o,d){if(1&o){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",52),e.\u0275\u0275listener("keyup.enter",function(l){e.\u0275\u0275restoreView(n);const u=e.\u0275\u0275nextContext().$implicit,h=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(h.canceledit(l,u.id))}),e.\u0275\u0275elementStart(1,"mat-icon",56),e.\u0275\u0275listener("click",function(l){e.\u0275\u0275restoreView(n);const u=e.\u0275\u0275nextContext().$implicit,h=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(h.canceledit(l,u.id))}),e.\u0275\u0275text(2,"cancel"),e.\u0275\u0275elementEnd()()}}function Vr(o,d){if(1&o&&(e.\u0275\u0275elementStart(0,"td",41),e.\u0275\u0275template(1,an,3,0,"button",51),e.\u0275\u0275template(2,Bo,3,0,"button",51),e.\u0275\u0275template(3,Wo,3,0,"button",51),e.\u0275\u0275template(4,Ni,3,0,"button",51),e.\u0275\u0275elementEnd()),2&o){const n=d.$implicit,a=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!n.is_default&&a.isEdit),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!n.is_default&&a.isDelete),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",a.enable==n.id&&a.isSave),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",a.enable==n.id)}}function St(o,d){1&o&&e.\u0275\u0275element(0,"tr",57)}function Yn(o,d){1&o&&e.\u0275\u0275element(0,"tr",58)}function Zo(o,d){1&o&&(e.\u0275\u0275elementStart(0,"tr",59)(1,"td",60),e.\u0275\u0275text(2,"No data found"),e.\u0275\u0275elementEnd()())}const qo=function(){return[5,10,20]};function Go(o,d){if(1&o){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",18)(1,"div",19)(2,"span",20)(3,"mat-form-field",21)(4,"mat-icon",22),e.\u0275\u0275text(5,"search"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"mat-label"),e.\u0275\u0275text(7,"Search"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"input",23),e.\u0275\u0275listener("keyup",function(l){e.\u0275\u0275restoreView(n);const u=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(u.applyFilter(l))}),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(9,"form",6)(10,"div",24)(11,"div",25)(12,"table",26),e.\u0275\u0275elementContainerStart(13,27),e.\u0275\u0275template(14,Me,2,0,"th",28),e.\u0275\u0275template(15,Pi,2,1,"td",29),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(16,30),e.\u0275\u0275template(17,En,2,0,"th",31),e.\u0275\u0275template(18,zo,3,2,"td",29),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(19,32),e.\u0275\u0275template(20,Po,2,0,"th",33),e.\u0275\u0275template(21,Uo,3,1,"td",34),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(22,35),e.\u0275\u0275template(23,Vo,1,0,"th",28),e.\u0275\u0275template(24,Vr,5,4,"td",29),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275template(25,St,1,0,"tr",36),e.\u0275\u0275template(26,Yn,1,0,"tr",37),e.\u0275\u0275template(27,Zo,3,0,"tr",38),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(28,"mat-paginator",39),e.\u0275\u0275elementEnd()()()()}if(2&o){const n=e.\u0275\u0275nextContext();e.\u0275\u0275advance(9),e.\u0275\u0275property("formGroup",n.demostatusForm),e.\u0275\u0275advance(3),e.\u0275\u0275property("dataSource",n.dataSource),e.\u0275\u0275advance(13),e.\u0275\u0275property("matHeaderRowDef",n.displayedColumns),e.\u0275\u0275advance(1),e.\u0275\u0275property("matRowDefColumns",n.displayedColumns),e.\u0275\u0275advance(2),e.\u0275\u0275property("pageSizeOptions",n.pageLoading?e.\u0275\u0275pureFunction0(5,qo):n.getPageSizes())}}let on=(()=>{class o{constructor(n,a,l,u,h){this.crmService=n,this.Company=a,this.formBuilder=l,this.router=u,this.dialog=h,this.pipe=new N.uU("en-US"),this.issubmitted=!1,this.isvalid=!1,this.isView=!1,this.isAdd=!1,this.isdata=!0,this.isEdit=!0,this.isSave=!1,this.isDelete=!0,this.enable=null,this.valid=!1,this.activitystatus=null,this.statusData=[],this.todayDate=new Date,this.displayedColumns=["sno","demoStatus","status","Action"],this.dataSource=[],this.pageLoading=!0,this.companyDBName=Cn.N.dbName,this.messagesDataList=[],this.demoStatusVal=[]}ngOnInit(){this.getstatuslist(),this.userSession=JSON.parse(sessionStorage.getItem("user")||""),this.getclientStatusVal(),this.demostatusForm=this.formBuilder.group({statusdata:["",[C.kI.required,this.noWhitespaceValidator()]]})}getstatuslist(){this.Company.getstatuslists().subscribe(n=>{n.status&&(this.arrayValue=n.data)})}status(n,a,l){this.setclientStatusVal({activity_status_id:a,activity_status_name:l,is_active:n,empid:this.userSession.id})}getclientStatusVal(){this.crmService.getCrmActivityStatusValuesMaster(1,100).subscribe(n=>{console.log(n),n.status?(this.statusData=n.data,this.dataSource=new T.by(n.data),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort):this.clientStatusVal=[]})}setclientStatusVal(n){n.activity_status_name=n.activity_status_name.trim(),n.activity_status_name=n.activity_status_name.replace(/\s+/g," "),n.activity_status_name&&n.activity_status_name.toString().length&&this.crmService.setCrmActivityStatusValues(n).subscribe(a=>{a.status?(this.router.navigateByUrl("/",{skipLocationChange:!0}).then(()=>this.router.navigate(["/Crm/CrmDemoStatus"])),this.dataSource.paginator=this.paginator,this.dialog.open(le.B,{position:{top:"70px"},disableClose:!0,data:a.data[0].resultmsg})):this.dialog.open(le.B,{position:{top:"70px"},disableClose:!0,data:"Unable to add demostatus. Please try again. "})})}Add(){this.isAdd=!0,this.isdata=!1,this.demostatusForm.controls.statusdata.setValue("")}cancel(){this.router.navigateByUrl("/",{skipLocationChange:!0}).then(()=>this.router.navigate(["/Crm/CrmDemoStatus"]))}edit(n,a){this.enable=a.id,this.isEdit=!1,this.isDelete=!1,this.isSave=!0,this.demostatusForm.controls.statusdata.setValue(a.display_name)}save(n,a,l){this.demostatusForm.valid&&(console.log(a,l),this.enable=null,this.isEdit=!0,this.isSave=!1,this.isDelete=!0,this.setclientStatusVal({activity_status_id:a.id,activity_status_name:l,is_active:!0,empid:this.userSession.id}))}AddData(){let n={activity_status_id:0,activity_status_name:this.demostatusForm.controls.statusdata.value,is_active:!0,empid:this.userSession.id};console.log("data",n),this.setclientStatusVal(n)}canceledit(n,a){this.enable=null,this.isEdit=!0,this.isSave=!1,this.isDelete=!0,this.ngOnInit()}getPageSizes(){var n=[];return this.dataSource.data.length>5&&n.push(5),this.dataSource.data.length>10&&n.push(10),this.dataSource.data.length>20&&n.push(20),n.push(this.dataSource.data.length),n}getMessages(){}noWhitespaceValidator(){return n=>0===(n.value||"").trim().length?{whitespace:!0}:null}applyFilter(n){this.dataSource.filter=n.target.value.trim().toLowerCase(),this.dataSource.paginator&&this.dataSource.paginator.firstPage()}delete(n,a){this.dialog.open(Qn.L,{position:{top:"70px"},disableClose:!0,data:{message:"Are you sure you want to delete ?",YES:"YES",NO:"No"}}).afterClosed().subscribe(u=>{"YES"==u&&this.deleteDemoStatus(n,a)})}deleteDemoStatus(n,a){this.crmService.deleteCrmActivityStatusValue({demoStatusId:a,empid:this.userSession.id}).subscribe(l=>{l&&l.status?(this.dialog.open(le.B,{position:{top:"70px"},disableClose:!0,data:"Demo status deleted."}),this.router.navigateByUrl("/",{skipLocationChange:!0}).then(()=>this.router.navigate(["/Crm/CrmDemoStatus"]))):this.dialog.open(le.B,{position:{top:"70px"},disableClose:!0,data:"Demo status not deleted."})})}disableStatus(n){return!(!n||!n.is_default)||this.enable==n.id}}return o.\u0275fac=function(n){return new(n||o)(e.\u0275\u0275directiveInject(we),e.\u0275\u0275directiveInject(zt.D),e.\u0275\u0275directiveInject(C.QS),e.\u0275\u0275directiveInject(f.F0),e.\u0275\u0275directiveInject(de.uw))},o.\u0275cmp=e.\u0275\u0275defineComponent({type:o,selectors:[["app-crm-demo-status"]],viewQuery:function(n,a){if(1&n&&(e.\u0275\u0275viewQuery(wt.NW,5),e.\u0275\u0275viewQuery(mt.YE,5)),2&n){let l;e.\u0275\u0275queryRefresh(l=e.\u0275\u0275loadQuery())&&(a.paginator=l.first),e.\u0275\u0275queryRefresh(l=e.\u0275\u0275loadQuery())&&(a.sort=l.first)}},decls:12,vars:3,consts:[["fxLayout","column","fxFlex","100",1,"first-col"],["fxLayout","row","fxLayoutAlign","space-between center",1,"headerbox"],[1,"title"],[2,"margin-right","2%"],["mat-icon-button","","matTooltip","Add New",2,"padding-right","40px",3,"click"],[2,"font-size","30px","overflow","visible"],["autocomplete","off",3,"formGroup"],["fxLayout","column","fxLayout.xs","column",4,"ngIf"],["fxLayout","column",4,"ngIf"],["fxLayout","column","fxLayout.xs","column"],["fxLayout","row","fxLayout.xs","row",2,"padding-top","1%","padding-left","1%"],["fxFlex.xs","100","fxFlex","50","appearance","outline",1,"mx-2","my-2"],["formControlName","statusdata","matInput","","placeholder","","appRemoveSpace","","required","","maxlength","64"],["class","con-error",4,"ngIf"],["fxLayoutAlign","center"],["type","submit",1,"btn","btn-primary","mr-2","mb-2",3,"click"],[1,"btn","btn-danger","mr-2","mb-2",3,"click"],[1,"con-error"],["fxLayout","column"],["fxLayout","row","fxLayoutAlign.xs","center","fxLayoutAlign","end",1,"dev-Pad"],["fxFlex","50","fxFlex.xs","100","fxLayoutAlign","end",2,"height","70px"],["fxFlex.xs","100","fxFlex","56","fxFlex.lt-lg","100","appearance","outline",1,"mx-2","my-2"],["matSuffix","",2,"color","#28acaf"],["matInput","","placeholder","","maxlength","100",3,"keyup"],["fxLayout","column",1,"table-pad"],[1,"mat-elevation-z1","example-container"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","sno"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","demoStatus"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["matColumnDef","status"],["mat-header-cell","","style","padding-left: 60px",4,"matHeaderCellDef"],["mat-cell","","style","white-space: nowrap;",4,"matCellDef"],["matColumnDef","Action"],["class","headerbox title","mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],[3,"pageSizeOptions"],["mat-header-cell",""],["mat-cell",""],["mat-header-cell","","mat-sort-header",""],[4,"ngIf"],["appearance","outline",4,"ngIf"],["appearance","outline"],["formControlName","statusdata","value","row.demoStatus","matInput","","placeholder",""],["mat-header-cell","",2,"padding-left","60px"],["mat-cell","",2,"white-space","nowrap"],["class","mr-2","color","primary",3,"disabled","checked","value","change",4,"ngFor","ngForOf"],["color","primary",1,"mr-2",3,"disabled","checked","value","change"],["mat-icon-button","",3,"keyup.enter",4,"ngIf"],["mat-icon-button","",3,"keyup.enter"],["title","Edit",3,"click"],["title","Delete",3,"click"],["title","Save",3,"click"],["title","Cancel",3,"click"],["mat-header-row","",1,"headerbox","title"],["mat-row",""],[1,"mat-row"],["colspan","3",1,"mat-cell",2,"text-align","center"]],template:function(n,a){1&n&&(e.\u0275\u0275elementStart(0,"div",0)(1,"mat-card")(2,"mat-card-header",1)(3,"mat-card-title",2),e.\u0275\u0275text(4," Masters For Demo Status "),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"div",3)(6,"button",4),e.\u0275\u0275listener("click",function(){return a.Add()}),e.\u0275\u0275elementStart(7,"mat-icon",5),e.\u0275\u0275text(8,"add_circle"),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(9,"form",6),e.\u0275\u0275template(10,Pr,15,1,"div",7),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(11,Go,29,6,"div",8),e.\u0275\u0275elementEnd()()),2&n&&(e.\u0275\u0275advance(9),e.\u0275\u0275property("formGroup",a.demostatusForm),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",a.isAdd),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",a.isdata))},dependencies:[N.sg,N.O5,Nt.lW,ue.a8,ue.dk,ue.n5,tt.Hw,q.TO,q.KE,q.hX,q.R9,me.Nt,wt.NW,rn.VQ,rn.U0,mt.YE,mt.nU,T.BZ,T.fO,T.as,T.w1,T.Dz,T.nj,T.ge,T.ev,T.XQ,T.Gk,T.Ee,Wn.gM,C._Y,C.Fj,C.JJ,C.JL,C.Q7,C.nD,C.sg,C.u,G.xw,G.Wh,G.yH],styles:['mat-card[_ngcontent-%COMP%]{transition:box-shadow .28s cubic-bezier(.4,0,.2,1);display:block;position:relative;padding-left:0;padding-right:0}.tableP[_ngcontent-%COMP%]{padding:1% 2%}  .mat-select-panel[aria-label="Items per page:"] mat-option:last-child:before{content:"All"}  .mat-select-panel[aria-label="Items per page:"] mat-option:last-child .mat-option-text{display:none}.headerbox[_ngcontent-%COMP%]{height:45px;background-color:#28acaf!important;align-items:center}.title[_ngcontent-%COMP%]{font-family:Roboto;font-size:20px;font-weight:500;font-stretch:normal;font-style:normal;letter-spacing:.32px;color:#fff;margin-bottom:0}  tr.mat-header-row{height:45px!important}  .mat-form-field-appearance-outline .mat-form-field-wrapper{margin:.2em 0!important}table[_ngcontent-%COMP%]{width:100%}.dev-Pad[_ngcontent-%COMP%]{padding-top:1%;padding-right:8px}.table-pad[_ngcontent-%COMP%]{padding-left:15px;padding-right:15px}table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:2px 10px}.example-container[_ngcontent-%COMP%]{overflow-x:auto;display:flex;flex-direction:column}']}),o})();const Ge=["calendar"],Br=["directionsRender"];function $o(o,d){if(1&o&&(e.\u0275\u0275elementStart(0,"mat-option",18),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&o){const n=d.$implicit;e.\u0275\u0275property("value",n.empid)("disabled",!n.punchintime),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(n.empname)}}const sn=function(o){return{color:o}};function Ho(o,d){if(1&o&&(e.\u0275\u0275elementStart(0,"span",31),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&o){const n=e.\u0275\u0275nextContext(3);e.\u0275\u0275property("ngStyle",e.\u0275\u0275pureFunction1(2,sn,n.emp_batterylevel>=20?"green":"red")),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",n.emp_batterylevel,"% ")}}function Qo(o,d){if(1&o&&(e.\u0275\u0275elementStart(0,"div",28)(1,"mat-icon",29),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(3,Ho,2,4,"span",30),e.\u0275\u0275elementEnd()),2&o){const n=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(1),e.\u0275\u0275property("ngStyle",e.\u0275\u0275pureFunction1(3,sn,n.emp_batterylevel>=20?"lightgreen":"pink")),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(n.emp_batterylevel>=20?"battery_full":"battery_alert"),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.emp_batterylevel)}}function Yo(o,d){if(1&o){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",32)(1,"button",33),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(n);const l=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(l.fetchLocationOnMap())}),e.\u0275\u0275elementStart(2,"i",34),e.\u0275\u0275text(3),e.\u0275\u0275elementEnd()()()}if(2&o){const n=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(2),e.\u0275\u0275property("ngStyle",e.\u0275\u0275pureFunction1(2,sn,n.getLocationIconColor())),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",n.location_icon_val," ")}}function Jn(o,d){if(1&o&&(e.\u0275\u0275elementStart(0,"mat-label")(1,"div",37)(2,"span"),e.\u0275\u0275text(3),e.\u0275\u0275elementEnd()()()),2&o){const n=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate1("Punched in: ",n.getFormattedTime(n.attd_trackdata[0].firstlogintime)," ")}}function y(o,d){if(1&o&&(e.\u0275\u0275elementStart(0,"mat-label")(1,"div",37)(2,"span"),e.\u0275\u0275text(3),e.\u0275\u0275elementEnd()()()),2&o){const n=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate1("Punched out: ",n.getFormattedTime(n.attd_trackdata[0].lastlogouttime)," ")}}function w(o,d){if(1&o&&(e.\u0275\u0275elementStart(0,"div",14)(1,"div",35),e.\u0275\u0275element(2,"mat-divider"),e.\u0275\u0275template(3,Jn,4,1,"mat-label",36),e.\u0275\u0275element(4,"mat-divider"),e.\u0275\u0275template(5,y,4,1,"mat-label",36),e.\u0275\u0275elementEnd()()),2&o){const n=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",n.attd_trackdata&&n.attd_trackdata[0]&&n.attd_trackdata[0].firstlogintime&&n.attd_trackdata[0].firstlogintime.toString().length),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",n.attd_trackdata&&n.attd_trackdata[0]&&n.attd_trackdata[0].lastlogouttime&&n.attd_trackdata[0].lastlogouttime.toString().length)}}function x(o,d){if(1&o&&(e.\u0275\u0275elementStart(0,"div",35),e.\u0275\u0275element(1,"img",42),e.\u0275\u0275elementEnd()),2&o){const n=e.\u0275\u0275nextContext(2).$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275property("src",n.imageData.image,e.\u0275\u0275sanitizeUrl)}}function F(o,d){if(1&o&&(e.\u0275\u0275elementStart(0,"div",14)(1,"div",35),e.\u0275\u0275element(2,"mat-divider"),e.\u0275\u0275elementStart(3,"mat-label")(4,"div",40)(5,"span"),e.\u0275\u0275text(6),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275element(7,"mat-divider"),e.\u0275\u0275elementStart(8,"mat-label")(9,"div",40)(10,"span"),e.\u0275\u0275text(11),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275element(12,"mat-divider"),e.\u0275\u0275template(13,x,2,1,"div",41),e.\u0275\u0275elementEnd()()),2&o){const n=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275advance(6),e.\u0275\u0275textInterpolate(n.location),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate(n.notes),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",n&&n.imageData&&n.imageData.image)}}function U(o,d){if(1&o){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"mat-card",22)(2,"div",38),e.\u0275\u0275listener("click",function(){const u=e.\u0275\u0275restoreView(n).$implicit,h=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(h.checkActivityDetails(u))}),e.\u0275\u0275elementStart(3,"mat-label"),e.\u0275\u0275text(4),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"button",39),e.\u0275\u0275listener("click",function(){const u=e.\u0275\u0275restoreView(n).$implicit,h=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(h.fetchActivityLocationOnMap(u))}),e.\u0275\u0275elementStart(6,"i",34),e.\u0275\u0275text(7),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275element(8,"mat-divider"),e.\u0275\u0275elementStart(9,"mat-label")(10,"div",40)(11,"span"),e.\u0275\u0275text(12),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275template(13,F,14,3,"div",26),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd()}if(2&o){const n=d.$implicit,a=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate2("",a.getFormattedTime(n.created_on)," (",n.activity_type,")"),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngStyle",e.\u0275\u0275pureFunction1(6,sn,a.getLocationIconColorForActivity(n))),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",n.location_icon_val," "),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate(n.client_name),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.display)}}function J(o,d){if(1&o&&(e.\u0275\u0275elementStart(0,"div",19)(1,"div",20)(2,"div",21)(3,"mat-card",22)(4,"div",23)(5,"mat-label"),e.\u0275\u0275text(6),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(7,"mat-label"),e.\u0275\u0275template(8,Qo,4,5,"div",24),e.\u0275\u0275elementEnd()(),e.\u0275\u0275element(9,"mat-divider"),e.\u0275\u0275elementStart(10,"div",23)(11,"mat-label"),e.\u0275\u0275text(12),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(13,"mat-label"),e.\u0275\u0275template(14,Yo,4,4,"div",25),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(15,w,6,2,"div",26),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(16,U,14,8,"ng-container",27),e.\u0275\u0275elementEnd()()()),2&o){const n=e.\u0275\u0275nextContext();e.\u0275\u0275advance(6),e.\u0275\u0275textInterpolate1("",n.employeeData.empname," "),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",n.today===n.formattedDate&&n.show_emp_trace),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate1("",n.employeeData.contactnumber," "),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",n.today===n.formattedDate&&n.show_emp_trace),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.attd_trackdata&&n.attd_trackdata[0]),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngForOf",n.activitiesData)}}function he(o,d){if(1&o&&e.\u0275\u0275element(0,"map-directions-renderer",47,48),2&o){const n=d.$implicit,a=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("options",a.directionsRenderOption)("directions",n)}}function X(o,d){if(1&o&&(e.\u0275\u0275elementStart(0,"div",55)(1,"span",59),e.\u0275\u0275text(2," Client:"),e.\u0275\u0275elementStart(3,"b"),e.\u0275\u0275text(4),e.\u0275\u0275elementEnd()()()),2&o){const n=e.\u0275\u0275nextContext(2).$implicit;e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate(n.client)}}function Ui(o,d){if(1&o&&(e.\u0275\u0275elementStart(0,"div",54),e.\u0275\u0275element(1,"img",60),e.\u0275\u0275elementEnd()),2&o){const n=e.\u0275\u0275nextContext(2).$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275property("src",n.displayImage,e.\u0275\u0275sanitizeUrl)}}function Jo(o,d){if(1&o&&(e.\u0275\u0275elementStart(0,"div",55)(1,"span",61),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd()()),2&o){const n=e.\u0275\u0275nextContext(2).$implicit;e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1("Notes: ",n.infoContent,"")}}function Te(o,d){if(1&o&&(e.\u0275\u0275elementStart(0,"div",54)(1,"div",58),e.\u0275\u0275template(2,X,5,1,"div",53),e.\u0275\u0275template(3,Ui,2,1,"div",57),e.\u0275\u0275template(4,Jo,3,1,"div",53),e.\u0275\u0275element(5,"mat-divider"),e.\u0275\u0275elementEnd()()),2&o){const n=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275property("ngStyle",e.\u0275\u0275pureFunction1(4,sn,n.markerColor)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.client&&n.client.toString().length),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.checkImage&&n.imageDisplayOnMap),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.infoContent&&n.infoContent.toString().length)}}function jn(o,d){if(1&o){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",54)(1,"div",55)(2,"span",56),e.\u0275\u0275listener("click",function(){const u=e.\u0275\u0275restoreView(n).$implicit,h=e.\u0275\u0275nextContext(4);return e.\u0275\u0275resetView(h.changeDisplayStatus(u))}),e.\u0275\u0275text(3),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(4,"mat-divider"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(5,Te,6,6,"div",57),e.\u0275\u0275elementEnd()}if(2&o){const n=d.$implicit,a=e.\u0275\u0275nextContext(4);e.\u0275\u0275advance(2),e.\u0275\u0275property("ngStyle",e.\u0275\u0275pureFunction1(8,sn,n.markerColor))("ngClass",a.getMarkerClass(n)),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate5(" ",a.selectedEmployee?"":n.empname," ",!a.selectedEmployee&&n.mapActivity?" | ":""," ",n.mapActivity?n.mapActivity:"","",n.mapActivity&&n.time?" | ":""," ",n.time," "),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",n.display)}}function jo(o,d){if(1&o&&(e.\u0275\u0275elementStart(0,"div",55)(1,"span",62),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd()()),2&o){const n=e.\u0275\u0275nextContext(4);e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",n.markerSelected.markerInfo[0].location,"")}}function ln(o,d){if(1&o&&(e.\u0275\u0275elementStart(0,"div"),e.\u0275\u0275template(1,jn,6,10,"div",52),e.\u0275\u0275template(2,jo,3,1,"div",53),e.\u0275\u0275elementEnd()),2&o){const n=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(1),e.\u0275\u0275property("ngForOf",n.markerSelected.markerInfo),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.markerSelected.markerInfo[0].location&&n.markerSelected.markerInfo[0].location.toString().length)}}function Kn(o,d){if(1&o){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"map-marker",49,50),e.\u0275\u0275listener("mapMouseover",function(){const u=e.\u0275\u0275restoreView(n).$implicit,h=e.\u0275\u0275reference(1),b=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(b.openInfoWindow(h,u))})("mapMousedown",function(){const u=e.\u0275\u0275restoreView(n).$implicit,h=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(h.closeMouseOver(u))}),e.\u0275\u0275elementStart(2,"map-info-window",51),e.\u0275\u0275template(3,ln,3,2,"div",36),e.\u0275\u0275elementEnd()()}if(2&o){const n=d.$implicit,a=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("position",n)("label",n.label)("icon",n.icon),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",a.markerSelected&&a.markerSelected.markerInfo&&a.markerSelected.markerInfo.length)}}function Xn(o,d){if(1&o&&(e.\u0275\u0275elementStart(0,"div",43)(1,"google-map",44),e.\u0275\u0275template(2,he,2,2,"map-directions-renderer",45),e.\u0275\u0275template(3,Kn,4,4,"map-marker",46),e.\u0275\u0275elementEnd()()),2&o){const n=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("center",n.center)("options",n.mapOptions),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngForOf",n.directionsResults),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngForOf",n.markerPositions)}}let j=(()=>{class o{constructor(n,a,l,u,h,b,M,O,A){this.locale=n,this.mapService=a,this.router=l,this.spinner=u,this.LMS=h,this.attendanceService=b,this.crm=M,this.dialog=O,this.sanitizer=A,this.isUpdateMap=!0,this.directionsResults=[],this.directionsRenderOption={},this.rendererOptions={map:"",draggable:!0},this.imageDataUrl={imageData:null,notes:null},this.displayVideo=!0,this.downloadCapture=!0,this.stopCamera=!0,this.CountryDetails=[],this.stateDetails=[],this.cityDetails=[],this.imageurls=[],this.markerPositions=[],this.markerSelected=null,this.employeemarkers=[],this.location_icon_val="location_off",this.trackMinimumTime=15,this.emp_id=0,this.center={lat:17.457183152970547,lng:78.37056237270387},this.employee_last_location={lat:17.457183152970547,lng:78.37056237270387},this.mapOptions={zoom:24,backgroundColor:"green"},this.locationButton=document.createElement("button"),this.selectedEmployeeControl=new C.NI(0),this.selectedDateControl=new C.NI(0),this.TODAY_STR=(new Date).toISOString().replace(/T.*$/,""),this.calendarOptions={headerToolbar:{left:"prev",center:"title",right:"next"},customButtons:{},initialView:"dayGridMonth",weekends:!0,editable:!1,selectable:!0,selectMirror:!0,dayMaxEvents:!0,height:"auto"},this.isview=!0,this.pipe=new N.uU("en-US"),this.notificationsData=[],this.tobevisited=[],this.companyinfo=[],this.isNewclient=!1,this.companyDBName=Cn.N.dbName,this.markerPosition={},this.clientStatusVal={},this.demoStatusVal={},this.selectedWidth=0,this.logoId=null,this.imageInfo=null,this.formData=new FormData,this.isRemoveImage=!0,this.selectedEmployee=0,this.activitiesData=[],this.totalEmployees=0,this.punchInEmployees=0,this.punchOutEmployees=0,this.absentEmployees=0,this.encriptPipe=new Sn.p,this.emp_batterylevel=0,this.show_emp_trace=!1,this.employeeData=[],this.maxDate=new Date,this.minDate=new Date,this.today=new Date,this.selectedDate=new Date,this.checkImage=!1,this.markerInfo={empname:null,time:null,location:null},this.trackMarkers=[],this.mapInitialized=!1,this.mapInitialized||this.mapService.initMap().then(()=>{this.mapInitialized=!0,this.directionsRenderer=new google.maps.DirectionsRenderer,this.directionsService=new google.maps.DirectionsService,this.directionsRenderOption={draggable:!1,suppressInfoWindows:!0,markerOptions:{draggable:!1,clickable:!1},polylineOptions:{strokeColor:"#9966ff",strokeOpacity:0,icons:[{icon:{path:google.maps.SymbolPath.CIRCLE,fillOpacity:1,scale:3},offset:"0",repeat:"1px"}]}}}).catch(H=>{console.error("Error initializing map:",H)})}ngOnInit(){this.today=this.pipe.transform(new Date,"yyyy-MM-dd"),this.formattedDate=this.pipe.transform(new Date,"yyyy-MM-dd"),this.selectedDate=this.formattedDate,this.maxDate=new Date,this.minDate=new Date,this.minDate.setMonth(this.minDate.getDate()-90),this.selectedDateControl.setValue(this.selectedDate),this.imageurls=[],this.markerPositions=[],this.userSession=JSON.parse(sessionStorage.getItem("user")??""),this.selectedWidth=0,this.selectedWidth2=100,this.getCrmEmployeesForManagers(),this.getCrmSelectedEmployeeTrackLocations(this.selectedEmployee),this.selectedEmployeeControl.valueChanges.subscribe(n=>{this.OnValueChanged()}),this.selectedDateControl.valueChanges.subscribe(n=>{this.formattedDate=this.pipe.transform(new Date(n),"yyyy-MM-dd"),this.OnValueChanged()})}OnValueChanged(){this.directionsResults=[],this.trackMarkers=[],this.imageurls=[],this.markerPositions=[],this.activitiesData=[],this.attd_trackdata=[],this.getCrmEmployeesForManagers(),this.getCrmSelectedEmployeeTrackLocations(this.selectedEmployee),0===this.selectedEmployee&&this.today===this.formattedDate&&this.setcurrentlocation()}getMLabel(n,a=null){return{text:n,color:a||"white",fontSize:"12px"}}getEmployeeInformation(n){var a=this;this.spinner.show(),this.attendanceService.getEmployeeInformation(n).subscribe(function(){var l=(0,ae.Z)(function*(u){a.spinner.hide(),u.status&&0!=u.data.length&&(a.employeeData=JSON.parse(u.data[0].json)[0])});return function(u){return l.apply(this,arguments)}}())}getMIcon(n,a=null){for(var l=[{Red:"#FF0000"},{Green:"#00FF00"},{Blue:"#0000FF"},{Yellow:"#FFFF00"},{Orange:"#FFA500"},{Purple:"#800080"},{Pink:"#FFC0CB"},{Brown:"#A52A2A"},{Gray:"#808080"},{Black:"#000000"},{White:"#FFFFFF"},{Cyan:"#00FFFF"},{Magenta:"#FF00FF"},{Lime:"#00FF00"},{Teal:"#008080"}],u="#FF0000",h=0;h<l.length;h++){var b=JSON.parse(JSON.stringify(l[h]));for(const kt in b)kt===n&&(u=b[kt])}a=a||"svghole";var O="M12,11.5A2.5,2.5 0 0,1 9.5,9A2.5,2.5 0 0,1 12,6.5A2.5,2.5 0 0,1 14.5,9A2.5,2.5 0 0,1 12,11.5M12,2A7,7 0 0,0 5,9C5,14.25 12,22 12,22C12,22 19,14.25 19,9A7,7 0 0,0 12,2Z",A=new google.maps.Point(12,15),ee=new google.maps.Point(12,9),Zt=[{svghole:O},{originhole:A},{svgfilled:"M 12,2 C 8.1340068,2 5,5.1340068 5,9 c 0,5.25 7,13 7,13 0,0 7,-7.75 7,-13 0,-3.8659932 -3.134007,-7 -7,-7 z"},{svg:"M-1.547 12l6.563-6.609-1.406-1.406-5.156 5.203-2.063-2.109-1.406 1.406zM0 0q2.906 0 4.945 2.039t2.039 4.945q0 1.453-0.727 3.328t-1.758 3.516-2.039 3.070-1.711 2.273l-0.75 0.797q-0.281-0.328-0.75-0.867t-1.688-2.156-2.133-3.141-1.664-3.445-0.75-3.375q0-2.906 2.039-4.945t4.945-2.039z"},{Rectangle:"M -2,0 0,-2 2,0 0,2 z"},{Cross:"M -2,-2 2,2 M 2,-2 -2,2"}],qt=O;for(h=0;h<Zt.length;h++)for(const[qs,Gi]of Object.entries(Zt[h]))qs===a&&(qt=Gi);return{path:qt,anchor:new google.maps.Point(12,17),fillOpacity:.6,fillColor:u,strokeWeight:2,strokeColor:"white",scale:2,labelOrigin:ee,rotation:0}}getCrmSelectedEmployeeTrackLocations(n){var a=this;this.emp_batterylevel=0,this.show_emp_trace=!0,this.spinner.show();let l={empid:n,manager_id:this.userSession.id,date_selected:this.formattedDate,is_employee_selected:n?1:0};n&&this.attendanceData&&this.attendanceData.length&&this.attendanceData.forEach(u=>{u.empid==n&&(this.show_emp_trace=!!u.punchintime)}),this.show_emp_trace&&this.crm.getCrmSelectedEmployeeTrackLocations(l).subscribe(function(){var u=(0,ae.Z)(function*(h){if(a.spinner.hide(),h.status&&0!=h.data.length){a.trackdata=h.data,a.employeeData={empname:a.trackdata[0].empname,contactnumber:a.trackdata[0].contactnumber},a.emp_batterylevel=a.trackdata&&a.trackdata[0]&&a.trackdata[0].battery_level?Number(a.trackdata[0].battery_level).toFixed(0):"";for(var b=0;b<a.trackdata.length;b++)a.setMarkerInfoWindow(a.trackdata[b]),n&&a.trackdata[b+1]&&"out"!=a.trackdata[b].trace_type&&a.calculateAndDisplayRoute({lat:Number(a.trackdata[b].lat),lng:Number(a.trackdata[b].lng)},{lat:Number(a.trackdata[b+1].lat),lng:Number(a.trackdata[b+1].lng)}),b==a.trackdata.length-1&&(a.center={lat:Number(a.trackdata[b].lat),lng:Number(a.trackdata[b].lng)})}console.log("markerPositions",a.markerPositions)});return function(h){return u.apply(this,arguments)}}())}setMarkerInfoWindow(n){let a=[];var l=n.lat&&Number(n.lat)&&n.lng&&Number(n.lng)?1:0;l&&(l=l+(n.activities&&n.activities.length?n.activities.length:0)+(n.attendance&&n.attendance.length?n.attendance.length:0)),1===l?a.push({empname:n.empname,time:this.getFormattedTime(n.created_on),mapActivity:"",checkImage:!1,infoContent:"",displayImage:null,client:null,location:n.location,markerColor:n.markerColor,imageDisplayOnMap:Number(n.imageDisplayOnMap),display:!0}):(n.activities&&n.activities.length&&(this.activitiesData=n.activities,n.activities.forEach(u=>{a.push({empname:u.empname?u.empname:n.empname,time:this.getFormattedTime(u.created_on),mapActivity:u.activity_type,checkImage:!(!u.imageData||!u.imageData.success),infoContent:u.notes||"",displayImage:u.imageData&&u.imageData.success?u.imageData.image:null,client:u.client_name||"",lat:u.lat?u.lat:n.lat,lng:u.lng?u.lng:n.lng,markerColor:u.markerColor,imageDisplayOnMap:Number(n.imageDisplayOnMap),location:n.location,display:!1})})),n.attendance&&n.attendance.length&&(this.attd_trackdata=n.attendance,n.attendance.forEach(u=>{a.push({empname:u.empname?u.empname:n.empname,time:this.getFormattedTime(u.punchtime),mapActivity:u.attendance_type,checkImage:!(!u.imageData||!u.imageData.success),infoContent:u.notes||"",displayImage:u.imageData&&u.imageData.success?u.imageData.image:null,client:null,location:n.location,markerColor:u.markerColor,imageDisplayOnMap:Number(n.imageDisplayOnMap),display:!1})}))),this.markerPositions.push({lat:Number(n.lat),lng:Number(n.lng),label:this.getMLabel(n.empname.charAt(0)),icon:this.getMIcon(n.markerColor,n.markerType),empname:n.empname,location:n.location,description:"",id:n.id,empid:n.empid,type:n.trace_type,imageData:null,infoCount:l,markerInfo:a,mouseOver:!1})}changeDisplayStatus(n){console.log("markerInfo",n),this.markerSelected.markerInfo.forEach(a=>{a.display=!1}),n.display=!n.display}getMarkerClass(n){return n.display?"mark-class-display":"mark-class-normal"}setcurrentlocation(){navigator.geolocation.getCurrentPosition(n=>{this.center={lat:n.coords.latitude,lng:n.coords.longitude},this.crm.fetchMapLocationDetails(this.center).subscribe(a=>{this.markerPositions.push({lat:n.coords.latitude,lng:n.coords.longitude,icon:this.getMIcon("Green","svghole"),time:this.getFormattedTime(new Date),activityType:"Current Position",location:a.display_name,id:0,empid:0,type:"currentpossition"})})},n=>console.log(n))}getCrmAttendanceTrackingDetails(n=null){var a=this;return(0,ae.Z)(function*(){a.spinner.show();var l={rmid:n?null:a.userSession.id,empid:n||null,tracking_type:"ALL",date_selected:a.formattedDate};a.attd_trackdata=[],a.crm.getCrmAttendanceTrackingDetails(l).subscribe(function(){var u=(0,ae.Z)(function*(h){if(a.spinner.hide(),h.status&&0!=h.data.length){let M=1;a.attd_trackdata=h.data,a.attd_trackdata.forEach(function(){var O=(0,ae.Z)(function*(A){M+=1,a.getImageData(A.attd_detail_id,A.empid,"attendance"),a.markerPositions.push({lat:Number(A.lat),lng:Number(A.lng),label:a.getMLabel(A.empname.charAt(0)),icon:a.getMIcon("Green","svgfilled"),activityType:" Punch"+(A.category?A.category:""),description:A.description,empname:A.empname,time:a.getFormattedTime(A.punchtime),location:A.location,id:A.attd_detail_id,empid:A.empid,type:"attendance"})});return function(A){return O.apply(this,arguments)}}())}});return function(h){return u.apply(this,arguments)}}())})()}getActivitiesWithTrackingDetails(n){this.activitiesData=[],this.crm.getCrmActivitiesWithTrackingDetails({manager_id:null,empid:n,client_id:null,date_selected:this.formattedDate}).subscribe(a=>{if(a.data&&a.data.length){let u=1;a.data.forEach(h=>{u+=1,h.created_by==n&&("VISIT"===h.activity_type&&(this.getImageData(h.id,h.created_by,"visit"),h.location_icon_val=h.lat&&h.lng&&Number(h.lat)&&Number(h.lng)?"location_on":"location_off",this.markerPositions.push({lat:Number(h.lat),lng:Number(h.lng),label:this.getMLabel(h.empname.charAt(0)),icon:this.getMIcon("blue","svgfilled"),client:h.client_name,empname:h.empname,time:this.getFormattedTime(h.created_on),location:h.location,activityType:"VISIT",description:h.notes,id:h.id,empid:h.created_by,type:"visit"})),this.activitiesData.push(h))})}})}getCrmEmployeesForManagers(){this.punchInEmployees=0,this.punchOutEmployees=0,this.totalEmployees=0,this.attendanceData=[],this.crm.getCrmEmployeesForManagers({rm_id:this.userSession.id,selected_date:this.formattedDate}).subscribe(n=>{this.totalEmployees=n&&n.data?n.data.length:0,this.attendanceData=n&&n.data?n.data:[],this.attendanceData&&this.attendanceData.length&&this.attendanceData.forEach(a=>{a.punchouttime&&(this.punchOutEmployees=this.punchOutEmployees+1),a.punchintime&&(this.punchInEmployees=this.punchInEmployees+1),!a.punchintime&&!a.punchouttime&&(this.absentEmployees=this.absentEmployees+1)})})}openInfo(n,a){this.infoContent=a||null,this.infoWindow&&this.infoWindow.open(n)}openInfoWindow_old(n,a){a?(this.checkImage=this.checkImageDisplay(a.id,a.empid,a.type),this.infoContent=a.description,this.displayImage=this.getImageDisplay(a.id,a.empid,a.type),this.mapActivity=a.activityType,"track"===this.mapActivity&&(this.mapActivity=""),this.markerInfo={empname:a.empname,time:a.time,location:a.location,client:a.client}):(this.checkImage=!1,this.infoContent=null,this.displayImage=null,this.markerInfo={empname:null,time:null,location:null}),this.infoWindow&&this.infoWindow.open(n)}openInfoWindow(n,a){console.log("openInfoWindow",this.markerPositions),this.markerSelected=a,this.markerSelected&&(this.markerSelected.mouseOver=!0),this.infoWindow&&this.infoWindow.open(n)}closeMouseOver(n){n.mouseOver=!1,this.infoContent=null,this.markerSelected=null,this.infoWindow?.close()}selectClient(n,a){let l=this.encriptPipe.transform(a.client_id.toString());this.router.navigate(["/Crm/CrmClientEditAndUpdate",{clientId:l}])}checkActivityDetails(n){n.display=!n||!n.display}getbackgroundColor(n){return n.nextFollowUpDate?new Date(n.nextFollowUpDate)>new Date?"aliceblue":"mistyrose":new Date(n.created_on)>new Date?"aliceblue":"mistyrose"}cancel(){}closeInfo(){this.infoContent=null}getImageDisplay(n,a,l){var u="";return this.imageurls.forEach(h=>{h.requestId===n&&h.empid===a&&h.type===l&&(u=`${h.img}`)}),u}checkImageDisplay(n,a,l){let u=!1;return this.imageurls.forEach(h=>{h.requestId===n&&h.empid===a&&h.type===l&&h.img&&(u=!0)}),u}openMapDialog(){}getImageData(n,a,l){let u="";"attendance"===l&&(u="CRM_ATTENDANCE"),"visit"===l&&(u="CRM_VISITS"),"client"===l&&(u="CRM_CLIENTS"),this.crm.getCrmFilesMaster({employeeId:a,candidateId:null,moduleId:12,filecategory:u,requestId:n,status:"Submitted"}).subscribe(b=>{b&&b.status&&b.data[0]&&(this.imageInfo=JSON.stringify(b.data[0]),b.data[0].employeeId=0,this.LMS.getProfileImage(b.data[0]).subscribe(O=>{if(O.success){const H=new Uint8Array(O.image.data).reduce((nt,Dt)=>nt+String.fromCharCode(Dt),"");let ee=btoa(H);this.imageurls.push({requestId:n,empid:a,type:l,img:"data:image/png;base64,"+ee})}}))})}getImageBase64Format(n){if(n){const l=new Uint8Array(n.image.data).reduce((h,b)=>h+String.fromCharCode(b),"");return"data:image/png;base64,"+btoa(l)}return null}getFormattedTime(n=null){return n?(n=new Date(n)).toLocaleTimeString(this.locale,{hour12:!0,hour:"2-digit",minute:"2-digit"}):""}getFormattedDescription(){}getDataDiff(n,a){var l=a.getTime()-n.getTime(),u=Math.floor(l/864e5),h=Math.floor(l/36e5)-24*u;return Math.floor(l/6e4)-(24*u*60+60*h)}getLocationIconColor(){let n=0,a=0,l=0,u="";if(this.trackdata&&this.trackdata[0]&&(this.trackdata[1]?(u=this.trackdata[1].created_on?this.trackdata[1].created_on:"",this.employee_last_location.lat=this.trackdata[1].lat?this.trackdata[1].lat:0,this.employee_last_location.lng=this.trackdata[1].lng?this.trackdata[1].lng:0):(u=this.trackdata[0].created_on?this.trackdata[0].created_on:"",this.employee_last_location.lat=this.trackdata[0].lat?this.trackdata[0].lat:0,this.employee_last_location.lng=this.trackdata[0].lng?this.trackdata[0].lng:0)),""!=u){var h=(new Date).getTime()-new Date(u).getTime();a=Math.floor(h/864e5),l=Math.floor(h/36e5)-24*a,n=Math.floor(h/6e4)-(24*a*60+60*l)}return a||l?(this.location_icon_val="location_off","red"):n&&n<this.trackMinimumTime?(this.location_icon_val="location_on","green"):(this.location_icon_val="location_off","red")}fetchLocationOnMap(){this.employee_last_location.lat&&this.employee_last_location.lng&&(this.center={lat:Number(this.employee_last_location.lat),lng:Number(this.employee_last_location.lng)})}fetchActivityLocationOnMap(n){n.lat&&n.lng&&(this.center={lat:Number(n.lat),lng:Number(n.lng)})}calculateAndDisplayRoute(n,a){this.directionsService.route({origin:n,destination:a,travelMode:google.maps.TravelMode.DRIVING}).then(h=>{this.directionsResults.push(h),this.directionsRenderer.setDirections(h)}).catch(h=>console.log("Directions request failed due to "+h))}getLocationIconColorForActivity(n){return n.lat&&n.lng?(n.location_icon_val="location_on","green"):(n.location_icon_val="location_off","red")}computeTotalDistance(n){let a=0;const l=n.routes[0];if(l){for(let u=0;u<l.legs.length;u++)a+=l.legs[u].distance.value;return a/=1e3,a}}crmHaversineDistanceCalculation(n,a){return(0,ae.Z)(function*(){let l=n.lat,h=a.lat,M=(h-l)*Math.PI/180,O=(a.lng-n.lng)*Math.PI/180;l=l*Math.PI/180,h=h*Math.PI/180;let A=Math.pow(Math.sin(M/2),2)+Math.pow(Math.sin(O/2),2)*Math.cos(l)*Math.cos(h);return 2*Math.asin(Math.sqrt(A))*6371})()}}return o.\u0275fac=function(n){return new(n||o)(e.\u0275\u0275directiveInject(e.LOCALE_ID),e.\u0275\u0275directiveInject(nr),e.\u0275\u0275directiveInject(f.F0),e.\u0275\u0275directiveInject(et.t2),e.\u0275\u0275directiveInject(en.t),e.\u0275\u0275directiveInject(ir.v),e.\u0275\u0275directiveInject(we),e.\u0275\u0275directiveInject(de.uw),e.\u0275\u0275directiveInject(ar.H7))},o.\u0275cmp=e.\u0275\u0275defineComponent({type:o,selectors:[["app-crm-live-tracking"]],viewQuery:function(n,a){if(1&n&&(e.\u0275\u0275viewQuery(Tt,5),e.\u0275\u0275viewQuery(ie,5),e.\u0275\u0275viewQuery(Bn.N7,5),e.\u0275\u0275viewQuery(Ge,5),e.\u0275\u0275viewQuery(Br,5)),2&n){let l;e.\u0275\u0275queryRefresh(l=e.\u0275\u0275loadQuery())&&(a.infoWindow=l.first),e.\u0275\u0275queryRefresh(l=e.\u0275\u0275loadQuery())&&(a.googleMap=l.first),e.\u0275\u0275queryRefresh(l=e.\u0275\u0275loadQuery())&&(a.viewport=l.first),e.\u0275\u0275queryRefresh(l=e.\u0275\u0275loadQuery())&&(a.calendarComponent=l.first),e.\u0275\u0275queryRefresh(l=e.\u0275\u0275loadQuery())&&(a.directionsRenders=l)}},decls:35,vars:14,consts:[["fxLayout","row",2,"font","small-caption","align-items","baseline","padding-top","1%"],["fxFlex","25","fxFlex.xs","100","appearance","outline",1,"mx-2","my-2"],[3,"value","formControl","valueChange"],[3,"value"],[3,"value","disabled",4,"ngFor","ngForOf"],["fxFlex.xs","100","fxFlex","25","appearance","outline",1,"mx-2","my-2"],["matInput","","placeholder","DD-MM-YYYY","required","",3,"min","max","matDatepicker","formControl","keypress","click"],["matSuffix","",1,"datepicker",3,"for"],["selectedDate",""],["fxLayout","column","fxLayout.xs","row",1,"card",2,"background-color","lightgreen","width","-webkit-fill-available"],["fxLayoutAlign","space-evenly center","fxLayout","row",2,"color","black","padding","2%","font-size","initial","font-weight","300"],[1,"",2,"font-size","larger","font-weight","400"],["fxLayout","column","fxLayout.xs","row",1,"card",2,"background-color","lightsalmon","width","-webkit-fill-available"],["fxLayout","column","fxLayout.xs","row",1,"card",2,"background-color","whitesmoke","width","-webkit-fill-available"],["fxLayout","row"],["fxLayout","column","fxFlex","25","style","height: fit-content;",4,"ngIf"],["fxLayout","column","fxFlex","selectedEmployee?75:100"],["style","height:500px ; position: relative; overflow: hidden;",4,"ngIf"],[3,"value","disabled"],["fxLayout","column","fxFlex","25",2,"height","fit-content"],["fxLayout","row","fxFlex","100","fxLayoutAlign.xs","center",2,"padding-top","2%"],["fxLayout","row wrap",1,"tableP",2,"width","-webkit-fill-available"],[1,"outline",2,"width","100%","margin","10px","padding","1%","background-color","ghostwhite"],["fxLayout","row","fxLayoutAlign","space-between",2,"padding","5px","font-weight","600","text-align","center"],["fxLayout","row","fxFlex","100","style","text-align: end;",4,"ngIf"],["fxLayout","row","fxFlex","100","style","text-align: end;","fxLayoutAlign","end",4,"ngIf"],["fxLayout","row",4,"ngIf"],[4,"ngFor","ngForOf"],["fxLayout","row","fxFlex","100",2,"text-align","end"],[1,"mat-icon-size",2,"position","relative","-webkit-writing-mode","vertical-lr","margin-top","-15px",3,"ngStyle"],["style"," font-size: x-small;position:absolute;display:inline-block; color: blue;margin-left: 10px;",3,"ngStyle",4,"ngIf"],[2,"font-size","x-small","position","absolute","display","inline-block","color","blue","margin-left","10px",3,"ngStyle"],["fxLayout","row","fxFlex","100","fxLayoutAlign","end",2,"text-align","end"],["type","button",1,"btn",2,"background-color","unset",3,"click"],[1,"material-icons",2,"position","relative",3,"ngStyle"],["fxLayout","column","fxFlex","100",2,"padding","5px"],[4,"ngIf"],["fxLayout","row","fxFlex","100",2,"padding-left","10px","text-align","center","color","Green"],["fxLayout","row","fxLayoutAlign","space-between",2,"padding","5px","font-weight","600","text-align","center","color","blue",3,"click"],["type","button","fxLayoutAlign","end",1,"btn",2,"background-color","unset",3,"click"],["fxLayout","row","fxFlex","100",2,"padding-left","10px","text-align","center"],["fxLayout","column","fxFlex","100","style","padding:5px;",4,"ngIf"],[1,"img-fluid","custom-image",3,"src"],[2,"height","500px","position","relative","overflow","hidden"],["height","100%","width","100%",3,"center","options"],[3,"options","directions",4,"ngFor","ngForOf"],[3,"position","label","icon","mapMouseover","mapMousedown",4,"ngFor","ngForOf"],[3,"options","directions"],["directionsRender",""],[3,"position","label","icon","mapMouseover","mapMousedown"],["marker","mapMarker"],["fxLayout","row",2,"text-align","center"],["fxLayout","column",4,"ngFor","ngForOf"],["fxLayout","column","style","width: 190px;",4,"ngIf"],["fxLayout","column"],["fxLayout","column",2,"width","190px"],[2,"width","190px",3,"ngStyle","ngClass","click"],["fxLayout","column",4,"ngIf"],["fxLayout","column",2,"width","190px",3,"ngStyle"],[2,"width","190px"],[2,"width","100px","margin","auto",3,"src"],[2,"width","190px","font-weight","bold","font-size","x-small"],[2,"width","190px","font-size","x-small"]],template:function(n,a){if(1&n){const l=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"mat-card")(1,"div",0)(2,"mat-form-field",1)(3,"mat-label"),e.\u0275\u0275text(4,"Employee"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"mat-select",2),e.\u0275\u0275listener("valueChange",function(h){return a.selectedEmployee=h}),e.\u0275\u0275elementStart(6,"mat-option",3),e.\u0275\u0275text(7,"All"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(8,$o,2,3,"mat-option",4),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(9,"mat-form-field",5)(10,"mat-label"),e.\u0275\u0275text(11,"Date "),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(12,"input",6),e.\u0275\u0275listener("keypress",function(){return!1})("click",function(){e.\u0275\u0275restoreView(l);const h=e.\u0275\u0275reference(15);return e.\u0275\u0275resetView(h.open())}),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(13,"mat-datepicker-toggle",7)(14,"mat-datepicker",null,8),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(16,"div",9)(17,"div",10)(18,"div")(19,"span",11),e.\u0275\u0275text(20),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(21,"div",12)(22,"div",10)(23,"div")(24,"span",11),e.\u0275\u0275text(25),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(26,"div",13)(27,"div",10)(28,"div")(29,"span",11),e.\u0275\u0275text(30),e.\u0275\u0275elementEnd()()()()(),e.\u0275\u0275elementStart(31,"div",14),e.\u0275\u0275template(32,J,17,6,"div",15),e.\u0275\u0275elementStart(33,"div",16),e.\u0275\u0275template(34,Xn,4,4,"div",17),e.\u0275\u0275elementEnd()()()}if(2&n){const l=e.\u0275\u0275reference(15);e.\u0275\u0275advance(5),e.\u0275\u0275property("value",a.selectedEmployee)("formControl",a.selectedEmployeeControl),e.\u0275\u0275advance(1),e.\u0275\u0275property("value",0),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",a.attendanceData),e.\u0275\u0275advance(4),e.\u0275\u0275property("min",a.minDate)("max",a.maxDate)("matDatepicker",l)("formControl",a.selectedDateControl),e.\u0275\u0275advance(1),e.\u0275\u0275property("for",l),e.\u0275\u0275advance(7),e.\u0275\u0275textInterpolate1("Punched In: ",a.punchInEmployees," "),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate1("Punched Out: ",a.punchOutEmployees," "),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate1("Total Employees: ",a.totalEmployees," "),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",a.selectedEmployee),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",a.mapInitialized)}},dependencies:[N.mk,N.sg,N.O5,N.PC,ve.ey,ue.a8,dt.Mq,dt.hl,dt.nW,wr.d,tt.Hw,q.KE,q.hX,q.R9,me.Nt,Pt.gD,C.Fj,C.JJ,C.Q7,C.oH,G.xw,G.Wh,G.yH,Ct.oO,Ct.Zl,ie,ji,Tt,zn],styles:['.card[_ngcontent-%COMP%]{border-radius:10px;box-shadow:0 4px 8px #0000001a;overflow:hidden}.marker-work[_ngcontent-%COMP%]{background-color:#00f}.marker-meeting[_ngcontent-%COMP%], .marker-default[_ngcontent-%COMP%]{background-color:green}.mat-icon-size[_ngcontent-%COMP%]{transform:scale(1);font-size:50px;height:50px;width:50px}.mark-class-normal[_ngcontent-%COMP%]{color:"white";font-weight:300}.mark-class-display[_ngcontent-%COMP%]{color:"lightgreen";font-weight:500}']}),o})();var Ko=k(40165),Wr=k(61563),$e=k(80574),Zr=k(56709);function Xo(o,d){if(1&o&&(e.\u0275\u0275elementStart(0,"p",6),e.\u0275\u0275element(1,"input",7),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd()),2&o){const n=d.index,a=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("formControlName",n),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",a.columns[n].name," ")}}let es=(()=>{class o{constructor(n,a,l,u,h,b){this.dialogRef=n,this.crm=a,this.ES=l,this.injectedData=u,this.router=h,this.formBuilder=b,this.columns=[],this.dynamicArr=[],this.reportpopupForm=C.nJ,this.data=[],this.isindeterminate=!1,this.ischecked=!1,this.columns=this.injectedData?this.injectedData.columns??[]:[],this.route_name=this.injectedData?this.injectedData.route??"":"",this.report_name=this.injectedData?this.injectedData.report_name??"":"",this.reportpopupForm=this.formBuilder.group({check:[],earnings:new C.vC([])}),this.userSession=JSON.parse(sessionStorage.getItem("user")||""),this.addCheckboxes()}get earningsFormArray(){return this.reportpopupForm.controls.earnings}onNoClick(){this.dialogRef.close()}addCheckboxes(){this.earningsFormArray.reset(),this.columns.forEach(()=>this.earningsFormArray.push(new C.p4(!1)))}onChange(n){this.dynamicArr=[],n.checked?(this.columns.forEach(()=>{this.dynamicArr.push(Number(1))}),this.earningsFormArray.setValue(this.dynamicArr),this.isindeterminate=!1,this.ischecked=!0):(this.columns.forEach(()=>{this.dynamicArr.push(Number(0))}),this.earningsFormArray.setValue(this.dynamicArr),this.isindeterminate=!1,this.ischecked=!1)}ngOnInit(){this.getFunction()}getFunction(){"client report"===this.report_name.toLowerCase()&&this.getClientReportColumns()}getClientReportColumns(){this.ischecked=!0,this.isindeterminate=!1,this.crm.getCrmClientReportColumnConfigures({empid:this.userSession.id}).subscribe(n=>{if(this.data=n.data,n.data&&n.data[0]&&n.data[0].configurations){let u=JSON.parse(JSON.stringify(n.data[0].configurations)).split(",");this.dynamicArr=[];var a=0,l="";this.earningsFormArray.reset(),u.forEach(h=>{a=Number(a)+Number(h),this.dynamicArr.push(Number(h)),l=l+(l.toString().length?",":"")+h.toString()}),this.earningsFormArray.setValue(this.dynamicArr),this.ischecked=a===u.length,this.isindeterminate=u.length-a>0,this.reportpopupForm.controls.check.setValue(this.ischecked)}})}save(){const n=this.reportpopupForm.value.earnings.map((l,u)=>l?1:0).filter(l=>null!==l);var a=[{empid:this.userSession.id}];this.columns.forEach(l=>{a[0][l.keyname.toString()]=n[l.id]}),"client report"===this.report_name.toLowerCase()&&(this.setClientReportColumns(a[0]),this.dialogRef.close({closed:!0}))}setClientReportColumns(n){this.crm.setCrmClientReportColumnConfiguration(n).subscribe(a=>{a.status&&this.router.navigate([this.route_name])})}}return o.\u0275fac=function(n){return new(n||o)(e.\u0275\u0275directiveInject(de.so),e.\u0275\u0275directiveInject(we),e.\u0275\u0275directiveInject(rr.b),e.\u0275\u0275directiveInject(de.WI),e.\u0275\u0275directiveInject(f.F0),e.\u0275\u0275directiveInject(C.QS))},o.\u0275cmp=e.\u0275\u0275defineComponent({type:o,selectors:[["app-crm-rptcolumns-popup"]],decls:9,vars:4,consts:[["autocomplete","off",3,"formGroup"],["color","primary",3,"checked","indeterminate","change"],["formArrayName","earnings",4,"ngFor","ngForOf"],["fxLayoutAlign","center"],[1,"btn","btn-primary","mr-2","mb-2",3,"click"],[1,"btn","btn-danger","mr-2","mb-2",3,"click"],["formArrayName","earnings"],["type","checkbox",3,"formControlName"]],template:function(n,a){1&n&&(e.\u0275\u0275elementStart(0,"form",0)(1,"mat-checkbox",1),e.\u0275\u0275listener("change",function(u){return a.onChange(u)}),e.\u0275\u0275text(2,"Select All"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(3,Xo,3,2,"p",2),e.\u0275\u0275elementStart(4,"div",3)(5,"button",4),e.\u0275\u0275listener("click",function(){return a.save()}),e.\u0275\u0275text(6,"Save"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(7,"button",5),e.\u0275\u0275listener("click",function(){return a.onNoClick()}),e.\u0275\u0275text(8,"Cancel"),e.\u0275\u0275elementEnd()()()),2&n&&(e.\u0275\u0275property("formGroup",a.reportpopupForm),e.\u0275\u0275advance(1),e.\u0275\u0275property("checked",a.ischecked)("indeterminate",a.isindeterminate),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",a.earningsFormArray.controls))},dependencies:[N.sg,Zr.oG,C._Y,C.Wl,C.JJ,C.JL,C.sg,C.u,C.CE,G.Wh]}),o})();const ei=["TABLE"];function It(o,d){if(1&o){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",8),e.\u0275\u0275listener("keyup.enter",function(){e.\u0275\u0275restoreView(n);const l=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(l.exportAsXLSX())}),e.\u0275\u0275elementStart(1,"mat-icon",34),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(n);const l=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(l.exportAsXLSX())}),e.\u0275\u0275text(2,"download"),e.\u0275\u0275elementEnd()()}2&o&&e.\u0275\u0275property("tabIndex",3)}function ti(o,d){1&o&&(e.\u0275\u0275elementStart(0,"th",35),e.\u0275\u0275text(1," S.No "),e.\u0275\u0275elementEnd())}function qr(o,d){if(1&o&&(e.\u0275\u0275elementStart(0,"td",36)(1,"span"),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd()()),2&o){const n=d.index;e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(n+1)}}function ni(o,d){1&o&&(e.\u0275\u0275elementStart(0,"th",35),e.\u0275\u0275text(1," Organization "),e.\u0275\u0275elementEnd())}function Gr(o,d){if(1&o&&(e.\u0275\u0275elementStart(0,"td",36)(1,"span"),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd()()),2&o){const n=d.$implicit;e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",n.organization_name,"")}}function $r(o,d){1&o&&(e.\u0275\u0275elementStart(0,"th",35),e.\u0275\u0275text(1,"Created By "),e.\u0275\u0275elementEnd())}function ii(o,d){if(1&o&&(e.\u0275\u0275elementStart(0,"td",36)(1,"span"),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd()()),2&o){const n=d.$implicit;e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",n.created_by,"")}}function Hr(o,d){1&o&&(e.\u0275\u0275elementStart(0,"th",35),e.\u0275\u0275text(1,"Contact Person "),e.\u0275\u0275elementEnd())}function Mn(o,d){if(1&o&&(e.\u0275\u0275elementStart(0,"td",36)(1,"span"),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd()()),2&o){const n=d.$implicit;e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",n.contact_person,"")}}function Ut(o,d){1&o&&(e.\u0275\u0275elementStart(0,"th",35),e.\u0275\u0275text(1,"Mobile Number "),e.\u0275\u0275elementEnd())}function ri(o,d){if(1&o&&(e.\u0275\u0275elementStart(0,"td",36)(1,"span"),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd()()),2&o){const n=d.$implicit;e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",n.mobile_number,"")}}function ts(o,d){1&o&&(e.\u0275\u0275elementStart(0,"th",35),e.\u0275\u0275text(1," Address "),e.\u0275\u0275elementEnd())}function ns(o,d){if(1&o&&(e.\u0275\u0275elementStart(0,"td",36)(1,"span"),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd()()),2&o){const n=d.$implicit;e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1("",n.address," ")}}function is(o,d){1&o&&(e.\u0275\u0275elementStart(0,"th",35),e.\u0275\u0275text(1," Country "),e.\u0275\u0275elementEnd())}function ai(o,d){if(1&o&&(e.\u0275\u0275elementStart(0,"td",36)(1,"span"),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd()()),2&o){const n=d.$implicit;e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1("",n.country," ")}}function oi(o,d){1&o&&(e.\u0275\u0275elementStart(0,"th",35),e.\u0275\u0275text(1," State "),e.\u0275\u0275elementEnd())}function Vi(o,d){if(1&o&&(e.\u0275\u0275elementStart(0,"td",36)(1,"span"),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd()()),2&o){const n=d.$implicit;e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1("",n.state," ")}}function rs(o,d){1&o&&(e.\u0275\u0275elementStart(0,"th",35),e.\u0275\u0275text(1," City "),e.\u0275\u0275elementEnd())}function Qr(o,d){if(1&o&&(e.\u0275\u0275elementStart(0,"td",36)(1,"span"),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd()()),2&o){const n=d.$implicit;e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1("",n.city," ")}}function as(o,d){1&o&&(e.\u0275\u0275elementStart(0,"th",35),e.\u0275\u0275text(1," Created Time "),e.\u0275\u0275elementEnd())}function os(o,d){if(1&o&&(e.\u0275\u0275elementStart(0,"td",36)(1,"span"),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd()()),2&o){const n=d.$implicit;e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1("",n.created_on," ")}}function fe(o,d){1&o&&(e.\u0275\u0275elementStart(0,"th",35),e.\u0275\u0275text(1," Updated Time "),e.\u0275\u0275elementEnd())}function xe(o,d){if(1&o&&(e.\u0275\u0275elementStart(0,"td",36)(1,"span"),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd()()),2&o){const n=d.$implicit;e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1("",n.updated_on," ")}}function ss(o,d){1&o&&e.\u0275\u0275element(0,"tr",37)}function ls(o,d){1&o&&e.\u0275\u0275element(0,"tr",38)}function Yr(o,d){1&o&&(e.\u0275\u0275elementStart(0,"tr",39)(1,"td",40),e.\u0275\u0275text(2,"No data found"),e.\u0275\u0275elementEnd()())}function cs(o,d){if(1&o){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",4)(1,"div",5)(2,"span",6)(3,"mat-label"),e.\u0275\u0275text(4," Client Report "),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(5,"span",7)(6,"button",8),e.\u0275\u0275listener("keyup.enter",function(){e.\u0275\u0275restoreView(n);const l=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(l.popup())}),e.\u0275\u0275elementStart(7,"mat-icon",9),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(n);const l=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(l.popup())}),e.\u0275\u0275text(8,"blur_linear"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(9,"button",8),e.\u0275\u0275listener("keyup.enter",function(){e.\u0275\u0275restoreView(n);const l=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(l.filter())}),e.\u0275\u0275elementStart(10,"mat-icon",10),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(n);const l=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(l.filter())}),e.\u0275\u0275text(11,"filter_alt"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(12,It,3,1,"button",11),e.\u0275\u0275elementStart(13,"mat-form-field",12)(14,"mat-label"),e.\u0275\u0275text(15,"Search"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(16,"input",13,14),e.\u0275\u0275listener("keyup",function(l){e.\u0275\u0275restoreView(n);const u=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(u.applyFilter(l))}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(18,"mat-icon",15),e.\u0275\u0275text(19,"search"),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275text(20,"Created By "),e.\u0275\u0275elementStart(21,"div",16)(22,"table",17),e.\u0275\u0275elementContainerStart(23,18),e.\u0275\u0275template(24,ti,2,0,"th",19),e.\u0275\u0275template(25,qr,3,1,"td",20),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(26,21),e.\u0275\u0275template(27,ni,2,0,"th",19),e.\u0275\u0275template(28,Gr,3,1,"td",20),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(29,22),e.\u0275\u0275template(30,$r,2,0,"th",19),e.\u0275\u0275template(31,ii,3,1,"td",20),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(32,23),e.\u0275\u0275template(33,Hr,2,0,"th",19),e.\u0275\u0275template(34,Mn,3,1,"td",20),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(35,24),e.\u0275\u0275template(36,Ut,2,0,"th",19),e.\u0275\u0275template(37,ri,3,1,"td",20),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(38,25),e.\u0275\u0275template(39,ts,2,0,"th",19),e.\u0275\u0275template(40,ns,3,1,"td",20),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(41,26),e.\u0275\u0275template(42,is,2,0,"th",19),e.\u0275\u0275template(43,ai,3,1,"td",20),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(44,27),e.\u0275\u0275template(45,oi,2,0,"th",19),e.\u0275\u0275template(46,Vi,3,1,"td",20),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(47,28),e.\u0275\u0275template(48,rs,2,0,"th",19),e.\u0275\u0275template(49,Qr,3,1,"td",20),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(50,29),e.\u0275\u0275template(51,as,2,0,"th",19),e.\u0275\u0275template(52,os,3,1,"td",20),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(53,30),e.\u0275\u0275template(54,fe,2,0,"th",19),e.\u0275\u0275template(55,xe,3,1,"td",20),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275template(56,ss,1,0,"tr",31),e.\u0275\u0275template(57,ls,1,0,"tr",32),e.\u0275\u0275template(58,Yr,3,0,"tr",33),e.\u0275\u0275elementEnd()()()}if(2&o){const n=e.\u0275\u0275nextContext();e.\u0275\u0275advance(6),e.\u0275\u0275property("tabIndex",1),e.\u0275\u0275advance(3),e.\u0275\u0275property("tabIndex",2),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",n.allfilterdata.length>0),e.\u0275\u0275advance(4),e.\u0275\u0275property("tabIndex",4),e.\u0275\u0275advance(6),e.\u0275\u0275property("dataSource",n.dataSource),e.\u0275\u0275advance(34),e.\u0275\u0275property("matHeaderRowDef",n.displayedColumns3)("matHeaderRowDefSticky",!0),e.\u0275\u0275advance(1),e.\u0275\u0275property("matRowDefColumns",n.displayedColumns3)}}function Bi(o,d){if(1&o){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",49)(1,"mat-checkbox",50),e.\u0275\u0275listener("change",function(l){e.\u0275\u0275restoreView(n);const u=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(u.empstatus(l,0))}),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(2,"Created By"),e.\u0275\u0275elementEnd()}if(2&o){const n=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(1),e.\u0275\u0275property("checked",1==n.ishiding[0])}}function Dn(o,d){if(1&o&&(e.\u0275\u0275elementStart(0,"p",52),e.\u0275\u0275element(1,"input",53),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd()),2&o){const n=d.index,a=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(1),e.\u0275\u0275property("formControlName",n),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",a.created_by[n].empname," ")}}function Wi(o,d){if(1&o&&(e.\u0275\u0275elementStart(0,"ul"),e.\u0275\u0275template(1,Dn,3,2,"p",51),e.\u0275\u0275elementEnd()),2&o){const n=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(1),e.\u0275\u0275property("ngForOf",n.created_by_FormArray.controls)}}function cn(o,d){1&o&&(e.\u0275\u0275elementStart(0,"h3",54),e.\u0275\u0275text(1,"Note: Please select at least one option while filtering a field."),e.\u0275\u0275elementEnd())}function kn(o,d){if(1&o){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div")(1,"mat-card")(2,"div",41)(3,"span",42)(4,"mat-icon",43),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(n);const l=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(l.filter())}),e.\u0275\u0275text(5,"filter_alt"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275template(6,Bi,3,1,"div",44),e.\u0275\u0275template(7,Wi,2,1,"ul",3),e.\u0275\u0275template(8,cn,2,0,"h3",45),e.\u0275\u0275elementStart(9,"div",46)(10,"button",47),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(n);const l=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(l.search())}),e.\u0275\u0275text(11,"Search"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(12,"button",48),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(n);const l=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(l.clearreport())}),e.\u0275\u0275text(13,"Cancel"),e.\u0275\u0275elementEnd()()()()}if(2&o){const n=e.\u0275\u0275nextContext();e.\u0275\u0275advance(6),e.\u0275\u0275property("ngIf","1"==n.arrlist[0]),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.ishiding[0]&&"1"==n.arrlist[0]),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.arrlist.length>0)}}function De(o=1){return n=>n.controls.map(l=>l.value).reduce((l,u)=>u?l+u:l,0)>=o?null:{required:!0}}let si=(()=>{class o{constructor(n,a,l,u,h){this.formBuilder=n,this.router=a,this.dialog=l,this.crm=u,this.spinner=h,this.reportForm=C.nJ,this.ishide=!0,this.isview=!1,this.ischecked=!1,this.ishidestatus=!1,this.addflagcheckboxes=!1,this.ishiding=[1,1,1,1,1,1,1,1,1],this.ids=[0,1,2,3,4,5,6,7,8],this.arrlist=[1,1,1,1,1,1,1,1,1],this.allfilterdata=[],this.displayedColumns2=[],this.displayedColumns3=[],this.filterlist=[],this.filterlist2=[],this.created_by=[],this.empids=[],this.valid=!0,this.arr=["sno","Organisation"],this.dataSource=[],this.columns=[]}get created_by_FormArray(){return this.reportForm.controls.created_by}ngOnInit(){this.columns=[{id:0,name:"Created By",keyname:"created_by"},{id:1,name:"Contact Person",keyname:"contact_person"},{id:2,name:"Mobile",keyname:"mobile_number"},{id:3,name:"Address",keyname:"address"},{id:4,name:"Country",keyname:"country"},{id:5,name:"State",keyname:"state"},{id:6,name:"City",keyname:"city"},{id:7,name:"Created Time",keyname:"created_on"},{id:8,name:"Updated Time",keyname:"updated_on"}],this.userSession=JSON.parse(sessionStorage.getItem("user")||""),this.getCrmClientReportColumnConfigures()}reportForming(){this.reportForm=this.formBuilder.group({created_by:new C.vC([],De(Number(this.arrlist[0]))),contact_person:new C.vC([],De(Number(this.arrlist[1]))),mobile_number:new C.vC([],De(Number(this.arrlist[2]))),address:new C.vC([],De(Number(this.arrlist[3]))),country:new C.vC([],De(Number(this.arrlist[4]))),state:new C.vC([],De(Number(this.arrlist[5]))),city:new C.vC([],De(Number(this.arrlist[6]))),created_on:new C.vC([],De(Number(this.arrlist[7]))),updated_on:new C.vC([],De(Number(this.arrlist[8])))})}addEmployees(){this.created_by.forEach(()=>this.created_by_FormArray.push(new C.p4(!1))),"1"==this.arrlist[0]&&this.created_by_FormArray.setValue(this.empids)}empstatus(n,a){if(n.checked)for(let l=0;l<this.ids.length;l++)this.ishiding[l]=a==this.ids[l]&&n.checked?1:0;else this.ishiding[a]=0}applyFilter(n){this.dataSource.filter=n.target.value.trim().toLowerCase(),this.dataSource.paginator&&this.dataSource.paginator.firstPage()}filter(){this.ishide=!1,this.isview=!0,this.addflagcheckboxes||(this.addEmployees(),this.search())}clearreport(){this.ishide=!0,this.isview=!1}popup(){var n=this;return(0,ae.Z)(function*(){let a={columns:n.columns,route_name:"[Crm/CrmClientReport]",report_name:"Client Report"};yield n.dialog.open(es,{width:"390px",position:{top:"130px"},disableClose:!0,data:a}).afterClosed().subscribe(u=>{u&&u.closed&&location.reload()})})()}cancel(){this.ishide=!0,this.isview=!1}exportAsXLSX(){const n=$e.P6.table_to_sheet(document.getElementById("table")),a=$e.P6.book_new();$e.P6.book_append_sheet(a,n,"Client_Report"),$e.NC(a,"Client_Report.xlsx")}getEmsEmployeeColumnFilterData(){this.created_by=[],this.empids=[],this.crm.getCrmEmployeesForManagers({rm_id:this.userSession.id,selected_date:null}).subscribe(n=>{for(let a=0;a<n.data.length;a++)this.created_by.push(n.data[a]),this.empids.push(n.data[a].empid);this.filter()})}search(){this.spinner.show(),this.addflagcheckboxes=!0;const n=this.reportForm.value.created_by.map((l,u)=>l?this.empids[u]:null).filter(l=>null!==l);this.crm.getCrmClientSelectedColumnsReport({employee_id:this.userSession.id,created_by_val:n,search_string:null}).subscribe(l=>{this.allfilterdata=[],this.dataSource=new T.by([]),l.status&&0!=l.data.length&&(this.allfilterdata=l.data,this.dataSource=new T.by(this.allfilterdata)),this.ishide=!0,this.isview=!1}),this.spinner.hide()}getCrmClientReportColumnConfigures(){this.displayedColumns2=[],this.reportForming(),this.crm.getCrmClientReportColumnConfigures({empid:this.userSession.id}).subscribe(n=>{this.arrlist=JSON.parse(JSON.stringify(n.data[0].configurations)).split(","),this.getEmsEmployeeColumnFilterData();for(let a=0;a<this.arrlist.length;a++)"1"==this.arrlist[a]&&this.displayedColumns2.push(this.columns[a].keyname);this.displayedColumns3=this.arr.concat(this.displayedColumns2)})}clear(){this.ishide=!0,this.isview=!1}getPageSizes(){var n=[];return this.dataSource.data.length>5&&n.push(5),this.dataSource.data.length>10&&n.push(10),this.dataSource.data.length>20&&n.push(20),n.push(this.dataSource.data.length),n}}return o.\u0275fac=function(n){return new(n||o)(e.\u0275\u0275directiveInject(C.QS),e.\u0275\u0275directiveInject(f.F0),e.\u0275\u0275directiveInject(de.uw),e.\u0275\u0275directiveInject(we),e.\u0275\u0275directiveInject(et.t2))},o.\u0275cmp=e.\u0275\u0275defineComponent({type:o,selectors:[["app-crm-client-report"]],viewQuery:function(n,a){if(1&n&&(e.\u0275\u0275viewQuery(ei,5),e.\u0275\u0275viewQuery(wt.NW,5),e.\u0275\u0275viewQuery(mt.YE,5)),2&n){let l;e.\u0275\u0275queryRefresh(l=e.\u0275\u0275loadQuery())&&(a.table=l.first),e.\u0275\u0275queryRefresh(l=e.\u0275\u0275loadQuery())&&(a.paginator=l.first),e.\u0275\u0275queryRefresh(l=e.\u0275\u0275loadQuery())&&(a.sort=l.first)}},decls:5,vars:3,consts:[["fxLayout","column",1,"first-col"],["autocomplete","off",3,"formGroup"],["class","div-pad","fxLayout","column",4,"ngIf"],[4,"ngIf"],["fxLayout","column",1,"div-pad"],["fxLayout","row","fxLayout.xs","column","fxFlex.xs","100%","fxLayoutAlign.gt-md","space-between center",2,"height","50px"],["fxFlex","50",1,"title"],["fxFlex","50","fxLayoutAlign","end"],["mat-icon-button","",3,"tabIndex","keyup.enter"],["title","Select",1,"styles",3,"click"],["title","Filter",1,"styles",3,"click"],["mat-icon-button","",3,"tabIndex","keyup.enter",4,"ngIf"],["fxFlex","56","fxFlex.lt-lg","100","fxFlex.xs","100%","appearance","outline"],["matInput","","placeholder","Search",3,"tabIndex","keyup"],["input",""],["matSuffix","",2,"color","#28acaf"],["id","table",1,"example-container","mat-elevation-z8"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","sno"],["mat-header-cell","","class","header-cell",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","Organisation"],["matColumnDef","created_by"],["matColumnDef","contact_person"],["matColumnDef","mobile_number"],["matColumnDef","address"],["matColumnDef","country"],["matColumnDef","state"],["matColumnDef","city"],["matColumnDef","created_on"],["matColumnDef","updated_on"],["class","headerbox title","mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["title","Download",1,"styles",3,"click"],["mat-header-cell","",1,"header-cell"],["mat-cell",""],["mat-header-row","",1,"headerbox","title"],["mat-row",""],[1,"mat-row"],["colspan","10",1,"mat-cell",2,"text-align","center"],["fxLayout","row","fxLayout.xs","column","fxFlex.xs","100%","fxLayoutAlign","space-between"],["fxLayoutAlign","end",1,"mx-2","my-2"],[1,"styles",3,"click"],["fxLayout","row wrap","fxLayout.xs","column","fxLayoutAlign.xs","center center","class","text2",4,"ngIf"],["style","text-align:center;color: red;",4,"ngIf"],["fxLayoutAlign","center"],[1,"btn","btn-primary","mr-2","mb-2",3,"click"],[1,"btn","btn-danger","mr-2","mb-2",3,"click"],["fxLayout","row wrap","fxLayout.xs","column","fxLayoutAlign.xs","center center",1,"text2"],["color","primary",1,"example-margin",3,"checked","change"],["formArrayName","created_by",4,"ngFor","ngForOf"],["formArrayName","created_by"],["type","checkbox",3,"formControlName"],[2,"text-align","center","color","red"]],template:function(n,a){1&n&&(e.\u0275\u0275elementStart(0,"div",0)(1,"form",1)(2,"mat-card"),e.\u0275\u0275template(3,cs,59,8,"div",2),e.\u0275\u0275template(4,kn,14,3,"div",3),e.\u0275\u0275elementEnd()()()),2&n&&(e.\u0275\u0275advance(1),e.\u0275\u0275property("formGroup",a.reportForm),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",a.ishide),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",a.isview))},dependencies:[N.sg,N.O5,Nt.lW,ue.a8,Zr.oG,tt.Hw,q.KE,q.hX,q.R9,me.Nt,mt.YE,T.BZ,T.fO,T.as,T.w1,T.Dz,T.nj,T.ge,T.ev,T.XQ,T.Gk,T.Ee,C._Y,C.Wl,C.JJ,C.JL,C.sg,C.u,C.CE,G.xw,G.Wh,G.yH],styles:['.styles[_ngcontent-%COMP%]{width:40px}.example-margin[_ngcontent-%COMP%]{margin:0 12px}.example-section[_ngcontent-%COMP%], ul[_ngcontent-%COMP%]{list-style-type:none;margin-top:4px}.table-pad[_ngcontent-%COMP%]{padding-left:15px;padding-right:15px}.truncate[_ngcontent-%COMP%]{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;display:block!important}mat-card[_ngcontent-%COMP%]{transition:box-shadow .28s cubic-bezier(.4,0,.2,1);display:block;position:relative;padding-left:0;padding-right:0}.tableP[_ngcontent-%COMP%]{padding-left:1%;padding-right:1%;padding-bottom:1%}  .mat-select-panel[aria-label="Items per page:"] mat-option:last-child:before{content:"All"}  .mat-select-panel[aria-label="Items per page:"] mat-option:last-child .mat-option-text{display:none}.headerbox[_ngcontent-%COMP%]{height:45px;background-color:#28acaf!important;align-items:center}.title[_ngcontent-%COMP%]{font-family:Roboto;font-size:20px;font-weight:500;font-stretch:normal;font-style:normal;letter-spacing:.32px;color:#fff;margin-bottom:0} tr .mat-header-row{height:45px!important}  .mat-form-field-appearance-outline .mat-form-field-wrapper{margin:.2em 0!important}.mat-card-header[_ngcontent-%COMP%]   .mat-card-title[_ngcontent-%COMP%]{margin-bottom:0}.mat-table[_ngcontent-%COMP%]{overflow-x:scroll}.mat-cell[_ngcontent-%COMP%], .mat-header-cell[_ngcontent-%COMP%]{word-wrap:initial;display:table-cell;padding:0 10px;line-break:unset;width:100%;white-space:nowrap;overflow:hidden;vertical-align:middle}.mat-row[_ngcontent-%COMP%], .mat-header-row[_ngcontent-%COMP%]{display:table-row}.example-container[_ngcontent-%COMP%]{overflow-x:scroll;max-height:500px}.div-pad[_ngcontent-%COMP%]{padding-top:1%;padding-left:8px;padding-right:8px}.title[_ngcontent-%COMP%]{font-family:Roboto;font-size:20px;font-weight:500;font-stretch:normal;font-style:normal;letter-spacing:.32px;color:#000;margin-bottom:0}']}),o})();var dn=k(41442),Jr=(k(15439),k(54641)),ds=k(58493),ms=k(48569),us=k(69172);const li=["table"];function Fn(o,d){if(1&o&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"mat-option",42),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd()),2&o){const n=d.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275property("value",n.id),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate2("",n.firstname," ",n.lastname,"")}}function jr(o,d){if(1&o){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",43)(1,"div")(2,"span",44),e.\u0275\u0275text(3," | "),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"button",45)(5,"a",46),e.\u0275\u0275listener("keyup.enter",function(){e.\u0275\u0275restoreView(n);const l=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(l.exportPDF())}),e.\u0275\u0275elementStart(6,"img",47),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(n);const l=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(l.exportPDF())}),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(7,"span",44),e.\u0275\u0275text(8," | "),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"button",45)(10,"a",48),e.\u0275\u0275listener("keyup.enter",function(){e.\u0275\u0275restoreView(n);const l=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(l.exportAsXLSX())}),e.\u0275\u0275elementStart(11,"img",49),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(n);const l=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(l.exportAsXLSX())}),e.\u0275\u0275elementEnd()()()()()}2&o&&(e.\u0275\u0275advance(5),e.\u0275\u0275property("tabIndex",6),e.\u0275\u0275advance(5),e.\u0275\u0275property("tabIndex",7))}function m(o,d){1&o&&(e.\u0275\u0275elementStart(0,"th",50),e.\u0275\u0275text(1,"S.No"),e.\u0275\u0275elementEnd())}function mn(o,d){if(1&o&&(e.\u0275\u0275elementStart(0,"td",51),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&o){const n=d.index,a=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",n+1+a.paginator.pageIndex*a.paginator.pageSize," ")}}function ci(o,d){1&o&&(e.\u0275\u0275elementStart(0,"th",52),e.\u0275\u0275text(1," Name"),e.\u0275\u0275elementEnd())}function Oe(o,d){if(1&o&&(e.\u0275\u0275elementStart(0,"td",51),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&o){const n=d.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(n.empname)}}function $(o,d){1&o&&(e.\u0275\u0275elementStart(0,"th",50),e.\u0275\u0275text(1,"Locations Visited"),e.\u0275\u0275elementEnd())}function ps(o,d){if(1&o&&(e.\u0275\u0275elementStart(0,"td",53),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"date"),e.\u0275\u0275elementEnd()),2&o){const n=d.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind2(2,1,n.attendancedate,"dd-MM-yyyy")," ")}}function hs(o,d){1&o&&(e.\u0275\u0275elementStart(0,"th",52),e.\u0275\u0275text(1,"Total Visits"),e.\u0275\u0275elementEnd())}function fs(o,d){if(1&o&&(e.\u0275\u0275elementStart(0,"td",53),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"date"),e.\u0275\u0275elementEnd()),2&o){const n=d.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind2(2,1,n.firstlogintime,"dd-MM-yyyy HH:mm:ss")," ")}}function Vt(o,d){1&o&&(e.\u0275\u0275elementStart(0,"th",52),e.\u0275\u0275text(1,"Start Location"),e.\u0275\u0275elementEnd())}function gs(o,d){if(1&o&&(e.\u0275\u0275elementStart(0,"td",53),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"date"),e.\u0275\u0275elementEnd()),2&o){const n=d.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind2(2,1,n.lastlogouttime,"dd-MM-yyyy HH:mm:ss")," ")}}function _s(o,d){1&o&&(e.\u0275\u0275elementStart(0,"th",52),e.\u0275\u0275text(1,"End Location "),e.\u0275\u0275elementEnd())}function ys(o,d){if(1&o&&(e.\u0275\u0275elementStart(0,"td",51),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&o){const n=d.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",n.totalhours," ")}}function vs(o,d){1&o&&(e.\u0275\u0275elementStart(0,"th",52),e.\u0275\u0275text(1,"Total KMS"),e.\u0275\u0275elementEnd())}function Cs(o,d){if(1&o&&(e.\u0275\u0275elementStart(0,"td",51),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&o){const n=d.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",n.productivehours," ")}}function ut(o,d){1&o&&(e.\u0275\u0275elementStart(0,"th",52),e.\u0275\u0275text(1,"Photos Taken"),e.\u0275\u0275elementEnd())}function xs(o,d){if(1&o&&(e.\u0275\u0275elementStart(0,"td",51),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&o){const n=d.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",n.productivehours," ")}}function bs(o,d){1&o&&e.\u0275\u0275element(0,"tr",54)}function ws(o,d){1&o&&e.\u0275\u0275element(0,"tr",55)}function Ss(o,d){1&o&&(e.\u0275\u0275elementStart(0,"tr",56)(1,"td",57),e.\u0275\u0275text(2,"No data found"),e.\u0275\u0275elementEnd()())}const Is=function(){return[5,10,20]};Jr.vfs=ds.I.vfs;const Es=k(77429),Ms={parse:{dateInput:"LL"},display:{dateInput:"DD-MM-YYYY",monthYearLabel:"YYYY",dateA11yLabel:"LL",monthYearA11yLabel:"YYYY"}};let Ds=(()=>{class o{constructor(n,a,l,u,h){this.reportsService=n,this.datePipe=a,this.formBuilder=l,this.dialog=u,this.excelService=h,this.List=[],this.minDate=new Date("1950/01/01"),this.maxDate=new Date,this.pageLoading=!0,this.tableOne=[],this.filter=new C.p4,this.months=[{id:0,month:"Jan"},{id:1,month:"Feb"},{id:2,month:"Mar"},{id:3,month:"Apr"},{id:4,month:"May"},{id:5,month:"Jun"},{id:6,month:"Jul"},{id:7,month:"Aug"},{id:8,month:"Sep"},{id:9,month:"Oct"},{id:10,month:"Nov"},{id:11,month:"Dec"}],this.searchForm=this.formBuilder.group({fromDate:[new Date],toDate:[new Date],Users:["0"]}),this.dataSource=[],this.displayedColumns1=["sno","empname","attendancedate","firstlogintime","lastlogouttime","totalhours","productivehours","action"],this.displayedColumns=["sno","name","locationsvisited","totalvisits","startlocation","endlocation","totalkms","photos"],this.isLoading=!1}ngOnInit(){this.userSession=JSON.parse(sessionStorage.getItem("user")??""),this.Searchform(),this.getEmployeelist(),this.searchForm.get("fromDate")?.valueChanges.subscribe(n=>{null!=n&&(this.minToDate=n._d)})}getEmployeelist(){this.reportsService.getTotalEmployeslistByManagerId({rm_id:this.userSession.id}).subscribe(a=>{a.status&&(this.employeelist=[],this.employeelist=a.data,this.searchForm.controls.Users.setValue("0"))})}Searchform(){this.List=[],this.dataSource=new T.by(this.List);let n=this.datePipe.transform(this.searchForm.controls.fromDate.value,"y-MM-d"),a=this.datePipe.transform(this.searchForm.controls.toDate.value,"y-MM-d"),l=this.searchForm.controls.Users.value;"0"==l&&(l=null);let u={manager_empid:this.userSession.id,employee:l,fromdate:n,todate:a};this.isLoading=!0,this.reportsService.getAttendanceSummaryReport(u).subscribe(h=>{this.List=h.data,this.List.forEach(b=>{null!=b.breaks&&(b.breaks=b.breaks.split(","))}),this.isLoading=!1,this.dataSource=new T.by(this.List),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort,this.pageLoading=!1},h=>{this.isLoading=!1})}resetform(){this.dataSource.data=[],this.searchForm.reset(),this.searchForm.controls.fromDate.setValue(new Date),this.searchForm.controls.toDate.setValue(new Date),this.searchForm.controls.Users.setValue("0"),this.Searchform()}openDialog(n){this.dialog.open(dn.R,{width:"1000px",position:{top:"70px"},data:{attendanceid:n.attendanceid}}).afterClosed().subscribe(l=>{})}exportAsXLSX(){let n=this.datePipe.transform(this.searchForm.controls.fromDate.value,"dd-MM-YYYY"),a=this.datePipe.transform(this.searchForm.controls.toDate.value,"dd-MM-YYYY");const l=$e.P6.table_to_sheet(document.getElementById("table")),u=$e.P6.book_new();$e.P6.book_append_sheet(u,l,"Attendance_Summary_Report"),$e.NC(u,n+" - "+a+" - Attendance_Summary_Report.xlsx")}getPageSizes(){var n=[];return this.dataSource.data.length>5&&n.push(5),this.dataSource.data.length>10&&n.push(10),this.dataSource.data.length>20&&n.push(20),n.push(this.dataSource.data.length),n}exportPDF(){let n=this.datePipe.transform(this.searchForm.controls.fromDate.value,"dd-MM-YYYY"),a=this.datePipe.transform(this.searchForm.controls.toDate.value,"dd-MM-YYYY");var u=Es(this.table.nativeElement.innerHTML);Jr.createPdf({info:{title:n+" - "+a+" - Attendance Summary Report",author:"Sreeb tech",subject:"Theme",keywords:"Report"},footer:function(h,b){return{margin:10,columns:[{fontSize:9,text:[{text:"Page "+h.toString()+" of "+b}],alignment:"center"}]}},content:[{text:n+" - "+a+" - Attendance Summary Report\n\n",style:"header",alignment:"center",fontSize:14},u],pageOrientation:"landscape"}).download("Attendance Summary Report.pdf")}}return o.\u0275fac=function(n){return new(n||o)(e.\u0275\u0275directiveInject(ms.F),e.\u0275\u0275directiveInject(N.uU),e.\u0275\u0275directiveInject(C.QS),e.\u0275\u0275directiveInject(de.uw),e.\u0275\u0275directiveInject(us.r))},o.\u0275cmp=e.\u0275\u0275defineComponent({type:o,selectors:[["app-crm-sales-visit-report"]],viewQuery:function(n,a){if(1&n&&(e.\u0275\u0275viewQuery(li,5),e.\u0275\u0275viewQuery(T.BZ,5),e.\u0275\u0275viewQuery(wt.NW,5),e.\u0275\u0275viewQuery(mt.YE,5)),2&n){let l;e.\u0275\u0275queryRefresh(l=e.\u0275\u0275loadQuery())&&(a.table=l.first),e.\u0275\u0275queryRefresh(l=e.\u0275\u0275loadQuery())&&(a.tableOne=l.first),e.\u0275\u0275queryRefresh(l=e.\u0275\u0275loadQuery())&&(a.paginator=l.first),e.\u0275\u0275queryRefresh(l=e.\u0275\u0275loadQuery())&&(a.sort=l.first)}},features:[e.\u0275\u0275ProvidersFeature([{provide:ve._A,useClass:Ei.t7,deps:[ve.Ad]},{provide:ve.sG,useValue:Ms}])],decls:72,vars:18,consts:[["fxLayout","column",1,"first-col"],[1,"headerbox"],[1,"title"],["fxLayout","column"],["fxLayout","column","fxLayout.lt-lg","column","fxLayoutAlign.xs","center",1,"dev-Pad",3,"formGroup"],["fxLayout","row","fxLayout.xs","column","fxLayout.lt-lg","row wrap","fxFlex.xs","100%"],["fxFlex.xs","100%","fxFlex","","fxFlex.lt-lg","48","appearance","outline",1,"mx-1","my-1"],["formControlName","Users","required","","tabIndex","3"],["value","0"],[4,"ngFor","ngForOf"],["fxFlex.xs","100%","fxFlex","","appearance","outline",1,"mx-1","my-1"],["matInput","","readonly","","placeholder","From Date","formControlName","fromDate","tabIndex","1",3,"matDatepicker","min","max","click"],["matSuffix","",1,"datepicker",3,"for"],["fromDate",""],["matInput","","readonly","","placeholder","To Date","formControlName","toDate","tabIndex","2",3,"matDatepicker","min","max","click"],["toDate",""],["fxLayout","row","fxLayoutAlign","center"],[1,"btn","btn-primary","mr-2","mb-2",3,"tabIndex","click"],[1,"line",2,"color","#1898D5","font-size","16px"],[1,"btn","btn-danger","mr-2","mb-2",3,"tabIndex","click"],["fxLayout","row xs-column","fxLayoutAlign","end  center","style","margin-right: 3%;",4,"ngIf"],["fxLayout","column",1,"table-pad"],[1,"mat-elevation-z1","example-container"],["id","table"],["table",""],["mat-table","",3,"dataSource"],["matColumnDef","sno"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","name"],["mat-header-cell","","style","white-space: nowrap;",4,"matHeaderCellDef"],["matColumnDef","locationsvisited"],["mat-cell","","style","white-space: nowrap;",4,"matCellDef"],["matColumnDef","totalvisits"],["matColumnDef","startlocation"],["matColumnDef","endlocation"],["matColumnDef","totalkms"],["matColumnDef","photos"],["class","headerbox title","mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],[3,"pageSizeOptions"],[3,"value"],["fxLayout","row xs-column","fxLayoutAlign","end  center",2,"margin-right","3%"],[1,"exlprint"],["mat-icon-button",""],["title","PDF",3,"tabIndex","keyup.enter"],["src","./assets/images/icons/pdf.png","width","20px","height","20px",3,"click"],["title","Excel",3,"tabIndex","keyup.enter"],["src","./assets/images/icons/excel.png",3,"click"],["mat-header-cell",""],["mat-cell",""],["mat-header-cell","",2,"white-space","nowrap"],["mat-cell","",2,"white-space","nowrap"],["mat-header-row","",1,"headerbox","title"],["mat-row",""],[1,"mat-row"],["colspan","10",1,"mat-cell",2,"text-align","center"]],template:function(n,a){if(1&n){const l=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",0)(1,"mat-card")(2,"mat-card-header",1)(3,"mat-card-title",2),e.\u0275\u0275text(4," Sales Visit Report"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(5,"mat-card-content")(6,"div",3)(7,"div",4)(8,"div",5)(9,"mat-form-field",6)(10,"mat-label"),e.\u0275\u0275text(11,"Employee Name"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(12,"mat-select",7)(13,"mat-option",8),e.\u0275\u0275text(14," All Employees "),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(15,Fn,3,3,"ng-container",9),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(16,"mat-form-field",10)(17,"mat-label"),e.\u0275\u0275text(18,"From Date"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(19,"input",11),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(l);const h=e.\u0275\u0275reference(22);return e.\u0275\u0275resetView(h.open())}),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(20,"mat-datepicker-toggle",12)(21,"mat-datepicker",null,13),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(23,"mat-form-field",10)(24,"mat-label"),e.\u0275\u0275text(25,"To Date"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(26,"input",14),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(l);const h=e.\u0275\u0275reference(29);return e.\u0275\u0275resetView(h.open())}),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(27,"mat-datepicker-toggle",12)(28,"mat-datepicker",null,15),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(30,"div",16)(31,"span")(32,"button",17),e.\u0275\u0275listener("click",function(){return a.Searchform()}),e.\u0275\u0275text(33," Search "),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(34,"span",18),e.\u0275\u0275elementStart(35,"button",19),e.\u0275\u0275listener("click",function(){return a.resetform()}),e.\u0275\u0275elementStart(36,"span"),e.\u0275\u0275text(37,"Clear"),e.\u0275\u0275elementEnd()()()()(),e.\u0275\u0275template(38,jr,12,2,"div",20),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(39,"div",21)(40,"div",22)(41,"div",23,24)(43,"table",25),e.\u0275\u0275elementContainerStart(44,26),e.\u0275\u0275template(45,m,2,0,"th",27),e.\u0275\u0275template(46,mn,2,1,"td",28),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(47,29),e.\u0275\u0275template(48,ci,2,0,"th",30),e.\u0275\u0275template(49,Oe,2,1,"td",28),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(50,31),e.\u0275\u0275template(51,$,2,0,"th",27),e.\u0275\u0275template(52,ps,3,4,"td",32),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(53,33),e.\u0275\u0275template(54,hs,2,0,"th",30),e.\u0275\u0275template(55,fs,3,4,"td",32),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(56,34),e.\u0275\u0275template(57,Vt,2,0,"th",30),e.\u0275\u0275template(58,gs,3,4,"td",32),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(59,35),e.\u0275\u0275template(60,_s,2,0,"th",30),e.\u0275\u0275template(61,ys,2,1,"td",28),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(62,36),e.\u0275\u0275template(63,vs,2,0,"th",30),e.\u0275\u0275template(64,Cs,2,1,"td",28),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(65,37),e.\u0275\u0275template(66,ut,2,0,"th",30),e.\u0275\u0275template(67,xs,2,1,"td",28),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275template(68,bs,1,0,"tr",38),e.\u0275\u0275template(69,ws,1,0,"tr",39),e.\u0275\u0275template(70,Ss,3,0,"tr",40),e.\u0275\u0275elementEnd()(),e.\u0275\u0275element(71,"mat-paginator",41),e.\u0275\u0275elementEnd()()()()()}if(2&n){const l=e.\u0275\u0275reference(22),u=e.\u0275\u0275reference(29);e.\u0275\u0275advance(7),e.\u0275\u0275property("formGroup",a.searchForm),e.\u0275\u0275advance(8),e.\u0275\u0275property("ngForOf",a.employeelist),e.\u0275\u0275advance(4),e.\u0275\u0275property("matDatepicker",l)("min",a.minDate)("max",a.maxDate),e.\u0275\u0275advance(1),e.\u0275\u0275property("for",l),e.\u0275\u0275advance(6),e.\u0275\u0275property("matDatepicker",u)("min",a.minToDate)("max",a.maxDate),e.\u0275\u0275advance(1),e.\u0275\u0275property("for",u),e.\u0275\u0275advance(5),e.\u0275\u0275property("tabIndex",4),e.\u0275\u0275advance(3),e.\u0275\u0275property("tabIndex",5),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",a.List.length>0),e.\u0275\u0275advance(5),e.\u0275\u0275property("dataSource",a.dataSource),e.\u0275\u0275advance(25),e.\u0275\u0275property("matHeaderRowDef",a.displayedColumns),e.\u0275\u0275advance(1),e.\u0275\u0275property("matRowDefColumns",a.displayedColumns),e.\u0275\u0275advance(2),e.\u0275\u0275property("pageSizeOptions",a.pageLoading?e.\u0275\u0275pureFunction0(17,Is):a.getPageSizes())}},dependencies:[N.sg,N.O5,ve.ey,Nt.lW,ue.a8,ue.dk,ue.dn,ue.n5,dt.Mq,dt.hl,dt.nW,q.KE,q.hX,q.R9,me.Nt,wt.NW,Pt.gD,T.BZ,T.fO,T.as,T.w1,T.Dz,T.nj,T.ge,T.ev,T.XQ,T.Gk,T.Ee,C.Fj,C.JJ,C.JL,C.Q7,C.sg,C.u,G.xw,G.Wh,G.yH,N.uU],styles:['.cdk-overlay-container{z-index:1050!important}mat-card[_ngcontent-%COMP%]{transition:box-shadow .28s cubic-bezier(.4,0,.2,1);display:block;position:relative;padding-left:0;padding-right:0}  .mat-select-panel[aria-label="Items per page:"] mat-option:last-child:before{content:"All"}  .mat-select-panel[aria-label="Items per page:"] mat-option:last-child .mat-option-text{display:none;position:relative;display:block}.headerbox[_ngcontent-%COMP%]{height:45px;background-color:#28acaf!important;align-items:center}.title[_ngcontent-%COMP%]{font-family:Roboto;font-size:20px;font-weight:500;font-stretch:normal;font-style:normal;letter-spacing:.32px;color:#fff;margin-bottom:0}  tr.mat-header-row{height:45px!important}  .mat-form-field-appearance-outline .mat-form-field-wrapper{margin:.2em 0!important}.dev-Pad[_ngcontent-%COMP%]{padding-top:1%;padding-left:11px;padding-right:8px}.table-pad[_ngcontent-%COMP%]{padding-left:15px;padding-right:15px}.example-container[_ngcontent-%COMP%]{overflow-x:auto;display:flex;flex-direction:column}@media only screen and (max-width: 800px) and (orientation: portrait){mat-header-row[_ngcontent-%COMP%], mat-row[_ngcontent-%COMP%]{width:150%}}table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:2px 10px}']}),o})();function ks(o,d){1&o&&(e.\u0275\u0275elementStart(0,"mat-error",17),e.\u0275\u0275text(1," Please enter status. "),e.\u0275\u0275elementEnd())}function Fs(o,d){if(1&o){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",9)(1,"div",10)(2,"mat-form-field",11)(3,"mat-label"),e.\u0275\u0275text(4,"Masters For Status "),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(5,"input",12),e.\u0275\u0275template(6,ks,2,0,"mat-error",13),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(7,"div",14)(8,"button",15),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(n);const l=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(l.AddData())}),e.\u0275\u0275elementStart(9,"span"),e.\u0275\u0275text(10,"Submit"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(11,"button",16),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(n);const l=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(l.cancel())}),e.\u0275\u0275elementStart(12,"span"),e.\u0275\u0275text(13,"Cancel"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275element(14,"br"),e.\u0275\u0275elementEnd()()}if(2&o){const n=e.\u0275\u0275nextContext();e.\u0275\u0275advance(6),e.\u0275\u0275property("ngIf",(null==n.statusForm.controls.statusdata.errors?null:n.statusForm.controls.statusdata.errors.required)||(null==n.statusForm.controls.statusdata.errors?null:n.statusForm.controls.statusdata.errors.whitespace))}}function Bt(o,d){1&o&&(e.\u0275\u0275elementStart(0,"th",40),e.\u0275\u0275text(1,"S.No"),e.\u0275\u0275elementEnd())}function Ls(o,d){if(1&o&&(e.\u0275\u0275elementStart(0,"td",41),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&o){const n=d.index,a=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",n+1+a.paginator.pageIndex*a.paginator.pageSize," ")}}function As(o,d){1&o&&(e.\u0275\u0275elementStart(0,"th",42),e.\u0275\u0275text(1," Name of the Section "),e.\u0275\u0275elementEnd())}function He(o,d){if(1&o&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&o){const n=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1("",n.display_name,"\xa0")}}function Ts(o,d){1&o&&(e.\u0275\u0275elementStart(0,"mat-form-field",45),e.\u0275\u0275element(1,"input",46),e.\u0275\u0275elementEnd())}function Os(o,d){if(1&o&&(e.\u0275\u0275elementStart(0,"td",41),e.\u0275\u0275template(1,He,2,1,"span",43),e.\u0275\u0275template(2,Ts,2,0,"mat-form-field",44),e.\u0275\u0275elementEnd()),2&o){const n=d.$implicit,a=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",a.enable!=n.id),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",a.enable===n.id)}}function Rs(o,d){1&o&&(e.\u0275\u0275elementStart(0,"th",47),e.\u0275\u0275text(1," Status "),e.\u0275\u0275elementEnd())}function zs(o,d){if(1&o){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"mat-radio-button",50),e.\u0275\u0275listener("change",function(){const u=e.\u0275\u0275restoreView(n).$implicit,h=e.\u0275\u0275nextContext().$implicit,b=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(b.status(u.id,h.id,h.display_name))}),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()}if(2&o){const n=d.$implicit,a=e.\u0275\u0275nextContext().$implicit,l=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("disabled",l.disableStatus(a))("checked",n.id==a.is_active)("value",n.id),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(n.name)}}function Ps(o,d){if(1&o&&(e.\u0275\u0275elementStart(0,"td",48)(1,"mat-radio-group"),e.\u0275\u0275template(2,zs,2,4,"mat-radio-button",49),e.\u0275\u0275elementEnd()()),2&o){const n=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",n.arrayValue)}}function Kr(o,d){1&o&&e.\u0275\u0275element(0,"th",40)}function Xr(o,d){if(1&o){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",52),e.\u0275\u0275listener("keyup.enter",function(l){e.\u0275\u0275restoreView(n);const u=e.\u0275\u0275nextContext().$implicit,h=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(h.edit(l,u))}),e.\u0275\u0275elementStart(1,"mat-icon",53),e.\u0275\u0275listener("click",function(l){e.\u0275\u0275restoreView(n);const u=e.\u0275\u0275nextContext().$implicit,h=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(h.edit(l,u))}),e.\u0275\u0275text(2,"edit"),e.\u0275\u0275elementEnd()()}}function Ns(o,d){if(1&o){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",52),e.\u0275\u0275listener("keyup.enter",function(l){e.\u0275\u0275restoreView(n);const u=e.\u0275\u0275nextContext().$implicit,h=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(h.delete(l,u.id))}),e.\u0275\u0275elementStart(1,"mat-icon",54),e.\u0275\u0275listener("click",function(l){e.\u0275\u0275restoreView(n);const u=e.\u0275\u0275nextContext().$implicit,h=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(h.delete(l,u.id))}),e.\u0275\u0275text(2,"delete"),e.\u0275\u0275elementEnd()()}}function Us(o,d){if(1&o){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",52),e.\u0275\u0275listener("keyup.enter",function(l){e.\u0275\u0275restoreView(n);const u=e.\u0275\u0275nextContext().$implicit,h=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(h.save(l,u,h.statusForm.controls.statusdata.value))}),e.\u0275\u0275elementStart(1,"mat-icon",55),e.\u0275\u0275listener("click",function(l){e.\u0275\u0275restoreView(n);const u=e.\u0275\u0275nextContext().$implicit,h=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(h.save(l,u,h.statusForm.controls.statusdata.value))}),e.\u0275\u0275text(2,"save"),e.\u0275\u0275elementEnd()()}}function Zi(o,d){if(1&o){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",52),e.\u0275\u0275listener("keyup.enter",function(l){e.\u0275\u0275restoreView(n);const u=e.\u0275\u0275nextContext().$implicit,h=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(h.canceledit(l,u.id))}),e.\u0275\u0275elementStart(1,"mat-icon",56),e.\u0275\u0275listener("click",function(l){e.\u0275\u0275restoreView(n);const u=e.\u0275\u0275nextContext().$implicit,h=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(h.canceledit(l,u.id))}),e.\u0275\u0275text(2,"cancel"),e.\u0275\u0275elementEnd()()}}function Ln(o,d){if(1&o&&(e.\u0275\u0275elementStart(0,"td",41),e.\u0275\u0275template(1,Xr,3,0,"button",51),e.\u0275\u0275template(2,Ns,3,0,"button",51),e.\u0275\u0275template(3,Us,3,0,"button",51),e.\u0275\u0275template(4,Zi,3,0,"button",51),e.\u0275\u0275elementEnd()),2&o){const n=d.$implicit,a=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!n.is_default&&a.isEdit),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!n.is_default&&a.isDelete),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",a.enable==n.id&&a.isSave),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",a.enable==n.id)}}function di(o,d){1&o&&e.\u0275\u0275element(0,"tr",57)}function Vs(o,d){1&o&&e.\u0275\u0275element(0,"tr",58)}function ea(o,d){1&o&&(e.\u0275\u0275elementStart(0,"tr",59)(1,"td",60),e.\u0275\u0275text(2,"No data found"),e.\u0275\u0275elementEnd()())}const Bs=function(){return[5,10,20]};function pt(o,d){if(1&o){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",18)(1,"div",19)(2,"span",20)(3,"mat-form-field",21)(4,"mat-icon",22),e.\u0275\u0275text(5,"search"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"mat-label"),e.\u0275\u0275text(7,"Search"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"input",23),e.\u0275\u0275listener("keyup",function(l){e.\u0275\u0275restoreView(n);const u=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(u.applyFilter(l))}),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(9,"form",6)(10,"div",24)(11,"div",25)(12,"table",26),e.\u0275\u0275elementContainerStart(13,27),e.\u0275\u0275template(14,Bt,2,0,"th",28),e.\u0275\u0275template(15,Ls,2,1,"td",29),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(16,30),e.\u0275\u0275template(17,As,2,0,"th",31),e.\u0275\u0275template(18,Os,3,2,"td",29),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(19,32),e.\u0275\u0275template(20,Rs,2,0,"th",33),e.\u0275\u0275template(21,Ps,3,1,"td",34),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(22,35),e.\u0275\u0275template(23,Kr,1,0,"th",28),e.\u0275\u0275template(24,Ln,5,4,"td",29),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275template(25,di,1,0,"tr",36),e.\u0275\u0275template(26,Vs,1,0,"tr",37),e.\u0275\u0275template(27,ea,3,0,"tr",38),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(28,"mat-paginator",39),e.\u0275\u0275elementEnd()()()()}if(2&o){const n=e.\u0275\u0275nextContext();e.\u0275\u0275advance(9),e.\u0275\u0275property("formGroup",n.statusForm),e.\u0275\u0275advance(3),e.\u0275\u0275property("dataSource",n.dataSource),e.\u0275\u0275advance(13),e.\u0275\u0275property("matHeaderRowDef",n.displayedColumns),e.\u0275\u0275advance(1),e.\u0275\u0275property("matRowDefColumns",n.displayedColumns),e.\u0275\u0275advance(2),e.\u0275\u0275property("pageSizeOptions",n.pageLoading?e.\u0275\u0275pureFunction0(5,Bs):n.getPageSizes())}}let qi=(()=>{class o{constructor(n,a,l,u,h){this.crmService=n,this.Company=a,this.formBuilder=l,this.router=u,this.dialog=h,this.pipe=new N.uU("en-US"),this.issubmitted=!1,this.isvalid=!1,this.isView=!1,this.isAdd=!1,this.isdata=!0,this.isEdit=!0,this.isSave=!1,this.isDelete=!0,this.enable=null,this.valid=!1,this.displayedColumns=["sno","clientStatus","status","Action"],this.dataSource=[],this.pageLoading=!0,this.statusData=[]}ngOnInit(){this.getstatuslist(),this.userSession=JSON.parse(sessionStorage.getItem("user")||""),this.getclientStatusVal(),this.statusForm=this.formBuilder.group({statusdata:["",[C.kI.required,this.noWhitespaceValidator()]]})}getstatuslist(){this.Company.getstatuslists().subscribe(n=>{n.status&&(this.arrayValue=n.data)})}status(n,a,l){this.setclientStatusVal({client_status_id:a,client_status_name:l,is_active:n,empid:this.userSession.id})}getclientStatusVal(){this.crmService.getCrmClientStatusValuesMaster(1,100).subscribe(n=>{n.status&&(this.statusData=n.data,this.dataSource=new T.by(n.data),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort)})}setclientStatusVal(n){n.client_status_name=n.client_status_name.trim(),n.client_status_name=n.client_status_name.replace(/\s+/g," "),n.client_status_name&&n.client_status_name.toString().length&&this.crmService.setCrmClientStatusValues(n).subscribe(a=>{a.status?(this.router.navigateByUrl("/",{skipLocationChange:!0}).then(()=>this.router.navigate(["/Crm/CrmMastersForStatus"])),this.dataSource.paginator=this.paginator,this.dialog.open(le.B,{position:{top:"70px"},disableClose:!0,data:a.data[0].resultmsg})):this.dialog.open(le.B,{position:{top:"70px"},disableClose:!0,data:"Unable to add status. Please try again. "})})}cancel(){this.router.navigateByUrl("/",{skipLocationChange:!0}).then(()=>this.router.navigate(["/Crm/CrmMastersForStatus"]))}Add(){this.isAdd=!0,this.isdata=!1,this.statusForm.controls.statusdata.setValue("")}edit(n,a){this.enable=a.id,this.isEdit=!1,this.isDelete=!1,this.isSave=!0,this.statusForm.controls.statusdata.setValue(a.display_name)}save(n,a,l){this.statusForm.valid&&(console.log(a,l),this.enable=null,this.isEdit=!0,this.isSave=!1,this.isDelete=!0,this.setclientStatusVal({client_status_id:a.id,client_status_name:l,is_active:!0,empid:this.userSession.id}))}AddData(){this.setclientStatusVal({client_status_id:0,client_status_name:this.statusForm.controls.statusdata.value,is_active:!0,empid:this.userSession.id})}canceledit(n,a){this.enable=null,this.isEdit=!0,this.isSave=!1,this.isDelete=!0,this.ngOnInit()}getPageSizes(){var n=[];return this.dataSource.data.length>5&&n.push(5),this.dataSource.data.length>10&&n.push(10),this.dataSource.data.length>20&&n.push(20),n.push(this.dataSource.data.length),n}getMessages(){}noWhitespaceValidator(){return n=>0===(n.value||"").trim().length?{whitespace:!0}:null}applyFilter(n){this.dataSource.filter=n.target.value.trim().toLowerCase(),this.dataSource.paginator&&this.dataSource.paginator.firstPage()}delete(n,a){this.dialog.open(Qn.L,{position:{top:"70px"},disableClose:!0,data:{message:"Are you sure you want to delete ?",YES:"YES",NO:"No"}}).afterClosed().subscribe(u=>{"YES"==u&&this.deleteStatus(n,a)})}deleteStatus(n,a){this.crmService.deleteCrmClientStatusValues({statusId:a,empid:this.userSession.id}).subscribe(l=>{l&&l.status?(this.dialog.open(le.B,{position:{top:"70px"},disableClose:!0,data:"Status deleted."}),this.router.navigateByUrl("/",{skipLocationChange:!0}).then(()=>this.router.navigate(["/Crm/CrmMastersForStatus"]))):this.dialog.open(le.B,{position:{top:"70px"},disableClose:!0,data:"Status not deleted."})})}disableStatus(n){return!(!n||!n.is_default)||this.enable==n.id}}return o.\u0275fac=function(n){return new(n||o)(e.\u0275\u0275directiveInject(we),e.\u0275\u0275directiveInject(zt.D),e.\u0275\u0275directiveInject(C.QS),e.\u0275\u0275directiveInject(f.F0),e.\u0275\u0275directiveInject(de.uw))},o.\u0275cmp=e.\u0275\u0275defineComponent({type:o,selectors:[["app-crm-client-status-master"]],viewQuery:function(n,a){if(1&n&&(e.\u0275\u0275viewQuery(wt.NW,5),e.\u0275\u0275viewQuery(mt.YE,5)),2&n){let l;e.\u0275\u0275queryRefresh(l=e.\u0275\u0275loadQuery())&&(a.paginator=l.first),e.\u0275\u0275queryRefresh(l=e.\u0275\u0275loadQuery())&&(a.sort=l.first)}},decls:12,vars:3,consts:[["fxLayout","column","fxFlex","100",1,"first-col"],["fxLayout","row","fxLayoutAlign","space-between center",1,"headerbox"],[1,"title"],[2,"margin-right","2%"],["mat-icon-button","","matTooltip","Add New",2,"padding-right","40px",3,"click"],[2,"font-size","30px","overflow","visible"],["autocomplete","off",3,"formGroup"],["fxLayout","column","fxLayout.xs","column",4,"ngIf"],["fxLayout","column",4,"ngIf"],["fxLayout","column","fxLayout.xs","column"],["fxLayout","row","fxLayout.xs","row",2,"padding-top","1%","padding-left","1%"],["fxFlex.xs","100","fxFlex","50","appearance","outline",1,"mx-2","my-2"],["formControlName","statusdata","matInput","","placeholder","","appRemoveSpace","","required","","maxlength","64"],["class","con-error",4,"ngIf"],["fxLayoutAlign","center"],["type","submit",1,"btn","btn-primary","mr-2","mb-2",3,"click"],[1,"btn","btn-danger","mr-2","mb-2",3,"click"],[1,"con-error"],["fxLayout","column"],["fxLayout","row","fxLayoutAlign.xs","center","fxLayoutAlign","end",1,"dev-Pad"],["fxFlex","50","fxFlex.xs","100","fxLayoutAlign","end",2,"height","70px"],["fxFlex.xs","100","fxFlex","56","fxFlex.lt-lg","100","appearance","outline",1,"mx-2","my-2"],["matSuffix","",2,"color","#28acaf"],["matInput","","placeholder","","maxlength","100",3,"keyup"],["fxLayout","column",1,"table-pad"],[1,"mat-elevation-z1","example-container"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","sno"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","clientStatus"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["matColumnDef","status"],["mat-header-cell","","mat-sort-header","","style","padding-left: 60px",4,"matHeaderCellDef"],["mat-cell","","style","white-space: nowrap;",4,"matCellDef"],["matColumnDef","Action"],["class","headerbox title","mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],[3,"pageSizeOptions"],["mat-header-cell",""],["mat-cell",""],["mat-header-cell","","mat-sort-header",""],[4,"ngIf"],["appearance","outline",4,"ngIf"],["appearance","outline"],["formControlName","statusdata","value","row.display_name","matInput","","placeholder",""],["mat-header-cell","","mat-sort-header","",2,"padding-left","60px"],["mat-cell","",2,"white-space","nowrap"],["class","mr-2","color","primary",3,"disabled","checked","value","change",4,"ngFor","ngForOf"],["color","primary",1,"mr-2",3,"disabled","checked","value","change"],["mat-icon-button","",3,"keyup.enter",4,"ngIf"],["mat-icon-button","",3,"keyup.enter"],["title","Edit",3,"click"],["title","Delete",3,"click"],["title","Save",3,"click"],["title","Cancel",3,"click"],["mat-header-row","",1,"headerbox","title"],["mat-row",""],[1,"mat-row"],["colspan","3",1,"mat-cell",2,"text-align","center"]],template:function(n,a){1&n&&(e.\u0275\u0275elementStart(0,"div",0)(1,"mat-card")(2,"mat-card-header",1)(3,"mat-card-title",2),e.\u0275\u0275text(4," Masters For Status "),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"div",3)(6,"button",4),e.\u0275\u0275listener("click",function(){return a.Add()}),e.\u0275\u0275elementStart(7,"mat-icon",5),e.\u0275\u0275text(8,"add_circle"),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(9,"form",6),e.\u0275\u0275template(10,Fs,15,1,"div",7),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(11,pt,29,6,"div",8),e.\u0275\u0275elementEnd()()),2&n&&(e.\u0275\u0275advance(9),e.\u0275\u0275property("formGroup",a.statusForm),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",a.isAdd),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",a.isdata))},dependencies:[N.sg,N.O5,Nt.lW,ue.a8,ue.dk,ue.n5,tt.Hw,q.TO,q.KE,q.hX,q.R9,me.Nt,wt.NW,rn.VQ,rn.U0,mt.YE,mt.nU,T.BZ,T.fO,T.as,T.w1,T.Dz,T.nj,T.ge,T.ev,T.XQ,T.Gk,T.Ee,Wn.gM,C._Y,C.Fj,C.JJ,C.JL,C.Q7,C.nD,C.sg,C.u,G.xw,G.Wh,G.yH],styles:['mat-card[_ngcontent-%COMP%]{transition:box-shadow .28s cubic-bezier(.4,0,.2,1);display:block;position:relative;padding-left:0;padding-right:0}.tableP[_ngcontent-%COMP%]{padding:1% 2%}  .mat-select-panel[aria-label="Items per page:"] mat-option:last-child:before{content:"All"}  .mat-select-panel[aria-label="Items per page:"] mat-option:last-child .mat-option-text{display:none}.headerbox[_ngcontent-%COMP%]{height:45px;background-color:#28acaf!important;align-items:center}.title[_ngcontent-%COMP%]{font-family:Roboto;font-size:20px;font-weight:500;font-stretch:normal;font-style:normal;letter-spacing:.32px;color:#fff;margin-bottom:0}  tr.mat-header-row{height:45px!important}  .mat-form-field-appearance-outline .mat-form-field-wrapper{margin:.2em 0!important}table[_ngcontent-%COMP%]{width:100%}.dev-Pad[_ngcontent-%COMP%]{padding-top:1%;padding-right:8px}.table-pad[_ngcontent-%COMP%]{padding-left:15px;padding-right:15px}table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:2px 10px}.example-container[_ngcontent-%COMP%]{overflow-x:auto;display:flex;flex-direction:column}']}),o})();var Wt=k(21086),Re=k(27221),ta=k(47957);function na(o,d){if(1&o){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"mat-option",6),e.\u0275\u0275listener("onSelectionChange",function(){const u=e.\u0275\u0275restoreView(n).$implicit,h=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(h.selectValue(u))}),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()}if(2&o){const n=d.$implicit;e.\u0275\u0275property("value",n),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",n.name," ")}}function ia(o,d){1&o&&(e.\u0275\u0275elementStart(0,"div"),e.\u0275\u0275element(1,"div",7),e.\u0275\u0275elementEnd())}const Mt=[{path:"",component:Ia.C,children:[{path:"CrmAddClient",component:Ii},{path:"CrmUserDashboard",component:Cr},{path:"Emp/CrmClientList",component:Gn},{path:"CrmClientEditAndUpdate",component:zi},{path:"CrmDemoStatus",component:on},{path:"CrmMastersForStatus",component:qi},{path:"CrmLiveTracking",component:j},{path:"Mgr/CrmClientList",component:Gn},{path:"CrmSummaryReport",component:Ko.t},{path:"CrmDetailReport",component:Wr.o},{path:"CrmClientReport",component:si},{path:"CrmSalesVisitReport",component:Ds},{path:"CrmSearchLocation",component:(()=>{class o{constructor(n,a){this.crm=n,this.httpClient=a,this.myControl=new C.NI,this.displayOptions=[],this.markerPositions=[],this.isSelected=!1,this.googleApiKey=null,this.userSession=null,this.userSession=JSON.parse(sessionStorage.getItem("user")??""),this.apiLoaded=a.jsonp("https://maps.googleapis.com/maps/api/js?key=AIzaSyAww6TxPSzQbg74ljJahxvuLHmRfICHbf4&libraries=places&v=weekly","callback").pipe((0,Ie.U)(()=>!0),(0,Re.K)(()=>(0,Wt.of)(!1)))}ngOnInit(){this.myControl.setValue(""),this.initAsyncMap(),this.myControl.valueChanges.subscribe(n=>{n.toString().length>=3&&this.initAsyncMapPlaces(n)})}initAsyncMapPlaces(n){var a=this;return(0,ae.Z)(function*(){"string"==typeof n&&(a.isSelected=!1,a.displayOptions=[],a.service=new google.maps.places.PlacesService(a.map),a.service.findPlaceFromQuery({query:n,fields:["name","geometry"]},(l,u)=>{u===google.maps.places.PlacesServiceStatus.OK&&l&&l?.forEach(function(){var h=(0,ae.Z)(function*(b){a.displayOptions?.push(b)});return function(b){return h.apply(this,arguments)}}())}))})()}initAsyncMap(){var n=this;return(0,ae.Z)(function*(){n.displayOptions=[];const[{},{}]=yield Promise.all([google.maps.importLibrary("marker"),google.maps.importLibrary("places")]);n.map=google.maps.Map,n.marker=google.maps.marker.AdvancedMarkerElement,n.markers=google.maps.Marker,n.markerInMap=new google.maps.Marker({}),n.infoWindow=google.maps.InfoWindow,n.center=new google.maps.LatLng(17.457129626588678,78.37068316931055),n.infoWindow=new google.maps.InfoWindow({}),n.map=new google.maps.Map(document.getElementById("map"),{center:n.center,zoom:13,mapTypeControl:!1}),n.addMarker(n.center)})()}selectValue(n){this.isSelected=!0,this.myControl.setValue(n.name),this.createMarker(n)}createMarker(n){this.markers=[],n.geometry&&n.geometry.location&&(this.addMarker(n.geometry.location),this.map.setCenter(n.geometry.location),this.infoWindow.setPosition(n.geometry.location))}setMapOnAll(){for(let n=0;n<this.markers.length;n++)this.markers[n].setMap(this.map)}addMarker(n){const a=new google.maps.Marker({position:n,map:this.map});this.markers.push(a)}fetchApiKey(){var n=this;return(0,ae.Z)(function*(){n.crm.fetchGoogleMapsApiKey(n.userSession.id).subscribe(a=>(console.log("fetchGoogleMapsApiKey",a.googleApiKey),a&&a.status?a.googleApiKey:null))})()}}return o.\u0275fac=function(n){return new(n||o)(e.\u0275\u0275directiveInject(we),e.\u0275\u0275directiveInject(Rt.eN))},o.\u0275cmp=e.\u0275\u0275defineComponent({type:o,selectors:[["app-crm-search-location"]],decls:9,vars:6,consts:[["fxLayout","column","fxFlex","","fxLayoutAlign","start stretch"],["id","place-autocomplete-card",1,"place-autocomplete-card"],["type","text","matInput","","placeholder","Choose an option",3,"formControl","matAutocomplete"],["auto","matAutocomplete"],[3,"value","onSelectionChange",4,"ngFor","ngForOf"],[4,"ngIf"],[3,"value","onSelectionChange"],["id","map",2,"height","500px","width","560px","position","relative","overflow","hidden"]],template:function(n,a){if(1&n&&(e.\u0275\u0275elementStart(0,"div",0)(1,"div",1)(2,"mat-form-field"),e.\u0275\u0275element(3,"input",2),e.\u0275\u0275elementStart(4,"mat-autocomplete",null,3),e.\u0275\u0275template(6,na,2,2,"mat-option",4),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275template(7,ia,2,0,"div",5),e.\u0275\u0275pipe(8,"async"),e.\u0275\u0275elementEnd()),2&n){const l=e.\u0275\u0275reference(5);e.\u0275\u0275advance(3),e.\u0275\u0275property("formControl",a.myControl)("matAutocomplete",l),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngForOf",a.displayOptions),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(8,4,a.apiLoaded))}},dependencies:[N.sg,N.O5,ta.XC,ta.ZL,ve.ey,q.KE,me.Nt,C.Fj,C.JJ,C.oH,G.xw,G.Wh,G.yH,N.Ov],styles:["#map[_ngcontent-%COMP%]{height:100%}html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{height:100%;margin:0;padding:0}#place-autocomplete-card[_ngcontent-%COMP%]{background-color:#fff;border-radius:5px;box-shadow:#00000059 0 5px 15px;margin:10px;padding:5px;font-family:Roboto,sans-serif;font-size:large;font-weight:700}#place-autocomplete[_ngcontent-%COMP%]{width:250px}#infowindow-content[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-weight:700}#map[_ngcontent-%COMP%]   #infowindow-content[_ngcontent-%COMP%]{display:inline}"]}),o})()}]}];let ra=(()=>{class o{}return o.\u0275fac=function(n){return new(n||o)},o.\u0275mod=e.\u0275\u0275defineNgModule({type:o}),o.\u0275inj=e.\u0275\u0275defineInjector({imports:[f.Bz.forChild(Mt),f.Bz]}),o})();var Ws=k(4566),mi=k(69814),Zs=k(90530);let aa=(()=>{class o{}return o.\u0275fac=function(n){return new(n||o)},o.\u0275mod=e.\u0275\u0275defineNgModule({type:o}),o.\u0275inj=e.\u0275\u0275defineInjector({imports:[ra,N.ez,Zs.q,C.u5,C.UX,Ws.z1U,mi.o9,Nn,q.lN,me.c,tt.Ps,Nt.ot,de.Is]}),o})()},17489:function(jt,Kt,k){var N;jt=k.nmd(jt),function(){var f,C="Expected a function",_i="__lodash_hash_undefined__",lt="__lodash_placeholder__",Ot=1/0,vt=9007199254740991,Xe=4294967295,Aa=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],vn="[object Arguments]",Nn="[object Array]",Un="[object Boolean]",de="[object Date]",ct="[object Error]",Rt="[object Function]",Cn="[object GeneratorFunction]",Ze="[object Map]",we="[object Number]",me="[object Object]",G="[object Promise]",xn="[object RegExp]",qe="[object Set]",bn="[object String]",Vn="[object Symbol]",wn="[object WeakMap]",le="[object ArrayBuffer]",et="[object DataView]",zt="[object Float32Array]",en="[object Float64Array]",ve="[object Int8Array]",tt="[object Int16Array]",Pt="[object Int32Array]",Ct="[object Uint8Array]",Ci="[object Uint8ClampedArray]",xi="[object Uint16Array]",bi="[object Uint32Array]",za=/\b__p \+= '';/g,Pa=/\b(__p \+=) '' \+/g,Na=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Xi=/&(?:amp|lt|gt|quot|#39);/g,er=/[&<>"']/g,Ua=RegExp(Xi.source),Va=RegExp(er.source),Ba=/<%-([\s\S]+?)%>/g,Wa=/<%([\s\S]+?)%>/g,tr=/<%=([\s\S]+?)%>/g,Za=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,qa=/^\w*$/,Ga=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,wi=/[\\^$.*+?()[\]{}|]/g,$a=RegExp(wi.source),Si=/^\s+/,Ha=/\s/,Qa=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Ya=/\{\n\/\* \[wrapped with (.+)\] \*/,Ja=/,? & /,Ii=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Bn=/[()=,{}\[\]\/\s]/,ja=/\\(\\)?/g,Ei=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Sn=/\w*$/,nr=/^[-+]0x[0-9a-f]+$/i,Ka=/^0b[01]+$/i,ir=/^\[object .+?Constructor\]$/,rr=/^0o[0-7]+$/i,ar=/^(?:0|[1-9]\d*)$/,Nt=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,ue=/($^)/,Wn=/['\n\r\u2028\u2029\\]/g,Zn="\\ud800-\\udfff",or="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",sr="\\u2700-\\u27bf",lr="a-z\\xdf-\\xf6\\xf8-\\xff",cr="A-Z\\xc0-\\xd6\\xd8-\\xde",dr="\\ufe0e\\ufe0f",mr="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",oo="["+Zn+"]",ur="["+mr+"]",qn="["+or+"]",pr="\\d+",so="["+sr+"]",hr="["+lr+"]",fr="[^"+Zn+mr+pr+sr+lr+cr+"]",Di="\\ud83c[\\udffb-\\udfff]",gr="[^"+Zn+"]",ki="(?:\\ud83c[\\udde6-\\uddff]){2}",Fi="[\\ud800-\\udbff][\\udc00-\\udfff]",tn="["+cr+"]",yr="(?:"+hr+"|"+fr+")",co="(?:"+tn+"|"+fr+")",vr="(?:['\u2019](?:d|ll|m|re|s|t|ve))?",Cr="(?:['\u2019](?:D|LL|M|RE|S|T|VE))?",Li="(?:"+qn+"|"+Di+")?",xr="["+dr+"]?",br=xr+Li+"(?:\\u200d(?:"+[gr,ki,Fi].join("|")+")"+xr+Li+")*",ho="(?:"+[so,ki,Fi].join("|")+")"+br,fo="(?:"+[gr+qn+"?",qn,ki,Fi,oo].join("|")+")",go=RegExp("['\u2019]","g"),_o=RegExp(qn,"g"),Gn=RegExp(Di+"(?="+Di+")|"+fo+br,"g"),dt=RegExp([tn+"?"+hr+"+"+vr+"(?="+[ur,tn,"$"].join("|")+")",co+"+"+Cr+"(?="+[ur,tn+yr,"$"].join("|")+")",tn+"?"+yr+"+"+vr,tn+"+"+Cr,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",pr,ho].join("|"),"g"),wr=RegExp("[\\u200d"+Zn+or+dr+"]"),yo=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,vo=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Co=-1,ne={};ne[zt]=ne[en]=ne[ve]=ne[tt]=ne[Pt]=ne[Ct]=ne[Ci]=ne[xi]=ne[bi]=!0,ne[vn]=ne[Nn]=ne[le]=ne[Un]=ne[et]=ne[de]=ne[ct]=ne[Rt]=ne[Ze]=ne[we]=ne[me]=ne[xn]=ne[qe]=ne[bn]=ne[wn]=!1;var te={};te[vn]=te[Nn]=te[le]=te[et]=te[Un]=te[de]=te[zt]=te[en]=te[ve]=te[tt]=te[Pt]=te[Ze]=te[we]=te[me]=te[xn]=te[qe]=te[bn]=te[Vn]=te[Ct]=te[Ci]=te[xi]=te[bi]=!0,te[ct]=te[Rt]=te[wn]=!1;var So={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Io=parseFloat,Eo=parseInt,Sr="object"==typeof global&&global&&global.Object===Object&&global,Mo="object"==typeof self&&self&&self.Object===Object&&self,Ce=Sr||Mo||Function("return this")(),Ir=Kt&&!Kt.nodeType&&Kt,In=Ir&&jt&&!jt.nodeType&&jt,Er=In&&In.exports===Ir,Ai=Er&&Sr.process,Le=function(){try{return In&&In.require&&In.require("util").types||Ai&&Ai.binding&&Ai.binding("util")}catch{}}(),Mr=Le&&Le.isArrayBuffer,Dr=Le&&Le.isDate,kr=Le&&Le.isMap,Fr=Le&&Le.isRegExp,Lr=Le&&Le.isSet,Ar=Le&&Le.isTypedArray;function Ee(y,w,x){switch(x.length){case 0:return y.call(w);case 1:return y.call(w,x[0]);case 2:return y.call(w,x[0],x[1]);case 3:return y.call(w,x[0],x[1],x[2])}return y.apply(w,x)}function Do(y,w,x,F){for(var U=-1,J=null==y?0:y.length;++U<J;){var he=y[U];w(F,he,x(he),y)}return F}function Ae(y,w){for(var x=-1,F=null==y?0:y.length;++x<F&&!1!==w(y[x],x,y););return y}function ko(y,w){for(var x=null==y?0:y.length;x--&&!1!==w(y[x],x,y););return y}function Tr(y,w){for(var x=-1,F=null==y?0:y.length;++x<F;)if(!w(y[x],x,y))return!1;return!0}function xt(y,w){for(var x=-1,F=null==y?0:y.length,U=0,J=[];++x<F;){var he=y[x];w(he,x,y)&&(J[U++]=he)}return J}function $n(y,w){return!(null==y||!y.length)&&nn(y,w,0)>-1}function Ti(y,w,x){for(var F=-1,U=null==y?0:y.length;++F<U;)if(x(w,y[F]))return!0;return!1}function re(y,w){for(var x=-1,F=null==y?0:y.length,U=Array(F);++x<F;)U[x]=w(y[x],x,y);return U}function bt(y,w){for(var x=-1,F=w.length,U=y.length;++x<F;)y[U+x]=w[x];return y}function Oi(y,w,x,F){var U=-1,J=null==y?0:y.length;for(F&&J&&(x=y[++U]);++U<J;)x=w(x,y[U],U,y);return x}function Fo(y,w,x,F){var U=null==y?0:y.length;for(F&&U&&(x=y[--U]);U--;)x=w(x,y[U],U,y);return x}function Ri(y,w){for(var x=-1,F=null==y?0:y.length;++x<F;)if(w(y[x],x,y))return!0;return!1}var Lo=zi("length");function Or(y,w,x){var F;return x(y,function(U,J,he){if(w(U,J,he))return F=J,!1}),F}function Hn(y,w,x,F){for(var U=y.length,J=x+(F?1:-1);F?J--:++J<U;)if(w(y[J],J,y))return J;return-1}function nn(y,w,x){return w==w?function qo(y,w,x){for(var F=x-1,U=y.length;++F<U;)if(y[F]===w)return F;return-1}(y,w,x):Hn(y,Rr,x)}function Oo(y,w,x,F){for(var U=x-1,J=y.length;++U<J;)if(F(y[U],w))return U;return-1}function Rr(y){return y!=y}function zr(y,w){var x=null==y?0:y.length;return x?Qn(y,w)/x:NaN}function zi(y){return function(w){return null==w?f:w[y]}}function T(y){return function(w){return null==y?f:y[w]}}function wt(y,w,x,F,U){return U(y,function(J,he,X){x=F?(F=!1,J):w(x,J,he,X)}),x}function Qn(y,w){for(var x,F=-1,U=y.length;++F<U;){var J=w(y[F]);J!==f&&(x=x===f?J:x+J)}return x}function rn(y,w){for(var x=-1,F=Array(y);++x<y;)F[x]=w(x);return F}function Pr(y){return y&&y.slice(0,Br(y)+1).replace(Si,"")}function Me(y){return function(w){return y(w)}}function Pi(y,w){return re(w,function(x){return y[x]})}function En(y,w){return y.has(w)}function Nr(y,w){for(var x=-1,F=y.length;++x<F&&nn(w,y[x],0)>-1;);return x}function Ur(y,w){for(var x=y.length;x--&&nn(w,y[x],0)>-1;);return x}function zo(y,w){for(var x=y.length,F=0;x--;)y[x]===w&&++F;return F}var Po=T({\u00c0:"A",\u00c1:"A",\u00c2:"A",\u00c3:"A",\u00c4:"A",\u00c5:"A",\u00e0:"a",\u00e1:"a",\u00e2:"a",\u00e3:"a",\u00e4:"a",\u00e5:"a",\u00c7:"C",\u00e7:"c",\u00d0:"D",\u00f0:"d",\u00c8:"E",\u00c9:"E",\u00ca:"E",\u00cb:"E",\u00e8:"e",\u00e9:"e",\u00ea:"e",\u00eb:"e",\u00cc:"I",\u00cd:"I",\u00ce:"I",\u00cf:"I",\u00ec:"i",\u00ed:"i",\u00ee:"i",\u00ef:"i",\u00d1:"N",\u00f1:"n",\u00d2:"O",\u00d3:"O",\u00d4:"O",\u00d5:"O",\u00d6:"O",\u00d8:"O",\u00f2:"o",\u00f3:"o",\u00f4:"o",\u00f5:"o",\u00f6:"o",\u00f8:"o",\u00d9:"U",\u00da:"U",\u00db:"U",\u00dc:"U",\u00f9:"u",\u00fa:"u",\u00fb:"u",\u00fc:"u",\u00dd:"Y",\u00fd:"y",\u00ff:"y",\u00c6:"Ae",\u00e6:"ae",\u00de:"Th",\u00fe:"th",\u00df:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010a:"C",\u010c:"C",\u0107:"c",\u0109:"c",\u010b:"c",\u010d:"c",\u010e:"D",\u0110:"D",\u010f:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011a:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011b:"e",\u011c:"G",\u011e:"G",\u0120:"G",\u0122:"G",\u011d:"g",\u011f:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012a:"I",\u012c:"I",\u012e:"I",\u0130:"I",\u0129:"i",\u012b:"i",\u012d:"i",\u012f:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013b:"L",\u013d:"L",\u013f:"L",\u0141:"L",\u013a:"l",\u013c:"l",\u013e:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014a:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014b:"n",\u014c:"O",\u014e:"O",\u0150:"O",\u014d:"o",\u014f:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015a:"S",\u015c:"S",\u015e:"S",\u0160:"S",\u015b:"s",\u015d:"s",\u015f:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016a:"U",\u016c:"U",\u016e:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016b:"u",\u016d:"u",\u016f:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017b:"Z",\u017d:"Z",\u017a:"z",\u017c:"z",\u017e:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017f:"s"}),No=T({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function Uo(y){return"\\"+So[y]}function an(y){return wr.test(y)}function Ni(y){var w=-1,x=Array(y.size);return y.forEach(function(F,U){x[++w]=[U,F]}),x}function Vr(y,w){return function(x){return y(w(x))}}function St(y,w){for(var x=-1,F=y.length,U=0,J=[];++x<F;){var he=y[x];(he===w||he===lt)&&(y[x]=lt,J[U++]=x)}return J}function Yn(y){var w=-1,x=Array(y.size);return y.forEach(function(F){x[++w]=F}),x}function on(y){return an(y)?function sn(y){for(var w=Gn.lastIndex=0;Gn.test(y);)++w;return w}(y):Lo(y)}function Ge(y){return an(y)?function Ho(y){return y.match(Gn)||[]}(y):function Ao(y){return y.split("")}(y)}function Br(y){for(var w=y.length;w--&&Ha.test(y.charAt(w)););return w}var $o=T({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),Jn=function y(w){var t,x=(w=null==w?Ce:Jn.defaults(Ce.Object(),w,Jn.pick(Ce,vo))).Array,F=w.Date,U=w.Error,J=w.Function,he=w.Math,X=w.Object,Ui=w.RegExp,Jo=w.String,Te=w.TypeError,jn=x.prototype,ln=X.prototype,Kn=w["__core-js_shared__"],Xn=J.prototype.toString,j=ln.hasOwnProperty,Ko=0,Wr=(t=/[^.]+$/.exec(Kn&&Kn.keys&&Kn.keys.IE_PROTO||""))?"Symbol(src)_1."+t:"",$e=ln.toString,Zr=Xn.call(X),Xo=Ce._,es=Ui("^"+Xn.call(j).replace(wi,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ei=Er?w.Buffer:f,It=w.Symbol,ti=w.Uint8Array,qr=ei?ei.allocUnsafe:f,ni=Vr(X.getPrototypeOf,X),Gr=X.create,$r=ln.propertyIsEnumerable,ii=jn.splice,Hr=It?It.isConcatSpreadable:f,Mn=It?It.iterator:f,Ut=It?It.toStringTag:f,ri=function(){try{var t=Tn(X,"defineProperty");return t({},"",{}),t}catch{}}(),ts=w.clearTimeout!==Ce.clearTimeout&&w.clearTimeout,ns=F&&F.now!==Ce.Date.now&&F.now,is=w.setTimeout!==Ce.setTimeout&&w.setTimeout,ai=he.ceil,oi=he.floor,Vi=X.getOwnPropertySymbols,rs=ei?ei.isBuffer:f,Qr=w.isFinite,as=jn.join,os=Vr(X.keys,X),fe=he.max,xe=he.min,ss=F.now,ls=w.parseInt,Yr=he.random,cs=jn.reverse,Bi=Tn(w,"DataView"),Dn=Tn(w,"Map"),Wi=Tn(w,"Promise"),cn=Tn(w,"Set"),kn=Tn(w,"WeakMap"),De=Tn(X,"create"),si=kn&&new kn,dn={},kl=On(Bi),Jr=On(Dn),ds=On(Wi),ms=On(cn),us=On(kn),li=It?It.prototype:f,Fn=li?li.valueOf:f,jr=li?li.toString:f;function m(t){if(pe(t)&&!V(t)&&!(t instanceof $)){if(t instanceof Oe)return t;if(j.call(t,"__wrapped__"))return Cc(t)}return new Oe(t)}var mn=function(){function t(){}return function(i){if(!ce(i))return{};if(Gr)return Gr(i);t.prototype=i;var r=new t;return t.prototype=f,r}}();function ci(){}function Oe(t,i){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!i,this.__index__=0,this.__values__=f}function $(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Xe,this.__views__=[]}function Vt(t){var i=-1,r=null==t?0:t.length;for(this.clear();++i<r;){var s=t[i];this.set(s[0],s[1])}}function ut(t){var i=-1,r=null==t?0:t.length;for(this.clear();++i<r;){var s=t[i];this.set(s[0],s[1])}}function Et(t){var i=-1,r=null==t?0:t.length;for(this.clear();++i<r;){var s=t[i];this.set(s[0],s[1])}}function Bt(t){var i=-1,r=null==t?0:t.length;for(this.__data__=new Et;++i<r;)this.add(t[i])}function He(t){var i=this.__data__=new ut(t);this.size=i.size}function Kr(t,i){var r=V(t),s=!r&&Rn(t),c=!r&&!s&&gn(t),p=!r&&!s&&!c&&fi(t),g=r||s||c||p,_=g?rn(t.length,Jo):[],v=_.length;for(var S in t)(i||j.call(t,S))&&(!g||!("length"==S||c&&("offset"==S||"parent"==S)||p&&("buffer"==S||"byteLength"==S||"byteOffset"==S)||Ht(S,v)))&&_.push(S);return _}function Xr(t){var i=t.length;return i?t[Qs(0,i-1)]:f}function Ns(t,i){return ga(ze(t),Wt(i,0,t.length))}function Us(t){return ga(ze(t))}function Zi(t,i,r){(r!==f&&!ft(t[i],r)||r===f&&!(i in t))&&pt(t,i,r)}function Ln(t,i,r){var s=t[i];(!j.call(t,i)||!ft(s,r)||r===f&&!(i in t))&&pt(t,i,r)}function di(t,i){for(var r=t.length;r--;)if(ft(t[r][0],i))return r;return-1}function Vs(t,i,r,s){return Mt(t,function(c,p,g){i(s,c,r(c),g)}),s}function ea(t,i){return t&&Ft(i,be(i),t)}function pt(t,i,r){"__proto__"==i&&ri?ri(t,i,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[i]=r}function qi(t,i){for(var r=-1,s=i.length,c=x(s),p=null==t;++r<s;)c[r]=p?f:vl(t,i[r]);return c}function Wt(t,i,r){return t==t&&(r!==f&&(t=t<=r?t:r),i!==f&&(t=t>=i?t:i)),t}function Re(t,i,r,s,c,p){var g,_=1&i,v=2&i,S=4&i;if(r&&(g=c?r(t,s,c,p):r(t)),g!==f)return g;if(!ce(t))return t;var I=V(t);if(I){if(g=function Ld(t){var i=t.length,r=new t.constructor(i);return i&&"string"==typeof t[0]&&j.call(t,"index")&&(r.index=t.index,r.input=t.input),r}(t),!_)return ze(t,g)}else{var E=Se(t),D=E==Rt||E==Cn;if(gn(t))return $l(t,_);if(E==me||E==vn||D&&!c){if(g=v||D?{}:mc(t),!_)return v?function Cd(t,i){return Ft(t,cc(t),i)}(t,function Bs(t,i){return t&&Ft(i,Ne(i),t)}(g,t)):function vd(t,i){return Ft(t,ll(t),i)}(t,ea(g,t))}else{if(!te[E])return c?t:{};g=function Ad(t,i,r){var s=t.constructor;switch(i){case le:return tl(t);case Un:case de:return new s(+t);case et:return function fd(t,i){var r=i?tl(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.byteLength)}(t,r);case zt:case en:case ve:case tt:case Pt:case Ct:case Ci:case xi:case bi:return Hl(t,r);case Ze:return new s;case we:case bn:return new s(t);case xn:return function gd(t){var i=new t.constructor(t.source,Sn.exec(t));return i.lastIndex=t.lastIndex,i}(t);case qe:return new s;case Vn:return function _d(t){return Fn?X(Fn.call(t)):{}}(t)}}(t,E,_)}}p||(p=new He);var L=p.get(t);if(L)return L;p.set(t,g),Vc(t)?t.forEach(function(P){g.add(Re(P,i,r,P,t,p))}):Nc(t)&&t.forEach(function(P,Q){g.set(Q,Re(P,i,r,Q,t,p))});var W=I?f:(S?v?al:rl:v?Ne:be)(t);return Ae(W||t,function(P,Q){W&&(P=t[Q=P]),Ln(g,Q,Re(P,i,r,Q,t,p))}),g}function na(t,i,r){var s=r.length;if(null==t)return!s;for(t=X(t);s--;){var c=r[s],g=t[c];if(g===f&&!(c in t)||!(0,i[c])(g))return!1}return!0}function ia(t,i,r){if("function"!=typeof t)throw new Te(C);return Yi(function(){t.apply(f,r)},i)}function An(t,i,r,s){var c=-1,p=$n,g=!0,_=t.length,v=[],S=i.length;if(!_)return v;r&&(i=re(i,Me(r))),s?(p=Ti,g=!1):i.length>=200&&(p=En,g=!1,i=new Bt(i));e:for(;++c<_;){var I=t[c],E=null==r?I:r(I);if(I=s||0!==I?I:0,g&&E==E){for(var D=S;D--;)if(i[D]===E)continue e;v.push(I)}else p(i,E,s)||v.push(I)}return v}m.templateSettings={escape:Ba,evaluate:Wa,interpolate:tr,variable:"",imports:{_:m}},(m.prototype=ci.prototype).constructor=m,(Oe.prototype=mn(ci.prototype)).constructor=Oe,($.prototype=mn(ci.prototype)).constructor=$,Vt.prototype.clear=function gs(){this.__data__=De?De(null):{},this.size=0},Vt.prototype.delete=function _s(t){var i=this.has(t)&&delete this.__data__[t];return this.size-=i?1:0,i},Vt.prototype.get=function ys(t){var i=this.__data__;if(De){var r=i[t];return r===_i?f:r}return j.call(i,t)?i[t]:f},Vt.prototype.has=function vs(t){var i=this.__data__;return De?i[t]!==f:j.call(i,t)},Vt.prototype.set=function Cs(t,i){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=De&&i===f?_i:i,this},ut.prototype.clear=function xs(){this.__data__=[],this.size=0},ut.prototype.delete=function bs(t){var i=this.__data__,r=di(i,t);return!(r<0||(r==i.length-1?i.pop():ii.call(i,r,1),--this.size,0))},ut.prototype.get=function ws(t){var i=this.__data__,r=di(i,t);return r<0?f:i[r][1]},ut.prototype.has=function Ss(t){return di(this.__data__,t)>-1},ut.prototype.set=function Is(t,i){var r=this.__data__,s=di(r,t);return s<0?(++this.size,r.push([t,i])):r[s][1]=i,this},Et.prototype.clear=function Es(){this.size=0,this.__data__={hash:new Vt,map:new(Dn||ut),string:new Vt}},Et.prototype.delete=function Ms(t){var i=fa(this,t).delete(t);return this.size-=i?1:0,i},Et.prototype.get=function Ds(t){return fa(this,t).get(t)},Et.prototype.has=function ks(t){return fa(this,t).has(t)},Et.prototype.set=function Fs(t,i){var r=fa(this,t),s=r.size;return r.set(t,i),this.size+=r.size==s?0:1,this},Bt.prototype.add=Bt.prototype.push=function Ls(t){return this.__data__.set(t,_i),this},Bt.prototype.has=function As(t){return this.__data__.has(t)},He.prototype.clear=function Ts(){this.__data__=new ut,this.size=0},He.prototype.delete=function Os(t){var i=this.__data__,r=i.delete(t);return this.size=i.size,r},He.prototype.get=function Rs(t){return this.__data__.get(t)},He.prototype.has=function zs(t){return this.__data__.has(t)},He.prototype.set=function Ps(t,i){var r=this.__data__;if(r instanceof ut){var s=r.__data__;if(!Dn||s.length<199)return s.push([t,i]),this.size=++r.size,this;r=this.__data__=new Et(s)}return r.set(t,i),this.size=r.size,this};var Mt=jl(a),ra=jl(l,!0);function Ws(t,i){var r=!0;return Mt(t,function(s,c,p){return r=!!i(s,c,p)}),r}function mi(t,i,r){for(var s=-1,c=t.length;++s<c;){var p=t[s],g=i(p);if(null!=g&&(_===f?g==g&&!Ye(g):r(g,_)))var _=g,v=p}return v}function aa(t,i){var r=[];return Mt(t,function(s,c,p){i(s,c,p)&&r.push(s)}),r}function o(t,i,r,s,c){var p=-1,g=t.length;for(r||(r=Od),c||(c=[]);++p<g;){var _=t[p];i>0&&r(_)?i>1?o(_,i-1,r,s,c):bt(c,_):s||(c[c.length]=_)}return c}var d=Kl(),n=Kl(!0);function a(t,i){return t&&d(t,i,be)}function l(t,i){return t&&n(t,i,be)}function u(t,i){return xt(i,function(r){return Qt(t[r])})}function h(t,i){for(var r=0,s=(i=hn(i,t)).length;null!=t&&r<s;)t=t[Lt(i[r++])];return r&&r==s?t:f}function b(t,i,r){var s=i(t);return V(t)?s:bt(s,r(t))}function M(t){return null==t?t===f?"[object Undefined]":"[object Null]":Ut&&Ut in X(t)?function Dd(t){var i=j.call(t,Ut),r=t[Ut];try{t[Ut]=f;var s=!0}catch{}var c=$e.call(t);return s&&(i?t[Ut]=r:delete t[Ut]),c}(t):function Bd(t){return $e.call(t)}(t)}function O(t,i){return t>i}function A(t,i){return null!=t&&j.call(t,i)}function H(t,i){return null!=t&&i in X(t)}function nt(t,i,r){for(var s=r?Ti:$n,c=t[0].length,p=t.length,g=p,_=x(p),v=1/0,S=[];g--;){var I=t[g];g&&i&&(I=re(I,Me(i))),v=xe(I.length,v),_[g]=!r&&(i||c>=120&&I.length>=120)?new Bt(g&&I):f}I=t[0];var E=-1,D=_[0];e:for(;++E<c&&S.length<v;){var L=I[E],z=i?i(L):L;if(L=r||0!==L?L:0,!(D?En(D,z):s(S,z,r))){for(g=p;--g;){var W=_[g];if(!(W?En(W,z):s(t[g],z,r)))continue e}D&&D.push(z),S.push(L)}}return S}function ht(t,i,r){var s=null==(t=fc(t,i=hn(i,t)))?t:t[Lt(at(i))];return null==s?f:Ee(s,t,r)}function un(t){return pe(t)&&M(t)==vn}function it(t,i,r,s,c){return t===i||(null==t||null==i||!pe(t)&&!pe(i)?t!=t&&i!=i:function kt(t,i,r,s,c,p){var g=V(t),_=V(i),v=g?Nn:Se(t),S=_?Nn:Se(i),I=(v=v==vn?me:v)==me,E=(S=S==vn?me:S)==me,D=v==S;if(D&&gn(t)){if(!gn(i))return!1;g=!0,I=!1}if(D&&!I)return p||(p=new He),g||fi(t)?lc(t,i,r,s,c,p):function Ed(t,i,r,s,c,p,g){switch(r){case et:if(t.byteLength!=i.byteLength||t.byteOffset!=i.byteOffset)return!1;t=t.buffer,i=i.buffer;case le:return!(t.byteLength!=i.byteLength||!p(new ti(t),new ti(i)));case Un:case de:case we:return ft(+t,+i);case ct:return t.name==i.name&&t.message==i.message;case xn:case bn:return t==i+"";case Ze:var _=Ni;case qe:if(_||(_=Yn),t.size!=i.size&&!(1&s))return!1;var S=g.get(t);if(S)return S==i;s|=2,g.set(t,i);var I=lc(_(t),_(i),s,c,p,g);return g.delete(t),I;case Vn:if(Fn)return Fn.call(t)==Fn.call(i)}return!1}(t,i,v,r,s,c,p);if(!(1&r)){var L=I&&j.call(t,"__wrapped__"),z=E&&j.call(i,"__wrapped__");if(L||z){var W=L?t.value():t,P=z?i.value():i;return p||(p=new He),c(W,P,r,s,p)}}return!!D&&(p||(p=new He),function Md(t,i,r,s,c,p){var g=1&r,_=rl(t),v=_.length;if(v!=rl(i).length&&!g)return!1;for(var E=v;E--;){var D=_[E];if(!(g?D in i:j.call(i,D)))return!1}var L=p.get(t),z=p.get(i);if(L&&z)return L==i&&z==t;var W=!0;p.set(t,i),p.set(i,t);for(var P=g;++E<v;){var Q=t[D=_[E]],Y=i[D];if(s)var Je=g?s(Y,Q,D,i,t,p):s(Q,Y,D,t,i,p);if(!(Je===f?Q===Y||c(Q,Y,r,s,p):Je)){W=!1;break}P||(P="constructor"==D)}if(W&&!P){var Fe=t.constructor,je=i.constructor;Fe!=je&&"constructor"in t&&"constructor"in i&&!("function"==typeof Fe&&Fe instanceof Fe&&"function"==typeof je&&je instanceof je)&&(W=!1)}return p.delete(t),p.delete(i),W}(t,i,r,s,c,p))}(t,i,r,s,it,c))}function Gi(t,i,r,s){var c=r.length,p=c,g=!s;if(null==t)return!p;for(t=X(t);c--;){var _=r[c];if(g&&_[2]?_[1]!==t[_[0]]:!(_[0]in t))return!1}for(;++c<p;){var v=(_=r[c])[0],S=t[v],I=_[1];if(g&&_[2]){if(S===f&&!(v in t))return!1}else{var E=new He;if(s)var D=s(S,I,v,t,i,E);if(!(D===f?it(I,S,3,s,E):D))return!1}}return!0}function Fl(t){return!(!ce(t)||function zd(t){return!!Wr&&Wr in t}(t))&&(Qt(t)?es:ir).test(On(t))}function Ll(t){return"function"==typeof t?t:null==t?Ue:"object"==typeof t?V(t)?Ol(t[0],t[1]):Tl(t):Xc(t)}function Gs(t){if(!Qi(t))return os(t);var i=[];for(var r in X(t))j.call(t,r)&&"constructor"!=r&&i.push(r);return i}function $s(t,i){return t<i}function Al(t,i){var r=-1,s=Pe(t)?x(t.length):[];return Mt(t,function(c,p,g){s[++r]=i(c,p,g)}),s}function Tl(t){var i=sl(t);return 1==i.length&&i[0][2]?pc(i[0][0],i[0][1]):function(r){return r===t||Gi(r,t,i)}}function Ol(t,i){return cl(t)&&uc(i)?pc(Lt(t),i):function(r){var s=vl(r,t);return s===f&&s===i?Cl(r,t):it(i,s,3)}}function oa(t,i,r,s,c){t!==i&&d(i,function(p,g){if(c||(c=new He),ce(p))!function ad(t,i,r,s,c,p,g){var _=ml(t,r),v=ml(i,r),S=g.get(v);if(S)Zi(t,r,S);else{var I=p?p(_,v,r+"",t,i,g):f,E=I===f;if(E){var D=V(v),L=!D&&gn(v),z=!D&&!L&&fi(v);I=v,D||L||z?V(_)?I=_:ge(_)?I=ze(_):L?(E=!1,I=$l(v,!0)):z?(E=!1,I=Hl(v,!0)):I=[]:Ji(v)||Rn(v)?(I=_,Rn(_)?I=Zc(_):(!ce(_)||Qt(_))&&(I=mc(v))):E=!1}E&&(g.set(v,I),c(I,v,s,p,g),g.delete(v)),Zi(t,r,I)}}(t,i,g,r,oa,s,c);else{var _=s?s(ml(t,g),p,g+"",t,i,c):f;_===f&&(_=p),Zi(t,g,_)}},Ne)}function Rl(t,i){var r=t.length;if(r)return Ht(i+=i<0?r:0,r)?t[i]:f}function zl(t,i,r){i=i.length?re(i,function(p){return V(p)?function(g){return h(g,1===p.length?p[0]:p)}:p}):[Ue];var s=-1;return i=re(i,Me(R())),function mt(y,w){var x=y.length;for(y.sort(w);x--;)y[x]=y[x].value;return y}(Al(t,function(p,g,_){return{criteria:re(i,function(S){return S(p)}),index:++s,value:p}}),function(p,g){return function yd(t,i,r){for(var s=-1,c=t.criteria,p=i.criteria,g=c.length,_=r.length;++s<g;){var v=Ql(c[s],p[s]);if(v)return s>=_?v:v*("desc"==r[s]?-1:1)}return t.index-i.index}(p,g,r)})}function Pl(t,i,r){for(var s=-1,c=i.length,p={};++s<c;){var g=i[s],_=h(t,g);r(_,g)&&$i(p,hn(g,t),_)}return p}function Hs(t,i,r,s){var c=s?Oo:nn,p=-1,g=i.length,_=t;for(t===i&&(i=ze(i)),r&&(_=re(t,Me(r)));++p<g;)for(var v=0,S=i[p],I=r?r(S):S;(v=c(_,I,v,s))>-1;)_!==t&&ii.call(_,v,1),ii.call(t,v,1);return t}function Nl(t,i){for(var r=t?i.length:0,s=r-1;r--;){var c=i[r];if(r==s||c!==p){var p=c;Ht(c)?ii.call(t,c,1):js(t,c)}}return t}function Qs(t,i){return t+oi(Yr()*(i-t+1))}function Ys(t,i){var r="";if(!t||i<1||i>vt)return r;do{i%2&&(r+=t),(i=oi(i/2))&&(t+=t)}while(i);return r}function Z(t,i){return ul(hc(t,i,Ue),t+"")}function cd(t){return Xr(gi(t))}function dd(t,i){var r=gi(t);return ga(r,Wt(i,0,r.length))}function $i(t,i,r,s){if(!ce(t))return t;for(var c=-1,p=(i=hn(i,t)).length,g=p-1,_=t;null!=_&&++c<p;){var v=Lt(i[c]),S=r;if("__proto__"===v||"constructor"===v||"prototype"===v)return t;if(c!=g){var I=_[v];(S=s?s(I,v,_):f)===f&&(S=ce(I)?I:Ht(i[c+1])?[]:{})}Ln(_,v,S),_=_[v]}return t}var Ul=si?function(t,i){return si.set(t,i),t}:Ue,md=ri?function(t,i){return ri(t,"toString",{configurable:!0,enumerable:!1,value:bl(i),writable:!0})}:Ue;function ud(t){return ga(gi(t))}function rt(t,i,r){var s=-1,c=t.length;i<0&&(i=-i>c?0:c+i),(r=r>c?c:r)<0&&(r+=c),c=i>r?0:r-i>>>0,i>>>=0;for(var p=x(c);++s<c;)p[s]=t[s+i];return p}function pd(t,i){var r;return Mt(t,function(s,c,p){return!(r=i(s,c,p))}),!!r}function sa(t,i,r){var s=0,c=null==t?s:t.length;if("number"==typeof i&&i==i&&c<=2147483647){for(;s<c;){var p=s+c>>>1,g=t[p];null!==g&&!Ye(g)&&(r?g<=i:g<i)?s=p+1:c=p}return c}return Js(t,i,Ue,r)}function Js(t,i,r,s){var c=0,p=null==t?0:t.length;if(0===p)return 0;for(var g=(i=r(i))!=i,_=null===i,v=Ye(i),S=i===f;c<p;){var I=oi((c+p)/2),E=r(t[I]),D=E!==f,L=null===E,z=E==E,W=Ye(E);if(g)var P=s||z;else P=S?z&&(s||D):_?z&&D&&(s||!L):v?z&&D&&!L&&(s||!W):!L&&!W&&(s?E<=i:E<i);P?c=I+1:p=I}return xe(p,4294967294)}function Vl(t,i){for(var r=-1,s=t.length,c=0,p=[];++r<s;){var g=t[r],_=i?i(g):g;if(!r||!ft(_,v)){var v=_;p[c++]=0===g?0:g}}return p}function Bl(t){return"number"==typeof t?t:Ye(t)?NaN:+t}function Qe(t){if("string"==typeof t)return t;if(V(t))return re(t,Qe)+"";if(Ye(t))return jr?jr.call(t):"";var i=t+"";return"0"==i&&1/t==-Ot?"-0":i}function pn(t,i,r){var s=-1,c=$n,p=t.length,g=!0,_=[],v=_;if(r)g=!1,c=Ti;else if(p>=200){var S=i?null:Sd(t);if(S)return Yn(S);g=!1,c=En,v=new Bt}else v=i?[]:_;e:for(;++s<p;){var I=t[s],E=i?i(I):I;if(I=r||0!==I?I:0,g&&E==E){for(var D=v.length;D--;)if(v[D]===E)continue e;i&&v.push(E),_.push(I)}else c(v,E,r)||(v!==_&&v.push(E),_.push(I))}return _}function js(t,i){return null==(t=fc(t,i=hn(i,t)))||delete t[Lt(at(i))]}function Wl(t,i,r,s){return $i(t,i,r(h(t,i)),s)}function la(t,i,r,s){for(var c=t.length,p=s?c:-1;(s?p--:++p<c)&&i(t[p],p,t););return r?rt(t,s?0:p,s?p+1:c):rt(t,s?p+1:0,s?c:p)}function Zl(t,i){var r=t;return r instanceof $&&(r=r.value()),Oi(i,function(s,c){return c.func.apply(c.thisArg,bt([s],c.args))},r)}function Ks(t,i,r){var s=t.length;if(s<2)return s?pn(t[0]):[];for(var c=-1,p=x(s);++c<s;)for(var g=t[c],_=-1;++_<s;)_!=c&&(p[c]=An(p[c]||g,t[_],i,r));return pn(o(p,1),i,r)}function ql(t,i,r){for(var s=-1,c=t.length,p=i.length,g={};++s<c;)r(g,t[s],s<p?i[s]:f);return g}function Xs(t){return ge(t)?t:[]}function el(t){return"function"==typeof t?t:Ue}function hn(t,i){return V(t)?t:cl(t,i)?[t]:vc(K(t))}var hd=Z;function fn(t,i,r){var s=t.length;return r=r===f?s:r,!i&&r>=s?t:rt(t,i,r)}var Gl=ts||function(t){return Ce.clearTimeout(t)};function $l(t,i){if(i)return t.slice();var r=t.length,s=qr?qr(r):new t.constructor(r);return t.copy(s),s}function tl(t){var i=new t.constructor(t.byteLength);return new ti(i).set(new ti(t)),i}function Hl(t,i){var r=i?tl(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)}function Ql(t,i){if(t!==i){var r=t!==f,s=null===t,c=t==t,p=Ye(t),g=i!==f,_=null===i,v=i==i,S=Ye(i);if(!_&&!S&&!p&&t>i||p&&g&&v&&!_&&!S||s&&g&&v||!r&&v||!c)return 1;if(!s&&!p&&!S&&t<i||S&&r&&c&&!s&&!p||_&&r&&c||!g&&c||!v)return-1}return 0}function Yl(t,i,r,s){for(var c=-1,p=t.length,g=r.length,_=-1,v=i.length,S=fe(p-g,0),I=x(v+S),E=!s;++_<v;)I[_]=i[_];for(;++c<g;)(E||c<p)&&(I[r[c]]=t[c]);for(;S--;)I[_++]=t[c++];return I}function Jl(t,i,r,s){for(var c=-1,p=t.length,g=-1,_=r.length,v=-1,S=i.length,I=fe(p-_,0),E=x(I+S),D=!s;++c<I;)E[c]=t[c];for(var L=c;++v<S;)E[L+v]=i[v];for(;++g<_;)(D||c<p)&&(E[L+r[g]]=t[c++]);return E}function ze(t,i){var r=-1,s=t.length;for(i||(i=x(s));++r<s;)i[r]=t[r];return i}function Ft(t,i,r,s){var c=!r;r||(r={});for(var p=-1,g=i.length;++p<g;){var _=i[p],v=s?s(r[_],t[_],_,r,t):f;v===f&&(v=t[_]),c?pt(r,_,v):Ln(r,_,v)}return r}function ca(t,i){return function(r,s){var c=V(r)?Do:Vs,p=i?i():{};return c(r,t,R(s,2),p)}}function ui(t){return Z(function(i,r){var s=-1,c=r.length,p=c>1?r[c-1]:f,g=c>2?r[2]:f;for(p=t.length>3&&"function"==typeof p?(c--,p):f,g&&ke(r[0],r[1],g)&&(p=c<3?f:p,c=1),i=X(i);++s<c;){var _=r[s];_&&t(i,_,s,p)}return i})}function jl(t,i){return function(r,s){if(null==r)return r;if(!Pe(r))return t(r,s);for(var c=r.length,p=i?c:-1,g=X(r);(i?p--:++p<c)&&!1!==s(g[p],p,g););return r}}function Kl(t){return function(i,r,s){for(var c=-1,p=X(i),g=s(i),_=g.length;_--;){var v=g[t?_:++c];if(!1===r(p[v],v,p))break}return i}}function Xl(t){return function(i){var r=an(i=K(i))?Ge(i):f,s=r?r[0]:i.charAt(0),c=r?fn(r,1).join(""):i.slice(1);return s[t]()+c}}function pi(t){return function(i){return Oi(jc(Jc(i).replace(go,"")),t,"")}}function Hi(t){return function(){var i=arguments;switch(i.length){case 0:return new t;case 1:return new t(i[0]);case 2:return new t(i[0],i[1]);case 3:return new t(i[0],i[1],i[2]);case 4:return new t(i[0],i[1],i[2],i[3]);case 5:return new t(i[0],i[1],i[2],i[3],i[4]);case 6:return new t(i[0],i[1],i[2],i[3],i[4],i[5]);case 7:return new t(i[0],i[1],i[2],i[3],i[4],i[5],i[6])}var r=mn(t.prototype),s=t.apply(r,i);return ce(s)?s:r}}function ec(t){return function(i,r,s){var c=X(i);if(!Pe(i)){var p=R(r,3);i=be(i),r=function(_){return p(c[_],_,c)}}var g=t(i,r,s);return g>-1?c[p?i[g]:g]:f}}function tc(t){return $t(function(i){var r=i.length,s=r,c=Oe.prototype.thru;for(t&&i.reverse();s--;){var p=i[s];if("function"!=typeof p)throw new Te(C);if(c&&!g&&"wrapper"==ha(p))var g=new Oe([],!0)}for(s=g?s:r;++s<r;){var _=ha(p=i[s]),v="wrapper"==_?ol(p):f;g=v&&dl(v[0])&&424==v[1]&&!v[4].length&&1==v[9]?g[ha(v[0])].apply(g,v[3]):1==p.length&&dl(p)?g[_]():g.thru(p)}return function(){var S=arguments,I=S[0];if(g&&1==S.length&&V(I))return g.plant(I).value();for(var E=0,D=r?i[E].apply(this,S):I;++E<r;)D=i[E].call(this,D);return D}})}function da(t,i,r,s,c,p,g,_,v,S){var I=128&i,E=1&i,D=2&i,L=24&i,z=512&i,W=D?f:Hi(t);return function P(){for(var Q=arguments.length,Y=x(Q),Je=Q;Je--;)Y[Je]=arguments[Je];if(L)var Fe=hi(P),je=zo(Y,Fe);if(s&&(Y=Yl(Y,s,c,L)),p&&(Y=Jl(Y,p,g,L)),Q-=je,L&&Q<S){var _e=St(Y,Fe);return rc(t,i,da,P.placeholder,r,Y,_e,_,v,S-Q)}var gt=E?r:this,Jt=D?gt[t]:t;return Q=Y.length,_?Y=Wd(Y,_):z&&Q>1&&Y.reverse(),I&&v<Q&&(Y.length=v),this&&this!==Ce&&this instanceof P&&(Jt=W||Hi(Jt)),Jt.apply(gt,Y)}}function nc(t,i){return function(r,s){return function Dt(t,i,r,s){return a(t,function(c,p,g){i(s,r(c),p,g)}),s}(r,t,i(s),{})}}function ma(t,i){return function(r,s){var c;if(r===f&&s===f)return i;if(r!==f&&(c=r),s!==f){if(c===f)return s;"string"==typeof r||"string"==typeof s?(r=Qe(r),s=Qe(s)):(r=Bl(r),s=Bl(s)),c=t(r,s)}return c}}function nl(t){return $t(function(i){return i=re(i,Me(R())),Z(function(r){var s=this;return t(i,function(c){return Ee(c,s,r)})})})}function ua(t,i){var r=(i=i===f?" ":Qe(i)).length;if(r<2)return r?Ys(i,t):i;var s=Ys(i,ai(t/on(i)));return an(i)?fn(Ge(s),0,t).join(""):s.slice(0,t)}function ic(t){return function(i,r,s){return s&&"number"!=typeof s&&ke(i,r,s)&&(r=s=f),i=Yt(i),r===f?(r=i,i=0):r=Yt(r),function ld(t,i,r,s){for(var c=-1,p=fe(ai((i-t)/(r||1)),0),g=x(p);p--;)g[s?p:++c]=t,t+=r;return g}(i,r,s=s===f?i<r?1:-1:Yt(s),t)}}function pa(t){return function(i,r){return"string"==typeof i&&"string"==typeof r||(i=ot(i),r=ot(r)),t(i,r)}}function rc(t,i,r,s,c,p,g,_,v,S){var I=8&i;i|=I?32:64,4&(i&=~(I?64:32))||(i&=-4);var W=[t,i,c,I?p:f,I?g:f,I?f:p,I?f:g,_,v,S],P=r.apply(f,W);return dl(t)&&gc(P,W),P.placeholder=s,_c(P,t,i)}function il(t){var i=he[t];return function(r,s){if(r=ot(r),(s=null==s?0:xe(B(s),292))&&Qr(r)){var c=(K(r)+"e").split("e");return+((c=(K(i(c[0]+"e"+(+c[1]+s)))+"e").split("e"))[0]+"e"+(+c[1]-s))}return i(r)}}var Sd=cn&&1/Yn(new cn([,-0]))[1]==Ot?function(t){return new cn(t)}:Il;function ac(t){return function(i){var r=Se(i);return r==Ze?Ni(i):r==qe?function Zo(y){var w=-1,x=Array(y.size);return y.forEach(function(F){x[++w]=[F,F]}),x}(i):function Ro(y,w){return re(w,function(x){return[x,y[x]]})}(i,t(i))}}function Gt(t,i,r,s,c,p,g,_){var v=2&i;if(!v&&"function"!=typeof t)throw new Te(C);var S=s?s.length:0;if(S||(i&=-97,s=c=f),g=g===f?g:fe(B(g),0),_=_===f?_:B(_),S-=c?c.length:0,64&i){var I=s,E=c;s=c=f}var D=v?f:ol(t),L=[t,i,r,s,c,I,E,p,g,_];if(D&&function Ud(t,i){var r=t[1],s=i[1],c=r|s;if(!(c<131||(128==s&&8==r||128==s&&256==r&&t[7].length<=i[8]||384==s&&i[7].length<=i[8]&&8==r)))return t;1&s&&(t[2]=i[2],c|=1&r?0:4);var _=i[3];if(_){var v=t[3];t[3]=v?Yl(v,_,i[4]):_,t[4]=v?St(t[3],lt):i[4]}(_=i[5])&&(t[5]=(v=t[5])?Jl(v,_,i[6]):_,t[6]=v?St(t[5],lt):i[6]),(_=i[7])&&(t[7]=_),128&s&&(t[8]=null==t[8]?i[8]:xe(t[8],i[8])),null==t[9]&&(t[9]=i[9]),t[0]=i[0],t[1]=c}(L,D),t=L[0],i=L[1],r=L[2],s=L[3],c=L[4],!(_=L[9]=L[9]===f?v?0:t.length:fe(L[9]-S,0))&&24&i&&(i&=-25),i&&1!=i)z=8==i||16==i?function bd(t,i,r){var s=Hi(t);return function c(){for(var p=arguments.length,g=x(p),_=p,v=hi(c);_--;)g[_]=arguments[_];var S=p<3&&g[0]!==v&&g[p-1]!==v?[]:St(g,v);return(p-=S.length)<r?rc(t,i,da,c.placeholder,f,g,S,f,f,r-p):Ee(this&&this!==Ce&&this instanceof c?s:t,this,g)}}(t,i,_):32!=i&&33!=i||c.length?da.apply(f,L):function wd(t,i,r,s){var c=1&i,p=Hi(t);return function g(){for(var _=-1,v=arguments.length,S=-1,I=s.length,E=x(I+v),D=this&&this!==Ce&&this instanceof g?p:t;++S<I;)E[S]=s[S];for(;v--;)E[S++]=arguments[++_];return Ee(D,c?r:this,E)}}(t,i,r,s);else var z=function xd(t,i,r){var s=1&i,c=Hi(t);return function p(){return(this&&this!==Ce&&this instanceof p?c:t).apply(s?r:this,arguments)}}(t,i,r);return _c((D?Ul:gc)(z,L),t,i)}function oc(t,i,r,s){return t===f||ft(t,ln[r])&&!j.call(s,r)?i:t}function sc(t,i,r,s,c,p){return ce(t)&&ce(i)&&(p.set(i,t),oa(t,i,f,sc,p),p.delete(i)),t}function Id(t){return Ji(t)?f:t}function lc(t,i,r,s,c,p){var g=1&r,_=t.length,v=i.length;if(_!=v&&!(g&&v>_))return!1;var S=p.get(t),I=p.get(i);if(S&&I)return S==i&&I==t;var E=-1,D=!0,L=2&r?new Bt:f;for(p.set(t,i),p.set(i,t);++E<_;){var z=t[E],W=i[E];if(s)var P=g?s(W,z,E,i,t,p):s(z,W,E,t,i,p);if(P!==f){if(P)continue;D=!1;break}if(L){if(!Ri(i,function(Q,Y){if(!En(L,Y)&&(z===Q||c(z,Q,r,s,p)))return L.push(Y)})){D=!1;break}}else if(z!==W&&!c(z,W,r,s,p)){D=!1;break}}return p.delete(t),p.delete(i),D}function $t(t){return ul(hc(t,f,wc),t+"")}function rl(t){return b(t,be,ll)}function al(t){return b(t,Ne,cc)}var ol=si?function(t){return si.get(t)}:Il;function ha(t){for(var i=t.name+"",r=dn[i],s=j.call(dn,i)?r.length:0;s--;){var c=r[s],p=c.func;if(null==p||p==t)return c.name}return i}function hi(t){return(j.call(m,"placeholder")?m:t).placeholder}function R(){var t=m.iteratee||wl;return t=t===wl?Ll:t,arguments.length?t(arguments[0],arguments[1]):t}function fa(t,i){var r=t.__data__;return function Rd(t){var i=typeof t;return"string"==i||"number"==i||"symbol"==i||"boolean"==i?"__proto__"!==t:null===t}(i)?r["string"==typeof i?"string":"hash"]:r.map}function sl(t){for(var i=be(t),r=i.length;r--;){var s=i[r],c=t[s];i[r]=[s,c,uc(c)]}return i}function Tn(t,i){var r=function Vo(y,w){return null==y?f:y[w]}(t,i);return Fl(r)?r:f}var ll=Vi?function(t){return null==t?[]:(t=X(t),xt(Vi(t),function(i){return $r.call(t,i)}))}:El,cc=Vi?function(t){for(var i=[];t;)bt(i,ll(t)),t=ni(t);return i}:El,Se=M;function dc(t,i,r){for(var s=-1,c=(i=hn(i,t)).length,p=!1;++s<c;){var g=Lt(i[s]);if(!(p=null!=t&&r(t,g)))break;t=t[g]}return p||++s!=c?p:!!(c=null==t?0:t.length)&&ba(c)&&Ht(g,c)&&(V(t)||Rn(t))}function mc(t){return"function"!=typeof t.constructor||Qi(t)?{}:mn(ni(t))}function Od(t){return V(t)||Rn(t)||!!(Hr&&t&&t[Hr])}function Ht(t,i){var r=typeof t;return!!(i=i??vt)&&("number"==r||"symbol"!=r&&ar.test(t))&&t>-1&&t%1==0&&t<i}function ke(t,i,r){if(!ce(r))return!1;var s=typeof i;return!!("number"==s?Pe(r)&&Ht(i,r.length):"string"==s&&i in r)&&ft(r[i],t)}function cl(t,i){if(V(t))return!1;var r=typeof t;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=t&&!Ye(t))||qa.test(t)||!Za.test(t)||null!=i&&t in X(i)}function dl(t){var i=ha(t),r=m[i];if("function"!=typeof r||!(i in $.prototype))return!1;if(t===r)return!0;var s=ol(r);return!!s&&t===s[0]}(Bi&&Se(new Bi(new ArrayBuffer(1)))!=et||Dn&&Se(new Dn)!=Ze||Wi&&Se(Wi.resolve())!=G||cn&&Se(new cn)!=qe||kn&&Se(new kn)!=wn)&&(Se=function(t){var i=M(t),r=i==me?t.constructor:f,s=r?On(r):"";if(s)switch(s){case kl:return et;case Jr:return Ze;case ds:return G;case ms:return qe;case us:return wn}return i});var Pd=Kn?Qt:Ml;function Qi(t){var i=t&&t.constructor;return t===("function"==typeof i&&i.prototype||ln)}function uc(t){return t==t&&!ce(t)}function pc(t,i){return function(r){return null!=r&&r[t]===i&&(i!==f||t in X(r))}}function hc(t,i,r){return i=fe(i===f?t.length-1:i,0),function(){for(var s=arguments,c=-1,p=fe(s.length-i,0),g=x(p);++c<p;)g[c]=s[i+c];c=-1;for(var _=x(i+1);++c<i;)_[c]=s[c];return _[i]=r(g),Ee(t,this,_)}}function fc(t,i){return i.length<2?t:h(t,rt(i,0,-1))}function Wd(t,i){for(var r=t.length,s=xe(i.length,r),c=ze(t);s--;){var p=i[s];t[s]=Ht(p,r)?c[p]:f}return t}function ml(t,i){if(("constructor"!==i||"function"!=typeof t[i])&&"__proto__"!=i)return t[i]}var gc=yc(Ul),Yi=is||function(t,i){return Ce.setTimeout(t,i)},ul=yc(md);function _c(t,i,r){var s=i+"";return ul(t,function Td(t,i){var r=i.length;if(!r)return t;var s=r-1;return i[s]=(r>1?"& ":"")+i[s],i=i.join(r>2?", ":" "),t.replace(Qa,"{\n/* [wrapped with "+i+"] */\n")}(s,function Zd(t,i){return Ae(Aa,function(r){var s="_."+r[0];i&r[1]&&!$n(t,s)&&t.push(s)}),t.sort()}(function Fd(t){var i=t.match(Ya);return i?i[1].split(Ja):[]}(s),r)))}function yc(t){var i=0,r=0;return function(){var s=ss(),c=16-(s-r);if(r=s,c>0){if(++i>=800)return arguments[0]}else i=0;return t.apply(f,arguments)}}function ga(t,i){var r=-1,s=t.length,c=s-1;for(i=i===f?s:i;++r<i;){var p=Qs(r,c),g=t[p];t[p]=t[r],t[r]=g}return t.length=i,t}var vc=function Nd(t){var i=Ca(t,function(s){return 500===r.size&&r.clear(),s}),r=i.cache;return i}(function(t){var i=[];return 46===t.charCodeAt(0)&&i.push(""),t.replace(Ga,function(r,s,c,p){i.push(c?p.replace(ja,"$1"):s||r)}),i});function Lt(t){if("string"==typeof t||Ye(t))return t;var i=t+"";return"0"==i&&1/t==-Ot?"-0":i}function On(t){if(null!=t){try{return Xn.call(t)}catch{}try{return t+""}catch{}}return""}function Cc(t){if(t instanceof $)return t.clone();var i=new Oe(t.__wrapped__,t.__chain__);return i.__actions__=ze(t.__actions__),i.__index__=t.__index__,i.__values__=t.__values__,i}var Hd=Z(function(t,i){return ge(t)?An(t,o(i,1,ge,!0)):[]}),Qd=Z(function(t,i){var r=at(i);return ge(r)&&(r=f),ge(t)?An(t,o(i,1,ge,!0),R(r,2)):[]}),Yd=Z(function(t,i){var r=at(i);return ge(r)&&(r=f),ge(t)?An(t,o(i,1,ge,!0),f,r):[]});function xc(t,i,r){var s=null==t?0:t.length;if(!s)return-1;var c=null==r?0:B(r);return c<0&&(c=fe(s+c,0)),Hn(t,R(i,3),c)}function bc(t,i,r){var s=null==t?0:t.length;if(!s)return-1;var c=s-1;return r!==f&&(c=B(r),c=r<0?fe(s+c,0):xe(c,s-1)),Hn(t,R(i,3),c,!0)}function wc(t){return null!=t&&t.length?o(t,1):[]}function Sc(t){return t&&t.length?t[0]:f}var om=Z(function(t){var i=re(t,Xs);return i.length&&i[0]===t[0]?nt(i):[]}),sm=Z(function(t){var i=at(t),r=re(t,Xs);return i===at(r)?i=f:r.pop(),r.length&&r[0]===t[0]?nt(r,R(i,2)):[]}),lm=Z(function(t){var i=at(t),r=re(t,Xs);return(i="function"==typeof i?i:f)&&r.pop(),r.length&&r[0]===t[0]?nt(r,f,i):[]});function at(t){var i=null==t?0:t.length;return i?t[i-1]:f}var um=Z(Ic);function Ic(t,i){return t&&t.length&&i&&i.length?Hs(t,i):t}var fm=$t(function(t,i){var r=null==t?0:t.length,s=qi(t,i);return Nl(t,re(i,function(c){return Ht(c,r)?+c:c}).sort(Ql)),s});function pl(t){return null==t?t:cs.call(t)}var Lm=Z(function(t){return pn(o(t,1,ge,!0))}),Am=Z(function(t){var i=at(t);return ge(i)&&(i=f),pn(o(t,1,ge,!0),R(i,2))}),Tm=Z(function(t){var i=at(t);return i="function"==typeof i?i:f,pn(o(t,1,ge,!0),f,i)});function hl(t){if(!t||!t.length)return[];var i=0;return t=xt(t,function(r){if(ge(r))return i=fe(r.length,i),!0}),rn(i,function(r){return re(t,zi(r))})}function Ec(t,i){if(!t||!t.length)return[];var r=hl(t);return null==i?r:re(r,function(s){return Ee(i,f,s)})}var Pm=Z(function(t,i){return ge(t)?An(t,i):[]}),Nm=Z(function(t){return Ks(xt(t,ge))}),Um=Z(function(t){var i=at(t);return ge(i)&&(i=f),Ks(xt(t,ge),R(i,2))}),Vm=Z(function(t){var i=at(t);return i="function"==typeof i?i:f,Ks(xt(t,ge),f,i)}),Bm=Z(hl),qm=Z(function(t){var i=t.length,r=i>1?t[i-1]:f;return r="function"==typeof r?(t.pop(),r):f,Ec(t,r)});function Mc(t){var i=m(t);return i.__chain__=!0,i}function _a(t,i){return i(t)}var $m=$t(function(t){var i=t.length,r=i?t[0]:0,s=this.__wrapped__,c=function(p){return qi(p,t)};return!(i>1||this.__actions__.length)&&s instanceof $&&Ht(r)?((s=s.slice(r,+r+(i?1:0))).__actions__.push({func:_a,args:[c],thisArg:f}),new Oe(s,this.__chain__).thru(function(p){return i&&!p.length&&p.push(f),p})):this.thru(c)}),eu=ca(function(t,i,r){j.call(t,r)?++t[r]:pt(t,r,1)}),iu=ec(xc),ru=ec(bc);function Dc(t,i){return(V(t)?Ae:Mt)(t,R(i,3))}function kc(t,i){return(V(t)?ko:ra)(t,R(i,3))}var lu=ca(function(t,i,r){j.call(t,r)?t[r].push(i):pt(t,r,[i])}),du=Z(function(t,i,r){var s=-1,c="function"==typeof i,p=Pe(t)?x(t.length):[];return Mt(t,function(g){p[++s]=c?Ee(i,g,r):ht(g,i,r)}),p}),mu=ca(function(t,i,r){pt(t,r,i)});function ya(t,i){return(V(t)?re:Al)(t,R(i,3))}var pu=ca(function(t,i,r){t[r?0:1].push(i)},function(){return[[],[]]}),bu=Z(function(t,i){if(null==t)return[];var r=i.length;return r>1&&ke(t,i[0],i[1])?i=[]:r>2&&ke(i[0],i[1],i[2])&&(i=[i[0]]),zl(t,o(i,1),[])}),va=ns||function(){return Ce.Date.now()};function Fc(t,i,r){return i=r?f:i,Gt(t,128,f,f,f,f,i=t&&null==i?t.length:i)}function Lc(t,i){var r;if("function"!=typeof i)throw new Te(C);return t=B(t),function(){return--t>0&&(r=i.apply(this,arguments)),t<=1&&(i=f),r}}var fl=Z(function(t,i,r){var s=1;if(r.length){var c=St(r,hi(fl));s|=32}return Gt(t,s,i,r,c)}),Ac=Z(function(t,i,r){var s=3;if(r.length){var c=St(r,hi(Ac));s|=32}return Gt(i,s,t,r,c)});function Rc(t,i,r){var s,c,p,g,_,v,S=0,I=!1,E=!1,D=!0;if("function"!=typeof t)throw new Te(C);function L(_e){var gt=s,Jt=c;return s=c=f,S=_e,g=t.apply(Jt,gt)}function z(_e){return S=_e,_=Yi(Q,i),I?L(_e):g}function P(_e){var gt=_e-v;return v===f||gt>=i||gt<0||E&&_e-S>=p}function Q(){var _e=va();if(P(_e))return Y(_e);_=Yi(Q,function W(_e){var ed=i-(_e-v);return E?xe(ed,p-(_e-S)):ed}(_e))}function Y(_e){return _=f,D&&s?L(_e):(s=c=f,g)}function je(){var _e=va(),gt=P(_e);if(s=arguments,c=this,v=_e,gt){if(_===f)return z(v);if(E)return Gl(_),_=Yi(Q,i),L(v)}return _===f&&(_=Yi(Q,i)),g}return i=ot(i)||0,ce(r)&&(I=!!r.leading,p=(E="maxWait"in r)?fe(ot(r.maxWait)||0,i):p,D="trailing"in r?!!r.trailing:D),je.cancel=function Je(){_!==f&&Gl(_),S=0,s=v=c=_=f},je.flush=function Fe(){return _===f?g:Y(va())},je}var Su=Z(function(t,i){return ia(t,1,i)}),Iu=Z(function(t,i,r){return ia(t,ot(i)||0,r)});function Ca(t,i){if("function"!=typeof t||null!=i&&"function"!=typeof i)throw new Te(C);var r=function(){var s=arguments,c=i?i.apply(this,s):s[0],p=r.cache;if(p.has(c))return p.get(c);var g=t.apply(this,s);return r.cache=p.set(c,g)||p,g};return r.cache=new(Ca.Cache||Et),r}function xa(t){if("function"!=typeof t)throw new Te(C);return function(){var i=arguments;switch(i.length){case 0:return!t.call(this);case 1:return!t.call(this,i[0]);case 2:return!t.call(this,i[0],i[1]);case 3:return!t.call(this,i[0],i[1],i[2])}return!t.apply(this,i)}}Ca.Cache=Et;var Du=hd(function(t,i){var r=(i=1==i.length&&V(i[0])?re(i[0],Me(R())):re(o(i,1),Me(R()))).length;return Z(function(s){for(var c=-1,p=xe(s.length,r);++c<p;)s[c]=i[c].call(this,s[c]);return Ee(t,this,s)})}),gl=Z(function(t,i){var r=St(i,hi(gl));return Gt(t,32,f,i,r)}),zc=Z(function(t,i){var r=St(i,hi(zc));return Gt(t,64,f,i,r)}),ku=$t(function(t,i){return Gt(t,256,f,f,f,i)});function ft(t,i){return t===i||t!=t&&i!=i}var Bu=pa(O),Wu=pa(function(t,i){return t>=i}),Rn=un(function(){return arguments}())?un:function(t){return pe(t)&&j.call(t,"callee")&&!$r.call(t,"callee")},V=x.isArray,Zu=Mr?Me(Mr):function Zt(t){return pe(t)&&M(t)==le};function Pe(t){return null!=t&&ba(t.length)&&!Qt(t)}function ge(t){return pe(t)&&Pe(t)}var gn=rs||Ml,Gu=Dr?Me(Dr):function qt(t){return pe(t)&&M(t)==de};function _l(t){if(!pe(t))return!1;var i=M(t);return i==ct||"[object DOMException]"==i||"string"==typeof t.message&&"string"==typeof t.name&&!Ji(t)}function Qt(t){if(!ce(t))return!1;var i=M(t);return i==Rt||i==Cn||"[object AsyncFunction]"==i||"[object Proxy]"==i}function Pc(t){return"number"==typeof t&&t==B(t)}function ba(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=vt}function ce(t){var i=typeof t;return null!=t&&("object"==i||"function"==i)}function pe(t){return null!=t&&"object"==typeof t}var Nc=kr?Me(kr):function qs(t){return pe(t)&&Se(t)==Ze};function Uc(t){return"number"==typeof t||pe(t)&&M(t)==we}function Ji(t){if(!pe(t)||M(t)!=me)return!1;var i=ni(t);if(null===i)return!0;var r=j.call(i,"constructor")&&i.constructor;return"function"==typeof r&&r instanceof r&&Xn.call(r)==Zr}var yl=Fr?Me(Fr):function td(t){return pe(t)&&M(t)==xn},Vc=Lr?Me(Lr):function nd(t){return pe(t)&&Se(t)==qe};function wa(t){return"string"==typeof t||!V(t)&&pe(t)&&M(t)==bn}function Ye(t){return"symbol"==typeof t||pe(t)&&M(t)==Vn}var fi=Ar?Me(Ar):function id(t){return pe(t)&&ba(t.length)&&!!ne[M(t)]},sp=pa($s),lp=pa(function(t,i){return t<=i});function Bc(t){if(!t)return[];if(Pe(t))return wa(t)?Ge(t):ze(t);if(Mn&&t[Mn])return function Wo(y){for(var w,x=[];!(w=y.next()).done;)x.push(w.value);return x}(t[Mn]());var i=Se(t);return(i==Ze?Ni:i==qe?Yn:gi)(t)}function Yt(t){return t?(t=ot(t))===Ot||t===-Ot?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0}function B(t){var i=Yt(t),r=i%1;return i==i?r?i-r:i:0}function Wc(t){return t?Wt(B(t),0,Xe):0}function ot(t){if("number"==typeof t)return t;if(Ye(t))return NaN;if(ce(t)){var i="function"==typeof t.valueOf?t.valueOf():t;t=ce(i)?i+"":i}if("string"!=typeof t)return 0===t?t:+t;t=Pr(t);var r=Ka.test(t);return r||rr.test(t)?Eo(t.slice(2),r?2:8):nr.test(t)?NaN:+t}function Zc(t){return Ft(t,Ne(t))}function K(t){return null==t?"":Qe(t)}var dp=ui(function(t,i){if(Qi(i)||Pe(i))Ft(i,be(i),t);else for(var r in i)j.call(i,r)&&Ln(t,r,i[r])}),qc=ui(function(t,i){Ft(i,Ne(i),t)}),Sa=ui(function(t,i,r,s){Ft(i,Ne(i),t,s)}),mp=ui(function(t,i,r,s){Ft(i,be(i),t,s)}),up=$t(qi),hp=Z(function(t,i){t=X(t);var r=-1,s=i.length,c=s>2?i[2]:f;for(c&&ke(i[0],i[1],c)&&(s=1);++r<s;)for(var p=i[r],g=Ne(p),_=-1,v=g.length;++_<v;){var S=g[_],I=t[S];(I===f||ft(I,ln[S])&&!j.call(t,S))&&(t[S]=p[S])}return t}),fp=Z(function(t){return t.push(f,sc),Ee(Gc,f,t)});function vl(t,i,r){var s=null==t?f:h(t,i);return s===f?r:s}function Cl(t,i){return null!=t&&dc(t,i,H)}var Ip=nc(function(t,i,r){null!=i&&"function"!=typeof i.toString&&(i=$e.call(i)),t[i]=r},bl(Ue)),Ep=nc(function(t,i,r){null!=i&&"function"!=typeof i.toString&&(i=$e.call(i)),j.call(t,i)?t[i].push(r):t[i]=[r]},R),Mp=Z(ht);function be(t){return Pe(t)?Kr(t):Gs(t)}function Ne(t){return Pe(t)?Kr(t,!0):function rd(t){if(!ce(t))return function Vd(t){var i=[];if(null!=t)for(var r in X(t))i.push(r);return i}(t);var i=Qi(t),r=[];for(var s in t)"constructor"==s&&(i||!j.call(t,s))||r.push(s);return r}(t)}var Fp=ui(function(t,i,r){oa(t,i,r)}),Gc=ui(function(t,i,r,s){oa(t,i,r,s)}),Lp=$t(function(t,i){var r={};if(null==t)return r;var s=!1;i=re(i,function(p){return p=hn(p,t),s||(s=p.length>1),p}),Ft(t,al(t),r),s&&(r=Re(r,7,Id));for(var c=i.length;c--;)js(r,i[c]);return r}),Tp=$t(function(t,i){return null==t?{}:function od(t,i){return Pl(t,i,function(r,s){return Cl(t,s)})}(t,i)});function $c(t,i){if(null==t)return{};var r=re(al(t),function(s){return[s]});return i=R(i),Pl(t,r,function(s,c){return i(s,c[0])})}var Hc=ac(be),Qc=ac(Ne);function gi(t){return null==t?[]:Pi(t,be(t))}var Gp=pi(function(t,i,r){return i=i.toLowerCase(),t+(r?Yc(i):i)});function Yc(t){return xl(K(t).toLowerCase())}function Jc(t){return(t=K(t))&&t.replace(Nt,Po).replace(_o,"")}var Yp=pi(function(t,i,r){return t+(r?"-":"")+i.toLowerCase()}),Jp=pi(function(t,i,r){return t+(r?" ":"")+i.toLowerCase()}),jp=Xl("toLowerCase"),rh=pi(function(t,i,r){return t+(r?"_":"")+i.toLowerCase()}),oh=pi(function(t,i,r){return t+(r?" ":"")+xl(i)}),gh=pi(function(t,i,r){return t+(r?" ":"")+i.toUpperCase()}),xl=Xl("toUpperCase");function jc(t,i,r){return t=K(t),(i=r?f:i)===f?function Bo(y){return yo.test(y)}(t)?function Qo(y){return y.match(dt)||[]}(t):function To(y){return y.match(Ii)||[]}(t):t.match(i)||[]}var Kc=Z(function(t,i){try{return Ee(t,f,i)}catch(r){return _l(r)?r:new U(r)}}),_h=$t(function(t,i){return Ae(i,function(r){r=Lt(r),pt(t,r,fl(t[r],t))}),t});function bl(t){return function(){return t}}var xh=tc(),bh=tc(!0);function Ue(t){return t}function wl(t){return Ll("function"==typeof t?t:Re(t,1))}var Ih=Z(function(t,i){return function(r){return ht(r,t,i)}}),Eh=Z(function(t,i){return function(r){return ht(t,r,i)}});function Sl(t,i,r){var s=be(i),c=u(i,s);null==r&&(!ce(i)||!c.length&&s.length)&&(r=i,i=t,t=this,c=u(i,be(i)));var p=!(ce(r)&&"chain"in r&&!r.chain),g=Qt(t);return Ae(c,function(_){var v=i[_];t[_]=v,g&&(t.prototype[_]=function(){var S=this.__chain__;if(p||S){var I=t(this.__wrapped__),E=I.__actions__=ze(this.__actions__);return E.push({func:v,args:arguments,thisArg:t}),I.__chain__=S,I}return v.apply(t,bt([this.value()],arguments))})}),t}function Il(){}var kh=nl(re),Fh=nl(Tr),Lh=nl(Ri);function Xc(t){return cl(t)?zi(Lt(t)):function sd(t){return function(i){return h(i,t)}}(t)}var Th=ic(),Oh=ic(!0);function El(){return[]}function Ml(){return!1}var Bh=ma(function(t,i){return t+i},0),Wh=il("ceil"),Zh=ma(function(t,i){return t/i},1),qh=il("floor"),jh=ma(function(t,i){return t*i},1),Kh=il("round"),Xh=ma(function(t,i){return t-i},0);return m.after=function wu(t,i){if("function"!=typeof i)throw new Te(C);return t=B(t),function(){if(--t<1)return i.apply(this,arguments)}},m.ary=Fc,m.assign=dp,m.assignIn=qc,m.assignInWith=Sa,m.assignWith=mp,m.at=up,m.before=Lc,m.bind=fl,m.bindAll=_h,m.bindKey=Ac,m.castArray=function Ru(){if(!arguments.length)return[];var t=arguments[0];return V(t)?t:[t]},m.chain=Mc,m.chunk=function qd(t,i,r){i=(r?ke(t,i,r):i===f)?1:fe(B(i),0);var s=null==t?0:t.length;if(!s||i<1)return[];for(var c=0,p=0,g=x(ai(s/i));c<s;)g[p++]=rt(t,c,c+=i);return g},m.compact=function Gd(t){for(var i=-1,r=null==t?0:t.length,s=0,c=[];++i<r;){var p=t[i];p&&(c[s++]=p)}return c},m.concat=function $d(){var t=arguments.length;if(!t)return[];for(var i=x(t-1),r=arguments[0],s=t;s--;)i[s-1]=arguments[s];return bt(V(r)?ze(r):[r],o(i,1))},m.cond=function yh(t){var i=null==t?0:t.length,r=R();return t=i?re(t,function(s){if("function"!=typeof s[1])throw new Te(C);return[r(s[0]),s[1]]}):[],Z(function(s){for(var c=-1;++c<i;){var p=t[c];if(Ee(p[0],this,s))return Ee(p[1],this,s)}})},m.conforms=function vh(t){return function ta(t){var i=be(t);return function(r){return na(r,t,i)}}(Re(t,1))},m.constant=bl,m.countBy=eu,m.create=function pp(t,i){var r=mn(t);return null==i?r:ea(r,i)},m.curry=function Tc(t,i,r){var s=Gt(t,8,f,f,f,f,f,i=r?f:i);return s.placeholder=Tc.placeholder,s},m.curryRight=function Oc(t,i,r){var s=Gt(t,16,f,f,f,f,f,i=r?f:i);return s.placeholder=Oc.placeholder,s},m.debounce=Rc,m.defaults=hp,m.defaultsDeep=fp,m.defer=Su,m.delay=Iu,m.difference=Hd,m.differenceBy=Qd,m.differenceWith=Yd,m.drop=function Jd(t,i,r){var s=null==t?0:t.length;return s?rt(t,(i=r||i===f?1:B(i))<0?0:i,s):[]},m.dropRight=function jd(t,i,r){var s=null==t?0:t.length;return s?rt(t,0,(i=s-(i=r||i===f?1:B(i)))<0?0:i):[]},m.dropRightWhile=function Kd(t,i){return t&&t.length?la(t,R(i,3),!0,!0):[]},m.dropWhile=function Xd(t,i){return t&&t.length?la(t,R(i,3),!0):[]},m.fill=function em(t,i,r,s){var c=null==t?0:t.length;return c?(r&&"number"!=typeof r&&ke(t,i,r)&&(r=0,s=c),function Zs(t,i,r,s){var c=t.length;for((r=B(r))<0&&(r=-r>c?0:c+r),(s=s===f||s>c?c:B(s))<0&&(s+=c),s=r>s?0:Wc(s);r<s;)t[r++]=i;return t}(t,i,r,s)):[]},m.filter=function nu(t,i){return(V(t)?xt:aa)(t,R(i,3))},m.flatMap=function au(t,i){return o(ya(t,i),1)},m.flatMapDeep=function ou(t,i){return o(ya(t,i),Ot)},m.flatMapDepth=function su(t,i,r){return r=r===f?1:B(r),o(ya(t,i),r)},m.flatten=wc,m.flattenDeep=function tm(t){return null!=t&&t.length?o(t,Ot):[]},m.flattenDepth=function nm(t,i){return null!=t&&t.length?o(t,i=i===f?1:B(i)):[]},m.flip=function Eu(t){return Gt(t,512)},m.flow=xh,m.flowRight=bh,m.fromPairs=function im(t){for(var i=-1,r=null==t?0:t.length,s={};++i<r;){var c=t[i];s[c[0]]=c[1]}return s},m.functions=function bp(t){return null==t?[]:u(t,be(t))},m.functionsIn=function wp(t){return null==t?[]:u(t,Ne(t))},m.groupBy=lu,m.initial=function am(t){return null!=t&&t.length?rt(t,0,-1):[]},m.intersection=om,m.intersectionBy=sm,m.intersectionWith=lm,m.invert=Ip,m.invertBy=Ep,m.invokeMap=du,m.iteratee=wl,m.keyBy=mu,m.keys=be,m.keysIn=Ne,m.map=ya,m.mapKeys=function Dp(t,i){var r={};return i=R(i,3),a(t,function(s,c,p){pt(r,i(s,c,p),s)}),r},m.mapValues=function kp(t,i){var r={};return i=R(i,3),a(t,function(s,c,p){pt(r,c,i(s,c,p))}),r},m.matches=function wh(t){return Tl(Re(t,1))},m.matchesProperty=function Sh(t,i){return Ol(t,Re(i,1))},m.memoize=Ca,m.merge=Fp,m.mergeWith=Gc,m.method=Ih,m.methodOf=Eh,m.mixin=Sl,m.negate=xa,m.nthArg=function Dh(t){return t=B(t),Z(function(i){return Rl(i,t)})},m.omit=Lp,m.omitBy=function Ap(t,i){return $c(t,xa(R(i)))},m.once=function Mu(t){return Lc(2,t)},m.orderBy=function uu(t,i,r,s){return null==t?[]:(V(i)||(i=null==i?[]:[i]),V(r=s?f:r)||(r=null==r?[]:[r]),zl(t,i,r))},m.over=kh,m.overArgs=Du,m.overEvery=Fh,m.overSome=Lh,m.partial=gl,m.partialRight=zc,m.partition=pu,m.pick=Tp,m.pickBy=$c,m.property=Xc,m.propertyOf=function Ah(t){return function(i){return null==t?f:h(t,i)}},m.pull=um,m.pullAll=Ic,m.pullAllBy=function pm(t,i,r){return t&&t.length&&i&&i.length?Hs(t,i,R(r,2)):t},m.pullAllWith=function hm(t,i,r){return t&&t.length&&i&&i.length?Hs(t,i,f,r):t},m.pullAt=fm,m.range=Th,m.rangeRight=Oh,m.rearg=ku,m.reject=function gu(t,i){return(V(t)?xt:aa)(t,xa(R(i,3)))},m.remove=function gm(t,i){var r=[];if(!t||!t.length)return r;var s=-1,c=[],p=t.length;for(i=R(i,3);++s<p;){var g=t[s];i(g,s,t)&&(r.push(g),c.push(s))}return Nl(t,c),r},m.rest=function Fu(t,i){if("function"!=typeof t)throw new Te(C);return Z(t,i=i===f?i:B(i))},m.reverse=pl,m.sampleSize=function yu(t,i,r){return i=(r?ke(t,i,r):i===f)?1:B(i),(V(t)?Ns:dd)(t,i)},m.set=function Rp(t,i,r){return null==t?t:$i(t,i,r)},m.setWith=function zp(t,i,r,s){return s="function"==typeof s?s:f,null==t?t:$i(t,i,r,s)},m.shuffle=function vu(t){return(V(t)?Us:ud)(t)},m.slice=function _m(t,i,r){var s=null==t?0:t.length;return s?(r&&"number"!=typeof r&&ke(t,i,r)?(i=0,r=s):(i=null==i?0:B(i),r=r===f?s:B(r)),rt(t,i,r)):[]},m.sortBy=bu,m.sortedUniq=function Sm(t){return t&&t.length?Vl(t):[]},m.sortedUniqBy=function Im(t,i){return t&&t.length?Vl(t,R(i,2)):[]},m.split=function ah(t,i,r){return r&&"number"!=typeof r&&ke(t,i,r)&&(i=r=f),(r=r===f?Xe:r>>>0)?(t=K(t))&&("string"==typeof i||null!=i&&!yl(i))&&!(i=Qe(i))&&an(t)?fn(Ge(t),0,r):t.split(i,r):[]},m.spread=function Lu(t,i){if("function"!=typeof t)throw new Te(C);return i=null==i?0:fe(B(i),0),Z(function(r){var s=r[i],c=fn(r,0,i);return s&&bt(c,s),Ee(t,this,c)})},m.tail=function Em(t){var i=null==t?0:t.length;return i?rt(t,1,i):[]},m.take=function Mm(t,i,r){return t&&t.length?rt(t,0,(i=r||i===f?1:B(i))<0?0:i):[]},m.takeRight=function Dm(t,i,r){var s=null==t?0:t.length;return s?rt(t,(i=s-(i=r||i===f?1:B(i)))<0?0:i,s):[]},m.takeRightWhile=function km(t,i){return t&&t.length?la(t,R(i,3),!1,!0):[]},m.takeWhile=function Fm(t,i){return t&&t.length?la(t,R(i,3)):[]},m.tap=function Gm(t,i){return i(t),t},m.throttle=function Au(t,i,r){var s=!0,c=!0;if("function"!=typeof t)throw new Te(C);return ce(r)&&(s="leading"in r?!!r.leading:s,c="trailing"in r?!!r.trailing:c),Rc(t,i,{leading:s,maxWait:i,trailing:c})},m.thru=_a,m.toArray=Bc,m.toPairs=Hc,m.toPairsIn=Qc,m.toPath=function Uh(t){return V(t)?re(t,Lt):Ye(t)?[t]:ze(vc(K(t)))},m.toPlainObject=Zc,m.transform=function Pp(t,i,r){var s=V(t),c=s||gn(t)||fi(t);if(i=R(i,4),null==r){var p=t&&t.constructor;r=c?s?new p:[]:ce(t)&&Qt(p)?mn(ni(t)):{}}return(c?Ae:a)(t,function(g,_,v){return i(r,g,_,v)}),r},m.unary=function Tu(t){return Fc(t,1)},m.union=Lm,m.unionBy=Am,m.unionWith=Tm,m.uniq=function Om(t){return t&&t.length?pn(t):[]},m.uniqBy=function Rm(t,i){return t&&t.length?pn(t,R(i,2)):[]},m.uniqWith=function zm(t,i){return i="function"==typeof i?i:f,t&&t.length?pn(t,f,i):[]},m.unset=function Np(t,i){return null==t||js(t,i)},m.unzip=hl,m.unzipWith=Ec,m.update=function Up(t,i,r){return null==t?t:Wl(t,i,el(r))},m.updateWith=function Vp(t,i,r,s){return s="function"==typeof s?s:f,null==t?t:Wl(t,i,el(r),s)},m.values=gi,m.valuesIn=function Bp(t){return null==t?[]:Pi(t,Ne(t))},m.without=Pm,m.words=jc,m.wrap=function Ou(t,i){return gl(el(i),t)},m.xor=Nm,m.xorBy=Um,m.xorWith=Vm,m.zip=Bm,m.zipObject=function Wm(t,i){return ql(t||[],i||[],Ln)},m.zipObjectDeep=function Zm(t,i){return ql(t||[],i||[],$i)},m.zipWith=qm,m.entries=Hc,m.entriesIn=Qc,m.extend=qc,m.extendWith=Sa,Sl(m,m),m.add=Bh,m.attempt=Kc,m.camelCase=Gp,m.capitalize=Yc,m.ceil=Wh,m.clamp=function Wp(t,i,r){return r===f&&(r=i,i=f),r!==f&&(r=(r=ot(r))==r?r:0),i!==f&&(i=(i=ot(i))==i?i:0),Wt(ot(t),i,r)},m.clone=function zu(t){return Re(t,4)},m.cloneDeep=function Nu(t){return Re(t,5)},m.cloneDeepWith=function Uu(t,i){return Re(t,5,i="function"==typeof i?i:f)},m.cloneWith=function Pu(t,i){return Re(t,4,i="function"==typeof i?i:f)},m.conformsTo=function Vu(t,i){return null==i||na(t,i,be(i))},m.deburr=Jc,m.defaultTo=function Ch(t,i){return null==t||t!=t?i:t},m.divide=Zh,m.endsWith=function $p(t,i,r){t=K(t),i=Qe(i);var s=t.length,c=r=r===f?s:Wt(B(r),0,s);return(r-=i.length)>=0&&t.slice(r,c)==i},m.eq=ft,m.escape=function Hp(t){return(t=K(t))&&Va.test(t)?t.replace(er,No):t},m.escapeRegExp=function Qp(t){return(t=K(t))&&$a.test(t)?t.replace(wi,"\\$&"):t},m.every=function tu(t,i,r){var s=V(t)?Tr:Ws;return r&&ke(t,i,r)&&(i=f),s(t,R(i,3))},m.find=iu,m.findIndex=xc,m.findKey=function gp(t,i){return Or(t,R(i,3),a)},m.findLast=ru,m.findLastIndex=bc,m.findLastKey=function _p(t,i){return Or(t,R(i,3),l)},m.floor=qh,m.forEach=Dc,m.forEachRight=kc,m.forIn=function yp(t,i){return null==t?t:d(t,R(i,3),Ne)},m.forInRight=function vp(t,i){return null==t?t:n(t,R(i,3),Ne)},m.forOwn=function Cp(t,i){return t&&a(t,R(i,3))},m.forOwnRight=function xp(t,i){return t&&l(t,R(i,3))},m.get=vl,m.gt=Bu,m.gte=Wu,m.has=function Sp(t,i){return null!=t&&dc(t,i,A)},m.hasIn=Cl,m.head=Sc,m.identity=Ue,m.includes=function cu(t,i,r,s){t=Pe(t)?t:gi(t),r=r&&!s?B(r):0;var c=t.length;return r<0&&(r=fe(c+r,0)),wa(t)?r<=c&&t.indexOf(i,r)>-1:!!c&&nn(t,i,r)>-1},m.indexOf=function rm(t,i,r){var s=null==t?0:t.length;if(!s)return-1;var c=null==r?0:B(r);return c<0&&(c=fe(s+c,0)),nn(t,i,c)},m.inRange=function Zp(t,i,r){return i=Yt(i),r===f?(r=i,i=0):r=Yt(r),function ee(t,i,r){return t>=xe(i,r)&&t<fe(i,r)}(t=ot(t),i,r)},m.invoke=Mp,m.isArguments=Rn,m.isArray=V,m.isArrayBuffer=Zu,m.isArrayLike=Pe,m.isArrayLikeObject=ge,m.isBoolean=function qu(t){return!0===t||!1===t||pe(t)&&M(t)==Un},m.isBuffer=gn,m.isDate=Gu,m.isElement=function $u(t){return pe(t)&&1===t.nodeType&&!Ji(t)},m.isEmpty=function Hu(t){if(null==t)return!0;if(Pe(t)&&(V(t)||"string"==typeof t||"function"==typeof t.splice||gn(t)||fi(t)||Rn(t)))return!t.length;var i=Se(t);if(i==Ze||i==qe)return!t.size;if(Qi(t))return!Gs(t).length;for(var r in t)if(j.call(t,r))return!1;return!0},m.isEqual=function Qu(t,i){return it(t,i)},m.isEqualWith=function Yu(t,i,r){var s=(r="function"==typeof r?r:f)?r(t,i):f;return s===f?it(t,i,f,r):!!s},m.isError=_l,m.isFinite=function Ju(t){return"number"==typeof t&&Qr(t)},m.isFunction=Qt,m.isInteger=Pc,m.isLength=ba,m.isMap=Nc,m.isMatch=function ju(t,i){return t===i||Gi(t,i,sl(i))},m.isMatchWith=function Ku(t,i,r){return r="function"==typeof r?r:f,Gi(t,i,sl(i),r)},m.isNaN=function Xu(t){return Uc(t)&&t!=+t},m.isNative=function ep(t){if(Pd(t))throw new U("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Fl(t)},m.isNil=function np(t){return null==t},m.isNull=function tp(t){return null===t},m.isNumber=Uc,m.isObject=ce,m.isObjectLike=pe,m.isPlainObject=Ji,m.isRegExp=yl,m.isSafeInteger=function ip(t){return Pc(t)&&t>=-vt&&t<=vt},m.isSet=Vc,m.isString=wa,m.isSymbol=Ye,m.isTypedArray=fi,m.isUndefined=function rp(t){return t===f},m.isWeakMap=function ap(t){return pe(t)&&Se(t)==wn},m.isWeakSet=function op(t){return pe(t)&&"[object WeakSet]"==M(t)},m.join=function cm(t,i){return null==t?"":as.call(t,i)},m.kebabCase=Yp,m.last=at,m.lastIndexOf=function dm(t,i,r){var s=null==t?0:t.length;if(!s)return-1;var c=s;return r!==f&&(c=(c=B(r))<0?fe(s+c,0):xe(c,s-1)),i==i?function Go(y,w,x){for(var F=x+1;F--;)if(y[F]===w)return F;return F}(t,i,c):Hn(t,Rr,c,!0)},m.lowerCase=Jp,m.lowerFirst=jp,m.lt=sp,m.lte=lp,m.max=function Gh(t){return t&&t.length?mi(t,Ue,O):f},m.maxBy=function $h(t,i){return t&&t.length?mi(t,R(i,2),O):f},m.mean=function Hh(t){return zr(t,Ue)},m.meanBy=function Qh(t,i){return zr(t,R(i,2))},m.min=function Yh(t){return t&&t.length?mi(t,Ue,$s):f},m.minBy=function Jh(t,i){return t&&t.length?mi(t,R(i,2),$s):f},m.stubArray=El,m.stubFalse=Ml,m.stubObject=function Rh(){return{}},m.stubString=function zh(){return""},m.stubTrue=function Ph(){return!0},m.multiply=jh,m.nth=function mm(t,i){return t&&t.length?Rl(t,B(i)):f},m.noConflict=function Mh(){return Ce._===this&&(Ce._=Xo),this},m.noop=Il,m.now=va,m.pad=function Kp(t,i,r){t=K(t);var s=(i=B(i))?on(t):0;if(!i||s>=i)return t;var c=(i-s)/2;return ua(oi(c),r)+t+ua(ai(c),r)},m.padEnd=function Xp(t,i,r){t=K(t);var s=(i=B(i))?on(t):0;return i&&s<i?t+ua(i-s,r):t},m.padStart=function eh(t,i,r){t=K(t);var s=(i=B(i))?on(t):0;return i&&s<i?ua(i-s,r)+t:t},m.parseInt=function th(t,i,r){return r||null==i?i=0:i&&(i=+i),ls(K(t).replace(Si,""),i||0)},m.random=function qp(t,i,r){if(r&&"boolean"!=typeof r&&ke(t,i,r)&&(i=r=f),r===f&&("boolean"==typeof i?(r=i,i=f):"boolean"==typeof t&&(r=t,t=f)),t===f&&i===f?(t=0,i=1):(t=Yt(t),i===f?(i=t,t=0):i=Yt(i)),t>i){var s=t;t=i,i=s}if(r||t%1||i%1){var c=Yr();return xe(t+c*(i-t+Io("1e-"+((c+"").length-1))),i)}return Qs(t,i)},m.reduce=function hu(t,i,r){var s=V(t)?Oi:wt,c=arguments.length<3;return s(t,R(i,4),r,c,Mt)},m.reduceRight=function fu(t,i,r){var s=V(t)?Fo:wt,c=arguments.length<3;return s(t,R(i,4),r,c,ra)},m.repeat=function nh(t,i,r){return i=(r?ke(t,i,r):i===f)?1:B(i),Ys(K(t),i)},m.replace=function ih(){var t=arguments,i=K(t[0]);return t.length<3?i:i.replace(t[1],t[2])},m.result=function Op(t,i,r){var s=-1,c=(i=hn(i,t)).length;for(c||(c=1,t=f);++s<c;){var p=null==t?f:t[Lt(i[s])];p===f&&(s=c,p=r),t=Qt(p)?p.call(t):p}return t},m.round=Kh,m.runInContext=y,m.sample=function _u(t){return(V(t)?Xr:cd)(t)},m.size=function Cu(t){if(null==t)return 0;if(Pe(t))return wa(t)?on(t):t.length;var i=Se(t);return i==Ze||i==qe?t.size:Gs(t).length},m.snakeCase=rh,m.some=function xu(t,i,r){var s=V(t)?Ri:pd;return r&&ke(t,i,r)&&(i=f),s(t,R(i,3))},m.sortedIndex=function ym(t,i){return sa(t,i)},m.sortedIndexBy=function vm(t,i,r){return Js(t,i,R(r,2))},m.sortedIndexOf=function Cm(t,i){var r=null==t?0:t.length;if(r){var s=sa(t,i);if(s<r&&ft(t[s],i))return s}return-1},m.sortedLastIndex=function xm(t,i){return sa(t,i,!0)},m.sortedLastIndexBy=function bm(t,i,r){return Js(t,i,R(r,2),!0)},m.sortedLastIndexOf=function wm(t,i){if(null!=t&&t.length){var s=sa(t,i,!0)-1;if(ft(t[s],i))return s}return-1},m.startCase=oh,m.startsWith=function sh(t,i,r){return t=K(t),r=null==r?0:Wt(B(r),0,t.length),i=Qe(i),t.slice(r,r+i.length)==i},m.subtract=Xh,m.sum=function ef(t){return t&&t.length?Qn(t,Ue):0},m.sumBy=function tf(t,i){return t&&t.length?Qn(t,R(i,2)):0},m.template=function lh(t,i,r){var s=m.templateSettings;r&&ke(t,i,r)&&(i=f),t=K(t),i=Sa({},i,s,oc);var _,v,c=Sa({},i.imports,s.imports,oc),p=be(c),g=Pi(c,p),S=0,I=i.interpolate||ue,E="__p += '",D=Ui((i.escape||ue).source+"|"+I.source+"|"+(I===tr?Ei:ue).source+"|"+(i.evaluate||ue).source+"|$","g"),L="//# sourceURL="+(j.call(i,"sourceURL")?(i.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Co+"]")+"\n";t.replace(D,function(P,Q,Y,Je,Fe,je){return Y||(Y=Je),E+=t.slice(S,je).replace(Wn,Uo),Q&&(_=!0,E+="' +\n__e("+Q+") +\n'"),Fe&&(v=!0,E+="';\n"+Fe+";\n__p += '"),Y&&(E+="' +\n((__t = ("+Y+")) == null ? '' : __t) +\n'"),S=je+P.length,P}),E+="';\n";var z=j.call(i,"variable")&&i.variable;if(z){if(Bn.test(z))throw new U("Invalid `variable` option passed into `_.template`")}else E="with (obj) {\n"+E+"\n}\n";E=(v?E.replace(za,""):E).replace(Pa,"$1").replace(Na,"$1;"),E="function("+(z||"obj")+") {\n"+(z?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(_?", __e = _.escape":"")+(v?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+E+"return __p\n}";var W=Kc(function(){return J(p,L+"return "+E).apply(f,g)});if(W.source=E,_l(W))throw W;return W},m.times=function Nh(t,i){if((t=B(t))<1||t>vt)return[];var r=Xe,s=xe(t,Xe);i=R(i),t-=Xe;for(var c=rn(s,i);++r<t;)i(r);return c},m.toFinite=Yt,m.toInteger=B,m.toLength=Wc,m.toLower=function ch(t){return K(t).toLowerCase()},m.toNumber=ot,m.toSafeInteger=function cp(t){return t?Wt(B(t),-vt,vt):0===t?t:0},m.toString=K,m.toUpper=function dh(t){return K(t).toUpperCase()},m.trim=function mh(t,i,r){if((t=K(t))&&(r||i===f))return Pr(t);if(!t||!(i=Qe(i)))return t;var s=Ge(t),c=Ge(i);return fn(s,Nr(s,c),Ur(s,c)+1).join("")},m.trimEnd=function uh(t,i,r){if((t=K(t))&&(r||i===f))return t.slice(0,Br(t)+1);if(!t||!(i=Qe(i)))return t;var s=Ge(t);return fn(s,0,Ur(s,Ge(i))+1).join("")},m.trimStart=function ph(t,i,r){if((t=K(t))&&(r||i===f))return t.replace(Si,"");if(!t||!(i=Qe(i)))return t;var s=Ge(t);return fn(s,Nr(s,Ge(i))).join("")},m.truncate=function hh(t,i){var r=30,s="...";if(ce(i)){var c="separator"in i?i.separator:c;r="length"in i?B(i.length):r,s="omission"in i?Qe(i.omission):s}var p=(t=K(t)).length;if(an(t)){var g=Ge(t);p=g.length}if(r>=p)return t;var _=r-on(s);if(_<1)return s;var v=g?fn(g,0,_).join(""):t.slice(0,_);if(c===f)return v+s;if(g&&(_+=v.length-_),yl(c)){if(t.slice(_).search(c)){var S,I=v;for(c.global||(c=Ui(c.source,K(Sn.exec(c))+"g")),c.lastIndex=0;S=c.exec(I);)var E=S.index;v=v.slice(0,E===f?_:E)}}else if(t.indexOf(Qe(c),_)!=_){var D=v.lastIndexOf(c);D>-1&&(v=v.slice(0,D))}return v+s},m.unescape=function fh(t){return(t=K(t))&&Ua.test(t)?t.replace(Xi,$o):t},m.uniqueId=function Vh(t){var i=++Ko;return K(t)+i},m.upperCase=gh,m.upperFirst=xl,m.each=Dc,m.eachRight=kc,m.first=Sc,Sl(m,function(){var t={};return a(m,function(i,r){j.call(m.prototype,r)||(t[r]=i)}),t}(),{chain:!1}),m.VERSION="4.17.21",Ae(["bind","bindKey","curry","curryRight","partial","partialRight"],function(t){m[t].placeholder=m}),Ae(["drop","take"],function(t,i){$.prototype[t]=function(r){r=r===f?1:fe(B(r),0);var s=this.__filtered__&&!i?new $(this):this.clone();return s.__filtered__?s.__takeCount__=xe(r,s.__takeCount__):s.__views__.push({size:xe(r,Xe),type:t+(s.__dir__<0?"Right":"")}),s},$.prototype[t+"Right"]=function(r){return this.reverse()[t](r).reverse()}}),Ae(["filter","map","takeWhile"],function(t,i){var r=i+1,s=1==r||3==r;$.prototype[t]=function(c){var p=this.clone();return p.__iteratees__.push({iteratee:R(c,3),type:r}),p.__filtered__=p.__filtered__||s,p}}),Ae(["head","last"],function(t,i){var r="take"+(i?"Right":"");$.prototype[t]=function(){return this[r](1).value()[0]}}),Ae(["initial","tail"],function(t,i){var r="drop"+(i?"":"Right");$.prototype[t]=function(){return this.__filtered__?new $(this):this[r](1)}}),$.prototype.compact=function(){return this.filter(Ue)},$.prototype.find=function(t){return this.filter(t).head()},$.prototype.findLast=function(t){return this.reverse().find(t)},$.prototype.invokeMap=Z(function(t,i){return"function"==typeof t?new $(this):this.map(function(r){return ht(r,t,i)})}),$.prototype.reject=function(t){return this.filter(xa(R(t)))},$.prototype.slice=function(t,i){t=B(t);var r=this;return r.__filtered__&&(t>0||i<0)?new $(r):(t<0?r=r.takeRight(-t):t&&(r=r.drop(t)),i!==f&&(r=(i=B(i))<0?r.dropRight(-i):r.take(i-t)),r)},$.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},$.prototype.toArray=function(){return this.take(Xe)},a($.prototype,function(t,i){var r=/^(?:filter|find|map|reject)|While$/.test(i),s=/^(?:head|last)$/.test(i),c=m[s?"take"+("last"==i?"Right":""):i],p=s||/^find/.test(i);!c||(m.prototype[i]=function(){var g=this.__wrapped__,_=s?[1]:arguments,v=g instanceof $,S=_[0],I=v||V(g),E=function(Q){var Y=c.apply(m,bt([Q],_));return s&&D?Y[0]:Y};I&&r&&"function"==typeof S&&1!=S.length&&(v=I=!1);var D=this.__chain__,L=!!this.__actions__.length,z=p&&!D,W=v&&!L;if(!p&&I){g=W?g:new $(this);var P=t.apply(g,_);return P.__actions__.push({func:_a,args:[E],thisArg:f}),new Oe(P,D)}return z&&W?t.apply(this,_):(P=this.thru(E),z?s?P.value()[0]:P.value():P)})}),Ae(["pop","push","shift","sort","splice","unshift"],function(t){var i=jn[t],r=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",s=/^(?:pop|shift)$/.test(t);m.prototype[t]=function(){var c=arguments;if(s&&!this.__chain__){var p=this.value();return i.apply(V(p)?p:[],c)}return this[r](function(g){return i.apply(V(g)?g:[],c)})}}),a($.prototype,function(t,i){var r=m[i];if(r){var s=r.name+"";j.call(dn,s)||(dn[s]=[]),dn[s].push({name:i,func:r})}}),dn[da(f,2).name]=[{name:"wrapper",func:f}],$.prototype.clone=function ps(){var t=new $(this.__wrapped__);return t.__actions__=ze(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=ze(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=ze(this.__views__),t},$.prototype.reverse=function hs(){if(this.__filtered__){var t=new $(this);t.__dir__=-1,t.__filtered__=!0}else(t=this.clone()).__dir__*=-1;return t},$.prototype.value=function fs(){var t=this.__wrapped__.value(),i=this.__dir__,r=V(t),s=i<0,c=r?t.length:0,p=function kd(t,i,r){for(var s=-1,c=r.length;++s<c;){var p=r[s],g=p.size;switch(p.type){case"drop":t+=g;break;case"dropRight":i-=g;break;case"take":i=xe(i,t+g);break;case"takeRight":t=fe(t,i-g)}}return{start:t,end:i}}(0,c,this.__views__),g=p.start,_=p.end,v=_-g,S=s?_:g-1,I=this.__iteratees__,E=I.length,D=0,L=xe(v,this.__takeCount__);if(!r||!s&&c==v&&L==v)return Zl(t,this.__actions__);var z=[];e:for(;v--&&D<L;){for(var W=-1,P=t[S+=i];++W<E;){var Q=I[W],Je=Q.type,Fe=(0,Q.iteratee)(P);if(2==Je)P=Fe;else if(!Fe){if(1==Je)continue e;break e}}z[D++]=P}return z},m.prototype.at=$m,m.prototype.chain=function Hm(){return Mc(this)},m.prototype.commit=function Qm(){return new Oe(this.value(),this.__chain__)},m.prototype.next=function Ym(){this.__values__===f&&(this.__values__=Bc(this.value()));var t=this.__index__>=this.__values__.length;return{done:t,value:t?f:this.__values__[this.__index__++]}},m.prototype.plant=function jm(t){for(var i,r=this;r instanceof ci;){var s=Cc(r);s.__index__=0,s.__values__=f,i?c.__wrapped__=s:i=s;var c=s;r=r.__wrapped__}return c.__wrapped__=t,i},m.prototype.reverse=function Km(){var t=this.__wrapped__;if(t instanceof $){var i=t;return this.__actions__.length&&(i=new $(this)),(i=i.reverse()).__actions__.push({func:_a,args:[pl],thisArg:f}),new Oe(i,this.__chain__)}return this.thru(pl)},m.prototype.toJSON=m.prototype.valueOf=m.prototype.value=function Xm(){return Zl(this.__wrapped__,this.__actions__)},m.prototype.first=m.prototype.head,Mn&&(m.prototype[Mn]=function Jm(){return this}),m}();Ce._=Jn,(N=function(){return Jn}.call(Kt,k,Kt,jt))!==f&&(jt.exports=N)}.call(this)}}]);